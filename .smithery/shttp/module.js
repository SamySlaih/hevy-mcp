var nae=Object.create;var Vb=Object.defineProperty;var rae=Object.getOwnPropertyDescriptor;var oae=Object.getOwnPropertyNames;var sae=Object.getPrototypeOf,iae=Object.prototype.hasOwnProperty;var q=(t=>typeof require<"u"?require:typeof Proxy<"u"?new Proxy(t,{get:(e,n)=>(typeof require<"u"?require:e)[n]}):t)(function(t){if(typeof require<"u")return require.apply(this,arguments);throw Error('Dynamic require of "'+t+'" is not supported')});var T=(t,e)=>()=>(e||t((e={exports:{}}).exports,e),e.exports),Ph=(t,e)=>{for(var n in e)Vb(t,n,{get:e[n],enumerable:!0})},aae=(t,e,n,r)=>{if(e&&typeof e=="object"||typeof e=="function")for(let o of oae(e))!iae.call(t,o)&&o!==n&&Vb(t,o,{get:()=>e[o],enumerable:!(r=rae(e,o))||r.enumerable});return t};var k=(t,e,n)=>(n=t!=null?nae(sae(t)):{},aae(e||!t||!t.__esModule?Vb(n,"default",{value:t,enumerable:!0}):n,t));var gk=T(Ch=>{"use strict";Object.defineProperty(Ch,"__esModule",{value:!0});Ch._globalThis=void 0;Ch._globalThis=typeof globalThis=="object"?globalThis:global});var Sk=T(Ec=>{"use strict";var cae=Ec&&Ec.__createBinding||(Object.create?(function(t,e,n,r){r===void 0&&(r=n),Object.defineProperty(t,r,{enumerable:!0,get:function(){return e[n]}})}):(function(t,e,n,r){r===void 0&&(r=n),t[r]=e[n]})),uae=Ec&&Ec.__exportStar||function(t,e){for(var n in t)n!=="default"&&!Object.prototype.hasOwnProperty.call(e,n)&&cae(e,t,n)};Object.defineProperty(Ec,"__esModule",{value:!0});uae(gk(),Ec)});var Ak=T(Tc=>{"use strict";var pae=Tc&&Tc.__createBinding||(Object.create?(function(t,e,n,r){r===void 0&&(r=n),Object.defineProperty(t,r,{enumerable:!0,get:function(){return e[n]}})}):(function(t,e,n,r){r===void 0&&(r=n),t[r]=e[n]})),lae=Tc&&Tc.__exportStar||function(t,e){for(var n in t)n!=="default"&&!Object.prototype.hasOwnProperty.call(e,n)&&pae(e,t,n)};Object.defineProperty(Tc,"__esModule",{value:!0});lae(Sk(),Tc)});var Bb=T(Mh=>{"use strict";Object.defineProperty(Mh,"__esModule",{value:!0});Mh.VERSION=void 0;Mh.VERSION="1.9.0"});var bk=T(Qu=>{"use strict";Object.defineProperty(Qu,"__esModule",{value:!0});Qu.isCompatible=Qu._makeCompatibilityCheck=void 0;var dae=Bb(),Rk=/^(\d+)\.(\d+)\.(\d+)(-(.+))?$/;function yk(t){let e=new Set([t]),n=new Set,r=t.match(Rk);if(!r)return()=>!1;let o={major:+r[1],minor:+r[2],patch:+r[3],prerelease:r[4]};if(o.prerelease!=null)return function(c){return c===t};function s(a){return n.add(a),!1}function i(a){return e.add(a),!0}return function(c){if(e.has(c))return!0;if(n.has(c))return!1;let u=c.match(Rk);if(!u)return s(c);let p={major:+u[1],minor:+u[2],patch:+u[3],prerelease:u[4]};return p.prerelease!=null||o.major!==p.major?s(c):o.major===0?o.minor===p.minor&&o.patch<=p.patch?i(c):s(c):o.minor<=p.minor?i(c):s(c)}}Qu._makeCompatibilityCheck=yk;Qu.isCompatible=yk(dae.VERSION)});var gc=T(Fi=>{"use strict";Object.defineProperty(Fi,"__esModule",{value:!0});Fi.unregisterGlobal=Fi.getGlobal=Fi.registerGlobal=void 0;var fae=Ak(),Xu=Bb(),mae=bk(),_ae=Xu.VERSION.split(".")[0],zd=Symbol.for(`opentelemetry.js.api.${_ae}`),Yd=fae._globalThis;function hae(t,e,n,r=!1){var o;let s=Yd[zd]=(o=Yd[zd])!==null&&o!==void 0?o:{version:Xu.VERSION};if(!r&&s[t]){let i=new Error(`@opentelemetry/api: Attempted duplicate registration of API: ${t}`);return n.error(i.stack||i.message),!1}if(s.version!==Xu.VERSION){let i=new Error(`@opentelemetry/api: Registration of version v${s.version} for ${t} does not match previously registered API v${Xu.VERSION}`);return n.error(i.stack||i.message),!1}return s[t]=e,n.debug(`@opentelemetry/api: Registered a global for ${t} v${Xu.VERSION}.`),!0}Fi.registerGlobal=hae;function Eae(t){var e,n;let r=(e=Yd[zd])===null||e===void 0?void 0:e.version;if(!(!r||!(0,mae.isCompatible)(r)))return(n=Yd[zd])===null||n===void 0?void 0:n[t]}Fi.getGlobal=Eae;function Tae(t,e){e.debug(`@opentelemetry/api: Unregistering a global for ${t} v${Xu.VERSION}.`);let n=Yd[zd];n&&delete n[t]}Fi.unregisterGlobal=Tae});var Nk=T(wh=>{"use strict";Object.defineProperty(wh,"__esModule",{value:!0});wh.DiagComponentLogger=void 0;var gae=gc(),jb=class{constructor(e){this._namespace=e.namespace||"DiagComponentLogger"}debug(...e){return Wd("debug",this._namespace,e)}error(...e){return Wd("error",this._namespace,e)}info(...e){return Wd("info",this._namespace,e)}warn(...e){return Wd("warn",this._namespace,e)}verbose(...e){return Wd("verbose",this._namespace,e)}};wh.DiagComponentLogger=jb;function Wd(t,e,n){let r=(0,gae.getGlobal)("diag");if(r)return n.unshift(e),r[t](...n)}});var Lh=T(Kd=>{"use strict";Object.defineProperty(Kd,"__esModule",{value:!0});Kd.DiagLogLevel=void 0;var Sae;(function(t){t[t.NONE=0]="NONE",t[t.ERROR=30]="ERROR",t[t.WARN=50]="WARN",t[t.INFO=60]="INFO",t[t.DEBUG=70]="DEBUG",t[t.VERBOSE=80]="VERBOSE",t[t.ALL=9999]="ALL"})(Sae=Kd.DiagLogLevel||(Kd.DiagLogLevel={}))});var Ok=T(Dh=>{"use strict";Object.defineProperty(Dh,"__esModule",{value:!0});Dh.createLogLevelDiagLogger=void 0;var si=Lh();function Aae(t,e){t<si.DiagLogLevel.NONE?t=si.DiagLogLevel.NONE:t>si.DiagLogLevel.ALL&&(t=si.DiagLogLevel.ALL),e=e||{};function n(r,o){let s=e[r];return typeof s=="function"&&t>=o?s.bind(e):function(){}}return{error:n("error",si.DiagLogLevel.ERROR),warn:n("warn",si.DiagLogLevel.WARN),info:n("info",si.DiagLogLevel.INFO),debug:n("debug",si.DiagLogLevel.DEBUG),verbose:n("verbose",si.DiagLogLevel.VERBOSE)}}Dh.createLogLevelDiagLogger=Aae});var Sc=T(Uh=>{"use strict";Object.defineProperty(Uh,"__esModule",{value:!0});Uh.DiagAPI=void 0;var Rae=Nk(),yae=Ok(),Ik=Lh(),kh=gc(),bae="diag",Hb=class t{constructor(){function e(o){return function(...s){let i=(0,kh.getGlobal)("diag");if(i)return i[o](...s)}}let n=this,r=(o,s={logLevel:Ik.DiagLogLevel.INFO})=>{var i,a,c;if(o===n){let l=new Error("Cannot use diag as the logger for itself. Please use a DiagLogger implementation like ConsoleDiagLogger or a custom implementation");return n.error((i=l.stack)!==null&&i!==void 0?i:l.message),!1}typeof s=="number"&&(s={logLevel:s});let u=(0,kh.getGlobal)("diag"),p=(0,yae.createLogLevelDiagLogger)((a=s.logLevel)!==null&&a!==void 0?a:Ik.DiagLogLevel.INFO,o);if(u&&!s.suppressOverrideMessage){let l=(c=new Error().stack)!==null&&c!==void 0?c:"<failed to generate stacktrace>";u.warn(`Current logger will be overwritten from ${l}`),p.warn(`Current logger will overwrite one already registered from ${l}`)}return(0,kh.registerGlobal)("diag",p,n,!0)};n.setLogger=r,n.disable=()=>{(0,kh.unregisterGlobal)(bae,n)},n.createComponentLogger=o=>new Rae.DiagComponentLogger(o),n.verbose=e("verbose"),n.debug=e("debug"),n.info=e("info"),n.warn=e("warn"),n.error=e("error")}static instance(){return this._instance||(this._instance=new t),this._instance}};Uh.DiagAPI=Hb});var vk=T($h=>{"use strict";Object.defineProperty($h,"__esModule",{value:!0});$h.BaggageImpl=void 0;var Fb=class t{constructor(e){this._entries=e?new Map(e):new Map}getEntry(e){let n=this._entries.get(e);if(n)return Object.assign({},n)}getAllEntries(){return Array.from(this._entries.entries()).map(([e,n])=>[e,n])}setEntry(e,n){let r=new t(this._entries);return r._entries.set(e,n),r}removeEntry(e){let n=new t(this._entries);return n._entries.delete(e),n}removeEntries(...e){let n=new t(this._entries);for(let r of e)n._entries.delete(r);return n}clear(){return new t}};$h.BaggageImpl=Fb});var xk=T(Gh=>{"use strict";Object.defineProperty(Gh,"__esModule",{value:!0});Gh.baggageEntryMetadataSymbol=void 0;Gh.baggageEntryMetadataSymbol=Symbol("BaggageEntryMetadata")});var qb=T(ep=>{"use strict";Object.defineProperty(ep,"__esModule",{value:!0});ep.baggageEntryMetadataFromString=ep.createBaggage=void 0;var Nae=Sc(),Oae=vk(),Iae=xk(),vae=Nae.DiagAPI.instance();function xae(t={}){return new Oae.BaggageImpl(new Map(Object.entries(t)))}ep.createBaggage=xae;function Pae(t){return typeof t!="string"&&(vae.error(`Cannot create baggage metadata from unknown type: ${typeof t}`),t=""),{__TYPE__:Iae.baggageEntryMetadataSymbol,toString(){return t}}}ep.baggageEntryMetadataFromString=Pae});var Zd=T(tp=>{"use strict";Object.defineProperty(tp,"__esModule",{value:!0});tp.ROOT_CONTEXT=tp.createContextKey=void 0;function Cae(t){return Symbol.for(t)}tp.createContextKey=Cae;var zb=class t{constructor(e){let n=this;n._currentContext=e?new Map(e):new Map,n.getValue=r=>n._currentContext.get(r),n.setValue=(r,o)=>{let s=new t(n._currentContext);return s._currentContext.set(r,o),s},n.deleteValue=r=>{let o=new t(n._currentContext);return o._currentContext.delete(r),o}}};tp.ROOT_CONTEXT=new zb});var Pk=T(Vh=>{"use strict";Object.defineProperty(Vh,"__esModule",{value:!0});Vh.DiagConsoleLogger=void 0;var Yb=[{n:"error",c:"error"},{n:"warn",c:"warn"},{n:"info",c:"info"},{n:"debug",c:"debug"},{n:"verbose",c:"trace"}],Wb=class{constructor(){function e(n){return function(...r){if(console){let o=console[n];if(typeof o!="function"&&(o=console.log),typeof o=="function")return o.apply(console,r)}}}for(let n=0;n<Yb.length;n++)this[Yb[n].n]=e(Yb[n].c)}};Vh.DiagConsoleLogger=Wb});var Kb=T(me=>{"use strict";Object.defineProperty(me,"__esModule",{value:!0});me.createNoopMeter=me.NOOP_OBSERVABLE_UP_DOWN_COUNTER_METRIC=me.NOOP_OBSERVABLE_GAUGE_METRIC=me.NOOP_OBSERVABLE_COUNTER_METRIC=me.NOOP_UP_DOWN_COUNTER_METRIC=me.NOOP_HISTOGRAM_METRIC=me.NOOP_GAUGE_METRIC=me.NOOP_COUNTER_METRIC=me.NOOP_METER=me.NoopObservableUpDownCounterMetric=me.NoopObservableGaugeMetric=me.NoopObservableCounterMetric=me.NoopObservableMetric=me.NoopHistogramMetric=me.NoopGaugeMetric=me.NoopUpDownCounterMetric=me.NoopCounterMetric=me.NoopMetric=me.NoopMeter=void 0;var Bh=class{constructor(){}createGauge(e,n){return me.NOOP_GAUGE_METRIC}createHistogram(e,n){return me.NOOP_HISTOGRAM_METRIC}createCounter(e,n){return me.NOOP_COUNTER_METRIC}createUpDownCounter(e,n){return me.NOOP_UP_DOWN_COUNTER_METRIC}createObservableGauge(e,n){return me.NOOP_OBSERVABLE_GAUGE_METRIC}createObservableCounter(e,n){return me.NOOP_OBSERVABLE_COUNTER_METRIC}createObservableUpDownCounter(e,n){return me.NOOP_OBSERVABLE_UP_DOWN_COUNTER_METRIC}addBatchObservableCallback(e,n){}removeBatchObservableCallback(e){}};me.NoopMeter=Bh;var Ac=class{};me.NoopMetric=Ac;var jh=class extends Ac{add(e,n){}};me.NoopCounterMetric=jh;var Hh=class extends Ac{add(e,n){}};me.NoopUpDownCounterMetric=Hh;var Fh=class extends Ac{record(e,n){}};me.NoopGaugeMetric=Fh;var qh=class extends Ac{record(e,n){}};me.NoopHistogramMetric=qh;var np=class{addCallback(e){}removeCallback(e){}};me.NoopObservableMetric=np;var zh=class extends np{};me.NoopObservableCounterMetric=zh;var Yh=class extends np{};me.NoopObservableGaugeMetric=Yh;var Wh=class extends np{};me.NoopObservableUpDownCounterMetric=Wh;me.NOOP_METER=new Bh;me.NOOP_COUNTER_METRIC=new jh;me.NOOP_GAUGE_METRIC=new Fh;me.NOOP_HISTOGRAM_METRIC=new qh;me.NOOP_UP_DOWN_COUNTER_METRIC=new Hh;me.NOOP_OBSERVABLE_COUNTER_METRIC=new zh;me.NOOP_OBSERVABLE_GAUGE_METRIC=new Yh;me.NOOP_OBSERVABLE_UP_DOWN_COUNTER_METRIC=new Wh;function Mae(){return me.NOOP_METER}me.createNoopMeter=Mae});var Ck=T(Jd=>{"use strict";Object.defineProperty(Jd,"__esModule",{value:!0});Jd.ValueType=void 0;var wae;(function(t){t[t.INT=0]="INT",t[t.DOUBLE=1]="DOUBLE"})(wae=Jd.ValueType||(Jd.ValueType={}))});var Zb=T(rp=>{"use strict";Object.defineProperty(rp,"__esModule",{value:!0});rp.defaultTextMapSetter=rp.defaultTextMapGetter=void 0;rp.defaultTextMapGetter={get(t,e){if(t!=null)return t[e]},keys(t){return t==null?[]:Object.keys(t)}};rp.defaultTextMapSetter={set(t,e,n){t!=null&&(t[e]=n)}}});var Mk=T(Kh=>{"use strict";Object.defineProperty(Kh,"__esModule",{value:!0});Kh.NoopContextManager=void 0;var Lae=Zd(),Jb=class{active(){return Lae.ROOT_CONTEXT}with(e,n,r,...o){return n.call(r,...o)}bind(e,n){return n}enable(){return this}disable(){return this}};Kh.NoopContextManager=Jb});var Qd=T(Zh=>{"use strict";Object.defineProperty(Zh,"__esModule",{value:!0});Zh.ContextAPI=void 0;var Dae=Mk(),Qb=gc(),wk=Sc(),Xb="context",kae=new Dae.NoopContextManager,eN=class t{constructor(){}static getInstance(){return this._instance||(this._instance=new t),this._instance}setGlobalContextManager(e){return(0,Qb.registerGlobal)(Xb,e,wk.DiagAPI.instance())}active(){return this._getContextManager().active()}with(e,n,r,...o){return this._getContextManager().with(e,n,r,...o)}bind(e,n){return this._getContextManager().bind(e,n)}_getContextManager(){return(0,Qb.getGlobal)(Xb)||kae}disable(){this._getContextManager().disable(),(0,Qb.unregisterGlobal)(Xb,wk.DiagAPI.instance())}};Zh.ContextAPI=eN});var tN=T(Xd=>{"use strict";Object.defineProperty(Xd,"__esModule",{value:!0});Xd.TraceFlags=void 0;var Uae;(function(t){t[t.NONE=0]="NONE",t[t.SAMPLED=1]="SAMPLED"})(Uae=Xd.TraceFlags||(Xd.TraceFlags={}))});var Jh=T(gs=>{"use strict";Object.defineProperty(gs,"__esModule",{value:!0});gs.INVALID_SPAN_CONTEXT=gs.INVALID_TRACEID=gs.INVALID_SPANID=void 0;var $ae=tN();gs.INVALID_SPANID="0000000000000000";gs.INVALID_TRACEID="00000000000000000000000000000000";gs.INVALID_SPAN_CONTEXT={traceId:gs.INVALID_TRACEID,spanId:gs.INVALID_SPANID,traceFlags:$ae.TraceFlags.NONE}});var Xh=T(Qh=>{"use strict";Object.defineProperty(Qh,"__esModule",{value:!0});Qh.NonRecordingSpan=void 0;var Gae=Jh(),nN=class{constructor(e=Gae.INVALID_SPAN_CONTEXT){this._spanContext=e}spanContext(){return this._spanContext}setAttribute(e,n){return this}setAttributes(e){return this}addEvent(e,n){return this}addLink(e){return this}addLinks(e){return this}setStatus(e){return this}updateName(e){return this}end(e){}isRecording(){return!1}recordException(e,n){}};Qh.NonRecordingSpan=nN});var sN=T(gr=>{"use strict";Object.defineProperty(gr,"__esModule",{value:!0});gr.getSpanContext=gr.setSpanContext=gr.deleteSpan=gr.setSpan=gr.getActiveSpan=gr.getSpan=void 0;var Vae=Zd(),Bae=Xh(),jae=Qd(),rN=(0,Vae.createContextKey)("OpenTelemetry Context Key SPAN");function oN(t){return t.getValue(rN)||void 0}gr.getSpan=oN;function Hae(){return oN(jae.ContextAPI.getInstance().active())}gr.getActiveSpan=Hae;function Lk(t,e){return t.setValue(rN,e)}gr.setSpan=Lk;function Fae(t){return t.deleteValue(rN)}gr.deleteSpan=Fae;function qae(t,e){return Lk(t,new Bae.NonRecordingSpan(e))}gr.setSpanContext=qae;function zae(t){var e;return(e=oN(t))===null||e===void 0?void 0:e.spanContext()}gr.getSpanContext=zae});var eE=T(Ss=>{"use strict";Object.defineProperty(Ss,"__esModule",{value:!0});Ss.wrapSpanContext=Ss.isSpanContextValid=Ss.isValidSpanId=Ss.isValidTraceId=void 0;var Dk=Jh(),Yae=Xh(),Wae=/^([0-9a-f]{32})$/i,Kae=/^[0-9a-f]{16}$/i;function kk(t){return Wae.test(t)&&t!==Dk.INVALID_TRACEID}Ss.isValidTraceId=kk;function Uk(t){return Kae.test(t)&&t!==Dk.INVALID_SPANID}Ss.isValidSpanId=Uk;function Zae(t){return kk(t.traceId)&&Uk(t.spanId)}Ss.isSpanContextValid=Zae;function Jae(t){return new Yae.NonRecordingSpan(t)}Ss.wrapSpanContext=Jae});var uN=T(tE=>{"use strict";Object.defineProperty(tE,"__esModule",{value:!0});tE.NoopTracer=void 0;var Qae=Qd(),$k=sN(),iN=Xh(),Xae=eE(),aN=Qae.ContextAPI.getInstance(),cN=class{startSpan(e,n,r=aN.active()){if(!!n?.root)return new iN.NonRecordingSpan;let s=r&&(0,$k.getSpanContext)(r);return ece(s)&&(0,Xae.isSpanContextValid)(s)?new iN.NonRecordingSpan(s):new iN.NonRecordingSpan}startActiveSpan(e,n,r,o){let s,i,a;if(arguments.length<2)return;arguments.length===2?a=n:arguments.length===3?(s=n,a=r):(s=n,i=r,a=o);let c=i??aN.active(),u=this.startSpan(e,s,c),p=(0,$k.setSpan)(c,u);return aN.with(p,a,void 0,u)}};tE.NoopTracer=cN;function ece(t){return typeof t=="object"&&typeof t.spanId=="string"&&typeof t.traceId=="string"&&typeof t.traceFlags=="number"}});var lN=T(nE=>{"use strict";Object.defineProperty(nE,"__esModule",{value:!0});nE.ProxyTracer=void 0;var tce=uN(),nce=new tce.NoopTracer,pN=class{constructor(e,n,r,o){this._provider=e,this.name=n,this.version=r,this.options=o}startSpan(e,n,r){return this._getTracer().startSpan(e,n,r)}startActiveSpan(e,n,r,o){let s=this._getTracer();return Reflect.apply(s.startActiveSpan,s,arguments)}_getTracer(){if(this._delegate)return this._delegate;let e=this._provider.getDelegateTracer(this.name,this.version,this.options);return e?(this._delegate=e,this._delegate):nce}};nE.ProxyTracer=pN});var Gk=T(rE=>{"use strict";Object.defineProperty(rE,"__esModule",{value:!0});rE.NoopTracerProvider=void 0;var rce=uN(),dN=class{getTracer(e,n,r){return new rce.NoopTracer}};rE.NoopTracerProvider=dN});var mN=T(oE=>{"use strict";Object.defineProperty(oE,"__esModule",{value:!0});oE.ProxyTracerProvider=void 0;var oce=lN(),sce=Gk(),ice=new sce.NoopTracerProvider,fN=class{getTracer(e,n,r){var o;return(o=this.getDelegateTracer(e,n,r))!==null&&o!==void 0?o:new oce.ProxyTracer(this,e,n,r)}getDelegate(){var e;return(e=this._delegate)!==null&&e!==void 0?e:ice}setDelegate(e){this._delegate=e}getDelegateTracer(e,n,r){var o;return(o=this._delegate)===null||o===void 0?void 0:o.getTracer(e,n,r)}};oE.ProxyTracerProvider=fN});var Vk=T(ef=>{"use strict";Object.defineProperty(ef,"__esModule",{value:!0});ef.SamplingDecision=void 0;var ace;(function(t){t[t.NOT_RECORD=0]="NOT_RECORD",t[t.RECORD=1]="RECORD",t[t.RECORD_AND_SAMPLED=2]="RECORD_AND_SAMPLED"})(ace=ef.SamplingDecision||(ef.SamplingDecision={}))});var Bk=T(tf=>{"use strict";Object.defineProperty(tf,"__esModule",{value:!0});tf.SpanKind=void 0;var cce;(function(t){t[t.INTERNAL=0]="INTERNAL",t[t.SERVER=1]="SERVER",t[t.CLIENT=2]="CLIENT",t[t.PRODUCER=3]="PRODUCER",t[t.CONSUMER=4]="CONSUMER"})(cce=tf.SpanKind||(tf.SpanKind={}))});var jk=T(nf=>{"use strict";Object.defineProperty(nf,"__esModule",{value:!0});nf.SpanStatusCode=void 0;var uce;(function(t){t[t.UNSET=0]="UNSET",t[t.OK=1]="OK",t[t.ERROR=2]="ERROR"})(uce=nf.SpanStatusCode||(nf.SpanStatusCode={}))});var Hk=T(op=>{"use strict";Object.defineProperty(op,"__esModule",{value:!0});op.validateValue=op.validateKey=void 0;var _N="[_0-9a-z-*/]",pce=`[a-z]${_N}{0,255}`,lce=`[a-z0-9]${_N}{0,240}@[a-z]${_N}{0,13}`,dce=new RegExp(`^(?:${pce}|${lce})$`),fce=/^[ -~]{0,255}[!-~]$/,mce=/,|=/;function _ce(t){return dce.test(t)}op.validateKey=_ce;function hce(t){return fce.test(t)&&!mce.test(t)}op.validateValue=hce});var Wk=T(sE=>{"use strict";Object.defineProperty(sE,"__esModule",{value:!0});sE.TraceStateImpl=void 0;var Fk=Hk(),qk=32,Ece=512,zk=",",Yk="=",hN=class t{constructor(e){this._internalState=new Map,e&&this._parse(e)}set(e,n){let r=this._clone();return r._internalState.has(e)&&r._internalState.delete(e),r._internalState.set(e,n),r}unset(e){let n=this._clone();return n._internalState.delete(e),n}get(e){return this._internalState.get(e)}serialize(){return this._keys().reduce((e,n)=>(e.push(n+Yk+this.get(n)),e),[]).join(zk)}_parse(e){e.length>Ece||(this._internalState=e.split(zk).reverse().reduce((n,r)=>{let o=r.trim(),s=o.indexOf(Yk);if(s!==-1){let i=o.slice(0,s),a=o.slice(s+1,r.length);(0,Fk.validateKey)(i)&&(0,Fk.validateValue)(a)&&n.set(i,a)}return n},new Map),this._internalState.size>qk&&(this._internalState=new Map(Array.from(this._internalState.entries()).reverse().slice(0,qk))))}_keys(){return Array.from(this._internalState.keys()).reverse()}_clone(){let e=new t;return e._internalState=new Map(this._internalState),e}};sE.TraceStateImpl=hN});var Kk=T(iE=>{"use strict";Object.defineProperty(iE,"__esModule",{value:!0});iE.createTraceState=void 0;var Tce=Wk();function gce(t){return new Tce.TraceStateImpl(t)}iE.createTraceState=gce});var Zk=T(aE=>{"use strict";Object.defineProperty(aE,"__esModule",{value:!0});aE.context=void 0;var Sce=Qd();aE.context=Sce.ContextAPI.getInstance()});var Jk=T(cE=>{"use strict";Object.defineProperty(cE,"__esModule",{value:!0});cE.diag=void 0;var Ace=Sc();cE.diag=Ace.DiagAPI.instance()});var Qk=T(sp=>{"use strict";Object.defineProperty(sp,"__esModule",{value:!0});sp.NOOP_METER_PROVIDER=sp.NoopMeterProvider=void 0;var Rce=Kb(),uE=class{getMeter(e,n,r){return Rce.NOOP_METER}};sp.NoopMeterProvider=uE;sp.NOOP_METER_PROVIDER=new uE});var eU=T(pE=>{"use strict";Object.defineProperty(pE,"__esModule",{value:!0});pE.MetricsAPI=void 0;var yce=Qk(),EN=gc(),Xk=Sc(),TN="metrics",gN=class t{constructor(){}static getInstance(){return this._instance||(this._instance=new t),this._instance}setGlobalMeterProvider(e){return(0,EN.registerGlobal)(TN,e,Xk.DiagAPI.instance())}getMeterProvider(){return(0,EN.getGlobal)(TN)||yce.NOOP_METER_PROVIDER}getMeter(e,n,r){return this.getMeterProvider().getMeter(e,n,r)}disable(){(0,EN.unregisterGlobal)(TN,Xk.DiagAPI.instance())}};pE.MetricsAPI=gN});var tU=T(lE=>{"use strict";Object.defineProperty(lE,"__esModule",{value:!0});lE.metrics=void 0;var bce=eU();lE.metrics=bce.MetricsAPI.getInstance()});var nU=T(dE=>{"use strict";Object.defineProperty(dE,"__esModule",{value:!0});dE.NoopTextMapPropagator=void 0;var SN=class{inject(e,n){}extract(e,n){return e}fields(){return[]}};dE.NoopTextMapPropagator=SN});var oU=T(As=>{"use strict";Object.defineProperty(As,"__esModule",{value:!0});As.deleteBaggage=As.setBaggage=As.getActiveBaggage=As.getBaggage=void 0;var Nce=Qd(),Oce=Zd(),AN=(0,Oce.createContextKey)("OpenTelemetry Baggage Key");function rU(t){return t.getValue(AN)||void 0}As.getBaggage=rU;function Ice(){return rU(Nce.ContextAPI.getInstance().active())}As.getActiveBaggage=Ice;function vce(t,e){return t.setValue(AN,e)}As.setBaggage=vce;function xce(t){return t.deleteValue(AN)}As.deleteBaggage=xce});var aU=T(mE=>{"use strict";Object.defineProperty(mE,"__esModule",{value:!0});mE.PropagationAPI=void 0;var RN=gc(),Pce=nU(),sU=Zb(),fE=oU(),Cce=qb(),iU=Sc(),yN="propagation",Mce=new Pce.NoopTextMapPropagator,bN=class t{constructor(){this.createBaggage=Cce.createBaggage,this.getBaggage=fE.getBaggage,this.getActiveBaggage=fE.getActiveBaggage,this.setBaggage=fE.setBaggage,this.deleteBaggage=fE.deleteBaggage}static getInstance(){return this._instance||(this._instance=new t),this._instance}setGlobalPropagator(e){return(0,RN.registerGlobal)(yN,e,iU.DiagAPI.instance())}inject(e,n,r=sU.defaultTextMapSetter){return this._getGlobalPropagator().inject(e,n,r)}extract(e,n,r=sU.defaultTextMapGetter){return this._getGlobalPropagator().extract(e,n,r)}fields(){return this._getGlobalPropagator().fields()}disable(){(0,RN.unregisterGlobal)(yN,iU.DiagAPI.instance())}_getGlobalPropagator(){return(0,RN.getGlobal)(yN)||Mce}};mE.PropagationAPI=bN});var cU=T(_E=>{"use strict";Object.defineProperty(_E,"__esModule",{value:!0});_E.propagation=void 0;var wce=aU();_E.propagation=wce.PropagationAPI.getInstance()});var dU=T(hE=>{"use strict";Object.defineProperty(hE,"__esModule",{value:!0});hE.TraceAPI=void 0;var NN=gc(),uU=mN(),pU=eE(),ip=sN(),lU=Sc(),ON="trace",IN=class t{constructor(){this._proxyTracerProvider=new uU.ProxyTracerProvider,this.wrapSpanContext=pU.wrapSpanContext,this.isSpanContextValid=pU.isSpanContextValid,this.deleteSpan=ip.deleteSpan,this.getSpan=ip.getSpan,this.getActiveSpan=ip.getActiveSpan,this.getSpanContext=ip.getSpanContext,this.setSpan=ip.setSpan,this.setSpanContext=ip.setSpanContext}static getInstance(){return this._instance||(this._instance=new t),this._instance}setGlobalTracerProvider(e){let n=(0,NN.registerGlobal)(ON,this._proxyTracerProvider,lU.DiagAPI.instance());return n&&this._proxyTracerProvider.setDelegate(e),n}getTracerProvider(){return(0,NN.getGlobal)(ON)||this._proxyTracerProvider}getTracer(e,n){return this.getTracerProvider().getTracer(e,n)}disable(){(0,NN.unregisterGlobal)(ON,lU.DiagAPI.instance()),this._proxyTracerProvider=new uU.ProxyTracerProvider}};hE.TraceAPI=IN});var fU=T(EE=>{"use strict";Object.defineProperty(EE,"__esModule",{value:!0});EE.trace=void 0;var Lce=dU();EE.trace=Lce.TraceAPI.getInstance()});var U=T(ne=>{"use strict";Object.defineProperty(ne,"__esModule",{value:!0});ne.trace=ne.propagation=ne.metrics=ne.diag=ne.context=ne.INVALID_SPAN_CONTEXT=ne.INVALID_TRACEID=ne.INVALID_SPANID=ne.isValidSpanId=ne.isValidTraceId=ne.isSpanContextValid=ne.createTraceState=ne.TraceFlags=ne.SpanStatusCode=ne.SpanKind=ne.SamplingDecision=ne.ProxyTracerProvider=ne.ProxyTracer=ne.defaultTextMapSetter=ne.defaultTextMapGetter=ne.ValueType=ne.createNoopMeter=ne.DiagLogLevel=ne.DiagConsoleLogger=ne.ROOT_CONTEXT=ne.createContextKey=ne.baggageEntryMetadataFromString=void 0;var Dce=qb();Object.defineProperty(ne,"baggageEntryMetadataFromString",{enumerable:!0,get:function(){return Dce.baggageEntryMetadataFromString}});var mU=Zd();Object.defineProperty(ne,"createContextKey",{enumerable:!0,get:function(){return mU.createContextKey}});Object.defineProperty(ne,"ROOT_CONTEXT",{enumerable:!0,get:function(){return mU.ROOT_CONTEXT}});var kce=Pk();Object.defineProperty(ne,"DiagConsoleLogger",{enumerable:!0,get:function(){return kce.DiagConsoleLogger}});var Uce=Lh();Object.defineProperty(ne,"DiagLogLevel",{enumerable:!0,get:function(){return Uce.DiagLogLevel}});var $ce=Kb();Object.defineProperty(ne,"createNoopMeter",{enumerable:!0,get:function(){return $ce.createNoopMeter}});var Gce=Ck();Object.defineProperty(ne,"ValueType",{enumerable:!0,get:function(){return Gce.ValueType}});var _U=Zb();Object.defineProperty(ne,"defaultTextMapGetter",{enumerable:!0,get:function(){return _U.defaultTextMapGetter}});Object.defineProperty(ne,"defaultTextMapSetter",{enumerable:!0,get:function(){return _U.defaultTextMapSetter}});var Vce=lN();Object.defineProperty(ne,"ProxyTracer",{enumerable:!0,get:function(){return Vce.ProxyTracer}});var Bce=mN();Object.defineProperty(ne,"ProxyTracerProvider",{enumerable:!0,get:function(){return Bce.ProxyTracerProvider}});var jce=Vk();Object.defineProperty(ne,"SamplingDecision",{enumerable:!0,get:function(){return jce.SamplingDecision}});var Hce=Bk();Object.defineProperty(ne,"SpanKind",{enumerable:!0,get:function(){return Hce.SpanKind}});var Fce=jk();Object.defineProperty(ne,"SpanStatusCode",{enumerable:!0,get:function(){return Fce.SpanStatusCode}});var qce=tN();Object.defineProperty(ne,"TraceFlags",{enumerable:!0,get:function(){return qce.TraceFlags}});var zce=Kk();Object.defineProperty(ne,"createTraceState",{enumerable:!0,get:function(){return zce.createTraceState}});var vN=eE();Object.defineProperty(ne,"isSpanContextValid",{enumerable:!0,get:function(){return vN.isSpanContextValid}});Object.defineProperty(ne,"isValidTraceId",{enumerable:!0,get:function(){return vN.isValidTraceId}});Object.defineProperty(ne,"isValidSpanId",{enumerable:!0,get:function(){return vN.isValidSpanId}});var xN=Jh();Object.defineProperty(ne,"INVALID_SPANID",{enumerable:!0,get:function(){return xN.INVALID_SPANID}});Object.defineProperty(ne,"INVALID_TRACEID",{enumerable:!0,get:function(){return xN.INVALID_TRACEID}});Object.defineProperty(ne,"INVALID_SPAN_CONTEXT",{enumerable:!0,get:function(){return xN.INVALID_SPAN_CONTEXT}});var hU=Zk();Object.defineProperty(ne,"context",{enumerable:!0,get:function(){return hU.context}});var EU=Jk();Object.defineProperty(ne,"diag",{enumerable:!0,get:function(){return EU.diag}});var TU=tU();Object.defineProperty(ne,"metrics",{enumerable:!0,get:function(){return TU.metrics}});var gU=cU();Object.defineProperty(ne,"propagation",{enumerable:!0,get:function(){return gU.propagation}});var SU=fU();Object.defineProperty(ne,"trace",{enumerable:!0,get:function(){return SU.trace}});ne.default={context:hU.context,diag:EU.diag,metrics:TU.metrics,propagation:gU.propagation,trace:SU.trace}});var rf=T(qi=>{"use strict";Object.defineProperty(qi,"__esModule",{value:!0});qi.isTracingSuppressed=qi.unsuppressTracing=qi.suppressTracing=void 0;var Yce=U(),PN=(0,Yce.createContextKey)("OpenTelemetry SDK Context Key SUPPRESS_TRACING");function Wce(t){return t.setValue(PN,!0)}qi.suppressTracing=Wce;function Kce(t){return t.deleteValue(PN)}qi.unsuppressTracing=Kce;function Zce(t){return t.getValue(PN)===!0}qi.isTracingSuppressed=Zce});var CN=T(Fn=>{"use strict";Object.defineProperty(Fn,"__esModule",{value:!0});Fn.BAGGAGE_MAX_TOTAL_LENGTH=Fn.BAGGAGE_MAX_PER_NAME_VALUE_PAIRS=Fn.BAGGAGE_MAX_NAME_VALUE_PAIRS=Fn.BAGGAGE_HEADER=Fn.BAGGAGE_ITEMS_SEPARATOR=Fn.BAGGAGE_PROPERTIES_SEPARATOR=Fn.BAGGAGE_KEY_PAIR_SEPARATOR=void 0;Fn.BAGGAGE_KEY_PAIR_SEPARATOR="=";Fn.BAGGAGE_PROPERTIES_SEPARATOR=";";Fn.BAGGAGE_ITEMS_SEPARATOR=",";Fn.BAGGAGE_HEADER="baggage";Fn.BAGGAGE_MAX_NAME_VALUE_PAIRS=180;Fn.BAGGAGE_MAX_PER_NAME_VALUE_PAIRS=4096;Fn.BAGGAGE_MAX_TOTAL_LENGTH=8192});var MN=T(Rs=>{"use strict";Object.defineProperty(Rs,"__esModule",{value:!0});Rs.parseKeyPairsIntoRecord=Rs.parsePairKeyValue=Rs.getKeyPairs=Rs.serializeKeyPairs=void 0;var Jce=U(),Rc=CN();function Qce(t){return t.reduce((e,n)=>{let r=`${e}${e!==""?Rc.BAGGAGE_ITEMS_SEPARATOR:""}${n}`;return r.length>Rc.BAGGAGE_MAX_TOTAL_LENGTH?e:r},"")}Rs.serializeKeyPairs=Qce;function Xce(t){return t.getAllEntries().map(([e,n])=>{let r=`${encodeURIComponent(e)}=${encodeURIComponent(n.value)}`;return n.metadata!==void 0&&(r+=Rc.BAGGAGE_PROPERTIES_SEPARATOR+n.metadata.toString()),r})}Rs.getKeyPairs=Xce;function AU(t){let e=t.split(Rc.BAGGAGE_PROPERTIES_SEPARATOR);if(e.length<=0)return;let n=e.shift();if(!n)return;let r=n.indexOf(Rc.BAGGAGE_KEY_PAIR_SEPARATOR);if(r<=0)return;let o=decodeURIComponent(n.substring(0,r).trim()),s=decodeURIComponent(n.substring(r+1).trim()),i;return e.length>0&&(i=(0,Jce.baggageEntryMetadataFromString)(e.join(Rc.BAGGAGE_PROPERTIES_SEPARATOR))),{key:o,value:s,metadata:i}}Rs.parsePairKeyValue=AU;function eue(t){let e={};return typeof t=="string"&&t.length>0&&t.split(Rc.BAGGAGE_ITEMS_SEPARATOR).forEach(n=>{let r=AU(n);r!==void 0&&r.value.length>0&&(e[r.key]=r.value)}),e}Rs.parseKeyPairsIntoRecord=eue});var RU=T(TE=>{"use strict";Object.defineProperty(TE,"__esModule",{value:!0});TE.W3CBaggagePropagator=void 0;var wN=U(),tue=rf(),yc=CN(),LN=MN(),DN=class{inject(e,n,r){let o=wN.propagation.getBaggage(e);if(!o||(0,tue.isTracingSuppressed)(e))return;let s=(0,LN.getKeyPairs)(o).filter(a=>a.length<=yc.BAGGAGE_MAX_PER_NAME_VALUE_PAIRS).slice(0,yc.BAGGAGE_MAX_NAME_VALUE_PAIRS),i=(0,LN.serializeKeyPairs)(s);i.length>0&&r.set(n,yc.BAGGAGE_HEADER,i)}extract(e,n,r){let o=r.get(n,yc.BAGGAGE_HEADER),s=Array.isArray(o)?o.join(yc.BAGGAGE_ITEMS_SEPARATOR):o;if(!s)return e;let i={};return s.length===0||(s.split(yc.BAGGAGE_ITEMS_SEPARATOR).forEach(c=>{let u=(0,LN.parsePairKeyValue)(c);if(u){let p={value:u.value};u.metadata&&(p.metadata=u.metadata),i[u.key]=p}}),Object.entries(i).length===0)?e:wN.propagation.setBaggage(e,wN.propagation.createBaggage(i))}fields(){return[yc.BAGGAGE_HEADER]}};TE.W3CBaggagePropagator=DN});var yU=T(gE=>{"use strict";Object.defineProperty(gE,"__esModule",{value:!0});gE.AnchoredClock=void 0;var kN=class{_monotonicClock;_epochMillis;_performanceMillis;constructor(e,n){this._monotonicClock=n,this._epochMillis=e.now(),this._performanceMillis=n.now()}now(){let e=this._monotonicClock.now()-this._performanceMillis;return this._epochMillis+e}};gE.AnchoredClock=kN});var vU=T(zi=>{"use strict";Object.defineProperty(zi,"__esModule",{value:!0});zi.isAttributeValue=zi.isAttributeKey=zi.sanitizeAttributes=void 0;var bU=U();function nue(t){let e={};if(typeof t!="object"||t==null)return e;for(let n in t){if(!Object.prototype.hasOwnProperty.call(t,n))continue;if(!NU(n)){bU.diag.warn(`Invalid attribute key: ${n}`);continue}let r=t[n];if(!OU(r)){bU.diag.warn(`Invalid attribute value set for key: ${n}`);continue}Array.isArray(r)?e[n]=r.slice():e[n]=r}return e}zi.sanitizeAttributes=nue;function NU(t){return typeof t=="string"&&t!==""}zi.isAttributeKey=NU;function OU(t){return t==null?!0:Array.isArray(t)?rue(t):IU(typeof t)}zi.isAttributeValue=OU;function rue(t){let e;for(let n of t){if(n==null)continue;let r=typeof n;if(r!==e){if(!e){if(IU(r)){e=r;continue}return!1}return!1}}return!0}function IU(t){switch(t){case"number":case"boolean":case"string":return!0}return!1}});var UN=T(SE=>{"use strict";Object.defineProperty(SE,"__esModule",{value:!0});SE.loggingErrorHandler=void 0;var oue=U();function sue(){return t=>{oue.diag.error(iue(t))}}SE.loggingErrorHandler=sue;function iue(t){return typeof t=="string"?t:JSON.stringify(aue(t))}function aue(t){let e={},n=t;for(;n!==null;)Object.getOwnPropertyNames(n).forEach(r=>{if(e[r])return;let o=n[r];o&&(e[r]=String(o))}),n=Object.getPrototypeOf(n);return e}});var PU=T(ap=>{"use strict";Object.defineProperty(ap,"__esModule",{value:!0});ap.globalErrorHandler=ap.setGlobalErrorHandler=void 0;var cue=UN(),xU=(0,cue.loggingErrorHandler)();function uue(t){xU=t}ap.setGlobalErrorHandler=uue;function pue(t){try{xU(t)}catch{}}ap.globalErrorHandler=pue});var LU=T(ys=>{"use strict";Object.defineProperty(ys,"__esModule",{value:!0});ys.getStringListFromEnv=ys.getBooleanFromEnv=ys.getStringFromEnv=ys.getNumberFromEnv=void 0;var CU=U(),MU=q("util");function lue(t){let e=process.env[t];if(e==null||e.trim()==="")return;let n=Number(e);if(isNaN(n)){CU.diag.warn(`Unknown value ${(0,MU.inspect)(e)} for ${t}, expected a number, using defaults`);return}return n}ys.getNumberFromEnv=lue;function wU(t){let e=process.env[t];if(!(e==null||e.trim()===""))return e}ys.getStringFromEnv=wU;function due(t){let e=process.env[t]?.trim().toLowerCase();return e==null||e===""?!1:e==="true"?!0:(e==="false"||CU.diag.warn(`Unknown value ${(0,MU.inspect)(e)} for ${t}, expected 'true' or 'false', falling back to 'false' (default)`),!1)}ys.getBooleanFromEnv=due;function fue(t){return wU(t)?.split(",").map(e=>e.trim()).filter(e=>e!=="")}ys.getStringListFromEnv=fue});var DU=T(AE=>{"use strict";Object.defineProperty(AE,"__esModule",{value:!0});AE._globalThis=void 0;AE._globalThis=typeof globalThis=="object"?globalThis:global});var kU=T(RE=>{"use strict";Object.defineProperty(RE,"__esModule",{value:!0});RE.otperformance=void 0;var mue=q("perf_hooks");RE.otperformance=mue.performance});var UU=T(yE=>{"use strict";Object.defineProperty(yE,"__esModule",{value:!0});yE.VERSION=void 0;yE.VERSION="2.2.0"});var $N=T(bE=>{"use strict";Object.defineProperty(bE,"__esModule",{value:!0});bE.createConstMap=void 0;function _ue(t){let e={},n=t.length;for(let r=0;r<n;r++){let o=t[r];o&&(e[String(o).toUpperCase().replace(/[-.]/g,"_")]=o)}return e}bE.createConstMap=_ue});var IB=T(_=>{"use strict";Object.defineProperty(_,"__esModule",{value:!0});_.SEMATTRS_NET_HOST_CARRIER_ICC=_.SEMATTRS_NET_HOST_CARRIER_MNC=_.SEMATTRS_NET_HOST_CARRIER_MCC=_.SEMATTRS_NET_HOST_CARRIER_NAME=_.SEMATTRS_NET_HOST_CONNECTION_SUBTYPE=_.SEMATTRS_NET_HOST_CONNECTION_TYPE=_.SEMATTRS_NET_HOST_NAME=_.SEMATTRS_NET_HOST_PORT=_.SEMATTRS_NET_HOST_IP=_.SEMATTRS_NET_PEER_NAME=_.SEMATTRS_NET_PEER_PORT=_.SEMATTRS_NET_PEER_IP=_.SEMATTRS_NET_TRANSPORT=_.SEMATTRS_FAAS_INVOKED_REGION=_.SEMATTRS_FAAS_INVOKED_PROVIDER=_.SEMATTRS_FAAS_INVOKED_NAME=_.SEMATTRS_FAAS_COLDSTART=_.SEMATTRS_FAAS_CRON=_.SEMATTRS_FAAS_TIME=_.SEMATTRS_FAAS_DOCUMENT_NAME=_.SEMATTRS_FAAS_DOCUMENT_TIME=_.SEMATTRS_FAAS_DOCUMENT_OPERATION=_.SEMATTRS_FAAS_DOCUMENT_COLLECTION=_.SEMATTRS_FAAS_EXECUTION=_.SEMATTRS_FAAS_TRIGGER=_.SEMATTRS_EXCEPTION_ESCAPED=_.SEMATTRS_EXCEPTION_STACKTRACE=_.SEMATTRS_EXCEPTION_MESSAGE=_.SEMATTRS_EXCEPTION_TYPE=_.SEMATTRS_DB_SQL_TABLE=_.SEMATTRS_DB_MONGODB_COLLECTION=_.SEMATTRS_DB_REDIS_DATABASE_INDEX=_.SEMATTRS_DB_HBASE_NAMESPACE=_.SEMATTRS_DB_CASSANDRA_COORDINATOR_DC=_.SEMATTRS_DB_CASSANDRA_COORDINATOR_ID=_.SEMATTRS_DB_CASSANDRA_SPECULATIVE_EXECUTION_COUNT=_.SEMATTRS_DB_CASSANDRA_IDEMPOTENCE=_.SEMATTRS_DB_CASSANDRA_TABLE=_.SEMATTRS_DB_CASSANDRA_CONSISTENCY_LEVEL=_.SEMATTRS_DB_CASSANDRA_PAGE_SIZE=_.SEMATTRS_DB_CASSANDRA_KEYSPACE=_.SEMATTRS_DB_MSSQL_INSTANCE_NAME=_.SEMATTRS_DB_OPERATION=_.SEMATTRS_DB_STATEMENT=_.SEMATTRS_DB_NAME=_.SEMATTRS_DB_JDBC_DRIVER_CLASSNAME=_.SEMATTRS_DB_USER=_.SEMATTRS_DB_CONNECTION_STRING=_.SEMATTRS_DB_SYSTEM=_.SEMATTRS_AWS_LAMBDA_INVOKED_ARN=void 0;_.SEMATTRS_MESSAGING_DESTINATION_KIND=_.SEMATTRS_MESSAGING_DESTINATION=_.SEMATTRS_MESSAGING_SYSTEM=_.SEMATTRS_AWS_DYNAMODB_GLOBAL_SECONDARY_INDEX_UPDATES=_.SEMATTRS_AWS_DYNAMODB_ATTRIBUTE_DEFINITIONS=_.SEMATTRS_AWS_DYNAMODB_SCANNED_COUNT=_.SEMATTRS_AWS_DYNAMODB_COUNT=_.SEMATTRS_AWS_DYNAMODB_TOTAL_SEGMENTS=_.SEMATTRS_AWS_DYNAMODB_SEGMENT=_.SEMATTRS_AWS_DYNAMODB_SCAN_FORWARD=_.SEMATTRS_AWS_DYNAMODB_TABLE_COUNT=_.SEMATTRS_AWS_DYNAMODB_EXCLUSIVE_START_TABLE=_.SEMATTRS_AWS_DYNAMODB_LOCAL_SECONDARY_INDEXES=_.SEMATTRS_AWS_DYNAMODB_GLOBAL_SECONDARY_INDEXES=_.SEMATTRS_AWS_DYNAMODB_SELECT=_.SEMATTRS_AWS_DYNAMODB_INDEX_NAME=_.SEMATTRS_AWS_DYNAMODB_ATTRIBUTES_TO_GET=_.SEMATTRS_AWS_DYNAMODB_LIMIT=_.SEMATTRS_AWS_DYNAMODB_PROJECTION=_.SEMATTRS_AWS_DYNAMODB_CONSISTENT_READ=_.SEMATTRS_AWS_DYNAMODB_PROVISIONED_WRITE_CAPACITY=_.SEMATTRS_AWS_DYNAMODB_PROVISIONED_READ_CAPACITY=_.SEMATTRS_AWS_DYNAMODB_ITEM_COLLECTION_METRICS=_.SEMATTRS_AWS_DYNAMODB_CONSUMED_CAPACITY=_.SEMATTRS_AWS_DYNAMODB_TABLE_NAMES=_.SEMATTRS_HTTP_CLIENT_IP=_.SEMATTRS_HTTP_ROUTE=_.SEMATTRS_HTTP_SERVER_NAME=_.SEMATTRS_HTTP_RESPONSE_CONTENT_LENGTH_UNCOMPRESSED=_.SEMATTRS_HTTP_RESPONSE_CONTENT_LENGTH=_.SEMATTRS_HTTP_REQUEST_CONTENT_LENGTH_UNCOMPRESSED=_.SEMATTRS_HTTP_REQUEST_CONTENT_LENGTH=_.SEMATTRS_HTTP_USER_AGENT=_.SEMATTRS_HTTP_FLAVOR=_.SEMATTRS_HTTP_STATUS_CODE=_.SEMATTRS_HTTP_SCHEME=_.SEMATTRS_HTTP_HOST=_.SEMATTRS_HTTP_TARGET=_.SEMATTRS_HTTP_URL=_.SEMATTRS_HTTP_METHOD=_.SEMATTRS_CODE_LINENO=_.SEMATTRS_CODE_FILEPATH=_.SEMATTRS_CODE_NAMESPACE=_.SEMATTRS_CODE_FUNCTION=_.SEMATTRS_THREAD_NAME=_.SEMATTRS_THREAD_ID=_.SEMATTRS_ENDUSER_SCOPE=_.SEMATTRS_ENDUSER_ROLE=_.SEMATTRS_ENDUSER_ID=_.SEMATTRS_PEER_SERVICE=void 0;_.DBSYSTEMVALUES_FILEMAKER=_.DBSYSTEMVALUES_DERBY=_.DBSYSTEMVALUES_FIREBIRD=_.DBSYSTEMVALUES_ADABAS=_.DBSYSTEMVALUES_CACHE=_.DBSYSTEMVALUES_EDB=_.DBSYSTEMVALUES_FIRSTSQL=_.DBSYSTEMVALUES_INGRES=_.DBSYSTEMVALUES_HANADB=_.DBSYSTEMVALUES_MAXDB=_.DBSYSTEMVALUES_PROGRESS=_.DBSYSTEMVALUES_HSQLDB=_.DBSYSTEMVALUES_CLOUDSCAPE=_.DBSYSTEMVALUES_HIVE=_.DBSYSTEMVALUES_REDSHIFT=_.DBSYSTEMVALUES_POSTGRESQL=_.DBSYSTEMVALUES_DB2=_.DBSYSTEMVALUES_ORACLE=_.DBSYSTEMVALUES_MYSQL=_.DBSYSTEMVALUES_MSSQL=_.DBSYSTEMVALUES_OTHER_SQL=_.SemanticAttributes=_.SEMATTRS_MESSAGE_UNCOMPRESSED_SIZE=_.SEMATTRS_MESSAGE_COMPRESSED_SIZE=_.SEMATTRS_MESSAGE_ID=_.SEMATTRS_MESSAGE_TYPE=_.SEMATTRS_RPC_JSONRPC_ERROR_MESSAGE=_.SEMATTRS_RPC_JSONRPC_ERROR_CODE=_.SEMATTRS_RPC_JSONRPC_REQUEST_ID=_.SEMATTRS_RPC_JSONRPC_VERSION=_.SEMATTRS_RPC_GRPC_STATUS_CODE=_.SEMATTRS_RPC_METHOD=_.SEMATTRS_RPC_SERVICE=_.SEMATTRS_RPC_SYSTEM=_.SEMATTRS_MESSAGING_KAFKA_TOMBSTONE=_.SEMATTRS_MESSAGING_KAFKA_PARTITION=_.SEMATTRS_MESSAGING_KAFKA_CLIENT_ID=_.SEMATTRS_MESSAGING_KAFKA_CONSUMER_GROUP=_.SEMATTRS_MESSAGING_KAFKA_MESSAGE_KEY=_.SEMATTRS_MESSAGING_RABBITMQ_ROUTING_KEY=_.SEMATTRS_MESSAGING_CONSUMER_ID=_.SEMATTRS_MESSAGING_OPERATION=_.SEMATTRS_MESSAGING_MESSAGE_PAYLOAD_COMPRESSED_SIZE_BYTES=_.SEMATTRS_MESSAGING_MESSAGE_PAYLOAD_SIZE_BYTES=_.SEMATTRS_MESSAGING_CONVERSATION_ID=_.SEMATTRS_MESSAGING_MESSAGE_ID=_.SEMATTRS_MESSAGING_URL=_.SEMATTRS_MESSAGING_PROTOCOL_VERSION=_.SEMATTRS_MESSAGING_PROTOCOL=_.SEMATTRS_MESSAGING_TEMP_DESTINATION=void 0;_.FAASINVOKEDPROVIDERVALUES_ALIBABA_CLOUD=_.FaasDocumentOperationValues=_.FAASDOCUMENTOPERATIONVALUES_DELETE=_.FAASDOCUMENTOPERATIONVALUES_EDIT=_.FAASDOCUMENTOPERATIONVALUES_INSERT=_.FaasTriggerValues=_.FAASTRIGGERVALUES_OTHER=_.FAASTRIGGERVALUES_TIMER=_.FAASTRIGGERVALUES_PUBSUB=_.FAASTRIGGERVALUES_HTTP=_.FAASTRIGGERVALUES_DATASOURCE=_.DbCassandraConsistencyLevelValues=_.DBCASSANDRACONSISTENCYLEVELVALUES_LOCAL_SERIAL=_.DBCASSANDRACONSISTENCYLEVELVALUES_SERIAL=_.DBCASSANDRACONSISTENCYLEVELVALUES_ANY=_.DBCASSANDRACONSISTENCYLEVELVALUES_LOCAL_ONE=_.DBCASSANDRACONSISTENCYLEVELVALUES_THREE=_.DBCASSANDRACONSISTENCYLEVELVALUES_TWO=_.DBCASSANDRACONSISTENCYLEVELVALUES_ONE=_.DBCASSANDRACONSISTENCYLEVELVALUES_LOCAL_QUORUM=_.DBCASSANDRACONSISTENCYLEVELVALUES_QUORUM=_.DBCASSANDRACONSISTENCYLEVELVALUES_EACH_QUORUM=_.DBCASSANDRACONSISTENCYLEVELVALUES_ALL=_.DbSystemValues=_.DBSYSTEMVALUES_COCKROACHDB=_.DBSYSTEMVALUES_MEMCACHED=_.DBSYSTEMVALUES_ELASTICSEARCH=_.DBSYSTEMVALUES_GEODE=_.DBSYSTEMVALUES_NEO4J=_.DBSYSTEMVALUES_DYNAMODB=_.DBSYSTEMVALUES_COSMOSDB=_.DBSYSTEMVALUES_COUCHDB=_.DBSYSTEMVALUES_COUCHBASE=_.DBSYSTEMVALUES_REDIS=_.DBSYSTEMVALUES_MONGODB=_.DBSYSTEMVALUES_HBASE=_.DBSYSTEMVALUES_CASSANDRA=_.DBSYSTEMVALUES_COLDFUSION=_.DBSYSTEMVALUES_H2=_.DBSYSTEMVALUES_VERTICA=_.DBSYSTEMVALUES_TERADATA=_.DBSYSTEMVALUES_SYBASE=_.DBSYSTEMVALUES_SQLITE=_.DBSYSTEMVALUES_POINTBASE=_.DBSYSTEMVALUES_PERVASIVE=_.DBSYSTEMVALUES_NETEZZA=_.DBSYSTEMVALUES_MARIADB=_.DBSYSTEMVALUES_INTERBASE=_.DBSYSTEMVALUES_INSTANTDB=_.DBSYSTEMVALUES_INFORMIX=void 0;_.MESSAGINGOPERATIONVALUES_RECEIVE=_.MessagingDestinationKindValues=_.MESSAGINGDESTINATIONKINDVALUES_TOPIC=_.MESSAGINGDESTINATIONKINDVALUES_QUEUE=_.HttpFlavorValues=_.HTTPFLAVORVALUES_QUIC=_.HTTPFLAVORVALUES_SPDY=_.HTTPFLAVORVALUES_HTTP_2_0=_.HTTPFLAVORVALUES_HTTP_1_1=_.HTTPFLAVORVALUES_HTTP_1_0=_.NetHostConnectionSubtypeValues=_.NETHOSTCONNECTIONSUBTYPEVALUES_LTE_CA=_.NETHOSTCONNECTIONSUBTYPEVALUES_NRNSA=_.NETHOSTCONNECTIONSUBTYPEVALUES_NR=_.NETHOSTCONNECTIONSUBTYPEVALUES_IWLAN=_.NETHOSTCONNECTIONSUBTYPEVALUES_TD_SCDMA=_.NETHOSTCONNECTIONSUBTYPEVALUES_GSM=_.NETHOSTCONNECTIONSUBTYPEVALUES_HSPAP=_.NETHOSTCONNECTIONSUBTYPEVALUES_EHRPD=_.NETHOSTCONNECTIONSUBTYPEVALUES_LTE=_.NETHOSTCONNECTIONSUBTYPEVALUES_EVDO_B=_.NETHOSTCONNECTIONSUBTYPEVALUES_IDEN=_.NETHOSTCONNECTIONSUBTYPEVALUES_HSPA=_.NETHOSTCONNECTIONSUBTYPEVALUES_HSUPA=_.NETHOSTCONNECTIONSUBTYPEVALUES_HSDPA=_.NETHOSTCONNECTIONSUBTYPEVALUES_CDMA2000_1XRTT=_.NETHOSTCONNECTIONSUBTYPEVALUES_EVDO_A=_.NETHOSTCONNECTIONSUBTYPEVALUES_EVDO_0=_.NETHOSTCONNECTIONSUBTYPEVALUES_CDMA=_.NETHOSTCONNECTIONSUBTYPEVALUES_UMTS=_.NETHOSTCONNECTIONSUBTYPEVALUES_EDGE=_.NETHOSTCONNECTIONSUBTYPEVALUES_GPRS=_.NetHostConnectionTypeValues=_.NETHOSTCONNECTIONTYPEVALUES_UNKNOWN=_.NETHOSTCONNECTIONTYPEVALUES_UNAVAILABLE=_.NETHOSTCONNECTIONTYPEVALUES_CELL=_.NETHOSTCONNECTIONTYPEVALUES_WIRED=_.NETHOSTCONNECTIONTYPEVALUES_WIFI=_.NetTransportValues=_.NETTRANSPORTVALUES_OTHER=_.NETTRANSPORTVALUES_INPROC=_.NETTRANSPORTVALUES_PIPE=_.NETTRANSPORTVALUES_UNIX=_.NETTRANSPORTVALUES_IP=_.NETTRANSPORTVALUES_IP_UDP=_.NETTRANSPORTVALUES_IP_TCP=_.FaasInvokedProviderValues=_.FAASINVOKEDPROVIDERVALUES_GCP=_.FAASINVOKEDPROVIDERVALUES_AZURE=_.FAASINVOKEDPROVIDERVALUES_AWS=void 0;_.MessageTypeValues=_.MESSAGETYPEVALUES_RECEIVED=_.MESSAGETYPEVALUES_SENT=_.RpcGrpcStatusCodeValues=_.RPCGRPCSTATUSCODEVALUES_UNAUTHENTICATED=_.RPCGRPCSTATUSCODEVALUES_DATA_LOSS=_.RPCGRPCSTATUSCODEVALUES_UNAVAILABLE=_.RPCGRPCSTATUSCODEVALUES_INTERNAL=_.RPCGRPCSTATUSCODEVALUES_UNIMPLEMENTED=_.RPCGRPCSTATUSCODEVALUES_OUT_OF_RANGE=_.RPCGRPCSTATUSCODEVALUES_ABORTED=_.RPCGRPCSTATUSCODEVALUES_FAILED_PRECONDITION=_.RPCGRPCSTATUSCODEVALUES_RESOURCE_EXHAUSTED=_.RPCGRPCSTATUSCODEVALUES_PERMISSION_DENIED=_.RPCGRPCSTATUSCODEVALUES_ALREADY_EXISTS=_.RPCGRPCSTATUSCODEVALUES_NOT_FOUND=_.RPCGRPCSTATUSCODEVALUES_DEADLINE_EXCEEDED=_.RPCGRPCSTATUSCODEVALUES_INVALID_ARGUMENT=_.RPCGRPCSTATUSCODEVALUES_UNKNOWN=_.RPCGRPCSTATUSCODEVALUES_CANCELLED=_.RPCGRPCSTATUSCODEVALUES_OK=_.MessagingOperationValues=_.MESSAGINGOPERATIONVALUES_PROCESS=void 0;var uo=$N(),$U="aws.lambda.invoked_arn",GU="db.system",VU="db.connection_string",BU="db.user",jU="db.jdbc.driver_classname",HU="db.name",FU="db.statement",qU="db.operation",zU="db.mssql.instance_name",YU="db.cassandra.keyspace",WU="db.cassandra.page_size",KU="db.cassandra.consistency_level",ZU="db.cassandra.table",JU="db.cassandra.idempotence",QU="db.cassandra.speculative_execution_count",XU="db.cassandra.coordinator.id",e1="db.cassandra.coordinator.dc",t1="db.hbase.namespace",n1="db.redis.database_index",r1="db.mongodb.collection",o1="db.sql.table",s1="exception.type",i1="exception.message",a1="exception.stacktrace",c1="exception.escaped",u1="faas.trigger",p1="faas.execution",l1="faas.document.collection",d1="faas.document.operation",f1="faas.document.time",m1="faas.document.name",_1="faas.time",h1="faas.cron",E1="faas.coldstart",T1="faas.invoked_name",g1="faas.invoked_provider",S1="faas.invoked_region",A1="net.transport",R1="net.peer.ip",y1="net.peer.port",b1="net.peer.name",N1="net.host.ip",O1="net.host.port",I1="net.host.name",v1="net.host.connection.type",x1="net.host.connection.subtype",P1="net.host.carrier.name",C1="net.host.carrier.mcc",M1="net.host.carrier.mnc",w1="net.host.carrier.icc",L1="peer.service",D1="enduser.id",k1="enduser.role",U1="enduser.scope",$1="thread.id",G1="thread.name",V1="code.function",B1="code.namespace",j1="code.filepath",H1="code.lineno",F1="http.method",q1="http.url",z1="http.target",Y1="http.host",W1="http.scheme",K1="http.status_code",Z1="http.flavor",J1="http.user_agent",Q1="http.request_content_length",X1="http.request_content_length_uncompressed",e$="http.response_content_length",t$="http.response_content_length_uncompressed",n$="http.server_name",r$="http.route",o$="http.client_ip",s$="aws.dynamodb.table_names",i$="aws.dynamodb.consumed_capacity",a$="aws.dynamodb.item_collection_metrics",c$="aws.dynamodb.provisioned_read_capacity",u$="aws.dynamodb.provisioned_write_capacity",p$="aws.dynamodb.consistent_read",l$="aws.dynamodb.projection",d$="aws.dynamodb.limit",f$="aws.dynamodb.attributes_to_get",m$="aws.dynamodb.index_name",_$="aws.dynamodb.select",h$="aws.dynamodb.global_secondary_indexes",E$="aws.dynamodb.local_secondary_indexes",T$="aws.dynamodb.exclusive_start_table",g$="aws.dynamodb.table_count",S$="aws.dynamodb.scan_forward",A$="aws.dynamodb.segment",R$="aws.dynamodb.total_segments",y$="aws.dynamodb.count",b$="aws.dynamodb.scanned_count",N$="aws.dynamodb.attribute_definitions",O$="aws.dynamodb.global_secondary_index_updates",I$="messaging.system",v$="messaging.destination",x$="messaging.destination_kind",P$="messaging.temp_destination",C$="messaging.protocol",M$="messaging.protocol_version",w$="messaging.url",L$="messaging.message_id",D$="messaging.conversation_id",k$="messaging.message_payload_size_bytes",U$="messaging.message_payload_compressed_size_bytes",$$="messaging.operation",G$="messaging.consumer_id",V$="messaging.rabbitmq.routing_key",B$="messaging.kafka.message_key",j$="messaging.kafka.consumer_group",H$="messaging.kafka.client_id",F$="messaging.kafka.partition",q$="messaging.kafka.tombstone",z$="rpc.system",Y$="rpc.service",W$="rpc.method",K$="rpc.grpc.status_code",Z$="rpc.jsonrpc.version",J$="rpc.jsonrpc.request_id",Q$="rpc.jsonrpc.error_code",X$="rpc.jsonrpc.error_message",eG="message.type",tG="message.id",nG="message.compressed_size",rG="message.uncompressed_size";_.SEMATTRS_AWS_LAMBDA_INVOKED_ARN=$U;_.SEMATTRS_DB_SYSTEM=GU;_.SEMATTRS_DB_CONNECTION_STRING=VU;_.SEMATTRS_DB_USER=BU;_.SEMATTRS_DB_JDBC_DRIVER_CLASSNAME=jU;_.SEMATTRS_DB_NAME=HU;_.SEMATTRS_DB_STATEMENT=FU;_.SEMATTRS_DB_OPERATION=qU;_.SEMATTRS_DB_MSSQL_INSTANCE_NAME=zU;_.SEMATTRS_DB_CASSANDRA_KEYSPACE=YU;_.SEMATTRS_DB_CASSANDRA_PAGE_SIZE=WU;_.SEMATTRS_DB_CASSANDRA_CONSISTENCY_LEVEL=KU;_.SEMATTRS_DB_CASSANDRA_TABLE=ZU;_.SEMATTRS_DB_CASSANDRA_IDEMPOTENCE=JU;_.SEMATTRS_DB_CASSANDRA_SPECULATIVE_EXECUTION_COUNT=QU;_.SEMATTRS_DB_CASSANDRA_COORDINATOR_ID=XU;_.SEMATTRS_DB_CASSANDRA_COORDINATOR_DC=e1;_.SEMATTRS_DB_HBASE_NAMESPACE=t1;_.SEMATTRS_DB_REDIS_DATABASE_INDEX=n1;_.SEMATTRS_DB_MONGODB_COLLECTION=r1;_.SEMATTRS_DB_SQL_TABLE=o1;_.SEMATTRS_EXCEPTION_TYPE=s1;_.SEMATTRS_EXCEPTION_MESSAGE=i1;_.SEMATTRS_EXCEPTION_STACKTRACE=a1;_.SEMATTRS_EXCEPTION_ESCAPED=c1;_.SEMATTRS_FAAS_TRIGGER=u1;_.SEMATTRS_FAAS_EXECUTION=p1;_.SEMATTRS_FAAS_DOCUMENT_COLLECTION=l1;_.SEMATTRS_FAAS_DOCUMENT_OPERATION=d1;_.SEMATTRS_FAAS_DOCUMENT_TIME=f1;_.SEMATTRS_FAAS_DOCUMENT_NAME=m1;_.SEMATTRS_FAAS_TIME=_1;_.SEMATTRS_FAAS_CRON=h1;_.SEMATTRS_FAAS_COLDSTART=E1;_.SEMATTRS_FAAS_INVOKED_NAME=T1;_.SEMATTRS_FAAS_INVOKED_PROVIDER=g1;_.SEMATTRS_FAAS_INVOKED_REGION=S1;_.SEMATTRS_NET_TRANSPORT=A1;_.SEMATTRS_NET_PEER_IP=R1;_.SEMATTRS_NET_PEER_PORT=y1;_.SEMATTRS_NET_PEER_NAME=b1;_.SEMATTRS_NET_HOST_IP=N1;_.SEMATTRS_NET_HOST_PORT=O1;_.SEMATTRS_NET_HOST_NAME=I1;_.SEMATTRS_NET_HOST_CONNECTION_TYPE=v1;_.SEMATTRS_NET_HOST_CONNECTION_SUBTYPE=x1;_.SEMATTRS_NET_HOST_CARRIER_NAME=P1;_.SEMATTRS_NET_HOST_CARRIER_MCC=C1;_.SEMATTRS_NET_HOST_CARRIER_MNC=M1;_.SEMATTRS_NET_HOST_CARRIER_ICC=w1;_.SEMATTRS_PEER_SERVICE=L1;_.SEMATTRS_ENDUSER_ID=D1;_.SEMATTRS_ENDUSER_ROLE=k1;_.SEMATTRS_ENDUSER_SCOPE=U1;_.SEMATTRS_THREAD_ID=$1;_.SEMATTRS_THREAD_NAME=G1;_.SEMATTRS_CODE_FUNCTION=V1;_.SEMATTRS_CODE_NAMESPACE=B1;_.SEMATTRS_CODE_FILEPATH=j1;_.SEMATTRS_CODE_LINENO=H1;_.SEMATTRS_HTTP_METHOD=F1;_.SEMATTRS_HTTP_URL=q1;_.SEMATTRS_HTTP_TARGET=z1;_.SEMATTRS_HTTP_HOST=Y1;_.SEMATTRS_HTTP_SCHEME=W1;_.SEMATTRS_HTTP_STATUS_CODE=K1;_.SEMATTRS_HTTP_FLAVOR=Z1;_.SEMATTRS_HTTP_USER_AGENT=J1;_.SEMATTRS_HTTP_REQUEST_CONTENT_LENGTH=Q1;_.SEMATTRS_HTTP_REQUEST_CONTENT_LENGTH_UNCOMPRESSED=X1;_.SEMATTRS_HTTP_RESPONSE_CONTENT_LENGTH=e$;_.SEMATTRS_HTTP_RESPONSE_CONTENT_LENGTH_UNCOMPRESSED=t$;_.SEMATTRS_HTTP_SERVER_NAME=n$;_.SEMATTRS_HTTP_ROUTE=r$;_.SEMATTRS_HTTP_CLIENT_IP=o$;_.SEMATTRS_AWS_DYNAMODB_TABLE_NAMES=s$;_.SEMATTRS_AWS_DYNAMODB_CONSUMED_CAPACITY=i$;_.SEMATTRS_AWS_DYNAMODB_ITEM_COLLECTION_METRICS=a$;_.SEMATTRS_AWS_DYNAMODB_PROVISIONED_READ_CAPACITY=c$;_.SEMATTRS_AWS_DYNAMODB_PROVISIONED_WRITE_CAPACITY=u$;_.SEMATTRS_AWS_DYNAMODB_CONSISTENT_READ=p$;_.SEMATTRS_AWS_DYNAMODB_PROJECTION=l$;_.SEMATTRS_AWS_DYNAMODB_LIMIT=d$;_.SEMATTRS_AWS_DYNAMODB_ATTRIBUTES_TO_GET=f$;_.SEMATTRS_AWS_DYNAMODB_INDEX_NAME=m$;_.SEMATTRS_AWS_DYNAMODB_SELECT=_$;_.SEMATTRS_AWS_DYNAMODB_GLOBAL_SECONDARY_INDEXES=h$;_.SEMATTRS_AWS_DYNAMODB_LOCAL_SECONDARY_INDEXES=E$;_.SEMATTRS_AWS_DYNAMODB_EXCLUSIVE_START_TABLE=T$;_.SEMATTRS_AWS_DYNAMODB_TABLE_COUNT=g$;_.SEMATTRS_AWS_DYNAMODB_SCAN_FORWARD=S$;_.SEMATTRS_AWS_DYNAMODB_SEGMENT=A$;_.SEMATTRS_AWS_DYNAMODB_TOTAL_SEGMENTS=R$;_.SEMATTRS_AWS_DYNAMODB_COUNT=y$;_.SEMATTRS_AWS_DYNAMODB_SCANNED_COUNT=b$;_.SEMATTRS_AWS_DYNAMODB_ATTRIBUTE_DEFINITIONS=N$;_.SEMATTRS_AWS_DYNAMODB_GLOBAL_SECONDARY_INDEX_UPDATES=O$;_.SEMATTRS_MESSAGING_SYSTEM=I$;_.SEMATTRS_MESSAGING_DESTINATION=v$;_.SEMATTRS_MESSAGING_DESTINATION_KIND=x$;_.SEMATTRS_MESSAGING_TEMP_DESTINATION=P$;_.SEMATTRS_MESSAGING_PROTOCOL=C$;_.SEMATTRS_MESSAGING_PROTOCOL_VERSION=M$;_.SEMATTRS_MESSAGING_URL=w$;_.SEMATTRS_MESSAGING_MESSAGE_ID=L$;_.SEMATTRS_MESSAGING_CONVERSATION_ID=D$;_.SEMATTRS_MESSAGING_MESSAGE_PAYLOAD_SIZE_BYTES=k$;_.SEMATTRS_MESSAGING_MESSAGE_PAYLOAD_COMPRESSED_SIZE_BYTES=U$;_.SEMATTRS_MESSAGING_OPERATION=$$;_.SEMATTRS_MESSAGING_CONSUMER_ID=G$;_.SEMATTRS_MESSAGING_RABBITMQ_ROUTING_KEY=V$;_.SEMATTRS_MESSAGING_KAFKA_MESSAGE_KEY=B$;_.SEMATTRS_MESSAGING_KAFKA_CONSUMER_GROUP=j$;_.SEMATTRS_MESSAGING_KAFKA_CLIENT_ID=H$;_.SEMATTRS_MESSAGING_KAFKA_PARTITION=F$;_.SEMATTRS_MESSAGING_KAFKA_TOMBSTONE=q$;_.SEMATTRS_RPC_SYSTEM=z$;_.SEMATTRS_RPC_SERVICE=Y$;_.SEMATTRS_RPC_METHOD=W$;_.SEMATTRS_RPC_GRPC_STATUS_CODE=K$;_.SEMATTRS_RPC_JSONRPC_VERSION=Z$;_.SEMATTRS_RPC_JSONRPC_REQUEST_ID=J$;_.SEMATTRS_RPC_JSONRPC_ERROR_CODE=Q$;_.SEMATTRS_RPC_JSONRPC_ERROR_MESSAGE=X$;_.SEMATTRS_MESSAGE_TYPE=eG;_.SEMATTRS_MESSAGE_ID=tG;_.SEMATTRS_MESSAGE_COMPRESSED_SIZE=nG;_.SEMATTRS_MESSAGE_UNCOMPRESSED_SIZE=rG;_.SemanticAttributes=(0,uo.createConstMap)([$U,GU,VU,BU,jU,HU,FU,qU,zU,YU,WU,KU,ZU,JU,QU,XU,e1,t1,n1,r1,o1,s1,i1,a1,c1,u1,p1,l1,d1,f1,m1,_1,h1,E1,T1,g1,S1,A1,R1,y1,b1,N1,O1,I1,v1,x1,P1,C1,M1,w1,L1,D1,k1,U1,$1,G1,V1,B1,j1,H1,F1,q1,z1,Y1,W1,K1,Z1,J1,Q1,X1,e$,t$,n$,r$,o$,s$,i$,a$,c$,u$,p$,l$,d$,f$,m$,_$,h$,E$,T$,g$,S$,A$,R$,y$,b$,N$,O$,I$,v$,x$,P$,C$,M$,w$,L$,D$,k$,U$,$$,G$,V$,B$,j$,H$,F$,q$,z$,Y$,W$,K$,Z$,J$,Q$,X$,eG,tG,nG,rG]);var oG="other_sql",sG="mssql",iG="mysql",aG="oracle",cG="db2",uG="postgresql",pG="redshift",lG="hive",dG="cloudscape",fG="hsqldb",mG="progress",_G="maxdb",hG="hanadb",EG="ingres",TG="firstsql",gG="edb",SG="cache",AG="adabas",RG="firebird",yG="derby",bG="filemaker",NG="informix",OG="instantdb",IG="interbase",vG="mariadb",xG="netezza",PG="pervasive",CG="pointbase",MG="sqlite",wG="sybase",LG="teradata",DG="vertica",kG="h2",UG="coldfusion",$G="cassandra",GG="hbase",VG="mongodb",BG="redis",jG="couchbase",HG="couchdb",FG="cosmosdb",qG="dynamodb",zG="neo4j",YG="geode",WG="elasticsearch",KG="memcached",ZG="cockroachdb";_.DBSYSTEMVALUES_OTHER_SQL=oG;_.DBSYSTEMVALUES_MSSQL=sG;_.DBSYSTEMVALUES_MYSQL=iG;_.DBSYSTEMVALUES_ORACLE=aG;_.DBSYSTEMVALUES_DB2=cG;_.DBSYSTEMVALUES_POSTGRESQL=uG;_.DBSYSTEMVALUES_REDSHIFT=pG;_.DBSYSTEMVALUES_HIVE=lG;_.DBSYSTEMVALUES_CLOUDSCAPE=dG;_.DBSYSTEMVALUES_HSQLDB=fG;_.DBSYSTEMVALUES_PROGRESS=mG;_.DBSYSTEMVALUES_MAXDB=_G;_.DBSYSTEMVALUES_HANADB=hG;_.DBSYSTEMVALUES_INGRES=EG;_.DBSYSTEMVALUES_FIRSTSQL=TG;_.DBSYSTEMVALUES_EDB=gG;_.DBSYSTEMVALUES_CACHE=SG;_.DBSYSTEMVALUES_ADABAS=AG;_.DBSYSTEMVALUES_FIREBIRD=RG;_.DBSYSTEMVALUES_DERBY=yG;_.DBSYSTEMVALUES_FILEMAKER=bG;_.DBSYSTEMVALUES_INFORMIX=NG;_.DBSYSTEMVALUES_INSTANTDB=OG;_.DBSYSTEMVALUES_INTERBASE=IG;_.DBSYSTEMVALUES_MARIADB=vG;_.DBSYSTEMVALUES_NETEZZA=xG;_.DBSYSTEMVALUES_PERVASIVE=PG;_.DBSYSTEMVALUES_POINTBASE=CG;_.DBSYSTEMVALUES_SQLITE=MG;_.DBSYSTEMVALUES_SYBASE=wG;_.DBSYSTEMVALUES_TERADATA=LG;_.DBSYSTEMVALUES_VERTICA=DG;_.DBSYSTEMVALUES_H2=kG;_.DBSYSTEMVALUES_COLDFUSION=UG;_.DBSYSTEMVALUES_CASSANDRA=$G;_.DBSYSTEMVALUES_HBASE=GG;_.DBSYSTEMVALUES_MONGODB=VG;_.DBSYSTEMVALUES_REDIS=BG;_.DBSYSTEMVALUES_COUCHBASE=jG;_.DBSYSTEMVALUES_COUCHDB=HG;_.DBSYSTEMVALUES_COSMOSDB=FG;_.DBSYSTEMVALUES_DYNAMODB=qG;_.DBSYSTEMVALUES_NEO4J=zG;_.DBSYSTEMVALUES_GEODE=YG;_.DBSYSTEMVALUES_ELASTICSEARCH=WG;_.DBSYSTEMVALUES_MEMCACHED=KG;_.DBSYSTEMVALUES_COCKROACHDB=ZG;_.DbSystemValues=(0,uo.createConstMap)([oG,sG,iG,aG,cG,uG,pG,lG,dG,fG,mG,_G,hG,EG,TG,gG,SG,AG,RG,yG,bG,NG,OG,IG,vG,xG,PG,CG,MG,wG,LG,DG,kG,UG,$G,GG,VG,BG,jG,HG,FG,qG,zG,YG,WG,KG,ZG]);var JG="all",QG="each_quorum",XG="quorum",eV="local_quorum",tV="one",nV="two",rV="three",oV="local_one",sV="any",iV="serial",aV="local_serial";_.DBCASSANDRACONSISTENCYLEVELVALUES_ALL=JG;_.DBCASSANDRACONSISTENCYLEVELVALUES_EACH_QUORUM=QG;_.DBCASSANDRACONSISTENCYLEVELVALUES_QUORUM=XG;_.DBCASSANDRACONSISTENCYLEVELVALUES_LOCAL_QUORUM=eV;_.DBCASSANDRACONSISTENCYLEVELVALUES_ONE=tV;_.DBCASSANDRACONSISTENCYLEVELVALUES_TWO=nV;_.DBCASSANDRACONSISTENCYLEVELVALUES_THREE=rV;_.DBCASSANDRACONSISTENCYLEVELVALUES_LOCAL_ONE=oV;_.DBCASSANDRACONSISTENCYLEVELVALUES_ANY=sV;_.DBCASSANDRACONSISTENCYLEVELVALUES_SERIAL=iV;_.DBCASSANDRACONSISTENCYLEVELVALUES_LOCAL_SERIAL=aV;_.DbCassandraConsistencyLevelValues=(0,uo.createConstMap)([JG,QG,XG,eV,tV,nV,rV,oV,sV,iV,aV]);var cV="datasource",uV="http",pV="pubsub",lV="timer",dV="other";_.FAASTRIGGERVALUES_DATASOURCE=cV;_.FAASTRIGGERVALUES_HTTP=uV;_.FAASTRIGGERVALUES_PUBSUB=pV;_.FAASTRIGGERVALUES_TIMER=lV;_.FAASTRIGGERVALUES_OTHER=dV;_.FaasTriggerValues=(0,uo.createConstMap)([cV,uV,pV,lV,dV]);var fV="insert",mV="edit",_V="delete";_.FAASDOCUMENTOPERATIONVALUES_INSERT=fV;_.FAASDOCUMENTOPERATIONVALUES_EDIT=mV;_.FAASDOCUMENTOPERATIONVALUES_DELETE=_V;_.FaasDocumentOperationValues=(0,uo.createConstMap)([fV,mV,_V]);var hV="alibaba_cloud",EV="aws",TV="azure",gV="gcp";_.FAASINVOKEDPROVIDERVALUES_ALIBABA_CLOUD=hV;_.FAASINVOKEDPROVIDERVALUES_AWS=EV;_.FAASINVOKEDPROVIDERVALUES_AZURE=TV;_.FAASINVOKEDPROVIDERVALUES_GCP=gV;_.FaasInvokedProviderValues=(0,uo.createConstMap)([hV,EV,TV,gV]);var SV="ip_tcp",AV="ip_udp",RV="ip",yV="unix",bV="pipe",NV="inproc",OV="other";_.NETTRANSPORTVALUES_IP_TCP=SV;_.NETTRANSPORTVALUES_IP_UDP=AV;_.NETTRANSPORTVALUES_IP=RV;_.NETTRANSPORTVALUES_UNIX=yV;_.NETTRANSPORTVALUES_PIPE=bV;_.NETTRANSPORTVALUES_INPROC=NV;_.NETTRANSPORTVALUES_OTHER=OV;_.NetTransportValues=(0,uo.createConstMap)([SV,AV,RV,yV,bV,NV,OV]);var IV="wifi",vV="wired",xV="cell",PV="unavailable",CV="unknown";_.NETHOSTCONNECTIONTYPEVALUES_WIFI=IV;_.NETHOSTCONNECTIONTYPEVALUES_WIRED=vV;_.NETHOSTCONNECTIONTYPEVALUES_CELL=xV;_.NETHOSTCONNECTIONTYPEVALUES_UNAVAILABLE=PV;_.NETHOSTCONNECTIONTYPEVALUES_UNKNOWN=CV;_.NetHostConnectionTypeValues=(0,uo.createConstMap)([IV,vV,xV,PV,CV]);var MV="gprs",wV="edge",LV="umts",DV="cdma",kV="evdo_0",UV="evdo_a",$V="cdma2000_1xrtt",GV="hsdpa",VV="hsupa",BV="hspa",jV="iden",HV="evdo_b",FV="lte",qV="ehrpd",zV="hspap",YV="gsm",WV="td_scdma",KV="iwlan",ZV="nr",JV="nrnsa",QV="lte_ca";_.NETHOSTCONNECTIONSUBTYPEVALUES_GPRS=MV;_.NETHOSTCONNECTIONSUBTYPEVALUES_EDGE=wV;_.NETHOSTCONNECTIONSUBTYPEVALUES_UMTS=LV;_.NETHOSTCONNECTIONSUBTYPEVALUES_CDMA=DV;_.NETHOSTCONNECTIONSUBTYPEVALUES_EVDO_0=kV;_.NETHOSTCONNECTIONSUBTYPEVALUES_EVDO_A=UV;_.NETHOSTCONNECTIONSUBTYPEVALUES_CDMA2000_1XRTT=$V;_.NETHOSTCONNECTIONSUBTYPEVALUES_HSDPA=GV;_.NETHOSTCONNECTIONSUBTYPEVALUES_HSUPA=VV;_.NETHOSTCONNECTIONSUBTYPEVALUES_HSPA=BV;_.NETHOSTCONNECTIONSUBTYPEVALUES_IDEN=jV;_.NETHOSTCONNECTIONSUBTYPEVALUES_EVDO_B=HV;_.NETHOSTCONNECTIONSUBTYPEVALUES_LTE=FV;_.NETHOSTCONNECTIONSUBTYPEVALUES_EHRPD=qV;_.NETHOSTCONNECTIONSUBTYPEVALUES_HSPAP=zV;_.NETHOSTCONNECTIONSUBTYPEVALUES_GSM=YV;_.NETHOSTCONNECTIONSUBTYPEVALUES_TD_SCDMA=WV;_.NETHOSTCONNECTIONSUBTYPEVALUES_IWLAN=KV;_.NETHOSTCONNECTIONSUBTYPEVALUES_NR=ZV;_.NETHOSTCONNECTIONSUBTYPEVALUES_NRNSA=JV;_.NETHOSTCONNECTIONSUBTYPEVALUES_LTE_CA=QV;_.NetHostConnectionSubtypeValues=(0,uo.createConstMap)([MV,wV,LV,DV,kV,UV,$V,GV,VV,BV,jV,HV,FV,qV,zV,YV,WV,KV,ZV,JV,QV]);var XV="1.0",eB="1.1",tB="2.0",nB="SPDY",rB="QUIC";_.HTTPFLAVORVALUES_HTTP_1_0=XV;_.HTTPFLAVORVALUES_HTTP_1_1=eB;_.HTTPFLAVORVALUES_HTTP_2_0=tB;_.HTTPFLAVORVALUES_SPDY=nB;_.HTTPFLAVORVALUES_QUIC=rB;_.HttpFlavorValues={HTTP_1_0:XV,HTTP_1_1:eB,HTTP_2_0:tB,SPDY:nB,QUIC:rB};var oB="queue",sB="topic";_.MESSAGINGDESTINATIONKINDVALUES_QUEUE=oB;_.MESSAGINGDESTINATIONKINDVALUES_TOPIC=sB;_.MessagingDestinationKindValues=(0,uo.createConstMap)([oB,sB]);var iB="receive",aB="process";_.MESSAGINGOPERATIONVALUES_RECEIVE=iB;_.MESSAGINGOPERATIONVALUES_PROCESS=aB;_.MessagingOperationValues=(0,uo.createConstMap)([iB,aB]);var cB=0,uB=1,pB=2,lB=3,dB=4,fB=5,mB=6,_B=7,hB=8,EB=9,TB=10,gB=11,SB=12,AB=13,RB=14,yB=15,bB=16;_.RPCGRPCSTATUSCODEVALUES_OK=cB;_.RPCGRPCSTATUSCODEVALUES_CANCELLED=uB;_.RPCGRPCSTATUSCODEVALUES_UNKNOWN=pB;_.RPCGRPCSTATUSCODEVALUES_INVALID_ARGUMENT=lB;_.RPCGRPCSTATUSCODEVALUES_DEADLINE_EXCEEDED=dB;_.RPCGRPCSTATUSCODEVALUES_NOT_FOUND=fB;_.RPCGRPCSTATUSCODEVALUES_ALREADY_EXISTS=mB;_.RPCGRPCSTATUSCODEVALUES_PERMISSION_DENIED=_B;_.RPCGRPCSTATUSCODEVALUES_RESOURCE_EXHAUSTED=hB;_.RPCGRPCSTATUSCODEVALUES_FAILED_PRECONDITION=EB;_.RPCGRPCSTATUSCODEVALUES_ABORTED=TB;_.RPCGRPCSTATUSCODEVALUES_OUT_OF_RANGE=gB;_.RPCGRPCSTATUSCODEVALUES_UNIMPLEMENTED=SB;_.RPCGRPCSTATUSCODEVALUES_INTERNAL=AB;_.RPCGRPCSTATUSCODEVALUES_UNAVAILABLE=RB;_.RPCGRPCSTATUSCODEVALUES_DATA_LOSS=yB;_.RPCGRPCSTATUSCODEVALUES_UNAUTHENTICATED=bB;_.RpcGrpcStatusCodeValues={OK:cB,CANCELLED:uB,UNKNOWN:pB,INVALID_ARGUMENT:lB,DEADLINE_EXCEEDED:dB,NOT_FOUND:fB,ALREADY_EXISTS:mB,PERMISSION_DENIED:_B,RESOURCE_EXHAUSTED:hB,FAILED_PRECONDITION:EB,ABORTED:TB,OUT_OF_RANGE:gB,UNIMPLEMENTED:SB,INTERNAL:AB,UNAVAILABLE:RB,DATA_LOSS:yB,UNAUTHENTICATED:bB};var NB="SENT",OB="RECEIVED";_.MESSAGETYPEVALUES_SENT=NB;_.MESSAGETYPEVALUES_RECEIVED=OB;_.MessageTypeValues=(0,uo.createConstMap)([NB,OB])});var vB=T(bc=>{"use strict";var hue=bc&&bc.__createBinding||(Object.create?(function(t,e,n,r){r===void 0&&(r=n);var o=Object.getOwnPropertyDescriptor(e,n);(!o||("get"in o?!e.__esModule:o.writable||o.configurable))&&(o={enumerable:!0,get:function(){return e[n]}}),Object.defineProperty(t,r,o)}):(function(t,e,n,r){r===void 0&&(r=n),t[r]=e[n]})),Eue=bc&&bc.__exportStar||function(t,e){for(var n in t)n!=="default"&&!Object.prototype.hasOwnProperty.call(e,n)&&hue(e,t,n)};Object.defineProperty(bc,"__esModule",{value:!0});Eue(IB(),bc)});var XH=T(g=>{"use strict";Object.defineProperty(g,"__esModule",{value:!0});g.SEMRESATTRS_K8S_STATEFULSET_NAME=g.SEMRESATTRS_K8S_STATEFULSET_UID=g.SEMRESATTRS_K8S_DEPLOYMENT_NAME=g.SEMRESATTRS_K8S_DEPLOYMENT_UID=g.SEMRESATTRS_K8S_REPLICASET_NAME=g.SEMRESATTRS_K8S_REPLICASET_UID=g.SEMRESATTRS_K8S_CONTAINER_NAME=g.SEMRESATTRS_K8S_POD_NAME=g.SEMRESATTRS_K8S_POD_UID=g.SEMRESATTRS_K8S_NAMESPACE_NAME=g.SEMRESATTRS_K8S_NODE_UID=g.SEMRESATTRS_K8S_NODE_NAME=g.SEMRESATTRS_K8S_CLUSTER_NAME=g.SEMRESATTRS_HOST_IMAGE_VERSION=g.SEMRESATTRS_HOST_IMAGE_ID=g.SEMRESATTRS_HOST_IMAGE_NAME=g.SEMRESATTRS_HOST_ARCH=g.SEMRESATTRS_HOST_TYPE=g.SEMRESATTRS_HOST_NAME=g.SEMRESATTRS_HOST_ID=g.SEMRESATTRS_FAAS_MAX_MEMORY=g.SEMRESATTRS_FAAS_INSTANCE=g.SEMRESATTRS_FAAS_VERSION=g.SEMRESATTRS_FAAS_ID=g.SEMRESATTRS_FAAS_NAME=g.SEMRESATTRS_DEVICE_MODEL_NAME=g.SEMRESATTRS_DEVICE_MODEL_IDENTIFIER=g.SEMRESATTRS_DEVICE_ID=g.SEMRESATTRS_DEPLOYMENT_ENVIRONMENT=g.SEMRESATTRS_CONTAINER_IMAGE_TAG=g.SEMRESATTRS_CONTAINER_IMAGE_NAME=g.SEMRESATTRS_CONTAINER_RUNTIME=g.SEMRESATTRS_CONTAINER_ID=g.SEMRESATTRS_CONTAINER_NAME=g.SEMRESATTRS_AWS_LOG_STREAM_ARNS=g.SEMRESATTRS_AWS_LOG_STREAM_NAMES=g.SEMRESATTRS_AWS_LOG_GROUP_ARNS=g.SEMRESATTRS_AWS_LOG_GROUP_NAMES=g.SEMRESATTRS_AWS_EKS_CLUSTER_ARN=g.SEMRESATTRS_AWS_ECS_TASK_REVISION=g.SEMRESATTRS_AWS_ECS_TASK_FAMILY=g.SEMRESATTRS_AWS_ECS_TASK_ARN=g.SEMRESATTRS_AWS_ECS_LAUNCHTYPE=g.SEMRESATTRS_AWS_ECS_CLUSTER_ARN=g.SEMRESATTRS_AWS_ECS_CONTAINER_ARN=g.SEMRESATTRS_CLOUD_PLATFORM=g.SEMRESATTRS_CLOUD_AVAILABILITY_ZONE=g.SEMRESATTRS_CLOUD_REGION=g.SEMRESATTRS_CLOUD_ACCOUNT_ID=g.SEMRESATTRS_CLOUD_PROVIDER=void 0;g.CLOUDPLATFORMVALUES_GCP_COMPUTE_ENGINE=g.CLOUDPLATFORMVALUES_AZURE_APP_SERVICE=g.CLOUDPLATFORMVALUES_AZURE_FUNCTIONS=g.CLOUDPLATFORMVALUES_AZURE_AKS=g.CLOUDPLATFORMVALUES_AZURE_CONTAINER_INSTANCES=g.CLOUDPLATFORMVALUES_AZURE_VM=g.CLOUDPLATFORMVALUES_AWS_ELASTIC_BEANSTALK=g.CLOUDPLATFORMVALUES_AWS_LAMBDA=g.CLOUDPLATFORMVALUES_AWS_EKS=g.CLOUDPLATFORMVALUES_AWS_ECS=g.CLOUDPLATFORMVALUES_AWS_EC2=g.CLOUDPLATFORMVALUES_ALIBABA_CLOUD_FC=g.CLOUDPLATFORMVALUES_ALIBABA_CLOUD_ECS=g.CloudProviderValues=g.CLOUDPROVIDERVALUES_GCP=g.CLOUDPROVIDERVALUES_AZURE=g.CLOUDPROVIDERVALUES_AWS=g.CLOUDPROVIDERVALUES_ALIBABA_CLOUD=g.SemanticResourceAttributes=g.SEMRESATTRS_WEBENGINE_DESCRIPTION=g.SEMRESATTRS_WEBENGINE_VERSION=g.SEMRESATTRS_WEBENGINE_NAME=g.SEMRESATTRS_TELEMETRY_AUTO_VERSION=g.SEMRESATTRS_TELEMETRY_SDK_VERSION=g.SEMRESATTRS_TELEMETRY_SDK_LANGUAGE=g.SEMRESATTRS_TELEMETRY_SDK_NAME=g.SEMRESATTRS_SERVICE_VERSION=g.SEMRESATTRS_SERVICE_INSTANCE_ID=g.SEMRESATTRS_SERVICE_NAMESPACE=g.SEMRESATTRS_SERVICE_NAME=g.SEMRESATTRS_PROCESS_RUNTIME_DESCRIPTION=g.SEMRESATTRS_PROCESS_RUNTIME_VERSION=g.SEMRESATTRS_PROCESS_RUNTIME_NAME=g.SEMRESATTRS_PROCESS_OWNER=g.SEMRESATTRS_PROCESS_COMMAND_ARGS=g.SEMRESATTRS_PROCESS_COMMAND_LINE=g.SEMRESATTRS_PROCESS_COMMAND=g.SEMRESATTRS_PROCESS_EXECUTABLE_PATH=g.SEMRESATTRS_PROCESS_EXECUTABLE_NAME=g.SEMRESATTRS_PROCESS_PID=g.SEMRESATTRS_OS_VERSION=g.SEMRESATTRS_OS_NAME=g.SEMRESATTRS_OS_DESCRIPTION=g.SEMRESATTRS_OS_TYPE=g.SEMRESATTRS_K8S_CRONJOB_NAME=g.SEMRESATTRS_K8S_CRONJOB_UID=g.SEMRESATTRS_K8S_JOB_NAME=g.SEMRESATTRS_K8S_JOB_UID=g.SEMRESATTRS_K8S_DAEMONSET_NAME=g.SEMRESATTRS_K8S_DAEMONSET_UID=void 0;g.TelemetrySdkLanguageValues=g.TELEMETRYSDKLANGUAGEVALUES_WEBJS=g.TELEMETRYSDKLANGUAGEVALUES_RUBY=g.TELEMETRYSDKLANGUAGEVALUES_PYTHON=g.TELEMETRYSDKLANGUAGEVALUES_PHP=g.TELEMETRYSDKLANGUAGEVALUES_NODEJS=g.TELEMETRYSDKLANGUAGEVALUES_JAVA=g.TELEMETRYSDKLANGUAGEVALUES_GO=g.TELEMETRYSDKLANGUAGEVALUES_ERLANG=g.TELEMETRYSDKLANGUAGEVALUES_DOTNET=g.TELEMETRYSDKLANGUAGEVALUES_CPP=g.OsTypeValues=g.OSTYPEVALUES_Z_OS=g.OSTYPEVALUES_SOLARIS=g.OSTYPEVALUES_AIX=g.OSTYPEVALUES_HPUX=g.OSTYPEVALUES_DRAGONFLYBSD=g.OSTYPEVALUES_OPENBSD=g.OSTYPEVALUES_NETBSD=g.OSTYPEVALUES_FREEBSD=g.OSTYPEVALUES_DARWIN=g.OSTYPEVALUES_LINUX=g.OSTYPEVALUES_WINDOWS=g.HostArchValues=g.HOSTARCHVALUES_X86=g.HOSTARCHVALUES_PPC64=g.HOSTARCHVALUES_PPC32=g.HOSTARCHVALUES_IA64=g.HOSTARCHVALUES_ARM64=g.HOSTARCHVALUES_ARM32=g.HOSTARCHVALUES_AMD64=g.AwsEcsLaunchtypeValues=g.AWSECSLAUNCHTYPEVALUES_FARGATE=g.AWSECSLAUNCHTYPEVALUES_EC2=g.CloudPlatformValues=g.CLOUDPLATFORMVALUES_GCP_APP_ENGINE=g.CLOUDPLATFORMVALUES_GCP_CLOUD_FUNCTIONS=g.CLOUDPLATFORMVALUES_GCP_KUBERNETES_ENGINE=g.CLOUDPLATFORMVALUES_GCP_CLOUD_RUN=void 0;var Nc=$N(),xB="cloud.provider",PB="cloud.account.id",CB="cloud.region",MB="cloud.availability_zone",wB="cloud.platform",LB="aws.ecs.container.arn",DB="aws.ecs.cluster.arn",kB="aws.ecs.launchtype",UB="aws.ecs.task.arn",$B="aws.ecs.task.family",GB="aws.ecs.task.revision",VB="aws.eks.cluster.arn",BB="aws.log.group.names",jB="aws.log.group.arns",HB="aws.log.stream.names",FB="aws.log.stream.arns",qB="container.name",zB="container.id",YB="container.runtime",WB="container.image.name",KB="container.image.tag",ZB="deployment.environment",JB="device.id",QB="device.model.identifier",XB="device.model.name",ej="faas.name",tj="faas.id",nj="faas.version",rj="faas.instance",oj="faas.max_memory",sj="host.id",ij="host.name",aj="host.type",cj="host.arch",uj="host.image.name",pj="host.image.id",lj="host.image.version",dj="k8s.cluster.name",fj="k8s.node.name",mj="k8s.node.uid",_j="k8s.namespace.name",hj="k8s.pod.uid",Ej="k8s.pod.name",Tj="k8s.container.name",gj="k8s.replicaset.uid",Sj="k8s.replicaset.name",Aj="k8s.deployment.uid",Rj="k8s.deployment.name",yj="k8s.statefulset.uid",bj="k8s.statefulset.name",Nj="k8s.daemonset.uid",Oj="k8s.daemonset.name",Ij="k8s.job.uid",vj="k8s.job.name",xj="k8s.cronjob.uid",Pj="k8s.cronjob.name",Cj="os.type",Mj="os.description",wj="os.name",Lj="os.version",Dj="process.pid",kj="process.executable.name",Uj="process.executable.path",$j="process.command",Gj="process.command_line",Vj="process.command_args",Bj="process.owner",jj="process.runtime.name",Hj="process.runtime.version",Fj="process.runtime.description",qj="service.name",zj="service.namespace",Yj="service.instance.id",Wj="service.version",Kj="telemetry.sdk.name",Zj="telemetry.sdk.language",Jj="telemetry.sdk.version",Qj="telemetry.auto.version",Xj="webengine.name",eH="webengine.version",tH="webengine.description";g.SEMRESATTRS_CLOUD_PROVIDER=xB;g.SEMRESATTRS_CLOUD_ACCOUNT_ID=PB;g.SEMRESATTRS_CLOUD_REGION=CB;g.SEMRESATTRS_CLOUD_AVAILABILITY_ZONE=MB;g.SEMRESATTRS_CLOUD_PLATFORM=wB;g.SEMRESATTRS_AWS_ECS_CONTAINER_ARN=LB;g.SEMRESATTRS_AWS_ECS_CLUSTER_ARN=DB;g.SEMRESATTRS_AWS_ECS_LAUNCHTYPE=kB;g.SEMRESATTRS_AWS_ECS_TASK_ARN=UB;g.SEMRESATTRS_AWS_ECS_TASK_FAMILY=$B;g.SEMRESATTRS_AWS_ECS_TASK_REVISION=GB;g.SEMRESATTRS_AWS_EKS_CLUSTER_ARN=VB;g.SEMRESATTRS_AWS_LOG_GROUP_NAMES=BB;g.SEMRESATTRS_AWS_LOG_GROUP_ARNS=jB;g.SEMRESATTRS_AWS_LOG_STREAM_NAMES=HB;g.SEMRESATTRS_AWS_LOG_STREAM_ARNS=FB;g.SEMRESATTRS_CONTAINER_NAME=qB;g.SEMRESATTRS_CONTAINER_ID=zB;g.SEMRESATTRS_CONTAINER_RUNTIME=YB;g.SEMRESATTRS_CONTAINER_IMAGE_NAME=WB;g.SEMRESATTRS_CONTAINER_IMAGE_TAG=KB;g.SEMRESATTRS_DEPLOYMENT_ENVIRONMENT=ZB;g.SEMRESATTRS_DEVICE_ID=JB;g.SEMRESATTRS_DEVICE_MODEL_IDENTIFIER=QB;g.SEMRESATTRS_DEVICE_MODEL_NAME=XB;g.SEMRESATTRS_FAAS_NAME=ej;g.SEMRESATTRS_FAAS_ID=tj;g.SEMRESATTRS_FAAS_VERSION=nj;g.SEMRESATTRS_FAAS_INSTANCE=rj;g.SEMRESATTRS_FAAS_MAX_MEMORY=oj;g.SEMRESATTRS_HOST_ID=sj;g.SEMRESATTRS_HOST_NAME=ij;g.SEMRESATTRS_HOST_TYPE=aj;g.SEMRESATTRS_HOST_ARCH=cj;g.SEMRESATTRS_HOST_IMAGE_NAME=uj;g.SEMRESATTRS_HOST_IMAGE_ID=pj;g.SEMRESATTRS_HOST_IMAGE_VERSION=lj;g.SEMRESATTRS_K8S_CLUSTER_NAME=dj;g.SEMRESATTRS_K8S_NODE_NAME=fj;g.SEMRESATTRS_K8S_NODE_UID=mj;g.SEMRESATTRS_K8S_NAMESPACE_NAME=_j;g.SEMRESATTRS_K8S_POD_UID=hj;g.SEMRESATTRS_K8S_POD_NAME=Ej;g.SEMRESATTRS_K8S_CONTAINER_NAME=Tj;g.SEMRESATTRS_K8S_REPLICASET_UID=gj;g.SEMRESATTRS_K8S_REPLICASET_NAME=Sj;g.SEMRESATTRS_K8S_DEPLOYMENT_UID=Aj;g.SEMRESATTRS_K8S_DEPLOYMENT_NAME=Rj;g.SEMRESATTRS_K8S_STATEFULSET_UID=yj;g.SEMRESATTRS_K8S_STATEFULSET_NAME=bj;g.SEMRESATTRS_K8S_DAEMONSET_UID=Nj;g.SEMRESATTRS_K8S_DAEMONSET_NAME=Oj;g.SEMRESATTRS_K8S_JOB_UID=Ij;g.SEMRESATTRS_K8S_JOB_NAME=vj;g.SEMRESATTRS_K8S_CRONJOB_UID=xj;g.SEMRESATTRS_K8S_CRONJOB_NAME=Pj;g.SEMRESATTRS_OS_TYPE=Cj;g.SEMRESATTRS_OS_DESCRIPTION=Mj;g.SEMRESATTRS_OS_NAME=wj;g.SEMRESATTRS_OS_VERSION=Lj;g.SEMRESATTRS_PROCESS_PID=Dj;g.SEMRESATTRS_PROCESS_EXECUTABLE_NAME=kj;g.SEMRESATTRS_PROCESS_EXECUTABLE_PATH=Uj;g.SEMRESATTRS_PROCESS_COMMAND=$j;g.SEMRESATTRS_PROCESS_COMMAND_LINE=Gj;g.SEMRESATTRS_PROCESS_COMMAND_ARGS=Vj;g.SEMRESATTRS_PROCESS_OWNER=Bj;g.SEMRESATTRS_PROCESS_RUNTIME_NAME=jj;g.SEMRESATTRS_PROCESS_RUNTIME_VERSION=Hj;g.SEMRESATTRS_PROCESS_RUNTIME_DESCRIPTION=Fj;g.SEMRESATTRS_SERVICE_NAME=qj;g.SEMRESATTRS_SERVICE_NAMESPACE=zj;g.SEMRESATTRS_SERVICE_INSTANCE_ID=Yj;g.SEMRESATTRS_SERVICE_VERSION=Wj;g.SEMRESATTRS_TELEMETRY_SDK_NAME=Kj;g.SEMRESATTRS_TELEMETRY_SDK_LANGUAGE=Zj;g.SEMRESATTRS_TELEMETRY_SDK_VERSION=Jj;g.SEMRESATTRS_TELEMETRY_AUTO_VERSION=Qj;g.SEMRESATTRS_WEBENGINE_NAME=Xj;g.SEMRESATTRS_WEBENGINE_VERSION=eH;g.SEMRESATTRS_WEBENGINE_DESCRIPTION=tH;g.SemanticResourceAttributes=(0,Nc.createConstMap)([xB,PB,CB,MB,wB,LB,DB,kB,UB,$B,GB,VB,BB,jB,HB,FB,qB,zB,YB,WB,KB,ZB,JB,QB,XB,ej,tj,nj,rj,oj,sj,ij,aj,cj,uj,pj,lj,dj,fj,mj,_j,hj,Ej,Tj,gj,Sj,Aj,Rj,yj,bj,Nj,Oj,Ij,vj,xj,Pj,Cj,Mj,wj,Lj,Dj,kj,Uj,$j,Gj,Vj,Bj,jj,Hj,Fj,qj,zj,Yj,Wj,Kj,Zj,Jj,Qj,Xj,eH,tH]);var nH="alibaba_cloud",rH="aws",oH="azure",sH="gcp";g.CLOUDPROVIDERVALUES_ALIBABA_CLOUD=nH;g.CLOUDPROVIDERVALUES_AWS=rH;g.CLOUDPROVIDERVALUES_AZURE=oH;g.CLOUDPROVIDERVALUES_GCP=sH;g.CloudProviderValues=(0,Nc.createConstMap)([nH,rH,oH,sH]);var iH="alibaba_cloud_ecs",aH="alibaba_cloud_fc",cH="aws_ec2",uH="aws_ecs",pH="aws_eks",lH="aws_lambda",dH="aws_elastic_beanstalk",fH="azure_vm",mH="azure_container_instances",_H="azure_aks",hH="azure_functions",EH="azure_app_service",TH="gcp_compute_engine",gH="gcp_cloud_run",SH="gcp_kubernetes_engine",AH="gcp_cloud_functions",RH="gcp_app_engine";g.CLOUDPLATFORMVALUES_ALIBABA_CLOUD_ECS=iH;g.CLOUDPLATFORMVALUES_ALIBABA_CLOUD_FC=aH;g.CLOUDPLATFORMVALUES_AWS_EC2=cH;g.CLOUDPLATFORMVALUES_AWS_ECS=uH;g.CLOUDPLATFORMVALUES_AWS_EKS=pH;g.CLOUDPLATFORMVALUES_AWS_LAMBDA=lH;g.CLOUDPLATFORMVALUES_AWS_ELASTIC_BEANSTALK=dH;g.CLOUDPLATFORMVALUES_AZURE_VM=fH;g.CLOUDPLATFORMVALUES_AZURE_CONTAINER_INSTANCES=mH;g.CLOUDPLATFORMVALUES_AZURE_AKS=_H;g.CLOUDPLATFORMVALUES_AZURE_FUNCTIONS=hH;g.CLOUDPLATFORMVALUES_AZURE_APP_SERVICE=EH;g.CLOUDPLATFORMVALUES_GCP_COMPUTE_ENGINE=TH;g.CLOUDPLATFORMVALUES_GCP_CLOUD_RUN=gH;g.CLOUDPLATFORMVALUES_GCP_KUBERNETES_ENGINE=SH;g.CLOUDPLATFORMVALUES_GCP_CLOUD_FUNCTIONS=AH;g.CLOUDPLATFORMVALUES_GCP_APP_ENGINE=RH;g.CloudPlatformValues=(0,Nc.createConstMap)([iH,aH,cH,uH,pH,lH,dH,fH,mH,_H,hH,EH,TH,gH,SH,AH,RH]);var yH="ec2",bH="fargate";g.AWSECSLAUNCHTYPEVALUES_EC2=yH;g.AWSECSLAUNCHTYPEVALUES_FARGATE=bH;g.AwsEcsLaunchtypeValues=(0,Nc.createConstMap)([yH,bH]);var NH="amd64",OH="arm32",IH="arm64",vH="ia64",xH="ppc32",PH="ppc64",CH="x86";g.HOSTARCHVALUES_AMD64=NH;g.HOSTARCHVALUES_ARM32=OH;g.HOSTARCHVALUES_ARM64=IH;g.HOSTARCHVALUES_IA64=vH;g.HOSTARCHVALUES_PPC32=xH;g.HOSTARCHVALUES_PPC64=PH;g.HOSTARCHVALUES_X86=CH;g.HostArchValues=(0,Nc.createConstMap)([NH,OH,IH,vH,xH,PH,CH]);var MH="windows",wH="linux",LH="darwin",DH="freebsd",kH="netbsd",UH="openbsd",$H="dragonflybsd",GH="hpux",VH="aix",BH="solaris",jH="z_os";g.OSTYPEVALUES_WINDOWS=MH;g.OSTYPEVALUES_LINUX=wH;g.OSTYPEVALUES_DARWIN=LH;g.OSTYPEVALUES_FREEBSD=DH;g.OSTYPEVALUES_NETBSD=kH;g.OSTYPEVALUES_OPENBSD=UH;g.OSTYPEVALUES_DRAGONFLYBSD=$H;g.OSTYPEVALUES_HPUX=GH;g.OSTYPEVALUES_AIX=VH;g.OSTYPEVALUES_SOLARIS=BH;g.OSTYPEVALUES_Z_OS=jH;g.OsTypeValues=(0,Nc.createConstMap)([MH,wH,LH,DH,kH,UH,$H,GH,VH,BH,jH]);var HH="cpp",FH="dotnet",qH="erlang",zH="go",YH="java",WH="nodejs",KH="php",ZH="python",JH="ruby",QH="webjs";g.TELEMETRYSDKLANGUAGEVALUES_CPP=HH;g.TELEMETRYSDKLANGUAGEVALUES_DOTNET=FH;g.TELEMETRYSDKLANGUAGEVALUES_ERLANG=qH;g.TELEMETRYSDKLANGUAGEVALUES_GO=zH;g.TELEMETRYSDKLANGUAGEVALUES_JAVA=YH;g.TELEMETRYSDKLANGUAGEVALUES_NODEJS=WH;g.TELEMETRYSDKLANGUAGEVALUES_PHP=KH;g.TELEMETRYSDKLANGUAGEVALUES_PYTHON=ZH;g.TELEMETRYSDKLANGUAGEVALUES_RUBY=JH;g.TELEMETRYSDKLANGUAGEVALUES_WEBJS=QH;g.TelemetrySdkLanguageValues=(0,Nc.createConstMap)([HH,FH,qH,zH,YH,WH,KH,ZH,JH,QH])});var eF=T(Oc=>{"use strict";var Tue=Oc&&Oc.__createBinding||(Object.create?(function(t,e,n,r){r===void 0&&(r=n);var o=Object.getOwnPropertyDescriptor(e,n);(!o||("get"in o?!e.__esModule:o.writable||o.configurable))&&(o={enumerable:!0,get:function(){return e[n]}}),Object.defineProperty(t,r,o)}):(function(t,e,n,r){r===void 0&&(r=n),t[r]=e[n]})),gue=Oc&&Oc.__exportStar||function(t,e){for(var n in t)n!=="default"&&!Object.prototype.hasOwnProperty.call(e,n)&&Tue(e,t,n)};Object.defineProperty(Oc,"__esModule",{value:!0});gue(XH(),Oc)});var tF=T(S=>{"use strict";Object.defineProperty(S,"__esModule",{value:!0});S.ATTR_EXCEPTION_TYPE=S.ATTR_EXCEPTION_STACKTRACE=S.ATTR_EXCEPTION_MESSAGE=S.ATTR_EXCEPTION_ESCAPED=S.ERROR_TYPE_VALUE_OTHER=S.ATTR_ERROR_TYPE=S.DOTNET_GC_HEAP_GENERATION_VALUE_POH=S.DOTNET_GC_HEAP_GENERATION_VALUE_LOH=S.DOTNET_GC_HEAP_GENERATION_VALUE_GEN2=S.DOTNET_GC_HEAP_GENERATION_VALUE_GEN1=S.DOTNET_GC_HEAP_GENERATION_VALUE_GEN0=S.ATTR_DOTNET_GC_HEAP_GENERATION=S.DB_SYSTEM_NAME_VALUE_POSTGRESQL=S.DB_SYSTEM_NAME_VALUE_MYSQL=S.DB_SYSTEM_NAME_VALUE_MICROSOFT_SQL_SERVER=S.DB_SYSTEM_NAME_VALUE_MARIADB=S.ATTR_DB_SYSTEM_NAME=S.ATTR_DB_STORED_PROCEDURE_NAME=S.ATTR_DB_RESPONSE_STATUS_CODE=S.ATTR_DB_QUERY_TEXT=S.ATTR_DB_QUERY_SUMMARY=S.ATTR_DB_OPERATION_NAME=S.ATTR_DB_OPERATION_BATCH_SIZE=S.ATTR_DB_NAMESPACE=S.ATTR_DB_COLLECTION_NAME=S.ATTR_CODE_STACKTRACE=S.ATTR_CODE_LINE_NUMBER=S.ATTR_CODE_FUNCTION_NAME=S.ATTR_CODE_FILE_PATH=S.ATTR_CODE_COLUMN_NUMBER=S.ATTR_CLIENT_PORT=S.ATTR_CLIENT_ADDRESS=S.ATTR_ASPNETCORE_USER_IS_AUTHENTICATED=S.ASPNETCORE_ROUTING_MATCH_STATUS_VALUE_SUCCESS=S.ASPNETCORE_ROUTING_MATCH_STATUS_VALUE_FAILURE=S.ATTR_ASPNETCORE_ROUTING_MATCH_STATUS=S.ATTR_ASPNETCORE_ROUTING_IS_FALLBACK=S.ATTR_ASPNETCORE_REQUEST_IS_UNHANDLED=S.ASPNETCORE_RATE_LIMITING_RESULT_VALUE_REQUEST_CANCELED=S.ASPNETCORE_RATE_LIMITING_RESULT_VALUE_GLOBAL_LIMITER=S.ASPNETCORE_RATE_LIMITING_RESULT_VALUE_ENDPOINT_LIMITER=S.ASPNETCORE_RATE_LIMITING_RESULT_VALUE_ACQUIRED=S.ATTR_ASPNETCORE_RATE_LIMITING_RESULT=S.ATTR_ASPNETCORE_RATE_LIMITING_POLICY=S.ATTR_ASPNETCORE_DIAGNOSTICS_HANDLER_TYPE=S.ASPNETCORE_DIAGNOSTICS_EXCEPTION_RESULT_VALUE_UNHANDLED=S.ASPNETCORE_DIAGNOSTICS_EXCEPTION_RESULT_VALUE_SKIPPED=S.ASPNETCORE_DIAGNOSTICS_EXCEPTION_RESULT_VALUE_HANDLED=S.ASPNETCORE_DIAGNOSTICS_EXCEPTION_RESULT_VALUE_ABORTED=S.ATTR_ASPNETCORE_DIAGNOSTICS_EXCEPTION_RESULT=void 0;S.OTEL_STATUS_CODE_VALUE_ERROR=S.ATTR_OTEL_STATUS_CODE=S.ATTR_OTEL_SCOPE_VERSION=S.ATTR_OTEL_SCOPE_NAME=S.NETWORK_TYPE_VALUE_IPV6=S.NETWORK_TYPE_VALUE_IPV4=S.ATTR_NETWORK_TYPE=S.NETWORK_TRANSPORT_VALUE_UNIX=S.NETWORK_TRANSPORT_VALUE_UDP=S.NETWORK_TRANSPORT_VALUE_TCP=S.NETWORK_TRANSPORT_VALUE_QUIC=S.NETWORK_TRANSPORT_VALUE_PIPE=S.ATTR_NETWORK_TRANSPORT=S.ATTR_NETWORK_PROTOCOL_VERSION=S.ATTR_NETWORK_PROTOCOL_NAME=S.ATTR_NETWORK_PEER_PORT=S.ATTR_NETWORK_PEER_ADDRESS=S.ATTR_NETWORK_LOCAL_PORT=S.ATTR_NETWORK_LOCAL_ADDRESS=S.JVM_THREAD_STATE_VALUE_WAITING=S.JVM_THREAD_STATE_VALUE_TIMED_WAITING=S.JVM_THREAD_STATE_VALUE_TERMINATED=S.JVM_THREAD_STATE_VALUE_RUNNABLE=S.JVM_THREAD_STATE_VALUE_NEW=S.JVM_THREAD_STATE_VALUE_BLOCKED=S.ATTR_JVM_THREAD_STATE=S.ATTR_JVM_THREAD_DAEMON=S.JVM_MEMORY_TYPE_VALUE_NON_HEAP=S.JVM_MEMORY_TYPE_VALUE_HEAP=S.ATTR_JVM_MEMORY_TYPE=S.ATTR_JVM_MEMORY_POOL_NAME=S.ATTR_JVM_GC_NAME=S.ATTR_JVM_GC_ACTION=S.ATTR_HTTP_ROUTE=S.ATTR_HTTP_RESPONSE_STATUS_CODE=S.ATTR_HTTP_RESPONSE_HEADER=S.ATTR_HTTP_REQUEST_RESEND_COUNT=S.ATTR_HTTP_REQUEST_METHOD_ORIGINAL=S.HTTP_REQUEST_METHOD_VALUE_TRACE=S.HTTP_REQUEST_METHOD_VALUE_PUT=S.HTTP_REQUEST_METHOD_VALUE_POST=S.HTTP_REQUEST_METHOD_VALUE_PATCH=S.HTTP_REQUEST_METHOD_VALUE_OPTIONS=S.HTTP_REQUEST_METHOD_VALUE_HEAD=S.HTTP_REQUEST_METHOD_VALUE_GET=S.HTTP_REQUEST_METHOD_VALUE_DELETE=S.HTTP_REQUEST_METHOD_VALUE_CONNECT=S.HTTP_REQUEST_METHOD_VALUE_OTHER=S.ATTR_HTTP_REQUEST_METHOD=S.ATTR_HTTP_REQUEST_HEADER=void 0;S.ATTR_USER_AGENT_ORIGINAL=S.ATTR_URL_SCHEME=S.ATTR_URL_QUERY=S.ATTR_URL_PATH=S.ATTR_URL_FULL=S.ATTR_URL_FRAGMENT=S.ATTR_TELEMETRY_SDK_VERSION=S.ATTR_TELEMETRY_SDK_NAME=S.TELEMETRY_SDK_LANGUAGE_VALUE_WEBJS=S.TELEMETRY_SDK_LANGUAGE_VALUE_SWIFT=S.TELEMETRY_SDK_LANGUAGE_VALUE_RUST=S.TELEMETRY_SDK_LANGUAGE_VALUE_RUBY=S.TELEMETRY_SDK_LANGUAGE_VALUE_PYTHON=S.TELEMETRY_SDK_LANGUAGE_VALUE_PHP=S.TELEMETRY_SDK_LANGUAGE_VALUE_NODEJS=S.TELEMETRY_SDK_LANGUAGE_VALUE_JAVA=S.TELEMETRY_SDK_LANGUAGE_VALUE_GO=S.TELEMETRY_SDK_LANGUAGE_VALUE_ERLANG=S.TELEMETRY_SDK_LANGUAGE_VALUE_DOTNET=S.TELEMETRY_SDK_LANGUAGE_VALUE_CPP=S.ATTR_TELEMETRY_SDK_LANGUAGE=S.SIGNALR_TRANSPORT_VALUE_WEB_SOCKETS=S.SIGNALR_TRANSPORT_VALUE_SERVER_SENT_EVENTS=S.SIGNALR_TRANSPORT_VALUE_LONG_POLLING=S.ATTR_SIGNALR_TRANSPORT=S.SIGNALR_CONNECTION_STATUS_VALUE_TIMEOUT=S.SIGNALR_CONNECTION_STATUS_VALUE_NORMAL_CLOSURE=S.SIGNALR_CONNECTION_STATUS_VALUE_APP_SHUTDOWN=S.ATTR_SIGNALR_CONNECTION_STATUS=S.ATTR_SERVICE_VERSION=S.ATTR_SERVICE_NAME=S.ATTR_SERVER_PORT=S.ATTR_SERVER_ADDRESS=S.ATTR_OTEL_STATUS_DESCRIPTION=S.OTEL_STATUS_CODE_VALUE_OK=void 0;S.ATTR_ASPNETCORE_DIAGNOSTICS_EXCEPTION_RESULT="aspnetcore.diagnostics.exception.result";S.ASPNETCORE_DIAGNOSTICS_EXCEPTION_RESULT_VALUE_ABORTED="aborted";S.ASPNETCORE_DIAGNOSTICS_EXCEPTION_RESULT_VALUE_HANDLED="handled";S.ASPNETCORE_DIAGNOSTICS_EXCEPTION_RESULT_VALUE_SKIPPED="skipped";S.ASPNETCORE_DIAGNOSTICS_EXCEPTION_RESULT_VALUE_UNHANDLED="unhandled";S.ATTR_ASPNETCORE_DIAGNOSTICS_HANDLER_TYPE="aspnetcore.diagnostics.handler.type";S.ATTR_ASPNETCORE_RATE_LIMITING_POLICY="aspnetcore.rate_limiting.policy";S.ATTR_ASPNETCORE_RATE_LIMITING_RESULT="aspnetcore.rate_limiting.result";S.ASPNETCORE_RATE_LIMITING_RESULT_VALUE_ACQUIRED="acquired";S.ASPNETCORE_RATE_LIMITING_RESULT_VALUE_ENDPOINT_LIMITER="endpoint_limiter";S.ASPNETCORE_RATE_LIMITING_RESULT_VALUE_GLOBAL_LIMITER="global_limiter";S.ASPNETCORE_RATE_LIMITING_RESULT_VALUE_REQUEST_CANCELED="request_canceled";S.ATTR_ASPNETCORE_REQUEST_IS_UNHANDLED="aspnetcore.request.is_unhandled";S.ATTR_ASPNETCORE_ROUTING_IS_FALLBACK="aspnetcore.routing.is_fallback";S.ATTR_ASPNETCORE_ROUTING_MATCH_STATUS="aspnetcore.routing.match_status";S.ASPNETCORE_ROUTING_MATCH_STATUS_VALUE_FAILURE="failure";S.ASPNETCORE_ROUTING_MATCH_STATUS_VALUE_SUCCESS="success";S.ATTR_ASPNETCORE_USER_IS_AUTHENTICATED="aspnetcore.user.is_authenticated";S.ATTR_CLIENT_ADDRESS="client.address";S.ATTR_CLIENT_PORT="client.port";S.ATTR_CODE_COLUMN_NUMBER="code.column.number";S.ATTR_CODE_FILE_PATH="code.file.path";S.ATTR_CODE_FUNCTION_NAME="code.function.name";S.ATTR_CODE_LINE_NUMBER="code.line.number";S.ATTR_CODE_STACKTRACE="code.stacktrace";S.ATTR_DB_COLLECTION_NAME="db.collection.name";S.ATTR_DB_NAMESPACE="db.namespace";S.ATTR_DB_OPERATION_BATCH_SIZE="db.operation.batch.size";S.ATTR_DB_OPERATION_NAME="db.operation.name";S.ATTR_DB_QUERY_SUMMARY="db.query.summary";S.ATTR_DB_QUERY_TEXT="db.query.text";S.ATTR_DB_RESPONSE_STATUS_CODE="db.response.status_code";S.ATTR_DB_STORED_PROCEDURE_NAME="db.stored_procedure.name";S.ATTR_DB_SYSTEM_NAME="db.system.name";S.DB_SYSTEM_NAME_VALUE_MARIADB="mariadb";S.DB_SYSTEM_NAME_VALUE_MICROSOFT_SQL_SERVER="microsoft.sql_server";S.DB_SYSTEM_NAME_VALUE_MYSQL="mysql";S.DB_SYSTEM_NAME_VALUE_POSTGRESQL="postgresql";S.ATTR_DOTNET_GC_HEAP_GENERATION="dotnet.gc.heap.generation";S.DOTNET_GC_HEAP_GENERATION_VALUE_GEN0="gen0";S.DOTNET_GC_HEAP_GENERATION_VALUE_GEN1="gen1";S.DOTNET_GC_HEAP_GENERATION_VALUE_GEN2="gen2";S.DOTNET_GC_HEAP_GENERATION_VALUE_LOH="loh";S.DOTNET_GC_HEAP_GENERATION_VALUE_POH="poh";S.ATTR_ERROR_TYPE="error.type";S.ERROR_TYPE_VALUE_OTHER="_OTHER";S.ATTR_EXCEPTION_ESCAPED="exception.escaped";S.ATTR_EXCEPTION_MESSAGE="exception.message";S.ATTR_EXCEPTION_STACKTRACE="exception.stacktrace";S.ATTR_EXCEPTION_TYPE="exception.type";var Sue=t=>`http.request.header.${t}`;S.ATTR_HTTP_REQUEST_HEADER=Sue;S.ATTR_HTTP_REQUEST_METHOD="http.request.method";S.HTTP_REQUEST_METHOD_VALUE_OTHER="_OTHER";S.HTTP_REQUEST_METHOD_VALUE_CONNECT="CONNECT";S.HTTP_REQUEST_METHOD_VALUE_DELETE="DELETE";S.HTTP_REQUEST_METHOD_VALUE_GET="GET";S.HTTP_REQUEST_METHOD_VALUE_HEAD="HEAD";S.HTTP_REQUEST_METHOD_VALUE_OPTIONS="OPTIONS";S.HTTP_REQUEST_METHOD_VALUE_PATCH="PATCH";S.HTTP_REQUEST_METHOD_VALUE_POST="POST";S.HTTP_REQUEST_METHOD_VALUE_PUT="PUT";S.HTTP_REQUEST_METHOD_VALUE_TRACE="TRACE";S.ATTR_HTTP_REQUEST_METHOD_ORIGINAL="http.request.method_original";S.ATTR_HTTP_REQUEST_RESEND_COUNT="http.request.resend_count";var Aue=t=>`http.response.header.${t}`;S.ATTR_HTTP_RESPONSE_HEADER=Aue;S.ATTR_HTTP_RESPONSE_STATUS_CODE="http.response.status_code";S.ATTR_HTTP_ROUTE="http.route";S.ATTR_JVM_GC_ACTION="jvm.gc.action";S.ATTR_JVM_GC_NAME="jvm.gc.name";S.ATTR_JVM_MEMORY_POOL_NAME="jvm.memory.pool.name";S.ATTR_JVM_MEMORY_TYPE="jvm.memory.type";S.JVM_MEMORY_TYPE_VALUE_HEAP="heap";S.JVM_MEMORY_TYPE_VALUE_NON_HEAP="non_heap";S.ATTR_JVM_THREAD_DAEMON="jvm.thread.daemon";S.ATTR_JVM_THREAD_STATE="jvm.thread.state";S.JVM_THREAD_STATE_VALUE_BLOCKED="blocked";S.JVM_THREAD_STATE_VALUE_NEW="new";S.JVM_THREAD_STATE_VALUE_RUNNABLE="runnable";S.JVM_THREAD_STATE_VALUE_TERMINATED="terminated";S.JVM_THREAD_STATE_VALUE_TIMED_WAITING="timed_waiting";S.JVM_THREAD_STATE_VALUE_WAITING="waiting";S.ATTR_NETWORK_LOCAL_ADDRESS="network.local.address";S.ATTR_NETWORK_LOCAL_PORT="network.local.port";S.ATTR_NETWORK_PEER_ADDRESS="network.peer.address";S.ATTR_NETWORK_PEER_PORT="network.peer.port";S.ATTR_NETWORK_PROTOCOL_NAME="network.protocol.name";S.ATTR_NETWORK_PROTOCOL_VERSION="network.protocol.version";S.ATTR_NETWORK_TRANSPORT="network.transport";S.NETWORK_TRANSPORT_VALUE_PIPE="pipe";S.NETWORK_TRANSPORT_VALUE_QUIC="quic";S.NETWORK_TRANSPORT_VALUE_TCP="tcp";S.NETWORK_TRANSPORT_VALUE_UDP="udp";S.NETWORK_TRANSPORT_VALUE_UNIX="unix";S.ATTR_NETWORK_TYPE="network.type";S.NETWORK_TYPE_VALUE_IPV4="ipv4";S.NETWORK_TYPE_VALUE_IPV6="ipv6";S.ATTR_OTEL_SCOPE_NAME="otel.scope.name";S.ATTR_OTEL_SCOPE_VERSION="otel.scope.version";S.ATTR_OTEL_STATUS_CODE="otel.status_code";S.OTEL_STATUS_CODE_VALUE_ERROR="ERROR";S.OTEL_STATUS_CODE_VALUE_OK="OK";S.ATTR_OTEL_STATUS_DESCRIPTION="otel.status_description";S.ATTR_SERVER_ADDRESS="server.address";S.ATTR_SERVER_PORT="server.port";S.ATTR_SERVICE_NAME="service.name";S.ATTR_SERVICE_VERSION="service.version";S.ATTR_SIGNALR_CONNECTION_STATUS="signalr.connection.status";S.SIGNALR_CONNECTION_STATUS_VALUE_APP_SHUTDOWN="app_shutdown";S.SIGNALR_CONNECTION_STATUS_VALUE_NORMAL_CLOSURE="normal_closure";S.SIGNALR_CONNECTION_STATUS_VALUE_TIMEOUT="timeout";S.ATTR_SIGNALR_TRANSPORT="signalr.transport";S.SIGNALR_TRANSPORT_VALUE_LONG_POLLING="long_polling";S.SIGNALR_TRANSPORT_VALUE_SERVER_SENT_EVENTS="server_sent_events";S.SIGNALR_TRANSPORT_VALUE_WEB_SOCKETS="web_sockets";S.ATTR_TELEMETRY_SDK_LANGUAGE="telemetry.sdk.language";S.TELEMETRY_SDK_LANGUAGE_VALUE_CPP="cpp";S.TELEMETRY_SDK_LANGUAGE_VALUE_DOTNET="dotnet";S.TELEMETRY_SDK_LANGUAGE_VALUE_ERLANG="erlang";S.TELEMETRY_SDK_LANGUAGE_VALUE_GO="go";S.TELEMETRY_SDK_LANGUAGE_VALUE_JAVA="java";S.TELEMETRY_SDK_LANGUAGE_VALUE_NODEJS="nodejs";S.TELEMETRY_SDK_LANGUAGE_VALUE_PHP="php";S.TELEMETRY_SDK_LANGUAGE_VALUE_PYTHON="python";S.TELEMETRY_SDK_LANGUAGE_VALUE_RUBY="ruby";S.TELEMETRY_SDK_LANGUAGE_VALUE_RUST="rust";S.TELEMETRY_SDK_LANGUAGE_VALUE_SWIFT="swift";S.TELEMETRY_SDK_LANGUAGE_VALUE_WEBJS="webjs";S.ATTR_TELEMETRY_SDK_NAME="telemetry.sdk.name";S.ATTR_TELEMETRY_SDK_VERSION="telemetry.sdk.version";S.ATTR_URL_FRAGMENT="url.fragment";S.ATTR_URL_FULL="url.full";S.ATTR_URL_PATH="url.path";S.ATTR_URL_QUERY="url.query";S.ATTR_URL_SCHEME="url.scheme";S.ATTR_USER_AGENT_ORIGINAL="user_agent.original"});var nF=T(C=>{"use strict";Object.defineProperty(C,"__esModule",{value:!0});C.METRIC_SIGNALR_SERVER_ACTIVE_CONNECTIONS=C.METRIC_KESTREL_UPGRADED_CONNECTIONS=C.METRIC_KESTREL_TLS_HANDSHAKE_DURATION=C.METRIC_KESTREL_REJECTED_CONNECTIONS=C.METRIC_KESTREL_QUEUED_REQUESTS=C.METRIC_KESTREL_QUEUED_CONNECTIONS=C.METRIC_KESTREL_CONNECTION_DURATION=C.METRIC_KESTREL_ACTIVE_TLS_HANDSHAKES=C.METRIC_KESTREL_ACTIVE_CONNECTIONS=C.METRIC_JVM_THREAD_COUNT=C.METRIC_JVM_MEMORY_USED_AFTER_LAST_GC=C.METRIC_JVM_MEMORY_USED=C.METRIC_JVM_MEMORY_LIMIT=C.METRIC_JVM_MEMORY_COMMITTED=C.METRIC_JVM_GC_DURATION=C.METRIC_JVM_CPU_TIME=C.METRIC_JVM_CPU_RECENT_UTILIZATION=C.METRIC_JVM_CPU_COUNT=C.METRIC_JVM_CLASS_UNLOADED=C.METRIC_JVM_CLASS_LOADED=C.METRIC_JVM_CLASS_COUNT=C.METRIC_HTTP_SERVER_REQUEST_DURATION=C.METRIC_HTTP_CLIENT_REQUEST_DURATION=C.METRIC_DOTNET_TIMER_COUNT=C.METRIC_DOTNET_THREAD_POOL_WORK_ITEM_COUNT=C.METRIC_DOTNET_THREAD_POOL_THREAD_COUNT=C.METRIC_DOTNET_THREAD_POOL_QUEUE_LENGTH=C.METRIC_DOTNET_PROCESS_MEMORY_WORKING_SET=C.METRIC_DOTNET_PROCESS_CPU_TIME=C.METRIC_DOTNET_PROCESS_CPU_COUNT=C.METRIC_DOTNET_MONITOR_LOCK_CONTENTIONS=C.METRIC_DOTNET_JIT_COMPILED_METHODS=C.METRIC_DOTNET_JIT_COMPILED_IL_SIZE=C.METRIC_DOTNET_JIT_COMPILATION_TIME=C.METRIC_DOTNET_GC_PAUSE_TIME=C.METRIC_DOTNET_GC_LAST_COLLECTION_MEMORY_COMMITTED_SIZE=C.METRIC_DOTNET_GC_LAST_COLLECTION_HEAP_SIZE=C.METRIC_DOTNET_GC_LAST_COLLECTION_HEAP_FRAGMENTATION_SIZE=C.METRIC_DOTNET_GC_HEAP_TOTAL_ALLOCATED=C.METRIC_DOTNET_GC_COLLECTIONS=C.METRIC_DOTNET_EXCEPTIONS=C.METRIC_DOTNET_ASSEMBLY_COUNT=C.METRIC_DB_CLIENT_OPERATION_DURATION=C.METRIC_ASPNETCORE_ROUTING_MATCH_ATTEMPTS=C.METRIC_ASPNETCORE_RATE_LIMITING_REQUESTS=C.METRIC_ASPNETCORE_RATE_LIMITING_REQUEST_LEASE_DURATION=C.METRIC_ASPNETCORE_RATE_LIMITING_REQUEST_TIME_IN_QUEUE=C.METRIC_ASPNETCORE_RATE_LIMITING_QUEUED_REQUESTS=C.METRIC_ASPNETCORE_RATE_LIMITING_ACTIVE_REQUEST_LEASES=C.METRIC_ASPNETCORE_DIAGNOSTICS_EXCEPTIONS=void 0;C.METRIC_SIGNALR_SERVER_CONNECTION_DURATION=void 0;C.METRIC_ASPNETCORE_DIAGNOSTICS_EXCEPTIONS="aspnetcore.diagnostics.exceptions";C.METRIC_ASPNETCORE_RATE_LIMITING_ACTIVE_REQUEST_LEASES="aspnetcore.rate_limiting.active_request_leases";C.METRIC_ASPNETCORE_RATE_LIMITING_QUEUED_REQUESTS="aspnetcore.rate_limiting.queued_requests";C.METRIC_ASPNETCORE_RATE_LIMITING_REQUEST_TIME_IN_QUEUE="aspnetcore.rate_limiting.request.time_in_queue";C.METRIC_ASPNETCORE_RATE_LIMITING_REQUEST_LEASE_DURATION="aspnetcore.rate_limiting.request_lease.duration";C.METRIC_ASPNETCORE_RATE_LIMITING_REQUESTS="aspnetcore.rate_limiting.requests";C.METRIC_ASPNETCORE_ROUTING_MATCH_ATTEMPTS="aspnetcore.routing.match_attempts";C.METRIC_DB_CLIENT_OPERATION_DURATION="db.client.operation.duration";C.METRIC_DOTNET_ASSEMBLY_COUNT="dotnet.assembly.count";C.METRIC_DOTNET_EXCEPTIONS="dotnet.exceptions";C.METRIC_DOTNET_GC_COLLECTIONS="dotnet.gc.collections";C.METRIC_DOTNET_GC_HEAP_TOTAL_ALLOCATED="dotnet.gc.heap.total_allocated";C.METRIC_DOTNET_GC_LAST_COLLECTION_HEAP_FRAGMENTATION_SIZE="dotnet.gc.last_collection.heap.fragmentation.size";C.METRIC_DOTNET_GC_LAST_COLLECTION_HEAP_SIZE="dotnet.gc.last_collection.heap.size";C.METRIC_DOTNET_GC_LAST_COLLECTION_MEMORY_COMMITTED_SIZE="dotnet.gc.last_collection.memory.committed_size";C.METRIC_DOTNET_GC_PAUSE_TIME="dotnet.gc.pause.time";C.METRIC_DOTNET_JIT_COMPILATION_TIME="dotnet.jit.compilation.time";C.METRIC_DOTNET_JIT_COMPILED_IL_SIZE="dotnet.jit.compiled_il.size";C.METRIC_DOTNET_JIT_COMPILED_METHODS="dotnet.jit.compiled_methods";C.METRIC_DOTNET_MONITOR_LOCK_CONTENTIONS="dotnet.monitor.lock_contentions";C.METRIC_DOTNET_PROCESS_CPU_COUNT="dotnet.process.cpu.count";C.METRIC_DOTNET_PROCESS_CPU_TIME="dotnet.process.cpu.time";C.METRIC_DOTNET_PROCESS_MEMORY_WORKING_SET="dotnet.process.memory.working_set";C.METRIC_DOTNET_THREAD_POOL_QUEUE_LENGTH="dotnet.thread_pool.queue.length";C.METRIC_DOTNET_THREAD_POOL_THREAD_COUNT="dotnet.thread_pool.thread.count";C.METRIC_DOTNET_THREAD_POOL_WORK_ITEM_COUNT="dotnet.thread_pool.work_item.count";C.METRIC_DOTNET_TIMER_COUNT="dotnet.timer.count";C.METRIC_HTTP_CLIENT_REQUEST_DURATION="http.client.request.duration";C.METRIC_HTTP_SERVER_REQUEST_DURATION="http.server.request.duration";C.METRIC_JVM_CLASS_COUNT="jvm.class.count";C.METRIC_JVM_CLASS_LOADED="jvm.class.loaded";C.METRIC_JVM_CLASS_UNLOADED="jvm.class.unloaded";C.METRIC_JVM_CPU_COUNT="jvm.cpu.count";C.METRIC_JVM_CPU_RECENT_UTILIZATION="jvm.cpu.recent_utilization";C.METRIC_JVM_CPU_TIME="jvm.cpu.time";C.METRIC_JVM_GC_DURATION="jvm.gc.duration";C.METRIC_JVM_MEMORY_COMMITTED="jvm.memory.committed";C.METRIC_JVM_MEMORY_LIMIT="jvm.memory.limit";C.METRIC_JVM_MEMORY_USED="jvm.memory.used";C.METRIC_JVM_MEMORY_USED_AFTER_LAST_GC="jvm.memory.used_after_last_gc";C.METRIC_JVM_THREAD_COUNT="jvm.thread.count";C.METRIC_KESTREL_ACTIVE_CONNECTIONS="kestrel.active_connections";C.METRIC_KESTREL_ACTIVE_TLS_HANDSHAKES="kestrel.active_tls_handshakes";C.METRIC_KESTREL_CONNECTION_DURATION="kestrel.connection.duration";C.METRIC_KESTREL_QUEUED_CONNECTIONS="kestrel.queued_connections";C.METRIC_KESTREL_QUEUED_REQUESTS="kestrel.queued_requests";C.METRIC_KESTREL_REJECTED_CONNECTIONS="kestrel.rejected_connections";C.METRIC_KESTREL_TLS_HANDSHAKE_DURATION="kestrel.tls_handshake.duration";C.METRIC_KESTREL_UPGRADED_CONNECTIONS="kestrel.upgraded_connections";C.METRIC_SIGNALR_SERVER_ACTIVE_CONNECTIONS="signalr.server.active_connections";C.METRIC_SIGNALR_SERVER_CONNECTION_DURATION="signalr.server.connection.duration"});var rF=T(NE=>{"use strict";Object.defineProperty(NE,"__esModule",{value:!0});NE.EVENT_EXCEPTION=void 0;NE.EVENT_EXCEPTION="exception"});var Qe=T(Ho=>{"use strict";var Rue=Ho&&Ho.__createBinding||(Object.create?(function(t,e,n,r){r===void 0&&(r=n);var o=Object.getOwnPropertyDescriptor(e,n);(!o||("get"in o?!e.__esModule:o.writable||o.configurable))&&(o={enumerable:!0,get:function(){return e[n]}}),Object.defineProperty(t,r,o)}):(function(t,e,n,r){r===void 0&&(r=n),t[r]=e[n]})),of=Ho&&Ho.__exportStar||function(t,e){for(var n in t)n!=="default"&&!Object.prototype.hasOwnProperty.call(e,n)&&Rue(e,t,n)};Object.defineProperty(Ho,"__esModule",{value:!0});of(vB(),Ho);of(eF(),Ho);of(tF(),Ho);of(nF(),Ho);of(rF(),Ho)});var oF=T(OE=>{"use strict";Object.defineProperty(OE,"__esModule",{value:!0});OE.ATTR_PROCESS_RUNTIME_NAME=void 0;OE.ATTR_PROCESS_RUNTIME_NAME="process.runtime.name"});var sF=T(vE=>{"use strict";Object.defineProperty(vE,"__esModule",{value:!0});vE.SDK_INFO=void 0;var yue=UU(),IE=Qe(),bue=oF();vE.SDK_INFO={[IE.ATTR_TELEMETRY_SDK_NAME]:"opentelemetry",[bue.ATTR_PROCESS_RUNTIME_NAME]:"node",[IE.ATTR_TELEMETRY_SDK_LANGUAGE]:IE.TELEMETRY_SDK_LANGUAGE_VALUE_NODEJS,[IE.ATTR_TELEMETRY_SDK_VERSION]:yue.VERSION}});var iF=T(qn=>{"use strict";Object.defineProperty(qn,"__esModule",{value:!0});qn.SDK_INFO=qn.otperformance=qn._globalThis=qn.getStringListFromEnv=qn.getNumberFromEnv=qn.getBooleanFromEnv=qn.getStringFromEnv=void 0;var xE=LU();Object.defineProperty(qn,"getStringFromEnv",{enumerable:!0,get:function(){return xE.getStringFromEnv}});Object.defineProperty(qn,"getBooleanFromEnv",{enumerable:!0,get:function(){return xE.getBooleanFromEnv}});Object.defineProperty(qn,"getNumberFromEnv",{enumerable:!0,get:function(){return xE.getNumberFromEnv}});Object.defineProperty(qn,"getStringListFromEnv",{enumerable:!0,get:function(){return xE.getStringListFromEnv}});var Nue=DU();Object.defineProperty(qn,"_globalThis",{enumerable:!0,get:function(){return Nue._globalThis}});var Oue=kU();Object.defineProperty(qn,"otperformance",{enumerable:!0,get:function(){return Oue.otperformance}});var Iue=sF();Object.defineProperty(qn,"SDK_INFO",{enumerable:!0,get:function(){return Iue.SDK_INFO}})});var GN=T(zn=>{"use strict";Object.defineProperty(zn,"__esModule",{value:!0});zn.getStringListFromEnv=zn.getNumberFromEnv=zn.getStringFromEnv=zn.getBooleanFromEnv=zn.otperformance=zn._globalThis=zn.SDK_INFO=void 0;var Ic=iF();Object.defineProperty(zn,"SDK_INFO",{enumerable:!0,get:function(){return Ic.SDK_INFO}});Object.defineProperty(zn,"_globalThis",{enumerable:!0,get:function(){return Ic._globalThis}});Object.defineProperty(zn,"otperformance",{enumerable:!0,get:function(){return Ic.otperformance}});Object.defineProperty(zn,"getBooleanFromEnv",{enumerable:!0,get:function(){return Ic.getBooleanFromEnv}});Object.defineProperty(zn,"getStringFromEnv",{enumerable:!0,get:function(){return Ic.getStringFromEnv}});Object.defineProperty(zn,"getNumberFromEnv",{enumerable:!0,get:function(){return Ic.getNumberFromEnv}});Object.defineProperty(zn,"getStringListFromEnv",{enumerable:!0,get:function(){return Ic.getStringListFromEnv}})});var pF=T(ct=>{"use strict";Object.defineProperty(ct,"__esModule",{value:!0});ct.addHrTimes=ct.isTimeInput=ct.isTimeInputHrTime=ct.hrTimeToMicroseconds=ct.hrTimeToMilliseconds=ct.hrTimeToNanoseconds=ct.hrTimeToTimeStamp=ct.hrTimeDuration=ct.timeInputToHrTime=ct.hrTime=ct.getTimeOrigin=ct.millisToHrTime=void 0;var VN=GN(),aF=9,vue=6,xue=Math.pow(10,vue),PE=Math.pow(10,aF);function sf(t){let e=t/1e3,n=Math.trunc(e),r=Math.round(t%1e3*xue);return[n,r]}ct.millisToHrTime=sf;function BN(){let t=VN.otperformance.timeOrigin;if(typeof t!="number"){let e=VN.otperformance;t=e.timing&&e.timing.fetchStart}return t}ct.getTimeOrigin=BN;function cF(t){let e=sf(BN()),n=sf(typeof t=="number"?t:VN.otperformance.now());return uF(e,n)}ct.hrTime=cF;function Pue(t){if(jN(t))return t;if(typeof t=="number")return t<BN()?cF(t):sf(t);if(t instanceof Date)return sf(t.getTime());throw TypeError("Invalid input type")}ct.timeInputToHrTime=Pue;function Cue(t,e){let n=e[0]-t[0],r=e[1]-t[1];return r<0&&(n-=1,r+=PE),[n,r]}ct.hrTimeDuration=Cue;function Mue(t){let e=aF,n=`${"0".repeat(e)}${t[1]}Z`,r=n.substring(n.length-e-1);return new Date(t[0]*1e3).toISOString().replace("000Z",r)}ct.hrTimeToTimeStamp=Mue;function wue(t){return t[0]*PE+t[1]}ct.hrTimeToNanoseconds=wue;function Lue(t){return t[0]*1e3+t[1]/1e6}ct.hrTimeToMilliseconds=Lue;function Due(t){return t[0]*1e6+t[1]/1e3}ct.hrTimeToMicroseconds=Due;function jN(t){return Array.isArray(t)&&t.length===2&&typeof t[0]=="number"&&typeof t[1]=="number"}ct.isTimeInputHrTime=jN;function kue(t){return jN(t)||typeof t=="number"||t instanceof Date}ct.isTimeInput=kue;function uF(t,e){let n=[t[0]+e[0],t[1]+e[1]];return n[1]>=PE&&(n[1]-=PE,n[0]+=1),n}ct.addHrTimes=uF});var lF=T(CE=>{"use strict";Object.defineProperty(CE,"__esModule",{value:!0});CE.unrefTimer=void 0;function Uue(t){typeof t!="number"&&t.unref()}CE.unrefTimer=Uue});var dF=T(af=>{"use strict";Object.defineProperty(af,"__esModule",{value:!0});af.ExportResultCode=void 0;var $ue;(function(t){t[t.SUCCESS=0]="SUCCESS",t[t.FAILED=1]="FAILED"})($ue=af.ExportResultCode||(af.ExportResultCode={}))});var mF=T(ME=>{"use strict";Object.defineProperty(ME,"__esModule",{value:!0});ME.CompositePropagator=void 0;var fF=U(),HN=class{_propagators;_fields;constructor(e={}){this._propagators=e.propagators??[],this._fields=Array.from(new Set(this._propagators.map(n=>typeof n.fields=="function"?n.fields():[]).reduce((n,r)=>n.concat(r),[])))}inject(e,n,r){for(let o of this._propagators)try{o.inject(e,n,r)}catch(s){fF.diag.warn(`Failed to inject with ${o.constructor.name}. Err: ${s.message}`)}}extract(e,n,r){return this._propagators.reduce((o,s)=>{try{return s.extract(o,n,r)}catch(i){fF.diag.warn(`Failed to extract with ${s.constructor.name}. Err: ${i.message}`)}return o},e)}fields(){return this._fields.slice()}};ME.CompositePropagator=HN});var _F=T(cp=>{"use strict";Object.defineProperty(cp,"__esModule",{value:!0});cp.validateValue=cp.validateKey=void 0;var FN="[_0-9a-z-*/]",Gue=`[a-z]${FN}{0,255}`,Vue=`[a-z0-9]${FN}{0,240}@[a-z]${FN}{0,13}`,Bue=new RegExp(`^(?:${Gue}|${Vue})$`),jue=/^[ -~]{0,255}[!-~]$/,Hue=/,|=/;function Fue(t){return Bue.test(t)}cp.validateKey=Fue;function que(t){return jue.test(t)&&!Hue.test(t)}cp.validateValue=que});var zN=T(wE=>{"use strict";Object.defineProperty(wE,"__esModule",{value:!0});wE.TraceState=void 0;var hF=_F(),EF=32,zue=512,TF=",",gF="=",qN=class t{_internalState=new Map;constructor(e){e&&this._parse(e)}set(e,n){let r=this._clone();return r._internalState.has(e)&&r._internalState.delete(e),r._internalState.set(e,n),r}unset(e){let n=this._clone();return n._internalState.delete(e),n}get(e){return this._internalState.get(e)}serialize(){return this._keys().reduce((e,n)=>(e.push(n+gF+this.get(n)),e),[]).join(TF)}_parse(e){e.length>zue||(this._internalState=e.split(TF).reverse().reduce((n,r)=>{let o=r.trim(),s=o.indexOf(gF);if(s!==-1){let i=o.slice(0,s),a=o.slice(s+1,r.length);(0,hF.validateKey)(i)&&(0,hF.validateValue)(a)&&n.set(i,a)}return n},new Map),this._internalState.size>EF&&(this._internalState=new Map(Array.from(this._internalState.entries()).reverse().slice(0,EF))))}_keys(){return Array.from(this._internalState.keys()).reverse()}_clone(){let e=new t;return e._internalState=new Map(this._internalState),e}};wE.TraceState=qN});var AF=T(Yn=>{"use strict";Object.defineProperty(Yn,"__esModule",{value:!0});Yn.W3CTraceContextPropagator=Yn.parseTraceParent=Yn.TRACE_STATE_HEADER=Yn.TRACE_PARENT_HEADER=void 0;var LE=U(),Yue=rf(),Wue=zN();Yn.TRACE_PARENT_HEADER="traceparent";Yn.TRACE_STATE_HEADER="tracestate";var Kue="00",Zue="(?!ff)[\\da-f]{2}",Jue="(?![0]{32})[\\da-f]{32}",Que="(?![0]{16})[\\da-f]{16}",Xue="[\\da-f]{2}",epe=new RegExp(`^\\s?(${Zue})-(${Jue})-(${Que})-(${Xue})(-.*)?\\s?$`);function SF(t){let e=epe.exec(t);return!e||e[1]==="00"&&e[5]?null:{traceId:e[2],spanId:e[3],traceFlags:parseInt(e[4],16)}}Yn.parseTraceParent=SF;var YN=class{inject(e,n,r){let o=LE.trace.getSpanContext(e);if(!o||(0,Yue.isTracingSuppressed)(e)||!(0,LE.isSpanContextValid)(o))return;let s=`${Kue}-${o.traceId}-${o.spanId}-0${Number(o.traceFlags||LE.TraceFlags.NONE).toString(16)}`;r.set(n,Yn.TRACE_PARENT_HEADER,s),o.traceState&&r.set(n,Yn.TRACE_STATE_HEADER,o.traceState.serialize())}extract(e,n,r){let o=r.get(n,Yn.TRACE_PARENT_HEADER);if(!o)return e;let s=Array.isArray(o)?o[0]:o;if(typeof s!="string")return e;let i=SF(s);if(!i)return e;i.isRemote=!0;let a=r.get(n,Yn.TRACE_STATE_HEADER);if(a){let c=Array.isArray(a)?a.join(","):a;i.traceState=new Wue.TraceState(typeof c=="string"?c:void 0)}return LE.trace.setSpanContext(e,i)}fields(){return[Yn.TRACE_PARENT_HEADER,Yn.TRACE_STATE_HEADER]}};Yn.W3CTraceContextPropagator=YN});var RF=T(Fo=>{"use strict";Object.defineProperty(Fo,"__esModule",{value:!0});Fo.getRPCMetadata=Fo.deleteRPCMetadata=Fo.setRPCMetadata=Fo.RPCType=void 0;var tpe=U(),WN=(0,tpe.createContextKey)("OpenTelemetry SDK Context Key RPC_METADATA"),npe;(function(t){t.HTTP="http"})(npe=Fo.RPCType||(Fo.RPCType={}));function rpe(t,e){return t.setValue(WN,e)}Fo.setRPCMetadata=rpe;function ope(t){return t.deleteValue(WN)}Fo.deleteRPCMetadata=ope;function spe(t){return t.getValue(WN)}Fo.getRPCMetadata=spe});var IF=T(DE=>{"use strict";Object.defineProperty(DE,"__esModule",{value:!0});DE.isPlainObject=void 0;var ipe="[object Object]",ape="[object Null]",cpe="[object Undefined]",upe=Function.prototype,yF=upe.toString,ppe=yF.call(Object),lpe=Object.getPrototypeOf,bF=Object.prototype,NF=bF.hasOwnProperty,vc=Symbol?Symbol.toStringTag:void 0,OF=bF.toString;function dpe(t){if(!fpe(t)||mpe(t)!==ipe)return!1;let e=lpe(t);if(e===null)return!0;let n=NF.call(e,"constructor")&&e.constructor;return typeof n=="function"&&n instanceof n&&yF.call(n)===ppe}DE.isPlainObject=dpe;function fpe(t){return t!=null&&typeof t=="object"}function mpe(t){return t==null?t===void 0?cpe:ape:vc&&vc in Object(t)?_pe(t):hpe(t)}function _pe(t){let e=NF.call(t,vc),n=t[vc],r=!1;try{t[vc]=void 0,r=!0}catch{}let o=OF.call(t);return r&&(e?t[vc]=n:delete t[vc]),o}function hpe(t){return OF.call(t)}});var MF=T($E=>{"use strict";Object.defineProperty($E,"__esModule",{value:!0});$E.merge=void 0;var vF=IF(),Epe=20;function Tpe(...t){let e=t.shift(),n=new WeakMap;for(;t.length>0;)e=PF(e,t.shift(),0,n);return e}$E.merge=Tpe;function KN(t){return UE(t)?t.slice():t}function PF(t,e,n=0,r){let o;if(!(n>Epe)){if(n++,kE(t)||kE(e)||CF(e))o=KN(e);else if(UE(t)){if(o=t.slice(),UE(e))for(let s=0,i=e.length;s<i;s++)o.push(KN(e[s]));else if(cf(e)){let s=Object.keys(e);for(let i=0,a=s.length;i<a;i++){let c=s[i];o[c]=KN(e[c])}}}else if(cf(t))if(cf(e)){if(!gpe(t,e))return e;o=Object.assign({},t);let s=Object.keys(e);for(let i=0,a=s.length;i<a;i++){let c=s[i],u=e[c];if(kE(u))typeof u>"u"?delete o[c]:o[c]=u;else{let p=o[c],l=u;if(xF(t,c,r)||xF(e,c,r))delete o[c];else{if(cf(p)&&cf(l)){let d=r.get(p)||[],f=r.get(l)||[];d.push({obj:t,key:c}),f.push({obj:e,key:c}),r.set(p,d),r.set(l,f)}o[c]=PF(o[c],u,n,r)}}}}else o=e;return o}}function xF(t,e,n){let r=n.get(t[e])||[];for(let o=0,s=r.length;o<s;o++){let i=r[o];if(i.key===e&&i.obj===t)return!0}return!1}function UE(t){return Array.isArray(t)}function CF(t){return typeof t=="function"}function cf(t){return!kE(t)&&!UE(t)&&!CF(t)&&typeof t=="object"}function kE(t){return typeof t=="string"||typeof t=="number"||typeof t=="boolean"||typeof t>"u"||t instanceof Date||t instanceof RegExp||t===null}function gpe(t,e){return!(!(0,vF.isPlainObject)(t)||!(0,vF.isPlainObject)(e))}});var wF=T(up=>{"use strict";Object.defineProperty(up,"__esModule",{value:!0});up.callWithTimeout=up.TimeoutError=void 0;var GE=class t extends Error{constructor(e){super(e),Object.setPrototypeOf(this,t.prototype)}};up.TimeoutError=GE;function Spe(t,e){let n,r=new Promise(function(s,i){n=setTimeout(function(){i(new GE("Operation timed out."))},e)});return Promise.race([t,r]).then(o=>(clearTimeout(n),o),o=>{throw clearTimeout(n),o})}up.callWithTimeout=Spe});var DF=T(pp=>{"use strict";Object.defineProperty(pp,"__esModule",{value:!0});pp.isUrlIgnored=pp.urlMatches=void 0;function LF(t,e){return typeof e=="string"?t===e:!!t.match(e)}pp.urlMatches=LF;function Ape(t,e){if(!e)return!1;for(let n of e)if(LF(t,n))return!0;return!1}pp.isUrlIgnored=Ape});var kF=T(VE=>{"use strict";Object.defineProperty(VE,"__esModule",{value:!0});VE.Deferred=void 0;var ZN=class{_promise;_resolve;_reject;constructor(){this._promise=new Promise((e,n)=>{this._resolve=e,this._reject=n})}get promise(){return this._promise}resolve(e){this._resolve(e)}reject(e){this._reject(e)}};VE.Deferred=ZN});var UF=T(BE=>{"use strict";Object.defineProperty(BE,"__esModule",{value:!0});BE.BindOnceFuture=void 0;var Rpe=kF(),JN=class{_callback;_that;_isCalled=!1;_deferred=new Rpe.Deferred;constructor(e,n){this._callback=e,this._that=n}get isCalled(){return this._isCalled}get promise(){return this._deferred.promise}call(...e){if(!this._isCalled){this._isCalled=!0;try{Promise.resolve(this._callback.call(this._that,...e)).then(n=>this._deferred.resolve(n),n=>this._deferred.reject(n))}catch(n){this._deferred.reject(n)}}return this._deferred.promise}};BE.BindOnceFuture=JN});var GF=T(jE=>{"use strict";Object.defineProperty(jE,"__esModule",{value:!0});jE.diagLogLevelFromString=void 0;var ii=U(),$F={ALL:ii.DiagLogLevel.ALL,VERBOSE:ii.DiagLogLevel.VERBOSE,DEBUG:ii.DiagLogLevel.DEBUG,INFO:ii.DiagLogLevel.INFO,WARN:ii.DiagLogLevel.WARN,ERROR:ii.DiagLogLevel.ERROR,NONE:ii.DiagLogLevel.NONE};function ype(t){if(t==null)return;let e=$F[t.toUpperCase()];return e??(ii.diag.warn(`Unknown log level "${t}", expected one of ${Object.keys($F)}, using default`),ii.DiagLogLevel.INFO)}jE.diagLogLevelFromString=ype});var BF=T(HE=>{"use strict";Object.defineProperty(HE,"__esModule",{value:!0});HE._export=void 0;var VF=U(),bpe=rf();function Npe(t,e){return new Promise(n=>{VF.context.with((0,bpe.suppressTracing)(VF.context.active()),()=>{t.export(e,r=>{n(r)})})})}HE._export=Npe});var ze=T(w=>{"use strict";Object.defineProperty(w,"__esModule",{value:!0});w.internal=w.diagLogLevelFromString=w.BindOnceFuture=w.urlMatches=w.isUrlIgnored=w.callWithTimeout=w.TimeoutError=w.merge=w.TraceState=w.unsuppressTracing=w.suppressTracing=w.isTracingSuppressed=w.setRPCMetadata=w.getRPCMetadata=w.deleteRPCMetadata=w.RPCType=w.parseTraceParent=w.W3CTraceContextPropagator=w.TRACE_STATE_HEADER=w.TRACE_PARENT_HEADER=w.CompositePropagator=w.otperformance=w.getStringListFromEnv=w.getNumberFromEnv=w.getBooleanFromEnv=w.getStringFromEnv=w._globalThis=w.SDK_INFO=w.parseKeyPairsIntoRecord=w.ExportResultCode=w.unrefTimer=w.timeInputToHrTime=w.millisToHrTime=w.isTimeInputHrTime=w.isTimeInput=w.hrTimeToTimeStamp=w.hrTimeToNanoseconds=w.hrTimeToMilliseconds=w.hrTimeToMicroseconds=w.hrTimeDuration=w.hrTime=w.getTimeOrigin=w.addHrTimes=w.loggingErrorHandler=w.setGlobalErrorHandler=w.globalErrorHandler=w.sanitizeAttributes=w.isAttributeValue=w.AnchoredClock=w.W3CBaggagePropagator=void 0;var Ope=RU();Object.defineProperty(w,"W3CBaggagePropagator",{enumerable:!0,get:function(){return Ope.W3CBaggagePropagator}});var Ipe=yU();Object.defineProperty(w,"AnchoredClock",{enumerable:!0,get:function(){return Ipe.AnchoredClock}});var jF=vU();Object.defineProperty(w,"isAttributeValue",{enumerable:!0,get:function(){return jF.isAttributeValue}});Object.defineProperty(w,"sanitizeAttributes",{enumerable:!0,get:function(){return jF.sanitizeAttributes}});var HF=PU();Object.defineProperty(w,"globalErrorHandler",{enumerable:!0,get:function(){return HF.globalErrorHandler}});Object.defineProperty(w,"setGlobalErrorHandler",{enumerable:!0,get:function(){return HF.setGlobalErrorHandler}});var vpe=UN();Object.defineProperty(w,"loggingErrorHandler",{enumerable:!0,get:function(){return vpe.loggingErrorHandler}});var po=pF();Object.defineProperty(w,"addHrTimes",{enumerable:!0,get:function(){return po.addHrTimes}});Object.defineProperty(w,"getTimeOrigin",{enumerable:!0,get:function(){return po.getTimeOrigin}});Object.defineProperty(w,"hrTime",{enumerable:!0,get:function(){return po.hrTime}});Object.defineProperty(w,"hrTimeDuration",{enumerable:!0,get:function(){return po.hrTimeDuration}});Object.defineProperty(w,"hrTimeToMicroseconds",{enumerable:!0,get:function(){return po.hrTimeToMicroseconds}});Object.defineProperty(w,"hrTimeToMilliseconds",{enumerable:!0,get:function(){return po.hrTimeToMilliseconds}});Object.defineProperty(w,"hrTimeToNanoseconds",{enumerable:!0,get:function(){return po.hrTimeToNanoseconds}});Object.defineProperty(w,"hrTimeToTimeStamp",{enumerable:!0,get:function(){return po.hrTimeToTimeStamp}});Object.defineProperty(w,"isTimeInput",{enumerable:!0,get:function(){return po.isTimeInput}});Object.defineProperty(w,"isTimeInputHrTime",{enumerable:!0,get:function(){return po.isTimeInputHrTime}});Object.defineProperty(w,"millisToHrTime",{enumerable:!0,get:function(){return po.millisToHrTime}});Object.defineProperty(w,"timeInputToHrTime",{enumerable:!0,get:function(){return po.timeInputToHrTime}});var xpe=lF();Object.defineProperty(w,"unrefTimer",{enumerable:!0,get:function(){return xpe.unrefTimer}});var Ppe=dF();Object.defineProperty(w,"ExportResultCode",{enumerable:!0,get:function(){return Ppe.ExportResultCode}});var Cpe=MN();Object.defineProperty(w,"parseKeyPairsIntoRecord",{enumerable:!0,get:function(){return Cpe.parseKeyPairsIntoRecord}});var xc=GN();Object.defineProperty(w,"SDK_INFO",{enumerable:!0,get:function(){return xc.SDK_INFO}});Object.defineProperty(w,"_globalThis",{enumerable:!0,get:function(){return xc._globalThis}});Object.defineProperty(w,"getStringFromEnv",{enumerable:!0,get:function(){return xc.getStringFromEnv}});Object.defineProperty(w,"getBooleanFromEnv",{enumerable:!0,get:function(){return xc.getBooleanFromEnv}});Object.defineProperty(w,"getNumberFromEnv",{enumerable:!0,get:function(){return xc.getNumberFromEnv}});Object.defineProperty(w,"getStringListFromEnv",{enumerable:!0,get:function(){return xc.getStringListFromEnv}});Object.defineProperty(w,"otperformance",{enumerable:!0,get:function(){return xc.otperformance}});var Mpe=mF();Object.defineProperty(w,"CompositePropagator",{enumerable:!0,get:function(){return Mpe.CompositePropagator}});var FE=AF();Object.defineProperty(w,"TRACE_PARENT_HEADER",{enumerable:!0,get:function(){return FE.TRACE_PARENT_HEADER}});Object.defineProperty(w,"TRACE_STATE_HEADER",{enumerable:!0,get:function(){return FE.TRACE_STATE_HEADER}});Object.defineProperty(w,"W3CTraceContextPropagator",{enumerable:!0,get:function(){return FE.W3CTraceContextPropagator}});Object.defineProperty(w,"parseTraceParent",{enumerable:!0,get:function(){return FE.parseTraceParent}});var qE=RF();Object.defineProperty(w,"RPCType",{enumerable:!0,get:function(){return qE.RPCType}});Object.defineProperty(w,"deleteRPCMetadata",{enumerable:!0,get:function(){return qE.deleteRPCMetadata}});Object.defineProperty(w,"getRPCMetadata",{enumerable:!0,get:function(){return qE.getRPCMetadata}});Object.defineProperty(w,"setRPCMetadata",{enumerable:!0,get:function(){return qE.setRPCMetadata}});var QN=rf();Object.defineProperty(w,"isTracingSuppressed",{enumerable:!0,get:function(){return QN.isTracingSuppressed}});Object.defineProperty(w,"suppressTracing",{enumerable:!0,get:function(){return QN.suppressTracing}});Object.defineProperty(w,"unsuppressTracing",{enumerable:!0,get:function(){return QN.unsuppressTracing}});var wpe=zN();Object.defineProperty(w,"TraceState",{enumerable:!0,get:function(){return wpe.TraceState}});var Lpe=MF();Object.defineProperty(w,"merge",{enumerable:!0,get:function(){return Lpe.merge}});var FF=wF();Object.defineProperty(w,"TimeoutError",{enumerable:!0,get:function(){return FF.TimeoutError}});Object.defineProperty(w,"callWithTimeout",{enumerable:!0,get:function(){return FF.callWithTimeout}});var qF=DF();Object.defineProperty(w,"isUrlIgnored",{enumerable:!0,get:function(){return qF.isUrlIgnored}});Object.defineProperty(w,"urlMatches",{enumerable:!0,get:function(){return qF.urlMatches}});var Dpe=UF();Object.defineProperty(w,"BindOnceFuture",{enumerable:!0,get:function(){return Dpe.BindOnceFuture}});var kpe=GF();Object.defineProperty(w,"diagLogLevelFromString",{enumerable:!0,get:function(){return kpe.diagLogLevelFromString}});var Upe=BF();w.internal={_export:Upe._export}});var zF=T(zE=>{"use strict";Object.defineProperty(zE,"__esModule",{value:!0});zE.VERSION=void 0;zE.VERSION="0.208.0"});var YF=T(uf=>{"use strict";Object.defineProperty(uf,"__esModule",{value:!0});uf.SeverityNumber=void 0;var $pe;(function(t){t[t.UNSPECIFIED=0]="UNSPECIFIED",t[t.TRACE=1]="TRACE",t[t.TRACE2=2]="TRACE2",t[t.TRACE3=3]="TRACE3",t[t.TRACE4=4]="TRACE4",t[t.DEBUG=5]="DEBUG",t[t.DEBUG2=6]="DEBUG2",t[t.DEBUG3=7]="DEBUG3",t[t.DEBUG4=8]="DEBUG4",t[t.INFO=9]="INFO",t[t.INFO2=10]="INFO2",t[t.INFO3=11]="INFO3",t[t.INFO4=12]="INFO4",t[t.WARN=13]="WARN",t[t.WARN2=14]="WARN2",t[t.WARN3=15]="WARN3",t[t.WARN4=16]="WARN4",t[t.ERROR=17]="ERROR",t[t.ERROR2=18]="ERROR2",t[t.ERROR3=19]="ERROR3",t[t.ERROR4=20]="ERROR4",t[t.FATAL=21]="FATAL",t[t.FATAL2=22]="FATAL2",t[t.FATAL3=23]="FATAL3",t[t.FATAL4=24]="FATAL4"})($pe=uf.SeverityNumber||(uf.SeverityNumber={}))});var WE=T(lp=>{"use strict";Object.defineProperty(lp,"__esModule",{value:!0});lp.NOOP_LOGGER=lp.NoopLogger=void 0;var YE=class{emit(e){}};lp.NoopLogger=YE;lp.NOOP_LOGGER=new YE});var XN=T(dp=>{"use strict";Object.defineProperty(dp,"__esModule",{value:!0});dp.NOOP_LOGGER_PROVIDER=dp.NoopLoggerProvider=void 0;var Gpe=WE(),KE=class{getLogger(e,n,r){return new Gpe.NoopLogger}};dp.NoopLoggerProvider=KE;dp.NOOP_LOGGER_PROVIDER=new KE});var WF=T(ZE=>{"use strict";Object.defineProperty(ZE,"__esModule",{value:!0});ZE.ProxyLogger=void 0;var Vpe=WE(),eO=class{constructor(e,n,r,o){this._provider=e,this.name=n,this.version=r,this.options=o}emit(e){this._getLogger().emit(e)}_getLogger(){if(this._delegate)return this._delegate;let e=this._provider._getDelegateLogger(this.name,this.version,this.options);return e?(this._delegate=e,this._delegate):Vpe.NOOP_LOGGER}};ZE.ProxyLogger=eO});var nO=T(JE=>{"use strict";Object.defineProperty(JE,"__esModule",{value:!0});JE.ProxyLoggerProvider=void 0;var Bpe=XN(),jpe=WF(),tO=class{getLogger(e,n,r){var o;return(o=this._getDelegateLogger(e,n,r))!==null&&o!==void 0?o:new jpe.ProxyLogger(this,e,n,r)}_getDelegate(){var e;return(e=this._delegate)!==null&&e!==void 0?e:Bpe.NOOP_LOGGER_PROVIDER}_setDelegate(e){this._delegate=e}_getDelegateLogger(e,n,r){var o;return(o=this._delegate)===null||o===void 0?void 0:o.getLogger(e,n,r)}};JE.ProxyLoggerProvider=tO});var KF=T(QE=>{"use strict";Object.defineProperty(QE,"__esModule",{value:!0});QE._globalThis=void 0;QE._globalThis=typeof globalThis=="object"?globalThis:global});var ZF=T(XE=>{"use strict";Object.defineProperty(XE,"__esModule",{value:!0});XE._globalThis=void 0;var Hpe=KF();Object.defineProperty(XE,"_globalThis",{enumerable:!0,get:function(){return Hpe._globalThis}})});var JF=T(eT=>{"use strict";Object.defineProperty(eT,"__esModule",{value:!0});eT._globalThis=void 0;var Fpe=ZF();Object.defineProperty(eT,"_globalThis",{enumerable:!0,get:function(){return Fpe._globalThis}})});var QF=T(bs=>{"use strict";Object.defineProperty(bs,"__esModule",{value:!0});bs.API_BACKWARDS_COMPATIBILITY_VERSION=bs.makeGetter=bs._global=bs.GLOBAL_LOGS_API_KEY=void 0;var qpe=JF();bs.GLOBAL_LOGS_API_KEY=Symbol.for("io.opentelemetry.js.api.logs");bs._global=qpe._globalThis;function zpe(t,e,n){return r=>r===t?e:n}bs.makeGetter=zpe;bs.API_BACKWARDS_COMPATIBILITY_VERSION=1});var eq=T(tT=>{"use strict";Object.defineProperty(tT,"__esModule",{value:!0});tT.LogsAPI=void 0;var lo=QF(),Ype=XN(),XF=nO(),rO=class t{constructor(){this._proxyLoggerProvider=new XF.ProxyLoggerProvider}static getInstance(){return this._instance||(this._instance=new t),this._instance}setGlobalLoggerProvider(e){return lo._global[lo.GLOBAL_LOGS_API_KEY]?this.getLoggerProvider():(lo._global[lo.GLOBAL_LOGS_API_KEY]=(0,lo.makeGetter)(lo.API_BACKWARDS_COMPATIBILITY_VERSION,e,Ype.NOOP_LOGGER_PROVIDER),this._proxyLoggerProvider._setDelegate(e),e)}getLoggerProvider(){var e,n;return(n=(e=lo._global[lo.GLOBAL_LOGS_API_KEY])===null||e===void 0?void 0:e.call(lo._global,lo.API_BACKWARDS_COMPATIBILITY_VERSION))!==null&&n!==void 0?n:this._proxyLoggerProvider}getLogger(e,n,r){return this.getLoggerProvider().getLogger(e,n,r)}disable(){delete lo._global[lo.GLOBAL_LOGS_API_KEY],this._proxyLoggerProvider=new XF.ProxyLoggerProvider}};tT.LogsAPI=rO});var oO=T(fo=>{"use strict";Object.defineProperty(fo,"__esModule",{value:!0});fo.logs=fo.ProxyLoggerProvider=fo.NoopLogger=fo.NOOP_LOGGER=fo.SeverityNumber=void 0;var Wpe=YF();Object.defineProperty(fo,"SeverityNumber",{enumerable:!0,get:function(){return Wpe.SeverityNumber}});var tq=WE();Object.defineProperty(fo,"NOOP_LOGGER",{enumerable:!0,get:function(){return tq.NOOP_LOGGER}});Object.defineProperty(fo,"NoopLogger",{enumerable:!0,get:function(){return tq.NoopLogger}});var Kpe=nO();Object.defineProperty(fo,"ProxyLoggerProvider",{enumerable:!0,get:function(){return Kpe.ProxyLoggerProvider}});var Zpe=eq();fo.logs=Zpe.LogsAPI.getInstance()});var nq=T(fp=>{"use strict";Object.defineProperty(fp,"__esModule",{value:!0});fp.disableInstrumentations=fp.enableInstrumentations=void 0;function Jpe(t,e,n,r){for(let o=0,s=t.length;o<s;o++){let i=t[o];e&&i.setTracerProvider(e),n&&i.setMeterProvider(n),r&&i.setLoggerProvider&&i.setLoggerProvider(r),i.getConfig().enabled||i.enable()}}fp.enableInstrumentations=Jpe;function Qpe(t){t.forEach(e=>e.disable())}fp.disableInstrumentations=Qpe});var sq=T(nT=>{"use strict";Object.defineProperty(nT,"__esModule",{value:!0});nT.registerInstrumentations=void 0;var rq=U(),Xpe=oO(),oq=nq();function ele(t){let e=t.tracerProvider||rq.trace.getTracerProvider(),n=t.meterProvider||rq.metrics.getMeterProvider(),r=t.loggerProvider||Xpe.logs.getLoggerProvider(),o=t.instrumentations?.flat()??[];return(0,oq.enableInstrumentations)(o,e,n,r),()=>{(0,oq.disableInstrumentations)(o)}}nT.registerInstrumentations=ele});var mq=T(rT=>{"use strict";Object.defineProperty(rT,"__esModule",{value:!0});rT.satisfies=void 0;var cO=U(),pq=/^(?:v)?(?<version>(?<major>0|[1-9]\d*)\.(?<minor>0|[1-9]\d*)\.(?<patch>0|[1-9]\d*))(?:-(?<prerelease>(?:0|[1-9]\d*|\d*[a-zA-Z-][0-9a-zA-Z-]*)(?:\.(?:0|[1-9]\d*|\d*[a-zA-Z-][0-9a-zA-Z-]*))*))?(?:\+(?<build>[0-9a-zA-Z-]+(?:\.[0-9a-zA-Z-]+)*))?$/,tle=/^(?<op><|>|=|==|<=|>=|~|\^|~>)?\s*(?:v)?(?<version>(?<major>x|X|\*|0|[1-9]\d*)(?:\.(?<minor>x|X|\*|0|[1-9]\d*))?(?:\.(?<patch>x|X|\*|0|[1-9]\d*))?)(?:-(?<prerelease>(?:0|[1-9]\d*|\d*[a-zA-Z-][0-9a-zA-Z-]*)(?:\.(?:0|[1-9]\d*|\d*[a-zA-Z-][0-9a-zA-Z-]*))*))?(?:\+(?<build>[0-9a-zA-Z-]+(?:\.[0-9a-zA-Z-]+)*))?$/,nle={">":[1],">=":[0,1],"=":[0],"<=":[-1,0],"<":[-1],"!=":[-1,1]};function rle(t,e,n){if(!ole(t))return cO.diag.error(`Invalid version: ${t}`),!1;if(!e)return!0;e=e.replace(/([<>=~^]+)\s+/g,"$1");let r=cle(t);if(!r)return!1;let o=[],s=lq(r,e,o,n);return s&&!n?.includePrerelease?ile(r,o):s}rT.satisfies=rle;function ole(t){return typeof t=="string"&&pq.test(t)}function lq(t,e,n,r){if(e.includes("||")){let o=e.trim().split("||");for(let s of o)if(sO(t,s,n,r))return!0;return!1}else if(e.includes(" - "))e=xle(e,r);else if(e.includes(" ")){let o=e.trim().replace(/\s{2,}/g," ").split(" ");for(let s of o)if(!sO(t,s,n,r))return!1;return!0}return sO(t,e,n,r)}function sO(t,e,n,r){if(e=ale(e,r),e.includes(" "))return lq(t,e,n,r);{let o=ule(e);return n.push(o),sle(t,o)}}function sle(t,e){if(e.invalid)return!1;if(!e.version||aO(e.version))return!0;let n=aq(t.versionSegments||[],e.versionSegments||[]);if(n===0){let r=t.prereleaseSegments||[],o=e.prereleaseSegments||[];!r.length&&!o.length?n=0:!r.length&&o.length?n=1:r.length&&!o.length?n=-1:n=aq(r,o)}return nle[e.op]?.includes(n)}function ile(t,e){return t.prerelease?e.some(n=>n.prerelease&&n.version===t.version):!0}function ale(t,e){return t=t.trim(),t=Ile(t,e),t=Ole(t),t=vle(t,e),t=t.trim(),t}function or(t){return!t||t.toLowerCase()==="x"||t==="*"}function cle(t){let e=t.match(pq);if(!e){cO.diag.error(`Invalid version: ${t}`);return}let n=e.groups.version,r=e.groups.prerelease,o=e.groups.build,s=n.split("."),i=r?.split(".");return{op:void 0,version:n,versionSegments:s,versionSegmentCount:s.length,prerelease:r,prereleaseSegments:i,prereleaseSegmentCount:i?i.length:0,build:o}}function ule(t){if(!t)return{};let e=t.match(tle);if(!e)return cO.diag.error(`Invalid range: ${t}`),{invalid:!0};let n=e.groups.op,r=e.groups.version,o=e.groups.prerelease,s=e.groups.build,i=r.split("."),a=o?.split(".");return n==="=="&&(n="="),{op:n||"=",version:r,versionSegments:i,versionSegmentCount:i.length,prerelease:o,prereleaseSegments:a,prereleaseSegmentCount:a?a.length:0,build:s}}function aO(t){return t==="*"||t==="x"||t==="X"}function iq(t){let e=parseInt(t,10);return isNaN(e)?t:e}function ple(t,e){if(typeof t==typeof e){if(typeof t=="number")return[t,e];if(typeof t=="string")return[t,e];throw new Error("Version segments can only be strings or numbers")}else return[String(t),String(e)]}function lle(t,e){if(aO(t)||aO(e))return 0;let[n,r]=ple(iq(t),iq(e));return n>r?1:n<r?-1:0}function aq(t,e){for(let n=0;n<Math.max(t.length,e.length);n++){let r=lle(t[n]||"0",e[n]||"0");if(r!==0)return r}return 0}var dq="[a-zA-Z0-9-]",fq="0|[1-9]\\d*",dle=`\\d*[a-zA-Z-]${dq}*`,fle="((?:<|>)?=?)",cq=`(?:${fq}|${dle})`,mle=`(?:-(${cq}(?:\\.${cq})*))`,uq=`${dq}+`,_le=`(?:\\+(${uq}(?:\\.${uq})*))`,iO=`${fq}|x|X|\\*`,pf=`[v=\\s]*(${iO})(?:\\.(${iO})(?:\\.(${iO})(?:${mle})?${_le}?)?)?`,hle=`^${fle}\\s*${pf}$`,Ele=new RegExp(hle),Tle=`^\\s*(${pf})\\s+-\\s+(${pf})\\s*$`,gle=new RegExp(Tle),Sle="(?:~>?)",Ale=`^${Sle}${pf}$`,Rle=new RegExp(Ale),yle="(?:\\^)",ble=`^${yle}${pf}$`,Nle=new RegExp(ble);function Ole(t){let e=Rle;return t.replace(e,(n,r,o,s,i)=>{let a;return or(r)?a="":or(o)?a=`>=${r}.0.0 <${+r+1}.0.0-0`:or(s)?a=`>=${r}.${o}.0 <${r}.${+o+1}.0-0`:i?a=`>=${r}.${o}.${s}-${i} <${r}.${+o+1}.0-0`:a=`>=${r}.${o}.${s} <${r}.${+o+1}.0-0`,a})}function Ile(t,e){let n=Nle,r=e?.includePrerelease?"-0":"";return t.replace(n,(o,s,i,a,c)=>{let u;return or(s)?u="":or(i)?u=`>=${s}.0.0${r} <${+s+1}.0.0-0`:or(a)?s==="0"?u=`>=${s}.${i}.0${r} <${s}.${+i+1}.0-0`:u=`>=${s}.${i}.0${r} <${+s+1}.0.0-0`:c?s==="0"?i==="0"?u=`>=${s}.${i}.${a}-${c} <${s}.${i}.${+a+1}-0`:u=`>=${s}.${i}.${a}-${c} <${s}.${+i+1}.0-0`:u=`>=${s}.${i}.${a}-${c} <${+s+1}.0.0-0`:s==="0"?i==="0"?u=`>=${s}.${i}.${a}${r} <${s}.${i}.${+a+1}-0`:u=`>=${s}.${i}.${a}${r} <${s}.${+i+1}.0-0`:u=`>=${s}.${i}.${a} <${+s+1}.0.0-0`,u})}function vle(t,e){let n=Ele;return t.replace(n,(r,o,s,i,a,c)=>{let u=or(s),p=u||or(i),l=p||or(a),d=l;return o==="="&&d&&(o=""),c=e?.includePrerelease?"-0":"",u?o===">"||o==="<"?r="<0.0.0-0":r="*":o&&d?(p&&(i=0),a=0,o===">"?(o=">=",p?(s=+s+1,i=0,a=0):(i=+i+1,a=0)):o==="<="&&(o="<",p?s=+s+1:i=+i+1),o==="<"&&(c="-0"),r=`${o+s}.${i}.${a}${c}`):p?r=`>=${s}.0.0${c} <${+s+1}.0.0-0`:l&&(r=`>=${s}.${i}.0${c} <${s}.${+i+1}.0-0`),r})}function xle(t,e){let n=gle;return t.replace(n,(r,o,s,i,a,c,u,p,l,d,f,m)=>(or(s)?o="":or(i)?o=`>=${s}.0.0${e?.includePrerelease?"-0":""}`:or(a)?o=`>=${s}.${i}.0${e?.includePrerelease?"-0":""}`:c?o=`>=${o}`:o=`>=${o}${e?.includePrerelease?"-0":""}`,or(l)?p="":or(d)?p=`<${+l+1}.0.0-0`:or(f)?p=`<${l}.${+d+1}.0-0`:m?p=`<=${l}.${d}.${f}-${m}`:e?.includePrerelease?p=`<${l}.${d}.${+f+1}-0`:p=`<=${p}`,`${o} ${p}`.trim()))}});var uO=T(Pn=>{"use strict";Object.defineProperty(Pn,"__esModule",{value:!0});Pn.massUnwrap=Pn.unwrap=Pn.massWrap=Pn.wrap=void 0;var sr=console.error.bind(console);function lf(t,e,n){let r=!!t[e]&&Object.prototype.propertyIsEnumerable.call(t,e);Object.defineProperty(t,e,{configurable:!0,enumerable:r,writable:!0,value:n})}var Ple=(t,e,n)=>{if(!t||!t[e]){sr("no original function "+String(e)+" to wrap");return}if(!n){sr("no wrapper function"),sr(new Error().stack);return}let r=t[e];if(typeof r!="function"||typeof n!="function"){sr("original object and wrapper must be functions");return}let o=n(r,e);return lf(o,"__original",r),lf(o,"__unwrap",()=>{t[e]===o&&lf(t,e,r)}),lf(o,"__wrapped",!0),lf(t,e,o),o};Pn.wrap=Ple;var Cle=(t,e,n)=>{if(t)Array.isArray(t)||(t=[t]);else{sr("must provide one or more modules to patch"),sr(new Error().stack);return}if(!(e&&Array.isArray(e))){sr("must provide one or more functions to wrap on modules");return}t.forEach(r=>{e.forEach(o=>{(0,Pn.wrap)(r,o,n)})})};Pn.massWrap=Cle;var Mle=(t,e)=>{if(!t||!t[e]){sr("no function to unwrap."),sr(new Error().stack);return}let n=t[e];if(!n.__unwrap)sr("no original to unwrap to -- has "+String(e)+" already been unwrapped?");else{n.__unwrap();return}};Pn.unwrap=Mle;var wle=(t,e)=>{if(t)Array.isArray(t)||(t=[t]);else{sr("must provide one or more modules to patch"),sr(new Error().stack);return}if(!(e&&Array.isArray(e))){sr("must provide one or more functions to unwrap on modules");return}t.forEach(n=>{e.forEach(r=>{(0,Pn.unwrap)(n,r)})})};Pn.massUnwrap=wle;function df(t){t&&t.logger&&(typeof t.logger!="function"?sr("new logger isn't a function, not replacing"):sr=t.logger)}Pn.default=df;df.wrap=Pn.wrap;df.massWrap=Pn.massWrap;df.unwrap=Pn.unwrap;df.massUnwrap=Pn.massUnwrap});var _q=T(sT=>{"use strict";Object.defineProperty(sT,"__esModule",{value:!0});sT.InstrumentationAbstract=void 0;var pO=U(),Lle=oO(),oT=uO(),lO=class{instrumentationName;instrumentationVersion;_config={};_tracer;_meter;_logger;_diag;constructor(e,n,r){this.instrumentationName=e,this.instrumentationVersion=n,this.setConfig(r),this._diag=pO.diag.createComponentLogger({namespace:e}),this._tracer=pO.trace.getTracer(e,n),this._meter=pO.metrics.getMeter(e,n),this._logger=Lle.logs.getLogger(e,n),this._updateMetricInstruments()}_wrap=oT.wrap;_unwrap=oT.unwrap;_massWrap=oT.massWrap;_massUnwrap=oT.massUnwrap;get meter(){return this._meter}setMeterProvider(e){this._meter=e.getMeter(this.instrumentationName,this.instrumentationVersion),this._updateMetricInstruments()}get logger(){return this._logger}setLoggerProvider(e){this._logger=e.getLogger(this.instrumentationName,this.instrumentationVersion)}getModuleDefinitions(){let e=this.init()??[];return Array.isArray(e)?e:[e]}_updateMetricInstruments(){}getConfig(){return this._config}setConfig(e){this._config={enabled:!0,...e}}setTracerProvider(e){this._tracer=e.getTracer(this.instrumentationName,this.instrumentationVersion)}get tracer(){return this._tracer}_runSpanCustomizationHook(e,n,r,o){if(e)try{e(r,o)}catch(s){this._diag.error("Error running span customization hook due to exception in handler",{triggerName:n},s)}}};sT.InstrumentationAbstract=lO});var Eq=T((_je,hq)=>{var mp=1e3,_p=mp*60,hp=_p*60,Pc=hp*24,Dle=Pc*7,kle=Pc*365.25;hq.exports=function(t,e){e=e||{};var n=typeof t;if(n==="string"&&t.length>0)return Ule(t);if(n==="number"&&isFinite(t))return e.long?Gle(t):$le(t);throw new Error("val is not a non-empty string or a valid number. val="+JSON.stringify(t))};function Ule(t){if(t=String(t),!(t.length>100)){var e=/^(-?(?:\d+)?\.?\d+) *(milliseconds?|msecs?|ms|seconds?|secs?|s|minutes?|mins?|m|hours?|hrs?|h|days?|d|weeks?|w|years?|yrs?|y)?$/i.exec(t);if(e){var n=parseFloat(e[1]),r=(e[2]||"ms").toLowerCase();switch(r){case"years":case"year":case"yrs":case"yr":case"y":return n*kle;case"weeks":case"week":case"w":return n*Dle;case"days":case"day":case"d":return n*Pc;case"hours":case"hour":case"hrs":case"hr":case"h":return n*hp;case"minutes":case"minute":case"mins":case"min":case"m":return n*_p;case"seconds":case"second":case"secs":case"sec":case"s":return n*mp;case"milliseconds":case"millisecond":case"msecs":case"msec":case"ms":return n;default:return}}}}function $le(t){var e=Math.abs(t);return e>=Pc?Math.round(t/Pc)+"d":e>=hp?Math.round(t/hp)+"h":e>=_p?Math.round(t/_p)+"m":e>=mp?Math.round(t/mp)+"s":t+"ms"}function Gle(t){var e=Math.abs(t);return e>=Pc?iT(t,e,Pc,"day"):e>=hp?iT(t,e,hp,"hour"):e>=_p?iT(t,e,_p,"minute"):e>=mp?iT(t,e,mp,"second"):t+" ms"}function iT(t,e,n,r){var o=e>=n*1.5;return Math.round(t/n)+" "+r+(o?"s":"")}});var dO=T((hje,Tq)=>{function Vle(t){n.debug=n,n.default=n,n.coerce=c,n.disable=i,n.enable=o,n.enabled=a,n.humanize=Eq(),n.destroy=u,Object.keys(t).forEach(p=>{n[p]=t[p]}),n.names=[],n.skips=[],n.formatters={};function e(p){let l=0;for(let d=0;d<p.length;d++)l=(l<<5)-l+p.charCodeAt(d),l|=0;return n.colors[Math.abs(l)%n.colors.length]}n.selectColor=e;function n(p){let l,d=null,f,m;function h(...E){if(!h.enabled)return;let A=h,R=Number(new Date),y=R-(l||R);A.diff=y,A.prev=l,A.curr=R,l=R,E[0]=n.coerce(E[0]),typeof E[0]!="string"&&E.unshift("%O");let O=0;E[0]=E[0].replace(/%([a-zA-Z%])/g,(M,j)=>{if(M==="%%")return"%";O++;let se=n.formatters[j];if(typeof se=="function"){let we=E[O];M=se.call(A,we),E.splice(O,1),O--}return M}),n.formatArgs.call(A,E),(A.log||n.log).apply(A,E)}return h.namespace=p,h.useColors=n.useColors(),h.color=n.selectColor(p),h.extend=r,h.destroy=n.destroy,Object.defineProperty(h,"enabled",{enumerable:!0,configurable:!1,get:()=>d!==null?d:(f!==n.namespaces&&(f=n.namespaces,m=n.enabled(p)),m),set:E=>{d=E}}),typeof n.init=="function"&&n.init(h),h}function r(p,l){let d=n(this.namespace+(typeof l>"u"?":":l)+p);return d.log=this.log,d}function o(p){n.save(p),n.namespaces=p,n.names=[],n.skips=[];let l=(typeof p=="string"?p:"").trim().replace(/\s+/g,",").split(",").filter(Boolean);for(let d of l)d[0]==="-"?n.skips.push(d.slice(1)):n.names.push(d)}function s(p,l){let d=0,f=0,m=-1,h=0;for(;d<p.length;)if(f<l.length&&(l[f]===p[d]||l[f]==="*"))l[f]==="*"?(m=f,h=d,f++):(d++,f++);else if(m!==-1)f=m+1,h++,d=h;else return!1;for(;f<l.length&&l[f]==="*";)f++;return f===l.length}function i(){let p=[...n.names,...n.skips.map(l=>"-"+l)].join(",");return n.enable(""),p}function a(p){for(let l of n.skips)if(s(p,l))return!1;for(let l of n.names)if(s(p,l))return!0;return!1}function c(p){return p instanceof Error?p.stack||p.message:p}function u(){console.warn("Instance method `debug.destroy()` is deprecated and no longer does anything. It will be removed in the next major version of `debug`.")}return n.enable(n.load()),n}Tq.exports=Vle});var gq=T((Sr,aT)=>{Sr.formatArgs=jle;Sr.save=Hle;Sr.load=Fle;Sr.useColors=Ble;Sr.storage=qle();Sr.destroy=(()=>{let t=!1;return()=>{t||(t=!0,console.warn("Instance method `debug.destroy()` is deprecated and no longer does anything. It will be removed in the next major version of `debug`."))}})();Sr.colors=["#0000CC","#0000FF","#0033CC","#0033FF","#0066CC","#0066FF","#0099CC","#0099FF","#00CC00","#00CC33","#00CC66","#00CC99","#00CCCC","#00CCFF","#3300CC","#3300FF","#3333CC","#3333FF","#3366CC","#3366FF","#3399CC","#3399FF","#33CC00","#33CC33","#33CC66","#33CC99","#33CCCC","#33CCFF","#6600CC","#6600FF","#6633CC","#6633FF","#66CC00","#66CC33","#9900CC","#9900FF","#9933CC","#9933FF","#99CC00","#99CC33","#CC0000","#CC0033","#CC0066","#CC0099","#CC00CC","#CC00FF","#CC3300","#CC3333","#CC3366","#CC3399","#CC33CC","#CC33FF","#CC6600","#CC6633","#CC9900","#CC9933","#CCCC00","#CCCC33","#FF0000","#FF0033","#FF0066","#FF0099","#FF00CC","#FF00FF","#FF3300","#FF3333","#FF3366","#FF3399","#FF33CC","#FF33FF","#FF6600","#FF6633","#FF9900","#FF9933","#FFCC00","#FFCC33"];function Ble(){if(typeof window<"u"&&window.process&&(window.process.type==="renderer"||window.process.__nwjs))return!0;if(typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/(edge|trident)\/(\d+)/))return!1;let t;return typeof document<"u"&&document.documentElement&&document.documentElement.style&&document.documentElement.style.WebkitAppearance||typeof window<"u"&&window.console&&(window.console.firebug||window.console.exception&&window.console.table)||typeof navigator<"u"&&navigator.userAgent&&(t=navigator.userAgent.toLowerCase().match(/firefox\/(\d+)/))&&parseInt(t[1],10)>=31||typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/applewebkit\/(\d+)/)}function jle(t){if(t[0]=(this.useColors?"%c":"")+this.namespace+(this.useColors?" %c":" ")+t[0]+(this.useColors?"%c ":" ")+"+"+aT.exports.humanize(this.diff),!this.useColors)return;let e="color: "+this.color;t.splice(1,0,e,"color: inherit");let n=0,r=0;t[0].replace(/%[a-zA-Z%]/g,o=>{o!=="%%"&&(n++,o==="%c"&&(r=n))}),t.splice(r,0,e)}Sr.log=console.debug||console.log||(()=>{});function Hle(t){try{t?Sr.storage.setItem("debug",t):Sr.storage.removeItem("debug")}catch{}}function Fle(){let t;try{t=Sr.storage.getItem("debug")||Sr.storage.getItem("DEBUG")}catch{}return!t&&typeof process<"u"&&"env"in process&&(t=process.env.DEBUG),t}function qle(){try{return localStorage}catch{}}aT.exports=dO()(Sr);var{formatters:zle}=aT.exports;zle.j=function(t){try{return JSON.stringify(t)}catch(e){return"[UnexpectedJSONParseError]: "+e.message}}});var Aq=T((Eje,Sq)=>{"use strict";Sq.exports=(t,e=process.argv)=>{let n=t.startsWith("-")?"":t.length===1?"-":"--",r=e.indexOf(n+t),o=e.indexOf("--");return r!==-1&&(o===-1||r<o)}});var bq=T((Tje,yq)=>{"use strict";var Yle=q("os"),Rq=q("tty"),mo=Aq(),{env:Tn}=process,Yi;mo("no-color")||mo("no-colors")||mo("color=false")||mo("color=never")?Yi=0:(mo("color")||mo("colors")||mo("color=true")||mo("color=always"))&&(Yi=1);"FORCE_COLOR"in Tn&&(Tn.FORCE_COLOR==="true"?Yi=1:Tn.FORCE_COLOR==="false"?Yi=0:Yi=Tn.FORCE_COLOR.length===0?1:Math.min(parseInt(Tn.FORCE_COLOR,10),3));function fO(t){return t===0?!1:{level:t,hasBasic:!0,has256:t>=2,has16m:t>=3}}function mO(t,e){if(Yi===0)return 0;if(mo("color=16m")||mo("color=full")||mo("color=truecolor"))return 3;if(mo("color=256"))return 2;if(t&&!e&&Yi===void 0)return 0;let n=Yi||0;if(Tn.TERM==="dumb")return n;if(process.platform==="win32"){let r=Yle.release().split(".");return Number(r[0])>=10&&Number(r[2])>=10586?Number(r[2])>=14931?3:2:1}if("CI"in Tn)return["TRAVIS","CIRCLECI","APPVEYOR","GITLAB_CI","GITHUB_ACTIONS","BUILDKITE"].some(r=>r in Tn)||Tn.CI_NAME==="codeship"?1:n;if("TEAMCITY_VERSION"in Tn)return/^(9\.(0*[1-9]\d*)\.|\d{2,}\.)/.test(Tn.TEAMCITY_VERSION)?1:0;if(Tn.COLORTERM==="truecolor")return 3;if("TERM_PROGRAM"in Tn){let r=parseInt((Tn.TERM_PROGRAM_VERSION||"").split(".")[0],10);switch(Tn.TERM_PROGRAM){case"iTerm.app":return r>=3?3:2;case"Apple_Terminal":return 2}}return/-256(color)?$/i.test(Tn.TERM)?2:/^screen|^xterm|^vt100|^vt220|^rxvt|color|ansi|cygwin|linux/i.test(Tn.TERM)||"COLORTERM"in Tn?1:n}function Wle(t){let e=mO(t,t&&t.isTTY);return fO(e)}yq.exports={supportsColor:Wle,stdout:fO(mO(!0,Rq.isatty(1))),stderr:fO(mO(!0,Rq.isatty(2)))}});var Oq=T((gn,uT)=>{var Kle=q("tty"),cT=q("util");gn.init=nde;gn.log=Xle;gn.formatArgs=Jle;gn.save=ede;gn.load=tde;gn.useColors=Zle;gn.destroy=cT.deprecate(()=>{},"Instance method `debug.destroy()` is deprecated and no longer does anything. It will be removed in the next major version of `debug`.");gn.colors=[6,2,3,4,5,1];try{let t=bq();t&&(t.stderr||t).level>=2&&(gn.colors=[20,21,26,27,32,33,38,39,40,41,42,43,44,45,56,57,62,63,68,69,74,75,76,77,78,79,80,81,92,93,98,99,112,113,128,129,134,135,148,149,160,161,162,163,164,165,166,167,168,169,170,171,172,173,178,179,184,185,196,197,198,199,200,201,202,203,204,205,206,207,208,209,214,215,220,221])}catch{}gn.inspectOpts=Object.keys(process.env).filter(t=>/^debug_/i.test(t)).reduce((t,e)=>{let n=e.substring(6).toLowerCase().replace(/_([a-z])/g,(o,s)=>s.toUpperCase()),r=process.env[e];return/^(yes|on|true|enabled)$/i.test(r)?r=!0:/^(no|off|false|disabled)$/i.test(r)?r=!1:r==="null"?r=null:r=Number(r),t[n]=r,t},{});function Zle(){return"colors"in gn.inspectOpts?!!gn.inspectOpts.colors:Kle.isatty(process.stderr.fd)}function Jle(t){let{namespace:e,useColors:n}=this;if(n){let r=this.color,o="\x1B[3"+(r<8?r:"8;5;"+r),s=`  ${o};1m${e} \x1B[0m`;t[0]=s+t[0].split(`
`).join(`
`+s),t.push(o+"m+"+uT.exports.humanize(this.diff)+"\x1B[0m")}else t[0]=Qle()+e+" "+t[0]}function Qle(){return gn.inspectOpts.hideDate?"":new Date().toISOString()+" "}function Xle(...t){return process.stderr.write(cT.formatWithOptions(gn.inspectOpts,...t)+`
`)}function ede(t){t?process.env.DEBUG=t:delete process.env.DEBUG}function tde(){return process.env.DEBUG}function nde(t){t.inspectOpts={};let e=Object.keys(gn.inspectOpts);for(let n=0;n<e.length;n++)t.inspectOpts[e[n]]=gn.inspectOpts[e[n]]}uT.exports=dO()(gn);var{formatters:Nq}=uT.exports;Nq.o=function(t){return this.inspectOpts.colors=this.useColors,cT.inspect(t,this.inspectOpts).split(`
`).map(e=>e.trim()).join(" ")};Nq.O=function(t){return this.inspectOpts.colors=this.useColors,cT.inspect(t,this.inspectOpts)}});var hO=T((gje,_O)=>{typeof process>"u"||process.type==="renderer"||process.browser===!0||process.__nwjs?_O.exports=gq():_O.exports=Oq()});var TO=T((Sje,Iq)=>{"use strict";var EO=q("path").sep;Iq.exports=function(t){var e=t.split(EO),n=e.lastIndexOf("node_modules");if(n!==-1&&e[n+1]){for(var r=e[n+1][0]==="@",o=r?e[n+1]+"/"+e[n+2]:e[n+1],s=r?3:2,i="",a=n+s-1,c=0;c<=a;c++)c===a?i+=e[c]:i+=e[c]+EO;for(var u="",p=e.length-1,l=n+s;l<=p;l++)l===p?u+=e[l]:u+=e[l]+EO;return{name:o,basedir:i,path:u}}}});var RO=T((Aje,AO)=>{"use strict";var Ep=q("path"),qo=q("module"),qt=hO()("require-in-the-middle"),rde=TO();AO.exports=ff;AO.exports.Hook=ff;var gO,pT;if(qo.isBuiltin)pT=qo.isBuiltin;else if(qo.builtinModules)pT=t=>t.startsWith("node:")?!0:(gO===void 0&&(gO=new Set(qo.builtinModules)),gO.has(t));else throw new Error("'require-in-the-middle' requires Node.js >=v9.3.0 or >=v8.10.0");var ode=/([/\\]index)?(\.js)?$/,SO=class{constructor(){this._localCache=new Map,this._kRitmExports=Symbol("RitmExports")}has(e,n){if(this._localCache.has(e))return!0;if(n)return!1;{let r=q.cache[e];return!!(r&&this._kRitmExports in r)}}get(e,n){let r=this._localCache.get(e);if(r!==void 0)return r;if(!n){let o=q.cache[e];return o&&o[this._kRitmExports]}}set(e,n,r){r?this._localCache.set(e,n):e in q.cache?q.cache[e][this._kRitmExports]=n:(qt('non-core module is unexpectedly not in require.cache: "%s"',e),this._localCache.set(e,n))}};function ff(t,e,n){if(!(this instanceof ff))return new ff(t,e,n);if(typeof t=="function"?(n=t,t=null,e=null):typeof e=="function"&&(n=e,e=null),typeof qo._resolveFilename!="function"){console.error("Error: Expected Module._resolveFilename to be a function (was: %s) - aborting!",typeof qo._resolveFilename),console.error("Please report this error as an issue related to Node.js %s at https://github.com/nodejs/require-in-the-middle/issues",process.version);return}this._cache=new SO,this._unhooked=!1,this._origRequire=qo.prototype.require;let r=this,o=new Set,s=e?e.internals===!0:!1,i=Array.isArray(t);qt("registering require hook"),this._require=qo.prototype.require=function(c){return r._unhooked===!0?(qt("ignoring require call - module is soft-unhooked"),r._origRequire.apply(this,arguments)):a.call(this,arguments,!1)},typeof process.getBuiltinModule=="function"&&(this._origGetBuiltinModule=process.getBuiltinModule,this._getBuiltinModule=process.getBuiltinModule=function(c){return r._unhooked===!0?(qt("ignoring process.getBuiltinModule call - module is soft-unhooked"),r._origGetBuiltinModule.apply(this,arguments)):a.call(this,arguments,!0)});function a(c,u){let p=c[0],l=pT(p),d;if(l){if(d=p,p.startsWith("node:")){let R=p.slice(5);pT(R)&&(d=R)}}else{if(u)return qt("call to process.getBuiltinModule with unknown built-in id"),r._origGetBuiltinModule.apply(this,c);try{d=qo._resolveFilename(p,this)}catch(R){return qt('Module._resolveFilename("%s") threw %j, calling original Module.require',p,R.message),r._origRequire.apply(this,c)}}let f,m;if(qt("processing %s module require('%s'): %s",l===!0?"core":"non-core",p,d),r._cache.has(d,l)===!0)return qt("returning already patched cached module: %s",d),r._cache.get(d,l);let h=o.has(d);h===!1&&o.add(d);let E=u?r._origGetBuiltinModule.apply(this,c):r._origRequire.apply(this,c);if(h===!0)return qt("module is in the process of being patched already - ignoring: %s",d),E;if(o.delete(d),l===!0){if(i===!0&&t.includes(d)===!1)return qt("ignoring core module not on whitelist: %s",d),E;f=d}else if(i===!0&&t.includes(d)){let R=Ep.parse(d);f=R.name,m=R.dir}else{let R=rde(d);if(R===void 0)return qt("could not parse filename: %s",d),E;f=R.name,m=R.basedir;let y=sde(R);qt("resolved filename to module: %s (id: %s, resolved: %s, basedir: %s)",f,p,y,m);let O=!1;if(i){if(!p.startsWith(".")&&t.includes(p)&&(f=p,O=!0),!t.includes(f)&&!t.includes(y))return E;t.includes(y)&&y!==f&&(f=y,O=!0)}if(!O){let P;try{P=q.resolve(f,{paths:[m]})}catch{return qt("could not resolve module: %s",f),r._cache.set(d,E,l),E}if(P!==d)if(s===!0)f=f+Ep.sep+Ep.relative(m,d),qt("preparing to process require of internal file: %s",f);else return qt("ignoring require of non-main module file: %s",P),r._cache.set(d,E,l),E}}r._cache.set(d,E,l),qt("calling require hook: %s",f);let A=n(E,f,m);return r._cache.set(d,A,l),qt("returning module: %s",f),A}}ff.prototype.unhook=function(){this._unhooked=!0,this._require===qo.prototype.require?(qo.prototype.require=this._origRequire,qt("require unhook successful")):qt("require unhook unsuccessful"),process.getBuiltinModule!==void 0&&(this._getBuiltinModule===process.getBuiltinModule?(process.getBuiltinModule=this._origGetBuiltinModule,qt("process.getBuiltinModule unhook successful")):qt("process.getBuiltinModule unhook unsuccessful"))};function sde(t){let e=Ep.sep!=="/"?t.path.split(Ep.sep).join("/"):t.path;return Ep.posix.join(t.name,e).replace(ode,"")}});var vq=T(Wi=>{"use strict";Object.defineProperty(Wi,"__esModule",{value:!0});Wi.ModuleNameTrie=Wi.ModuleNameSeparator=void 0;Wi.ModuleNameSeparator="/";var lT=class{hooks=[];children=new Map},yO=class{_trie=new lT;_counter=0;insert(e){let n=this._trie;for(let r of e.moduleName.split(Wi.ModuleNameSeparator)){let o=n.children.get(r);o||(o=new lT,n.children.set(r,o)),n=o}n.hooks.push({hook:e,insertedId:this._counter++})}search(e,{maintainInsertionOrder:n,fullOnly:r}={}){let o=this._trie,s=[],i=!0;for(let a of e.split(Wi.ModuleNameSeparator)){let c=o.children.get(a);if(!c){i=!1;break}r||s.push(...c.hooks),o=c}return r&&i&&s.push(...o.hooks),s.length===0?[]:s.length===1?[s[0].hook]:(n&&s.sort((a,c)=>a.insertedId-c.insertedId),s.map(({hook:a})=>a))}};Wi.ModuleNameTrie=yO});var Pq=T(dT=>{"use strict";Object.defineProperty(dT,"__esModule",{value:!0});dT.RequireInTheMiddleSingleton=void 0;var ide=RO(),xq=q("path"),bO=vq(),ade=["afterEach","after","beforeEach","before","describe","it"].every(t=>typeof global[t]=="function"),NO=class t{_moduleNameTrie=new bO.ModuleNameTrie;static _instance;constructor(){this._initialize()}_initialize(){new ide.Hook(null,{internals:!0},(e,n,r)=>{let o=cde(n),s=this._moduleNameTrie.search(o,{maintainInsertionOrder:!0,fullOnly:r===void 0});for(let{onRequire:i}of s)e=i(e,n,r);return e})}register(e,n){let r={moduleName:e,onRequire:n};return this._moduleNameTrie.insert(r),r}static getInstance(){return ade?new t:this._instance=this._instance??new t}};dT.RequireInTheMiddleSingleton=NO;function cde(t){return xq.sep!==bO.ModuleNameSeparator?t.split(xq.sep).join(bO.ModuleNameSeparator):t}});var kq=T(Cc=>{var Cq=[],OO=new WeakMap,Mq=new WeakMap,wq=new Map,Lq=[],ude={set(t,e,n){return OO.get(t)[e](n)},get(t,e){if(e===Symbol.toStringTag)return"Module";let n=Mq.get(t)[e];if(typeof n=="function")return n()},defineProperty(t,e,n){if(!("value"in n))throw new Error("Getters/setters are not supported for exports property descriptors.");return OO.get(t)[e](n.value)}};function pde(t,e,n,r,o){wq.set(t,o),OO.set(e,n),Mq.set(e,r);let s=new Proxy(e,ude);Cq.forEach(i=>i(t,s,o)),Lq.push([t,s,o])}var Dq=!1;function lde(){return Dq}function dde(t){Dq=t}Cc.register=pde;Cc.importHooks=Cq;Cc.specifiers=wq;Cc.toHook=Lq;Cc.getExperimentalPatchInternals=lde;Cc.setExperimentalPatchInternals=dde});var PO=T((Oje,Tp)=>{var Uq=q("path"),fde=TO(),{fileURLToPath:$q}=q("url"),{MessageChannel:mde}=q("worker_threads"),{importHooks:vO,specifiers:_de,toHook:hde,getExperimentalPatchInternals:Ede}=kq();function Gq(t){vO.push(t),hde.forEach(([e,n,r])=>t(e,n,r))}function Vq(t){let e=vO.indexOf(t);e>-1&&vO.splice(e,1)}function IO(t,e,n,r){let o=t(e,n,r);o&&o!==e&&(e.default=o)}var xO;function Tde(){let{port1:t,port2:e}=new mde,n=0,r;xO=a=>{n++,t.postMessage(a)},t.on("message",()=>{n--,r&&n<=0&&r()}).unref();function o(){let a=setInterval(()=>{},1e3),c=new Promise(u=>{r=u}).then(()=>{clearInterval(a)});return n===0&&r(),c}let s=e;return{registerOptions:{data:{addHookMessagePort:s,include:[]},transferList:[s]},addHookMessagePort:s,waitForAllMessagesAcknowledged:o}}function mf(t,e,n){if(!(this instanceof mf))return new mf(t,e,n);typeof t=="function"?(n=t,t=null,e=null):typeof e=="function"&&(n=e,e=null);let r=e?e.internals===!0:!1;xO&&Array.isArray(t)&&xO(t),this._iitmHook=(o,s,i)=>{let a=o,c=o.startsWith("node:"),u;if(c)o=o.replace(/^node:/,"");else{if(o.startsWith("file://"))try{o=$q(o)}catch{}let p=fde(o);p&&(o=p.name,u=p.basedir)}if(t){for(let p of t)if(p===i)IO(n,s,o,u);else if(p===o){if(u){if(r)o=o+Uq.sep+Uq.relative(u,$q(a));else if(!Ede()&&!u.endsWith(_de.get(a)))continue}IO(n,s,o,u)}}else IO(n,s,o,u)},Gq(this._iitmHook)}mf.prototype.unhook=function(){Vq(this._iitmHook)};Tp.exports=mf;Tp.exports.Hook=mf;Tp.exports.addHook=Gq;Tp.exports.removeHook=Vq;Tp.exports.createAddHookMessageChannel=Tde});var CO=T(Ki=>{"use strict";Object.defineProperty(Ki,"__esModule",{value:!0});Ki.isWrapped=Ki.safeExecuteInTheMiddleAsync=Ki.safeExecuteInTheMiddle=void 0;function gde(t,e,n){let r,o;try{o=t()}catch(s){r=s}finally{if(e(r,o),r&&!n)throw r;return o}}Ki.safeExecuteInTheMiddle=gde;async function Sde(t,e,n){let r,o;try{o=await t()}catch(s){r=s}finally{if(await e(r,o),r&&!n)throw r;return o}}Ki.safeExecuteInTheMiddleAsync=Sde;function Ade(t){return typeof t=="function"&&typeof t.__original=="function"&&typeof t.__unwrap=="function"&&t.__wrapped===!0}Ki.isWrapped=Ade});var Hq=T(fT=>{"use strict";Object.defineProperty(fT,"__esModule",{value:!0});fT.InstrumentationBase=void 0;var _f=q("path"),Bq=q("util"),Rde=mq(),MO=uO(),yde=_q(),bde=Pq(),Nde=PO(),hf=U(),Ode=RO(),Ide=q("fs"),vde=CO(),wO=class extends yde.InstrumentationAbstract{_modules;_hooks=[];_requireInTheMiddleSingleton=bde.RequireInTheMiddleSingleton.getInstance();_enabled=!1;constructor(e,n,r){super(e,n,r);let o=this.init();o&&!Array.isArray(o)&&(o=[o]),this._modules=o||[],this._config.enabled&&this.enable()}_wrap=(e,n,r)=>{if((0,vde.isWrapped)(e[n])&&this._unwrap(e,n),Bq.types.isProxy(e)){let o=(0,MO.wrap)(Object.assign({},e),n,r);return Object.defineProperty(e,n,{value:o}),o}else return(0,MO.wrap)(e,n,r)};_unwrap=(e,n)=>Bq.types.isProxy(e)?Object.defineProperty(e,n,{value:e[n]}):(0,MO.unwrap)(e,n);_massWrap=(e,n,r)=>{if(e)Array.isArray(e)||(e=[e]);else{hf.diag.error("must provide one or more modules to patch");return}if(!(n&&Array.isArray(n))){hf.diag.error("must provide one or more functions to wrap on modules");return}e.forEach(o=>{n.forEach(s=>{this._wrap(o,s,r)})})};_massUnwrap=(e,n)=>{if(e)Array.isArray(e)||(e=[e]);else{hf.diag.error("must provide one or more modules to patch");return}if(!(n&&Array.isArray(n))){hf.diag.error("must provide one or more functions to wrap on modules");return}e.forEach(r=>{n.forEach(o=>{this._unwrap(r,o)})})};_warnOnPreloadedModules(){this._modules.forEach(e=>{let{name:n}=e;try{let r=q.resolve(n);q.cache[r]&&this._diag.warn(`Module ${n} has been loaded before ${this.instrumentationName} so it might not work, please initialize it before requiring ${n}`)}catch{}})}_extractPackageVersion(e){try{let n=(0,Ide.readFileSync)(_f.join(e,"package.json"),{encoding:"utf8"}),r=JSON.parse(n).version;return typeof r=="string"?r:void 0}catch{hf.diag.warn("Failed extracting version",e)}}_onRequire(e,n,r,o){if(!o)return typeof e.patch=="function"&&(e.moduleExports=n,this._enabled)?(this._diag.debug("Applying instrumentation patch for nodejs core module on require hook",{module:e.name}),e.patch(n)):n;let s=this._extractPackageVersion(o);if(e.moduleVersion=s,e.name===r)return jq(e.supportedVersions,s,e.includePrerelease)&&typeof e.patch=="function"&&(e.moduleExports=n,this._enabled)?(this._diag.debug("Applying instrumentation patch for module on require hook",{module:e.name,version:e.moduleVersion,baseDir:o}),e.patch(n,e.moduleVersion)):n;let i=e.files??[],a=_f.normalize(r);return i.filter(u=>u.name===a).filter(u=>jq(u.supportedVersions,s,e.includePrerelease)).reduce((u,p)=>(p.moduleExports=u,this._enabled?(this._diag.debug("Applying instrumentation patch for nodejs module file on require hook",{module:e.name,version:e.moduleVersion,fileName:p.name,baseDir:o}),p.patch(u,e.moduleVersion)):u),n)}enable(){if(!this._enabled){if(this._enabled=!0,this._hooks.length>0){for(let e of this._modules){typeof e.patch=="function"&&e.moduleExports&&(this._diag.debug("Applying instrumentation patch for nodejs module on instrumentation enabled",{module:e.name,version:e.moduleVersion}),e.patch(e.moduleExports,e.moduleVersion));for(let n of e.files)n.moduleExports&&(this._diag.debug("Applying instrumentation patch for nodejs module file on instrumentation enabled",{module:e.name,version:e.moduleVersion,fileName:n.name}),n.patch(n.moduleExports,e.moduleVersion))}return}this._warnOnPreloadedModules();for(let e of this._modules){let n=(i,a,c)=>{if(!c&&_f.isAbsolute(a)){let u=_f.parse(a);a=u.name,c=u.dir}return this._onRequire(e,i,a,c)},r=(i,a,c)=>this._onRequire(e,i,a,c),o=_f.isAbsolute(e.name)?new Ode.Hook([e.name],{internals:!0},r):this._requireInTheMiddleSingleton.register(e.name,r);this._hooks.push(o);let s=new Nde.Hook([e.name],{internals:!1},n);this._hooks.push(s)}}}disable(){if(this._enabled){this._enabled=!1;for(let e of this._modules){typeof e.unpatch=="function"&&e.moduleExports&&(this._diag.debug("Removing instrumentation patch for nodejs module on instrumentation disabled",{module:e.name,version:e.moduleVersion}),e.unpatch(e.moduleExports,e.moduleVersion));for(let n of e.files)n.moduleExports&&(this._diag.debug("Removing instrumentation patch for nodejs module file on instrumentation disabled",{module:e.name,version:e.moduleVersion,fileName:n.name}),n.unpatch(n.moduleExports,e.moduleVersion))}}}isEnabled(){return this._enabled}};fT.InstrumentationBase=wO;function jq(t,e,n){return typeof e>"u"?t.includes("*"):t.some(r=>(0,Rde.satisfies)(e,r,{includePrerelease:n}))}});var Fq=T(mT=>{"use strict";Object.defineProperty(mT,"__esModule",{value:!0});mT.normalize=void 0;var xde=q("path");Object.defineProperty(mT,"normalize",{enumerable:!0,get:function(){return xde.normalize}})});var qq=T(gp=>{"use strict";Object.defineProperty(gp,"__esModule",{value:!0});gp.normalize=gp.InstrumentationBase=void 0;var Pde=Hq();Object.defineProperty(gp,"InstrumentationBase",{enumerable:!0,get:function(){return Pde.InstrumentationBase}});var Cde=Fq();Object.defineProperty(gp,"normalize",{enumerable:!0,get:function(){return Cde.normalize}})});var LO=T(Sp=>{"use strict";Object.defineProperty(Sp,"__esModule",{value:!0});Sp.normalize=Sp.InstrumentationBase=void 0;var zq=qq();Object.defineProperty(Sp,"InstrumentationBase",{enumerable:!0,get:function(){return zq.InstrumentationBase}});Object.defineProperty(Sp,"normalize",{enumerable:!0,get:function(){return zq.normalize}})});var Yq=T(_T=>{"use strict";Object.defineProperty(_T,"__esModule",{value:!0});_T.InstrumentationNodeModuleDefinition=void 0;var DO=class{name;supportedVersions;patch;unpatch;files;constructor(e,n,r,o,s){this.name=e,this.supportedVersions=n,this.patch=r,this.unpatch=o,this.files=s||[]}};_T.InstrumentationNodeModuleDefinition=DO});var Wq=T(hT=>{"use strict";Object.defineProperty(hT,"__esModule",{value:!0});hT.InstrumentationNodeModuleFile=void 0;var Mde=LO(),kO=class{supportedVersions;patch;unpatch;name;constructor(e,n,r,o){this.supportedVersions=n,this.patch=r,this.unpatch=o,this.name=(0,Mde.normalize)(e)}};hT.InstrumentationNodeModuleFile=kO});var Kq=T(Mc=>{"use strict";Object.defineProperty(Mc,"__esModule",{value:!0});Mc.semconvStabilityFromStr=Mc.SemconvStability=void 0;var ET;(function(t){t[t.STABLE=1]="STABLE",t[t.OLD=2]="OLD",t[t.DUPLICATE=3]="DUPLICATE"})(ET=Mc.SemconvStability||(Mc.SemconvStability={}));function wde(t,e){let n=ET.OLD,r=e?.split(",").map(o=>o.trim()).filter(o=>o!=="");for(let o of r??[])if(o.toLowerCase()===t+"/dup"){n=ET.DUPLICATE;break}else o.toLowerCase()===t&&(n=ET.STABLE);return n}Mc.semconvStabilityFromStr=wde});var _e=T(tn=>{"use strict";Object.defineProperty(tn,"__esModule",{value:!0});tn.semconvStabilityFromStr=tn.SemconvStability=tn.safeExecuteInTheMiddleAsync=tn.safeExecuteInTheMiddle=tn.isWrapped=tn.InstrumentationNodeModuleFile=tn.InstrumentationNodeModuleDefinition=tn.InstrumentationBase=tn.registerInstrumentations=void 0;var Lde=sq();Object.defineProperty(tn,"registerInstrumentations",{enumerable:!0,get:function(){return Lde.registerInstrumentations}});var Dde=LO();Object.defineProperty(tn,"InstrumentationBase",{enumerable:!0,get:function(){return Dde.InstrumentationBase}});var kde=Yq();Object.defineProperty(tn,"InstrumentationNodeModuleDefinition",{enumerable:!0,get:function(){return kde.InstrumentationNodeModuleDefinition}});var Ude=Wq();Object.defineProperty(tn,"InstrumentationNodeModuleFile",{enumerable:!0,get:function(){return Ude.InstrumentationNodeModuleFile}});var UO=CO();Object.defineProperty(tn,"isWrapped",{enumerable:!0,get:function(){return UO.isWrapped}});Object.defineProperty(tn,"safeExecuteInTheMiddle",{enumerable:!0,get:function(){return UO.safeExecuteInTheMiddle}});Object.defineProperty(tn,"safeExecuteInTheMiddleAsync",{enumerable:!0,get:function(){return UO.safeExecuteInTheMiddleAsync}});var Zq=Kq();Object.defineProperty(tn,"SemconvStability",{enumerable:!0,get:function(){return Zq.SemconvStability}});Object.defineProperty(tn,"semconvStabilityFromStr",{enumerable:!0,get:function(){return Zq.semconvStabilityFromStr}})});var Jq=T(oe=>{"use strict";Object.defineProperty(oe,"__esModule",{value:!0});oe.HTTP_FLAVOR_VALUE_HTTP_1_1=oe.NET_TRANSPORT_VALUE_IP_UDP=oe.NET_TRANSPORT_VALUE_IP_TCP=oe.ATTR_NET_TRANSPORT=oe.ATTR_NET_PEER_PORT=oe.ATTR_NET_PEER_NAME=oe.ATTR_NET_PEER_IP=oe.ATTR_NET_HOST_PORT=oe.ATTR_NET_HOST_NAME=oe.ATTR_NET_HOST_IP=oe.ATTR_HTTP_USER_AGENT=oe.ATTR_HTTP_URL=oe.ATTR_HTTP_TARGET=oe.ATTR_HTTP_STATUS_CODE=oe.ATTR_HTTP_SERVER_NAME=oe.ATTR_HTTP_SCHEME=oe.ATTR_HTTP_RESPONSE_CONTENT_LENGTH_UNCOMPRESSED=oe.ATTR_HTTP_RESPONSE_CONTENT_LENGTH=oe.ATTR_HTTP_REQUEST_CONTENT_LENGTH_UNCOMPRESSED=oe.ATTR_HTTP_REQUEST_CONTENT_LENGTH=oe.ATTR_HTTP_METHOD=oe.ATTR_HTTP_HOST=oe.ATTR_HTTP_FLAVOR=oe.ATTR_HTTP_CLIENT_IP=oe.USER_AGENT_SYNTHETIC_TYPE_VALUE_TEST=oe.USER_AGENT_SYNTHETIC_TYPE_VALUE_BOT=oe.ATTR_USER_AGENT_SYNTHETIC_TYPE=void 0;oe.ATTR_USER_AGENT_SYNTHETIC_TYPE="user_agent.synthetic.type";oe.USER_AGENT_SYNTHETIC_TYPE_VALUE_BOT="bot";oe.USER_AGENT_SYNTHETIC_TYPE_VALUE_TEST="test";oe.ATTR_HTTP_CLIENT_IP="http.client_ip";oe.ATTR_HTTP_FLAVOR="http.flavor";oe.ATTR_HTTP_HOST="http.host";oe.ATTR_HTTP_METHOD="http.method";oe.ATTR_HTTP_REQUEST_CONTENT_LENGTH="http.request_content_length";oe.ATTR_HTTP_REQUEST_CONTENT_LENGTH_UNCOMPRESSED="http.request_content_length_uncompressed";oe.ATTR_HTTP_RESPONSE_CONTENT_LENGTH="http.response_content_length";oe.ATTR_HTTP_RESPONSE_CONTENT_LENGTH_UNCOMPRESSED="http.response_content_length_uncompressed";oe.ATTR_HTTP_SCHEME="http.scheme";oe.ATTR_HTTP_SERVER_NAME="http.server_name";oe.ATTR_HTTP_STATUS_CODE="http.status_code";oe.ATTR_HTTP_TARGET="http.target";oe.ATTR_HTTP_URL="http.url";oe.ATTR_HTTP_USER_AGENT="http.user_agent";oe.ATTR_NET_HOST_IP="net.host.ip";oe.ATTR_NET_HOST_NAME="net.host.name";oe.ATTR_NET_HOST_PORT="net.host.port";oe.ATTR_NET_PEER_IP="net.peer.ip";oe.ATTR_NET_PEER_NAME="net.peer.name";oe.ATTR_NET_PEER_PORT="net.peer.port";oe.ATTR_NET_TRANSPORT="net.transport";oe.NET_TRANSPORT_VALUE_IP_TCP="ip_tcp";oe.NET_TRANSPORT_VALUE_IP_UDP="ip_udp";oe.HTTP_FLAVOR_VALUE_HTTP_1_1="1.1"});var Qq=T(Ef=>{"use strict";Object.defineProperty(Ef,"__esModule",{value:!0});Ef.AttributeNames=void 0;var $de;(function(t){t.HTTP_ERROR_NAME="http.error_name",t.HTTP_ERROR_MESSAGE="http.error_message",t.HTTP_STATUS_TEXT="http.status_text"})($de=Ef.AttributeNames||(Ef.AttributeNames={}))});var $O=T(Ns=>{"use strict";Object.defineProperty(Ns,"__esModule",{value:!0});Ns.DEFAULT_QUERY_STRINGS_TO_REDACT=Ns.STR_REDACTED=Ns.SYNTHETIC_BOT_NAMES=Ns.SYNTHETIC_TEST_NAMES=void 0;Ns.SYNTHETIC_TEST_NAMES=["alwayson"];Ns.SYNTHETIC_BOT_NAMES=["googlebot","bingbot"];Ns.STR_REDACTED="REDACTED";Ns.DEFAULT_QUERY_STRINGS_TO_REDACT=["sig","Signature","AWSAccessKeyId","X-Goog-Signature"]});var ez=T((Vje,Xq)=>{"use strict";var Gde=q("util");function GO(t,e){Error.captureStackTrace(this,GO),this.name=this.constructor.name,this.message=t,this.input=e}Gde.inherits(GO,Error);Xq.exports=GO});var nz=T((Bje,tz)=>{"use strict";function Vde(t){return t===34||t===40||t===41||t===44||t===47||t>=58&&t<=64||t>=91&&t<=93||t===123||t===125}function Bde(t){return t===33||t>=35&&t<=39||t===42||t===43||t===45||t===46||t>=48&&t<=57||t>=65&&t<=90||t>=94&&t<=122||t===124||t===126}function jde(t){return t>=32&&t<=126}function Hde(t){return t>=128&&t<=255}tz.exports={isDelimiter:Vde,isTokenChar:Bde,isExtended:Hde,isPrint:jde}});var az=T((jje,iz)=>{"use strict";var Fde=q("util"),Ap=ez(),TT=nz(),qde=TT.isDelimiter,rz=TT.isTokenChar,oz=TT.isExtended,zde=TT.isPrint;function sz(t){return t.replace(/\\(.)/g,"$1")}function Tf(t,e){return Fde.format("Unexpected character '%s' at index %d",t.charAt(e),e)}function Yde(t){for(var e=!1,n=!1,r=!1,o={},s=[],i=-1,a=-1,c,u,p=0;p<t.length;p++)if(u=t.charCodeAt(p),c===void 0){if(p!==0&&i===-1&&(u===32||u===9))continue;if(rz(u))i===-1&&(i=p);else if(u===61&&i!==-1)c=t.slice(i,p).toLowerCase(),i=-1;else throw new Ap(Tf(t,p),t)}else if(n&&(u===9||zde(u)||oz(u)))n=!1;else if(rz(u)){if(a!==-1)throw new Ap(Tf(t,p),t);i===-1&&(i=p)}else if(qde(u)||oz(u))if(r)u===34?(r=!1,a=p):u===92?(i===-1&&(i=p),n=e=!0):i===-1&&(i=p);else if(u===34&&t.charCodeAt(p-1)===61)r=!0;else if((u===44||u===59)&&(i!==-1||a!==-1))i!==-1?(a===-1&&(a=p),o[c]=e?sz(t.slice(i,a)):t.slice(i,a)):o[c]="",u===44&&(s.push(o),o={}),c=void 0,i=a=-1;else throw new Ap(Tf(t,p),t);else if(u===32||u===9){if(a!==-1)continue;if(r)i===-1&&(i=p);else if(i!==-1)a=p;else throw new Ap(Tf(t,p),t)}else throw new Ap(Tf(t,p),t);if(c===void 0||r||i===-1&&a===-1||u===32||u===9)throw new Ap("Unexpected end of input",t);return i!==-1?(a===-1&&(a=p),o[c]=e?sz(t.slice(i,a)):t.slice(i,a)):o[c]="",s.push(o),s}iz.exports=Yde});var Ez=T(ie=>{"use strict";Object.defineProperty(ie,"__esModule",{value:!0});ie.headerCapture=ie.getIncomingStableRequestMetricAttributesOnResponse=ie.getIncomingRequestMetricAttributesOnResponse=ie.getIncomingRequestAttributesOnResponse=ie.getIncomingRequestMetricAttributes=ie.getIncomingRequestAttributes=ie.getRemoteClientAddress=ie.getOutgoingStableRequestMetricAttributesOnResponse=ie.getOutgoingRequestMetricAttributesOnResponse=ie.getOutgoingRequestAttributesOnResponse=ie.setAttributesFromHttpKind=ie.getOutgoingRequestMetricAttributes=ie.getOutgoingRequestAttributes=ie.extractHostnameAndPort=ie.isValidOptionsType=ie.getRequestInfo=ie.isCompressed=ie.setResponseContentLengthAttribute=ie.setRequestContentLengthAttribute=ie.setSpanWithError=ie.satisfiesPattern=ie.parseResponseStatus=ie.getAbsoluteUrl=void 0;var gf=U(),Re=Qe(),X=Jq(),cz=ze(),Os=_e(),lz=q("url"),ST=Qq(),uz=$O(),gT=$O(),Wde=az(),Kde=(t,e,n="http:",r=Array.from(gT.DEFAULT_QUERY_STRINGS_TO_REDACT))=>{let o=t||{},s=o.protocol||n,i=(o.port||"").toString(),a=o.path||"/",c=o.host||o.hostname||e.host||"localhost";if(c.indexOf(":")===-1&&i&&i!=="80"&&i!=="443"&&(c+=`:${i}`),a.includes("?")){let p=lz.parse(a),l=p.pathname||"",d=p.query||"",f=new URLSearchParams(d),m=r||[];for(let E of m)f.has(E)&&f.get(E)!==""&&f.set(E,gT.STR_REDACTED);let h=f.toString();a=`${l}?${h}`}let u=o.auth?`${gT.STR_REDACTED}:${gT.STR_REDACTED}@`:"";return`${s}//${u}${c}${a}`};ie.getAbsoluteUrl=Kde;var Zde=(t,e)=>{let n=t===gf.SpanKind.CLIENT?400:500;return e&&e>=100&&e<n?gf.SpanStatusCode.UNSET:gf.SpanStatusCode.ERROR};ie.parseResponseStatus=Zde;var Jde=(t,e)=>{if(typeof e=="string")return e===t;if(e instanceof RegExp)return e.test(t);if(typeof e=="function")return e(t);throw new TypeError("Pattern is in unsupported datatype")};ie.satisfiesPattern=Jde;var Qde=(t,e,n)=>{let r=e.message;n&Os.SemconvStability.OLD&&(t.setAttribute(ST.AttributeNames.HTTP_ERROR_NAME,e.name),t.setAttribute(ST.AttributeNames.HTTP_ERROR_MESSAGE,r)),n&Os.SemconvStability.STABLE&&t.setAttribute(Re.ATTR_ERROR_TYPE,e.name),t.setStatus({code:gf.SpanStatusCode.ERROR,message:r}),t.recordException(e)};ie.setSpanWithError=Qde;var Xde=(t,e)=>{let n=dz(t.headers);n!==null&&((0,ie.isCompressed)(t.headers)?e[X.ATTR_HTTP_REQUEST_CONTENT_LENGTH]=n:e[X.ATTR_HTTP_REQUEST_CONTENT_LENGTH_UNCOMPRESSED]=n)};ie.setRequestContentLengthAttribute=Xde;var efe=(t,e)=>{let n=dz(t.headers);n!==null&&((0,ie.isCompressed)(t.headers)?e[X.ATTR_HTTP_RESPONSE_CONTENT_LENGTH]=n:e[X.ATTR_HTTP_RESPONSE_CONTENT_LENGTH_UNCOMPRESSED]=n)};ie.setResponseContentLengthAttribute=efe;function dz(t){let e=t["content-length"];if(e===void 0)return null;let n=parseInt(e,10);return isNaN(n)?null:n}var tfe=t=>{let e=t["content-encoding"];return!!e&&e!=="identity"};ie.isCompressed=tfe;function nfe(t){let{hostname:e,pathname:n,port:r,username:o,password:s,search:i,protocol:a,hash:c,href:u,origin:p,host:l}=new URL(t),d={protocol:a,hostname:e&&e[0]==="["?e.slice(1,-1):e,hash:c,search:i,pathname:n,path:`${n||""}${i||""}`,href:u,origin:p,host:l};return r!==""&&(d.port=Number(r)),(o||s)&&(d.auth=`${decodeURIComponent(o)}:${decodeURIComponent(s)}`),d}var rfe=(t,e,n)=>{let r,o,s,i=!1;if(typeof e=="string"){try{let c=nfe(e);s=c,r=c.pathname||"/"}catch(c){i=!0,t.verbose("Unable to parse URL provided to HTTP request, using fallback to determine path. Original error:",c),s={path:e},r=s.path||"/"}o=`${s.protocol||"http:"}//${s.host}`,n!==void 0&&Object.assign(s,n)}else if(e instanceof lz.URL)s={protocol:e.protocol,hostname:typeof e.hostname=="string"&&e.hostname.startsWith("[")?e.hostname.slice(1,-1):e.hostname,path:`${e.pathname||""}${e.search||""}`},e.port!==""&&(s.port=Number(e.port)),(e.username||e.password)&&(s.auth=`${e.username}:${e.password}`),r=e.pathname,o=e.origin,n!==void 0&&Object.assign(s,n);else{s=Object.assign({protocol:e.host?"http:":void 0},e);let c=s.host||(s.port!=null?`${s.hostname}${s.port}`:s.hostname);if(o=`${s.protocol||"http:"}//${c}`,r=e.pathname,!r&&s.path)try{r=new URL(s.path,o).pathname||"/"}catch{r="/"}}let a=s.method?s.method.toUpperCase():"GET";return{origin:o,pathname:r,method:a,optionsParsed:s,invalidUrl:i}};ie.getRequestInfo=rfe;var ofe=t=>{if(!t)return!1;let e=typeof t;return e==="string"||e==="object"&&!Array.isArray(t)};ie.isValidOptionsType=ofe;var sfe=t=>{if(t.hostname&&t.port)return{hostname:t.hostname,port:t.port};let e=t.host?.match(/^([^:/ ]+)(:\d{1,5})?/)||null,n=t.hostname||(e===null?"localhost":e[1]),r=t.port;return r||(e&&e[2]?r=e[2].substring(1):r=t.protocol==="https:"?"443":"80"),{hostname:n,port:r}};ie.extractHostnameAndPort=sfe;var ife=(t,e,n,r)=>{let o=e.hostname,s=e.port,i=t.method??"GET",a=_z(i),c=t.headers||{},u=c["user-agent"],p=(0,ie.getAbsoluteUrl)(t,c,`${e.component}:`,e.redactedQueryParams),l={[X.ATTR_HTTP_URL]:p,[X.ATTR_HTTP_METHOD]:i,[X.ATTR_HTTP_TARGET]:t.path||"/",[X.ATTR_NET_PEER_NAME]:o,[X.ATTR_HTTP_HOST]:c.host??`${o}:${s}`},d={[Re.ATTR_HTTP_REQUEST_METHOD]:a,[Re.ATTR_SERVER_ADDRESS]:o,[Re.ATTR_SERVER_PORT]:Number(s),[Re.ATTR_URL_FULL]:p,[Re.ATTR_USER_AGENT_ORIGINAL]:u};switch(i!==a&&(d[Re.ATTR_HTTP_REQUEST_METHOD_ORIGINAL]=i),r&&u&&(d[X.ATTR_USER_AGENT_SYNTHETIC_TYPE]=fz(u)),u!==void 0&&(l[X.ATTR_HTTP_USER_AGENT]=u),n){case Os.SemconvStability.STABLE:return Object.assign(d,e.hookAttributes);case Os.SemconvStability.OLD:return Object.assign(l,e.hookAttributes)}return Object.assign(l,d,e.hookAttributes)};ie.getOutgoingRequestAttributes=ife;var afe=t=>{let e={};return e[X.ATTR_HTTP_METHOD]=t[X.ATTR_HTTP_METHOD],e[X.ATTR_NET_PEER_NAME]=t[X.ATTR_NET_PEER_NAME],e};ie.getOutgoingRequestMetricAttributes=afe;var cfe=(t,e)=>{t&&(e[X.ATTR_HTTP_FLAVOR]=t,t.toUpperCase()!=="QUIC"?e[X.ATTR_NET_TRANSPORT]=X.NET_TRANSPORT_VALUE_IP_TCP:e[X.ATTR_NET_TRANSPORT]=X.NET_TRANSPORT_VALUE_IP_UDP)};ie.setAttributesFromHttpKind=cfe;var fz=t=>{let e=String(t).toLowerCase();for(let n of uz.SYNTHETIC_TEST_NAMES)if(e.includes(n))return X.USER_AGENT_SYNTHETIC_TYPE_VALUE_TEST;for(let n of uz.SYNTHETIC_BOT_NAMES)if(e.includes(n))return X.USER_AGENT_SYNTHETIC_TYPE_VALUE_BOT},ufe=(t,e)=>{let{statusCode:n,statusMessage:r,httpVersion:o,socket:s}=t,i={},a={};if(n!=null&&(a[Re.ATTR_HTTP_RESPONSE_STATUS_CODE]=n),s){let{remoteAddress:c,remotePort:u}=s;i[X.ATTR_NET_PEER_IP]=c,i[X.ATTR_NET_PEER_PORT]=u,a[Re.ATTR_NETWORK_PEER_ADDRESS]=c,a[Re.ATTR_NETWORK_PEER_PORT]=u,a[Re.ATTR_NETWORK_PROTOCOL_VERSION]=t.httpVersion}switch((0,ie.setResponseContentLengthAttribute)(t,i),n&&(i[X.ATTR_HTTP_STATUS_CODE]=n,i[ST.AttributeNames.HTTP_STATUS_TEXT]=(r||"").toUpperCase()),(0,ie.setAttributesFromHttpKind)(o,i),e){case Os.SemconvStability.STABLE:return a;case Os.SemconvStability.OLD:return i}return Object.assign(i,a)};ie.getOutgoingRequestAttributesOnResponse=ufe;var pfe=t=>{let e={};return e[X.ATTR_NET_PEER_PORT]=t[X.ATTR_NET_PEER_PORT],e[X.ATTR_HTTP_STATUS_CODE]=t[X.ATTR_HTTP_STATUS_CODE],e[X.ATTR_HTTP_FLAVOR]=t[X.ATTR_HTTP_FLAVOR],e};ie.getOutgoingRequestMetricAttributesOnResponse=pfe;var lfe=t=>{let e={};return t[Re.ATTR_NETWORK_PROTOCOL_VERSION]&&(e[Re.ATTR_NETWORK_PROTOCOL_VERSION]=t[Re.ATTR_NETWORK_PROTOCOL_VERSION]),t[Re.ATTR_HTTP_RESPONSE_STATUS_CODE]&&(e[Re.ATTR_HTTP_RESPONSE_STATUS_CODE]=t[Re.ATTR_HTTP_RESPONSE_STATUS_CODE]),e};ie.getOutgoingStableRequestMetricAttributesOnResponse=lfe;function Zi(t,e){let n=t.split(":");if(n.length===1)return e==="http"?{host:n[0],port:"80"}:e==="https"?{host:n[0],port:"443"}:{host:n[0]};if(n.length===2)return{host:n[0],port:n[1]};if(n[0].startsWith("[")){if(n[n.length-1].endsWith("]")){if(e==="http")return{host:t,port:"80"};if(e==="https")return{host:t,port:"443"}}else if(n[n.length-2].endsWith("]"))return{host:n.slice(0,-1).join(":"),port:n[n.length-1]}}return{host:t}}function dfe(t,e){let n=t.headers.forwarded;if(n){for(let s of hz(n))if(s.host)return Zi(s.host,s.proto)}let r=t.headers["x-forwarded-host"];if(typeof r=="string")return typeof t.headers["x-forwarded-proto"]=="string"?Zi(r,t.headers["x-forwarded-proto"]):Array.isArray(t.headers["x-forwarded-proto"])?Zi(r,t.headers["x-forwarded-proto"][0]):Zi(r);if(Array.isArray(r)&&typeof r[0]=="string"&&r[0].length>0)return typeof t.headers["x-forwarded-proto"]=="string"?Zi(r[0],t.headers["x-forwarded-proto"]):Array.isArray(t.headers["x-forwarded-proto"])?Zi(r[0],t.headers["x-forwarded-proto"][0]):Zi(r[0]);let o=t.headers.host;return typeof o=="string"&&o.length>0?Zi(o,e):null}function mz(t){let e=t.headers.forwarded;if(e){for(let o of hz(e))if(o.for)return pz(o.for)}let n=t.headers["x-forwarded-for"];if(n){let o;if(typeof n=="string"?o=n:Array.isArray(n)&&(o=n[0]),typeof o=="string")return o=o.split(",")[0].trim(),pz(o)}let r=t.socket.remoteAddress;return r||null}ie.getRemoteClientAddress=mz;function pz(t){try{let{hostname:e}=new URL(`http://${t}`);return e.startsWith("[")&&e.endsWith("]")?e.slice(1,-1):e}catch{return t}}function ffe(t,e,n){try{if(e.headers.host)return new URL(e.url??"/",`${t}://${e.headers.host}`);{let r=new URL(e.url??"/",`${t}://localhost`);return{pathname:r.pathname,search:r.search,toString:function(){return r.pathname+r.search}}}}catch(r){return n.verbose("Unable to get URL from request",r),{}}}var mfe=(t,e,n)=>{let r=t.headers,o=r["user-agent"],s=r["x-forwarded-for"],i=t.httpVersion,a=r.host,c=a?.replace(/^(.*)(:[0-9]{1,5})/,"$1")||"localhost",u=t.method,p=_z(u),l=dfe(t,e.component),d=e.serverName,f=mz(t),m={[Re.ATTR_HTTP_REQUEST_METHOD]:p,[Re.ATTR_URL_SCHEME]:e.component,[Re.ATTR_SERVER_ADDRESS]:l?.host,[Re.ATTR_NETWORK_PEER_ADDRESS]:t.socket.remoteAddress,[Re.ATTR_NETWORK_PEER_PORT]:t.socket.remotePort,[Re.ATTR_NETWORK_PROTOCOL_VERSION]:t.httpVersion,[Re.ATTR_USER_AGENT_ORIGINAL]:o},h=ffe(e.component,t,n);h?.pathname!=null&&(m[Re.ATTR_URL_PATH]=h.pathname),h.search&&(m[Re.ATTR_URL_QUERY]=h.search.slice(1)),f!=null&&(m[Re.ATTR_CLIENT_ADDRESS]=f),l?.port!=null&&(m[Re.ATTR_SERVER_PORT]=Number(l.port)),u!==p&&(m[Re.ATTR_HTTP_REQUEST_METHOD_ORIGINAL]=u),e.enableSyntheticSourceDetection&&o&&(m[X.ATTR_USER_AGENT_SYNTHETIC_TYPE]=fz(o));let E={[X.ATTR_HTTP_URL]:h.toString(),[X.ATTR_HTTP_HOST]:a,[X.ATTR_NET_HOST_NAME]:c,[X.ATTR_HTTP_METHOD]:u,[X.ATTR_HTTP_SCHEME]:e.component};switch(typeof s=="string"&&(E[X.ATTR_HTTP_CLIENT_IP]=s.split(",")[0]),typeof d=="string"&&(E[X.ATTR_HTTP_SERVER_NAME]=d),h?.pathname&&(E[X.ATTR_HTTP_TARGET]=h?.pathname+h?.search||"/"),o!==void 0&&(E[X.ATTR_HTTP_USER_AGENT]=o),(0,ie.setRequestContentLengthAttribute)(t,E),(0,ie.setAttributesFromHttpKind)(i,E),e.semconvStability){case Os.SemconvStability.STABLE:return Object.assign(m,e.hookAttributes);case Os.SemconvStability.OLD:return Object.assign(E,e.hookAttributes)}return Object.assign(E,m,e.hookAttributes)};ie.getIncomingRequestAttributes=mfe;var _fe=t=>{let e={};return e[X.ATTR_HTTP_SCHEME]=t[X.ATTR_HTTP_SCHEME],e[X.ATTR_HTTP_METHOD]=t[X.ATTR_HTTP_METHOD],e[X.ATTR_NET_HOST_NAME]=t[X.ATTR_NET_HOST_NAME],e[X.ATTR_HTTP_FLAVOR]=t[X.ATTR_HTTP_FLAVOR],e};ie.getIncomingRequestMetricAttributes=_fe;var hfe=(t,e,n)=>{let{socket:r}=t,{statusCode:o,statusMessage:s}=e,i={[Re.ATTR_HTTP_RESPONSE_STATUS_CODE]:o},a=(0,cz.getRPCMetadata)(gf.context.active()),c={};if(r){let{localAddress:u,localPort:p,remoteAddress:l,remotePort:d}=r;c[X.ATTR_NET_HOST_IP]=u,c[X.ATTR_NET_HOST_PORT]=p,c[X.ATTR_NET_PEER_IP]=l,c[X.ATTR_NET_PEER_PORT]=d}switch(c[X.ATTR_HTTP_STATUS_CODE]=o,c[ST.AttributeNames.HTTP_STATUS_TEXT]=(s||"").toUpperCase(),a?.type===cz.RPCType.HTTP&&a.route!==void 0&&(c[Re.ATTR_HTTP_ROUTE]=a.route,i[Re.ATTR_HTTP_ROUTE]=a.route),n){case Os.SemconvStability.STABLE:return i;case Os.SemconvStability.OLD:return c}return Object.assign(c,i)};ie.getIncomingRequestAttributesOnResponse=hfe;var Efe=t=>{let e={};return e[X.ATTR_HTTP_STATUS_CODE]=t[X.ATTR_HTTP_STATUS_CODE],e[X.ATTR_NET_HOST_PORT]=t[X.ATTR_NET_HOST_PORT],t[Re.ATTR_HTTP_ROUTE]!==void 0&&(e[Re.ATTR_HTTP_ROUTE]=t[Re.ATTR_HTTP_ROUTE]),e};ie.getIncomingRequestMetricAttributesOnResponse=Efe;var Tfe=t=>{let e={};return t[Re.ATTR_HTTP_ROUTE]!==void 0&&(e[Re.ATTR_HTTP_ROUTE]=t[Re.ATTR_HTTP_ROUTE]),t[Re.ATTR_HTTP_RESPONSE_STATUS_CODE]&&(e[Re.ATTR_HTTP_RESPONSE_STATUS_CODE]=t[Re.ATTR_HTTP_RESPONSE_STATUS_CODE]),e};ie.getIncomingStableRequestMetricAttributesOnResponse=Tfe;function gfe(t,e){let n=new Map;for(let r=0,o=e.length;r<o;r++){let s=e[r].toLowerCase();n.set(s,s.replace(/-/g,"_"))}return(r,o)=>{for(let s of n.keys()){let i=o(s);if(i===void 0)continue;let a=n.get(s),c=`http.${t}.header.${a}`;typeof i=="string"?r.setAttribute(c,[i]):Array.isArray(i)?r.setAttribute(c,i):r.setAttribute(c,[i])}}}ie.headerCapture=gfe;var Sfe=new Set(["GET","HEAD","POST","PUT","DELETE","CONNECT","OPTIONS","TRACE","PATCH"]);function _z(t){if(t==null)return"GET";let e=t.toUpperCase();return Sfe.has(e)?e:"_OTHER"}function hz(t){try{return Wde(t)}catch{return[]}}});var Tz=T(AT=>{"use strict";Object.defineProperty(AT,"__esModule",{value:!0});AT.HttpInstrumentation=void 0;var Te=U(),Ji=ze(),Afe=q("url"),Rfe=zF(),Sn=_e(),VO=q("events"),St=Qe(),zt=Ez(),BO=class extends Sn.InstrumentationBase{_spanNotEnded=new WeakSet;_headerCapture;_semconvStability=Sn.SemconvStability.OLD;constructor(e={}){super("@opentelemetry/instrumentation-http",Rfe.VERSION,e),this._headerCapture=this._createHeaderCapture(),this._semconvStability=(0,Sn.semconvStabilityFromStr)("http",process.env.OTEL_SEMCONV_STABILITY_OPT_IN)}_updateMetricInstruments(){this._oldHttpServerDurationHistogram=this.meter.createHistogram("http.server.duration",{description:"Measures the duration of inbound HTTP requests.",unit:"ms",valueType:Te.ValueType.DOUBLE}),this._oldHttpClientDurationHistogram=this.meter.createHistogram("http.client.duration",{description:"Measures the duration of outbound HTTP requests.",unit:"ms",valueType:Te.ValueType.DOUBLE}),this._stableHttpServerDurationHistogram=this.meter.createHistogram(St.METRIC_HTTP_SERVER_REQUEST_DURATION,{description:"Duration of HTTP server requests.",unit:"s",valueType:Te.ValueType.DOUBLE,advice:{explicitBucketBoundaries:[.005,.01,.025,.05,.075,.1,.25,.5,.75,1,2.5,5,7.5,10]}}),this._stableHttpClientDurationHistogram=this.meter.createHistogram(St.METRIC_HTTP_CLIENT_REQUEST_DURATION,{description:"Duration of HTTP client requests.",unit:"s",valueType:Te.ValueType.DOUBLE,advice:{explicitBucketBoundaries:[.005,.01,.025,.05,.075,.1,.25,.5,.75,1,2.5,5,7.5,10]}})}_recordServerDuration(e,n,r){this._semconvStability&Sn.SemconvStability.OLD&&this._oldHttpServerDurationHistogram.record(e,n),this._semconvStability&Sn.SemconvStability.STABLE&&this._stableHttpServerDurationHistogram.record(e/1e3,r)}_recordClientDuration(e,n,r){this._semconvStability&Sn.SemconvStability.OLD&&this._oldHttpClientDurationHistogram.record(e,n),this._semconvStability&Sn.SemconvStability.STABLE&&this._stableHttpClientDurationHistogram.record(e/1e3,r)}setConfig(e={}){super.setConfig(e),this._headerCapture=this._createHeaderCapture()}init(){return[this._getHttpsInstrumentation(),this._getHttpInstrumentation()]}_getHttpInstrumentation(){return new Sn.InstrumentationNodeModuleDefinition("http",["*"],e=>{let n=e[Symbol.toStringTag]==="Module";if(!this.getConfig().disableOutgoingRequestInstrumentation){let r=this._wrap(e,"request",this._getPatchOutgoingRequestFunction("http")),o=this._wrap(e,"get",this._getPatchOutgoingGetFunction(r));n&&(e.default.request=r,e.default.get=o)}return this.getConfig().disableIncomingRequestInstrumentation||this._wrap(e.Server.prototype,"emit",this._getPatchIncomingRequestFunction("http")),e},e=>{e!==void 0&&(this.getConfig().disableOutgoingRequestInstrumentation||(this._unwrap(e,"request"),this._unwrap(e,"get")),this.getConfig().disableIncomingRequestInstrumentation||this._unwrap(e.Server.prototype,"emit"))})}_getHttpsInstrumentation(){return new Sn.InstrumentationNodeModuleDefinition("https",["*"],e=>{let n=e[Symbol.toStringTag]==="Module";if(!this.getConfig().disableOutgoingRequestInstrumentation){let r=this._wrap(e,"request",this._getPatchHttpsOutgoingRequestFunction("https")),o=this._wrap(e,"get",this._getPatchHttpsOutgoingGetFunction(r));n&&(e.default.request=r,e.default.get=o)}return this.getConfig().disableIncomingRequestInstrumentation||this._wrap(e.Server.prototype,"emit",this._getPatchIncomingRequestFunction("https")),e},e=>{e!==void 0&&(this.getConfig().disableOutgoingRequestInstrumentation||(this._unwrap(e,"request"),this._unwrap(e,"get")),this.getConfig().disableIncomingRequestInstrumentation||this._unwrap(e.Server.prototype,"emit"))})}_getPatchIncomingRequestFunction(e){return n=>this._incomingRequestFunction(e,n)}_getPatchOutgoingRequestFunction(e){return n=>this._outgoingRequestFunction(e,n)}_getPatchOutgoingGetFunction(e){return n=>function(o,...s){let i=e(o,...s);return i.end(),i}}_getPatchHttpsOutgoingRequestFunction(e){return n=>{let r=this;return function(s,...i){return e==="https"&&typeof s=="object"&&s?.constructor?.name!=="URL"&&(s=Object.assign({},s),r._setDefaultOptions(s)),r._getPatchOutgoingRequestFunction(e)(n)(s,...i)}}}_setDefaultOptions(e){e.protocol=e.protocol||"https:",e.port=e.port||443}_getPatchHttpsOutgoingGetFunction(e){return n=>{let r=this;return function(s,...i){return r._getPatchOutgoingGetFunction(e)(n)(s,...i)}}}_traceClientRequest(e,n,r,o,s){this.getConfig().requestHook&&this._callRequestHook(n,e);let i=!1;return e.prependListener("response",a=>{this._diag.debug("outgoingRequest on response()"),e.listenerCount("response")<=1&&a.resume();let c=(0,zt.getOutgoingRequestAttributesOnResponse)(a,this._semconvStability);n.setAttributes(c),o=Object.assign(o,(0,zt.getOutgoingRequestMetricAttributesOnResponse)(c)),s=Object.assign(s,(0,zt.getOutgoingStableRequestMetricAttributesOnResponse)(c)),this.getConfig().responseHook&&this._callResponseHook(n,a),this._headerCapture.client.captureRequestHeaders(n,p=>e.getHeader(p)),this._headerCapture.client.captureResponseHeaders(n,p=>a.headers[p]),Te.context.bind(Te.context.active(),a);let u=()=>{if(this._diag.debug("outgoingRequest on end()"),i)return;i=!0;let p;a.aborted&&!a.complete?p={code:Te.SpanStatusCode.ERROR}:p={code:(0,zt.parseResponseStatus)(Te.SpanKind.CLIENT,a.statusCode)},n.setStatus(p),this.getConfig().applyCustomAttributesOnSpan&&(0,Sn.safeExecuteInTheMiddle)(()=>this.getConfig().applyCustomAttributesOnSpan(n,e,a),()=>{},!0),this._closeHttpSpan(n,Te.SpanKind.CLIENT,r,o,s)};a.on("end",u),a.on(VO.errorMonitor,p=>{this._diag.debug("outgoingRequest on error()",p),!i&&(i=!0,this._onOutgoingRequestError(n,o,s,r,p))})}),e.on("close",()=>{this._diag.debug("outgoingRequest on request close()"),!(e.aborted||i)&&(i=!0,this._closeHttpSpan(n,Te.SpanKind.CLIENT,r,o,s))}),e.on(VO.errorMonitor,a=>{this._diag.debug("outgoingRequest on request error()",a),!i&&(i=!0,this._onOutgoingRequestError(n,o,s,r,a))}),this._diag.debug("http.ClientRequest return request"),e}_incomingRequestFunction(e,n){let r=this;return function(s,...i){if(s!=="request")return n.apply(this,[s,...i]);let a=i[0],c=i[1],u=a.method||"GET";if(r._diag.debug(`${e} instrumentation incomingRequest`),(0,Sn.safeExecuteInTheMiddle)(()=>r.getConfig().ignoreIncomingRequestHook?.(a),y=>{y!=null&&r._diag.error("caught ignoreIncomingRequestHook error: ",y)},!0))return Te.context.with((0,Ji.suppressTracing)(Te.context.active()),()=>(Te.context.bind(Te.context.active(),a),Te.context.bind(Te.context.active(),c),n.apply(this,[s,...i])));let p=a.headers,l=(0,zt.getIncomingRequestAttributes)(a,{component:e,serverName:r.getConfig().serverName,hookAttributes:r._callStartSpanHook(a,r.getConfig().startIncomingSpanHook),semconvStability:r._semconvStability,enableSyntheticSourceDetection:r.getConfig().enableSyntheticSourceDetection||!1},r._diag),d={kind:Te.SpanKind.SERVER,attributes:l},f=(0,Ji.hrTime)(),m=(0,zt.getIncomingRequestMetricAttributes)(l),h={[St.ATTR_HTTP_REQUEST_METHOD]:l[St.ATTR_HTTP_REQUEST_METHOD],[St.ATTR_URL_SCHEME]:l[St.ATTR_URL_SCHEME]};l[St.ATTR_NETWORK_PROTOCOL_VERSION]&&(h[St.ATTR_NETWORK_PROTOCOL_VERSION]=l[St.ATTR_NETWORK_PROTOCOL_VERSION]);let E=Te.propagation.extract(Te.ROOT_CONTEXT,p),A=r._startHttpSpan(u,d,E),R={type:Ji.RPCType.HTTP,span:A};return Te.context.with((0,Ji.setRPCMetadata)(Te.trace.setSpan(E,A),R),()=>{Te.context.bind(Te.context.active(),a),Te.context.bind(Te.context.active(),c),r.getConfig().requestHook&&r._callRequestHook(A,a),r.getConfig().responseHook&&r._callResponseHook(A,c),r._headerCapture.server.captureRequestHeaders(A,O=>a.headers[O]);let y=!1;return c.on("close",()=>{y||r._onServerResponseFinish(a,c,A,m,h,f)}),c.on(VO.errorMonitor,O=>{y=!0,r._onServerResponseError(A,m,h,f,O)}),(0,Sn.safeExecuteInTheMiddle)(()=>n.apply(this,[s,...i]),O=>{if(O)throw r._onServerResponseError(A,m,h,f,O),O})})}}_outgoingRequestFunction(e,n){let r=this;return function(s,...i){if(!(0,zt.isValidOptionsType)(s))return n.apply(this,[s,...i]);let a=typeof i[0]=="object"&&(typeof s=="string"||s instanceof Afe.URL)?i.shift():void 0,{method:c,invalidUrl:u,optionsParsed:p}=(0,zt.getRequestInfo)(r._diag,s,a);if((0,Sn.safeExecuteInTheMiddle)(()=>r.getConfig().ignoreOutgoingRequestHook?.(p),P=>{P!=null&&r._diag.error("caught ignoreOutgoingRequestHook error: ",P)},!0))return n.apply(this,[p,...i]);let{hostname:l,port:d}=(0,zt.extractHostnameAndPort)(p),f=(0,zt.getOutgoingRequestAttributes)(p,{component:e,port:d,hostname:l,hookAttributes:r._callStartSpanHook(p,r.getConfig().startOutgoingSpanHook),redactedQueryParams:r.getConfig().redactedQueryParams},r._semconvStability,r.getConfig().enableSyntheticSourceDetection||!1),m=(0,Ji.hrTime)(),h=(0,zt.getOutgoingRequestMetricAttributes)(f),E={[St.ATTR_HTTP_REQUEST_METHOD]:f[St.ATTR_HTTP_REQUEST_METHOD],[St.ATTR_SERVER_ADDRESS]:f[St.ATTR_SERVER_ADDRESS],[St.ATTR_SERVER_PORT]:f[St.ATTR_SERVER_PORT]};f[St.ATTR_HTTP_RESPONSE_STATUS_CODE]&&(E[St.ATTR_HTTP_RESPONSE_STATUS_CODE]=f[St.ATTR_HTTP_RESPONSE_STATUS_CODE]),f[St.ATTR_NETWORK_PROTOCOL_VERSION]&&(E[St.ATTR_NETWORK_PROTOCOL_VERSION]=f[St.ATTR_NETWORK_PROTOCOL_VERSION]);let A={kind:Te.SpanKind.CLIENT,attributes:f},R=r._startHttpSpan(c,A),y=Te.context.active(),O=Te.trace.setSpan(y,R);return p.headers?p.headers=Object.assign({},p.headers):p.headers={},Te.propagation.inject(O,p.headers),Te.context.with(O,()=>{let P=i[i.length-1];typeof P=="function"&&(i[i.length-1]=Te.context.bind(y,P));let M=(0,Sn.safeExecuteInTheMiddle)(()=>u?n.apply(this,[s,...i]):n.apply(this,[p,...i]),j=>{if(j)throw r._onOutgoingRequestError(R,h,E,m,j),j});return r._diag.debug(`${e} instrumentation outgoingRequest`),Te.context.bind(y,M),r._traceClientRequest(M,R,m,h,E)})}}_onServerResponseFinish(e,n,r,o,s,i){let a=(0,zt.getIncomingRequestAttributesOnResponse)(e,n,this._semconvStability);o=Object.assign(o,(0,zt.getIncomingRequestMetricAttributesOnResponse)(a)),s=Object.assign(s,(0,zt.getIncomingStableRequestMetricAttributesOnResponse)(a)),this._headerCapture.server.captureResponseHeaders(r,u=>n.getHeader(u)),r.setAttributes(a).setStatus({code:(0,zt.parseResponseStatus)(Te.SpanKind.SERVER,n.statusCode)});let c=a[St.ATTR_HTTP_ROUTE];c&&r.updateName(`${e.method||"GET"} ${c}`),this.getConfig().applyCustomAttributesOnSpan&&(0,Sn.safeExecuteInTheMiddle)(()=>this.getConfig().applyCustomAttributesOnSpan(r,e,n),()=>{},!0),this._closeHttpSpan(r,Te.SpanKind.SERVER,i,o,s)}_onOutgoingRequestError(e,n,r,o,s){(0,zt.setSpanWithError)(e,s,this._semconvStability),r[St.ATTR_ERROR_TYPE]=s.name,this._closeHttpSpan(e,Te.SpanKind.CLIENT,o,n,r)}_onServerResponseError(e,n,r,o,s){(0,zt.setSpanWithError)(e,s,this._semconvStability),r[St.ATTR_ERROR_TYPE]=s.name,this._closeHttpSpan(e,Te.SpanKind.SERVER,o,n,r)}_startHttpSpan(e,n,r=Te.context.active()){let o=n.kind===Te.SpanKind.CLIENT?this.getConfig().requireParentforOutgoingSpans:this.getConfig().requireParentforIncomingSpans,s,i=Te.trace.getSpan(r);return o===!0&&(!i||!Te.trace.isSpanContextValid(i.spanContext()))?s=Te.trace.wrapSpanContext(Te.INVALID_SPAN_CONTEXT):o===!0&&i?.spanContext().isRemote?s=i:s=this.tracer.startSpan(e,n,r),this._spanNotEnded.add(s),s}_closeHttpSpan(e,n,r,o,s){if(!this._spanNotEnded.has(e))return;e.end(),this._spanNotEnded.delete(e);let i=(0,Ji.hrTimeToMilliseconds)((0,Ji.hrTimeDuration)(r,(0,Ji.hrTime)()));n===Te.SpanKind.SERVER?this._recordServerDuration(i,o,s):n===Te.SpanKind.CLIENT&&this._recordClientDuration(i,o,s)}_callResponseHook(e,n){(0,Sn.safeExecuteInTheMiddle)(()=>this.getConfig().responseHook(e,n),()=>{},!0)}_callRequestHook(e,n){(0,Sn.safeExecuteInTheMiddle)(()=>this.getConfig().requestHook(e,n),()=>{},!0)}_callStartSpanHook(e,n){if(typeof n=="function")return(0,Sn.safeExecuteInTheMiddle)(()=>n(e),()=>{},!0)}_createHeaderCapture(){let e=this.getConfig();return{client:{captureRequestHeaders:(0,zt.headerCapture)("request",e.headersToSpanAttributes?.client?.requestHeaders??[]),captureResponseHeaders:(0,zt.headerCapture)("response",e.headersToSpanAttributes?.client?.responseHeaders??[])},server:{captureRequestHeaders:(0,zt.headerCapture)("request",e.headersToSpanAttributes?.server?.requestHeaders??[]),captureResponseHeaders:(0,zt.headerCapture)("response",e.headersToSpanAttributes?.server?.responseHeaders??[])}}}};AT.HttpInstrumentation=BO});var gz=T(RT=>{"use strict";Object.defineProperty(RT,"__esModule",{value:!0});RT.HttpInstrumentation=void 0;var yfe=Tz();Object.defineProperty(RT,"HttpInstrumentation",{enumerable:!0,get:function(){return yfe.HttpInstrumentation}})});var UK=T(Ig=>{"use strict";Object.defineProperty(Ig,"__esModule",{value:!0});Ig.defaultServiceName=void 0;function vEe(){return`unknown_service:${process.argv0}`}Ig.defaultServiceName=vEe});var $K=T(vg=>{"use strict";Object.defineProperty(vg,"__esModule",{value:!0});vg.defaultServiceName=void 0;var xEe=UK();Object.defineProperty(vg,"defaultServiceName",{enumerable:!0,get:function(){return xEe.defaultServiceName}})});var Cv=T(xg=>{"use strict";Object.defineProperty(xg,"__esModule",{value:!0});xg.defaultServiceName=void 0;var PEe=$K();Object.defineProperty(xg,"defaultServiceName",{enumerable:!0,get:function(){return PEe.defaultServiceName}})});var GK=T(Yp=>{"use strict";Object.defineProperty(Yp,"__esModule",{value:!0});Yp.identity=Yp.isPromiseLike=void 0;var CEe=t=>t!==null&&typeof t=="object"&&typeof t.then=="function";Yp.isPromiseLike=CEe;function MEe(t){return t}Yp.identity=MEe});var Lv=T(Cs=>{"use strict";Object.defineProperty(Cs,"__esModule",{value:!0});Cs.defaultResource=Cs.emptyResource=Cs.resourceFromDetectedResource=Cs.resourceFromAttributes=void 0;var sm=U(),Mv=ze(),Jc=Qe(),wEe=Cv(),om=GK(),Pg=class t{_rawAttributes;_asyncAttributesPending=!1;_schemaUrl;_memoizedAttributes;static FromAttributeList(e,n){let r=new t({},n);return r._rawAttributes=VK(e),r._asyncAttributesPending=e.filter(([o,s])=>(0,om.isPromiseLike)(s)).length>0,r}constructor(e,n){let r=e.attributes??{};this._rawAttributes=Object.entries(r).map(([o,s])=>((0,om.isPromiseLike)(s)&&(this._asyncAttributesPending=!0),[o,s])),this._rawAttributes=VK(this._rawAttributes),this._schemaUrl=UEe(n?.schemaUrl)}get asyncAttributesPending(){return this._asyncAttributesPending}async waitForAsyncAttributes(){if(this.asyncAttributesPending){for(let e=0;e<this._rawAttributes.length;e++){let[n,r]=this._rawAttributes[e];this._rawAttributes[e]=[n,(0,om.isPromiseLike)(r)?await r:r]}this._asyncAttributesPending=!1}}get attributes(){if(this.asyncAttributesPending&&sm.diag.error("Accessing resource attributes before async attributes settled"),this._memoizedAttributes)return this._memoizedAttributes;let e={};for(let[n,r]of this._rawAttributes){if((0,om.isPromiseLike)(r)){sm.diag.debug(`Unsettled resource attribute ${n} skipped`);continue}r!=null&&(e[n]??=r)}return this._asyncAttributesPending||(this._memoizedAttributes=e),e}getRawAttributes(){return this._rawAttributes}get schemaUrl(){return this._schemaUrl}merge(e){if(e==null)return this;let n=$Ee(this,e),r=n?{schemaUrl:n}:void 0;return t.FromAttributeList([...e.getRawAttributes(),...this.getRawAttributes()],r)}};function wv(t,e){return Pg.FromAttributeList(Object.entries(t),e)}Cs.resourceFromAttributes=wv;function LEe(t,e){return new Pg(t,e)}Cs.resourceFromDetectedResource=LEe;function DEe(){return wv({})}Cs.emptyResource=DEe;function kEe(){return wv({[Jc.ATTR_SERVICE_NAME]:(0,wEe.defaultServiceName)(),[Jc.ATTR_TELEMETRY_SDK_LANGUAGE]:Mv.SDK_INFO[Jc.ATTR_TELEMETRY_SDK_LANGUAGE],[Jc.ATTR_TELEMETRY_SDK_NAME]:Mv.SDK_INFO[Jc.ATTR_TELEMETRY_SDK_NAME],[Jc.ATTR_TELEMETRY_SDK_VERSION]:Mv.SDK_INFO[Jc.ATTR_TELEMETRY_SDK_VERSION]})}Cs.defaultResource=kEe;function VK(t){return t.map(([e,n])=>(0,om.isPromiseLike)(n)?[e,n.catch(r=>{sm.diag.debug("promise rejection for resource attribute: %s - %s",e,r)})]:[e,n])}function UEe(t){if(typeof t=="string"||t===void 0)return t;sm.diag.warn("Schema URL must be string or undefined, got %s. Schema URL will be ignored.",t)}function $Ee(t,e){let n=t?.schemaUrl,r=e?.schemaUrl,o=n===void 0||n==="",s=r===void 0||r==="";if(o)return r;if(s||n===r)return n;sm.diag.warn('Schema URL merge conflict: old resource has "%s", updating resource has "%s". Resulting resource will have undefined Schema URL.',n,r)}});var jK=T(Cg=>{"use strict";Object.defineProperty(Cg,"__esModule",{value:!0});Cg.detectResources=void 0;var BK=U(),Dv=Lv(),GEe=(t={})=>(t.detectors||[]).map(n=>{try{let r=(0,Dv.resourceFromDetectedResource)(n.detect(t));return BK.diag.debug(`${n.constructor.name} found resource.`,r),r}catch(r){return BK.diag.debug(`${n.constructor.name} failed: ${r.message}`),(0,Dv.emptyResource)()}}).reduce((n,r)=>n.merge(r),(0,Dv.emptyResource)());Cg.detectResources=GEe});var FK=T(Mg=>{"use strict";Object.defineProperty(Mg,"__esModule",{value:!0});Mg.envDetector=void 0;var VEe=U(),BEe=Qe(),HK=ze(),kv=class{_MAX_LENGTH=255;_COMMA_SEPARATOR=",";_LABEL_KEY_VALUE_SPLITTER="=";_ERROR_MESSAGE_INVALID_CHARS="should be a ASCII string with a length greater than 0 and not exceed "+this._MAX_LENGTH+" characters.";_ERROR_MESSAGE_INVALID_VALUE="should be a ASCII string with a length not exceed "+this._MAX_LENGTH+" characters.";detect(e){let n={},r=(0,HK.getStringFromEnv)("OTEL_RESOURCE_ATTRIBUTES"),o=(0,HK.getStringFromEnv)("OTEL_SERVICE_NAME");if(r)try{let s=this._parseResourceAttributes(r);Object.assign(n,s)}catch(s){VEe.diag.debug(`EnvDetector failed: ${s.message}`)}return o&&(n[BEe.ATTR_SERVICE_NAME]=o),{attributes:n}}_parseResourceAttributes(e){if(!e)return{};let n={},r=e.split(this._COMMA_SEPARATOR,-1);for(let o of r){let s=o.split(this._LABEL_KEY_VALUE_SPLITTER,-1);if(s.length!==2)continue;let[i,a]=s;if(i=i.trim(),a=a.trim().split(/^"|"$/).join(""),!this._isValidAndNotEmpty(i))throw new Error(`Attribute key ${this._ERROR_MESSAGE_INVALID_CHARS}`);if(!this._isValid(a))throw new Error(`Attribute value ${this._ERROR_MESSAGE_INVALID_VALUE}`);n[i]=decodeURIComponent(a)}return n}_isValid(e){return e.length<=this._MAX_LENGTH&&this._isBaggageOctetString(e)}_isBaggageOctetString(e){for(let n=0;n<e.length;n++){let r=e.charCodeAt(n);if(r<33||r===44||r===59||r===92||r>126)return!1}return!0}_isValidAndNotEmpty(e){return e.length>0&&this._isValid(e)}};Mg.envDetector=new kv});var im=T(H=>{"use strict";Object.defineProperty(H,"__esModule",{value:!0});H.ATTR_WEBENGINE_VERSION=H.ATTR_WEBENGINE_NAME=H.ATTR_WEBENGINE_DESCRIPTION=H.ATTR_SERVICE_NAMESPACE=H.ATTR_SERVICE_INSTANCE_ID=H.ATTR_PROCESS_RUNTIME_VERSION=H.ATTR_PROCESS_RUNTIME_NAME=H.ATTR_PROCESS_RUNTIME_DESCRIPTION=H.ATTR_PROCESS_PID=H.ATTR_PROCESS_OWNER=H.ATTR_PROCESS_EXECUTABLE_PATH=H.ATTR_PROCESS_EXECUTABLE_NAME=H.ATTR_PROCESS_COMMAND_ARGS=H.ATTR_PROCESS_COMMAND=H.ATTR_OS_VERSION=H.ATTR_OS_TYPE=H.ATTR_K8S_POD_NAME=H.ATTR_K8S_NAMESPACE_NAME=H.ATTR_K8S_DEPLOYMENT_NAME=H.ATTR_K8S_CLUSTER_NAME=H.ATTR_HOST_TYPE=H.ATTR_HOST_NAME=H.ATTR_HOST_IMAGE_VERSION=H.ATTR_HOST_IMAGE_NAME=H.ATTR_HOST_IMAGE_ID=H.ATTR_HOST_ID=H.ATTR_HOST_ARCH=H.ATTR_CONTAINER_NAME=H.ATTR_CONTAINER_IMAGE_TAGS=H.ATTR_CONTAINER_IMAGE_NAME=H.ATTR_CONTAINER_ID=H.ATTR_CLOUD_REGION=H.ATTR_CLOUD_PROVIDER=H.ATTR_CLOUD_AVAILABILITY_ZONE=H.ATTR_CLOUD_ACCOUNT_ID=void 0;H.ATTR_CLOUD_ACCOUNT_ID="cloud.account.id";H.ATTR_CLOUD_AVAILABILITY_ZONE="cloud.availability_zone";H.ATTR_CLOUD_PROVIDER="cloud.provider";H.ATTR_CLOUD_REGION="cloud.region";H.ATTR_CONTAINER_ID="container.id";H.ATTR_CONTAINER_IMAGE_NAME="container.image.name";H.ATTR_CONTAINER_IMAGE_TAGS="container.image.tags";H.ATTR_CONTAINER_NAME="container.name";H.ATTR_HOST_ARCH="host.arch";H.ATTR_HOST_ID="host.id";H.ATTR_HOST_IMAGE_ID="host.image.id";H.ATTR_HOST_IMAGE_NAME="host.image.name";H.ATTR_HOST_IMAGE_VERSION="host.image.version";H.ATTR_HOST_NAME="host.name";H.ATTR_HOST_TYPE="host.type";H.ATTR_K8S_CLUSTER_NAME="k8s.cluster.name";H.ATTR_K8S_DEPLOYMENT_NAME="k8s.deployment.name";H.ATTR_K8S_NAMESPACE_NAME="k8s.namespace.name";H.ATTR_K8S_POD_NAME="k8s.pod.name";H.ATTR_OS_TYPE="os.type";H.ATTR_OS_VERSION="os.version";H.ATTR_PROCESS_COMMAND="process.command";H.ATTR_PROCESS_COMMAND_ARGS="process.command_args";H.ATTR_PROCESS_EXECUTABLE_NAME="process.executable.name";H.ATTR_PROCESS_EXECUTABLE_PATH="process.executable.path";H.ATTR_PROCESS_OWNER="process.owner";H.ATTR_PROCESS_PID="process.pid";H.ATTR_PROCESS_RUNTIME_DESCRIPTION="process.runtime.description";H.ATTR_PROCESS_RUNTIME_NAME="process.runtime.name";H.ATTR_PROCESS_RUNTIME_VERSION="process.runtime.version";H.ATTR_SERVICE_INSTANCE_ID="service.instance.id";H.ATTR_SERVICE_NAMESPACE="service.namespace";H.ATTR_WEBENGINE_DESCRIPTION="webengine.description";H.ATTR_WEBENGINE_NAME="webengine.name";H.ATTR_WEBENGINE_VERSION="webengine.version"});var Lg=T(wg=>{"use strict";Object.defineProperty(wg,"__esModule",{value:!0});wg.execAsync=void 0;var jEe=q("child_process"),HEe=q("util");wg.execAsync=HEe.promisify(jEe.exec)});var qK=T(Dg=>{"use strict";Object.defineProperty(Dg,"__esModule",{value:!0});Dg.getMachineId=void 0;var FEe=Lg(),qEe=U();async function zEe(){try{let e=(await(0,FEe.execAsync)('ioreg -rd1 -c "IOPlatformExpertDevice"')).stdout.split(`
`).find(r=>r.includes("IOPlatformUUID"));if(!e)return;let n=e.split('" = "');if(n.length===2)return n[1].slice(0,-1)}catch(t){qEe.diag.debug(`error reading machine id: ${t}`)}}Dg.getMachineId=zEe});var zK=T(kg=>{"use strict";Object.defineProperty(kg,"__esModule",{value:!0});kg.getMachineId=void 0;var YEe=q("fs"),WEe=U();async function KEe(){let t=["/etc/machine-id","/var/lib/dbus/machine-id"];for(let e of t)try{return(await YEe.promises.readFile(e,{encoding:"utf8"})).trim()}catch(n){WEe.diag.debug(`error reading machine id: ${n}`)}}kg.getMachineId=KEe});var WK=T(Ug=>{"use strict";Object.defineProperty(Ug,"__esModule",{value:!0});Ug.getMachineId=void 0;var ZEe=q("fs"),JEe=Lg(),YK=U();async function QEe(){try{return(await ZEe.promises.readFile("/etc/hostid",{encoding:"utf8"})).trim()}catch(t){YK.diag.debug(`error reading machine id: ${t}`)}try{return(await(0,JEe.execAsync)("kenv -q smbios.system.uuid")).stdout.trim()}catch(t){YK.diag.debug(`error reading machine id: ${t}`)}}Ug.getMachineId=QEe});var ZK=T($g=>{"use strict";Object.defineProperty($g,"__esModule",{value:!0});$g.getMachineId=void 0;var KK=q("process"),XEe=Lg(),eTe=U();async function tTe(){let t="QUERY HKEY_LOCAL_MACHINE\\SOFTWARE\\Microsoft\\Cryptography /v MachineGuid",e="%windir%\\System32\\REG.exe";KK.arch==="ia32"&&"PROCESSOR_ARCHITEW6432"in KK.env&&(e="%windir%\\sysnative\\cmd.exe /c "+e);try{let r=(await(0,XEe.execAsync)(`${e} ${t}`)).stdout.split("REG_SZ");if(r.length===2)return r[1].trim()}catch(n){eTe.diag.debug(`error reading machine id: ${n}`)}}$g.getMachineId=tTe});var JK=T(Gg=>{"use strict";Object.defineProperty(Gg,"__esModule",{value:!0});Gg.getMachineId=void 0;var nTe=U();async function rTe(){nTe.diag.debug("could not read machine-id: unsupported platform")}Gg.getMachineId=rTe});var QK=T(Vg=>{"use strict";Object.defineProperty(Vg,"__esModule",{value:!0});Vg.getMachineId=void 0;var oTe=q("process"),Qc;async function sTe(){if(!Qc)switch(oTe.platform){case"darwin":Qc=(await Promise.resolve().then(()=>k(qK()))).getMachineId;break;case"linux":Qc=(await Promise.resolve().then(()=>k(zK()))).getMachineId;break;case"freebsd":Qc=(await Promise.resolve().then(()=>k(WK()))).getMachineId;break;case"win32":Qc=(await Promise.resolve().then(()=>k(ZK()))).getMachineId;break;default:Qc=(await Promise.resolve().then(()=>k(JK()))).getMachineId;break}return Qc()}Vg.getMachineId=sTe});var Uv=T(Wp=>{"use strict";Object.defineProperty(Wp,"__esModule",{value:!0});Wp.normalizeType=Wp.normalizeArch=void 0;var iTe=t=>{switch(t){case"arm":return"arm32";case"ppc":return"ppc32";case"x64":return"amd64";default:return t}};Wp.normalizeArch=iTe;var aTe=t=>{switch(t){case"sunos":return"solaris";case"win32":return"windows";default:return t}};Wp.normalizeType=aTe});var eZ=T(Bg=>{"use strict";Object.defineProperty(Bg,"__esModule",{value:!0});Bg.hostDetector=void 0;var $v=im(),XK=q("os"),cTe=QK(),uTe=Uv(),Gv=class{detect(e){return{attributes:{[$v.ATTR_HOST_NAME]:(0,XK.hostname)(),[$v.ATTR_HOST_ARCH]:(0,uTe.normalizeArch)((0,XK.arch)()),[$v.ATTR_HOST_ID]:(0,cTe.getMachineId)()}}}};Bg.hostDetector=new Gv});var rZ=T(jg=>{"use strict";Object.defineProperty(jg,"__esModule",{value:!0});jg.osDetector=void 0;var tZ=im(),nZ=q("os"),pTe=Uv(),Vv=class{detect(e){return{attributes:{[tZ.ATTR_OS_TYPE]:(0,pTe.normalizeType)((0,nZ.platform)()),[tZ.ATTR_OS_VERSION]:(0,nZ.release)()}}}};jg.osDetector=new Vv});var oZ=T(Hg=>{"use strict";Object.defineProperty(Hg,"__esModule",{value:!0});Hg.processDetector=void 0;var lTe=U(),Ti=im(),dTe=q("os"),Bv=class{detect(e){let n={[Ti.ATTR_PROCESS_PID]:process.pid,[Ti.ATTR_PROCESS_EXECUTABLE_NAME]:process.title,[Ti.ATTR_PROCESS_EXECUTABLE_PATH]:process.execPath,[Ti.ATTR_PROCESS_COMMAND_ARGS]:[process.argv[0],...process.execArgv,...process.argv.slice(1)],[Ti.ATTR_PROCESS_RUNTIME_VERSION]:process.versions.node,[Ti.ATTR_PROCESS_RUNTIME_NAME]:"nodejs",[Ti.ATTR_PROCESS_RUNTIME_DESCRIPTION]:"Node.js"};process.argv.length>1&&(n[Ti.ATTR_PROCESS_COMMAND]=process.argv[1]);try{let r=dTe.userInfo();n[Ti.ATTR_PROCESS_OWNER]=r.username}catch(r){lTe.diag.debug(`error obtaining process owner: ${r}`)}return{attributes:n}}};Hg.processDetector=new Bv});var sZ=T(Fg=>{"use strict";Object.defineProperty(Fg,"__esModule",{value:!0});Fg.serviceInstanceIdDetector=void 0;var fTe=im(),mTe=q("crypto"),jv=class{detect(e){return{attributes:{[fTe.ATTR_SERVICE_INSTANCE_ID]:(0,mTe.randomUUID)()}}}};Fg.serviceInstanceIdDetector=new jv});var iZ=T(Ms=>{"use strict";Object.defineProperty(Ms,"__esModule",{value:!0});Ms.serviceInstanceIdDetector=Ms.processDetector=Ms.osDetector=Ms.hostDetector=void 0;var _Te=eZ();Object.defineProperty(Ms,"hostDetector",{enumerable:!0,get:function(){return _Te.hostDetector}});var hTe=rZ();Object.defineProperty(Ms,"osDetector",{enumerable:!0,get:function(){return hTe.osDetector}});var ETe=oZ();Object.defineProperty(Ms,"processDetector",{enumerable:!0,get:function(){return ETe.processDetector}});var TTe=sZ();Object.defineProperty(Ms,"serviceInstanceIdDetector",{enumerable:!0,get:function(){return TTe.serviceInstanceIdDetector}})});var aZ=T(ws=>{"use strict";Object.defineProperty(ws,"__esModule",{value:!0});ws.serviceInstanceIdDetector=ws.processDetector=ws.osDetector=ws.hostDetector=void 0;var qg=iZ();Object.defineProperty(ws,"hostDetector",{enumerable:!0,get:function(){return qg.hostDetector}});Object.defineProperty(ws,"osDetector",{enumerable:!0,get:function(){return qg.osDetector}});Object.defineProperty(ws,"processDetector",{enumerable:!0,get:function(){return qg.processDetector}});Object.defineProperty(ws,"serviceInstanceIdDetector",{enumerable:!0,get:function(){return qg.serviceInstanceIdDetector}})});var cZ=T(Kp=>{"use strict";Object.defineProperty(Kp,"__esModule",{value:!0});Kp.noopDetector=Kp.NoopDetector=void 0;var zg=class{detect(){return{attributes:{}}}};Kp.NoopDetector=zg;Kp.noopDetector=new zg});var uZ=T(Ir=>{"use strict";Object.defineProperty(Ir,"__esModule",{value:!0});Ir.noopDetector=Ir.serviceInstanceIdDetector=Ir.processDetector=Ir.osDetector=Ir.hostDetector=Ir.envDetector=void 0;var gTe=FK();Object.defineProperty(Ir,"envDetector",{enumerable:!0,get:function(){return gTe.envDetector}});var Yg=aZ();Object.defineProperty(Ir,"hostDetector",{enumerable:!0,get:function(){return Yg.hostDetector}});Object.defineProperty(Ir,"osDetector",{enumerable:!0,get:function(){return Yg.osDetector}});Object.defineProperty(Ir,"processDetector",{enumerable:!0,get:function(){return Yg.processDetector}});Object.defineProperty(Ir,"serviceInstanceIdDetector",{enumerable:!0,get:function(){return Yg.serviceInstanceIdDetector}});var STe=cZ();Object.defineProperty(Ir,"noopDetector",{enumerable:!0,get:function(){return STe.noopDetector}})});var Fv=T(kt=>{"use strict";Object.defineProperty(kt,"__esModule",{value:!0});kt.defaultServiceName=kt.emptyResource=kt.defaultResource=kt.resourceFromAttributes=kt.serviceInstanceIdDetector=kt.processDetector=kt.osDetector=kt.hostDetector=kt.envDetector=kt.detectResources=void 0;var ATe=jK();Object.defineProperty(kt,"detectResources",{enumerable:!0,get:function(){return ATe.detectResources}});var am=uZ();Object.defineProperty(kt,"envDetector",{enumerable:!0,get:function(){return am.envDetector}});Object.defineProperty(kt,"hostDetector",{enumerable:!0,get:function(){return am.hostDetector}});Object.defineProperty(kt,"osDetector",{enumerable:!0,get:function(){return am.osDetector}});Object.defineProperty(kt,"processDetector",{enumerable:!0,get:function(){return am.processDetector}});Object.defineProperty(kt,"serviceInstanceIdDetector",{enumerable:!0,get:function(){return am.serviceInstanceIdDetector}});var Hv=Lv();Object.defineProperty(kt,"resourceFromAttributes",{enumerable:!0,get:function(){return Hv.resourceFromAttributes}});Object.defineProperty(kt,"defaultResource",{enumerable:!0,get:function(){return Hv.defaultResource}});Object.defineProperty(kt,"emptyResource",{enumerable:!0,get:function(){return Hv.emptyResource}});var RTe=Cv();Object.defineProperty(kt,"defaultServiceName",{enumerable:!0,get:function(){return RTe.defaultServiceName}})});var pZ=T(Wg=>{"use strict";Object.defineProperty(Wg,"__esModule",{value:!0});Wg.ExceptionEventName=void 0;Wg.ExceptionEventName="exception"});var lZ=T(Kg=>{"use strict";Object.defineProperty(Kg,"__esModule",{value:!0});Kg.SpanImpl=void 0;var So=U(),Zn=ze(),Xc=Qe(),yTe=pZ(),qv=class{_spanContext;kind;parentSpanContext;attributes={};links=[];events=[];startTime;resource;instrumentationScope;_droppedAttributesCount=0;_droppedEventsCount=0;_droppedLinksCount=0;name;status={code:So.SpanStatusCode.UNSET};endTime=[0,0];_ended=!1;_duration=[-1,-1];_spanProcessor;_spanLimits;_attributeValueLengthLimit;_performanceStartTime;_performanceOffset;_startTimeProvided;constructor(e){let n=Date.now();this._spanContext=e.spanContext,this._performanceStartTime=Zn.otperformance.now(),this._performanceOffset=n-(this._performanceStartTime+(0,Zn.getTimeOrigin)()),this._startTimeProvided=e.startTime!=null,this._spanLimits=e.spanLimits,this._attributeValueLengthLimit=this._spanLimits.attributeValueLengthLimit||0,this._spanProcessor=e.spanProcessor,this.name=e.name,this.parentSpanContext=e.parentSpanContext,this.kind=e.kind,this.links=e.links||[],this.startTime=this._getTime(e.startTime??n),this.resource=e.resource,this.instrumentationScope=e.scope,e.attributes!=null&&this.setAttributes(e.attributes),this._spanProcessor.onStart(this,e.context)}spanContext(){return this._spanContext}setAttribute(e,n){if(n==null||this._isSpanEnded())return this;if(e.length===0)return So.diag.warn(`Invalid attribute key: ${e}`),this;if(!(0,Zn.isAttributeValue)(n))return So.diag.warn(`Invalid attribute value set for key: ${e}`),this;let{attributeCountLimit:r}=this._spanLimits;return r!==void 0&&Object.keys(this.attributes).length>=r&&!Object.prototype.hasOwnProperty.call(this.attributes,e)?(this._droppedAttributesCount++,this):(this.attributes[e]=this._truncateToSize(n),this)}setAttributes(e){for(let[n,r]of Object.entries(e))this.setAttribute(n,r);return this}addEvent(e,n,r){if(this._isSpanEnded())return this;let{eventCountLimit:o}=this._spanLimits;if(o===0)return So.diag.warn("No events allowed."),this._droppedEventsCount++,this;o!==void 0&&this.events.length>=o&&(this._droppedEventsCount===0&&So.diag.debug("Dropping extra events."),this.events.shift(),this._droppedEventsCount++),(0,Zn.isTimeInput)(n)&&((0,Zn.isTimeInput)(r)||(r=n),n=void 0);let s=(0,Zn.sanitizeAttributes)(n);return this.events.push({name:e,attributes:s,time:this._getTime(r),droppedAttributesCount:0}),this}addLink(e){return this.links.push(e),this}addLinks(e){return this.links.push(...e),this}setStatus(e){return this._isSpanEnded()?this:(this.status={...e},this.status.message!=null&&typeof e.message!="string"&&(So.diag.warn(`Dropping invalid status.message of type '${typeof e.message}', expected 'string'`),delete this.status.message),this)}updateName(e){return this._isSpanEnded()?this:(this.name=e,this)}end(e){if(this._isSpanEnded()){So.diag.error(`${this.name} ${this._spanContext.traceId}-${this._spanContext.spanId} - You can only call end() on a span once.`);return}this._ended=!0,this.endTime=this._getTime(e),this._duration=(0,Zn.hrTimeDuration)(this.startTime,this.endTime),this._duration[0]<0&&(So.diag.warn("Inconsistent start and end time, startTime > endTime. Setting span duration to 0ms.",this.startTime,this.endTime),this.endTime=this.startTime.slice(),this._duration=[0,0]),this._droppedEventsCount>0&&So.diag.warn(`Dropped ${this._droppedEventsCount} events because eventCountLimit reached`),this._spanProcessor.onEnd(this)}_getTime(e){if(typeof e=="number"&&e<=Zn.otperformance.now())return(0,Zn.hrTime)(e+this._performanceOffset);if(typeof e=="number")return(0,Zn.millisToHrTime)(e);if(e instanceof Date)return(0,Zn.millisToHrTime)(e.getTime());if((0,Zn.isTimeInputHrTime)(e))return e;if(this._startTimeProvided)return(0,Zn.millisToHrTime)(Date.now());let n=Zn.otperformance.now()-this._performanceStartTime;return(0,Zn.addHrTimes)(this.startTime,(0,Zn.millisToHrTime)(n))}isRecording(){return this._ended===!1}recordException(e,n){let r={};typeof e=="string"?r[Xc.ATTR_EXCEPTION_MESSAGE]=e:e&&(e.code?r[Xc.ATTR_EXCEPTION_TYPE]=e.code.toString():e.name&&(r[Xc.ATTR_EXCEPTION_TYPE]=e.name),e.message&&(r[Xc.ATTR_EXCEPTION_MESSAGE]=e.message),e.stack&&(r[Xc.ATTR_EXCEPTION_STACKTRACE]=e.stack)),r[Xc.ATTR_EXCEPTION_TYPE]||r[Xc.ATTR_EXCEPTION_MESSAGE]?this.addEvent(yTe.ExceptionEventName,r,n):So.diag.warn(`Failed to record an exception ${e}`)}get duration(){return this._duration}get ended(){return this._ended}get droppedAttributesCount(){return this._droppedAttributesCount}get droppedEventsCount(){return this._droppedEventsCount}get droppedLinksCount(){return this._droppedLinksCount}_isSpanEnded(){if(this._ended){let e=new Error(`Operation attempted on ended Span {traceId: ${this._spanContext.traceId}, spanId: ${this._spanContext.spanId}}`);So.diag.warn(`Cannot execute the operation on ended Span {traceId: ${this._spanContext.traceId}, spanId: ${this._spanContext.spanId}}`,e)}return this._ended}_truncateToLimitUtil(e,n){return e.length<=n?e:e.substring(0,n)}_truncateToSize(e){let n=this._attributeValueLengthLimit;return n<=0?(So.diag.warn(`Attribute value limit must be positive, got ${n}`),e):typeof e=="string"?this._truncateToLimitUtil(e,n):Array.isArray(e)?e.map(r=>typeof r=="string"?this._truncateToLimitUtil(r,n):r):e}};Kg.SpanImpl=qv});var um=T(cm=>{"use strict";Object.defineProperty(cm,"__esModule",{value:!0});cm.SamplingDecision=void 0;var bTe;(function(t){t[t.NOT_RECORD=0]="NOT_RECORD",t[t.RECORD=1]="RECORD",t[t.RECORD_AND_SAMPLED=2]="RECORD_AND_SAMPLED"})(bTe=cm.SamplingDecision||(cm.SamplingDecision={}))});var Jg=T(Zg=>{"use strict";Object.defineProperty(Zg,"__esModule",{value:!0});Zg.AlwaysOffSampler=void 0;var NTe=um(),zv=class{shouldSample(){return{decision:NTe.SamplingDecision.NOT_RECORD}}toString(){return"AlwaysOffSampler"}};Zg.AlwaysOffSampler=zv});var Xg=T(Qg=>{"use strict";Object.defineProperty(Qg,"__esModule",{value:!0});Qg.AlwaysOnSampler=void 0;var OTe=um(),Yv=class{shouldSample(){return{decision:OTe.SamplingDecision.RECORD_AND_SAMPLED}}toString(){return"AlwaysOnSampler"}};Qg.AlwaysOnSampler=Yv});var Zv=T(tS=>{"use strict";Object.defineProperty(tS,"__esModule",{value:!0});tS.ParentBasedSampler=void 0;var eS=U(),ITe=ze(),dZ=Jg(),Wv=Xg(),Kv=class{_root;_remoteParentSampled;_remoteParentNotSampled;_localParentSampled;_localParentNotSampled;constructor(e){this._root=e.root,this._root||((0,ITe.globalErrorHandler)(new Error("ParentBasedSampler must have a root sampler configured")),this._root=new Wv.AlwaysOnSampler),this._remoteParentSampled=e.remoteParentSampled??new Wv.AlwaysOnSampler,this._remoteParentNotSampled=e.remoteParentNotSampled??new dZ.AlwaysOffSampler,this._localParentSampled=e.localParentSampled??new Wv.AlwaysOnSampler,this._localParentNotSampled=e.localParentNotSampled??new dZ.AlwaysOffSampler}shouldSample(e,n,r,o,s,i){let a=eS.trace.getSpanContext(e);return!a||!(0,eS.isSpanContextValid)(a)?this._root.shouldSample(e,n,r,o,s,i):a.isRemote?a.traceFlags&eS.TraceFlags.SAMPLED?this._remoteParentSampled.shouldSample(e,n,r,o,s,i):this._remoteParentNotSampled.shouldSample(e,n,r,o,s,i):a.traceFlags&eS.TraceFlags.SAMPLED?this._localParentSampled.shouldSample(e,n,r,o,s,i):this._localParentNotSampled.shouldSample(e,n,r,o,s,i)}toString(){return`ParentBased{root=${this._root.toString()}, remoteParentSampled=${this._remoteParentSampled.toString()}, remoteParentNotSampled=${this._remoteParentNotSampled.toString()}, localParentSampled=${this._localParentSampled.toString()}, localParentNotSampled=${this._localParentNotSampled.toString()}}`}};tS.ParentBasedSampler=Kv});var Qv=T(nS=>{"use strict";Object.defineProperty(nS,"__esModule",{value:!0});nS.TraceIdRatioBasedSampler=void 0;var vTe=U(),fZ=um(),Jv=class{_ratio;_upperBound;constructor(e=0){this._ratio=e,this._ratio=this._normalize(e),this._upperBound=Math.floor(this._ratio*4294967295)}shouldSample(e,n){return{decision:(0,vTe.isValidTraceId)(n)&&this._accumulate(n)<this._upperBound?fZ.SamplingDecision.RECORD_AND_SAMPLED:fZ.SamplingDecision.NOT_RECORD}}toString(){return`TraceIdRatioBased{${this._ratio}}`}_normalize(e){return typeof e!="number"||isNaN(e)?0:e>=1?1:e<=0?0:e}_accumulate(e){let n=0;for(let r=0;r<e.length/8;r++){let o=r*8,s=parseInt(e.slice(o,o+8),16);n=(n^s)>>>0}return n}};nS.TraceIdRatioBasedSampler=Jv});var tx=T(Zp=>{"use strict";Object.defineProperty(Zp,"__esModule",{value:!0});Zp.buildSamplerFromEnv=Zp.loadDefaultConfig=void 0;var ex=U(),Ls=ze(),mZ=Jg(),Xv=Xg(),rS=Zv(),_Z=Qv(),Ds;(function(t){t.AlwaysOff="always_off",t.AlwaysOn="always_on",t.ParentBasedAlwaysOff="parentbased_always_off",t.ParentBasedAlwaysOn="parentbased_always_on",t.ParentBasedTraceIdRatio="parentbased_traceidratio",t.TraceIdRatio="traceidratio"})(Ds||(Ds={}));var oS=1;function xTe(){return{sampler:EZ(),forceFlushTimeoutMillis:3e4,generalLimits:{attributeValueLengthLimit:(0,Ls.getNumberFromEnv)("OTEL_ATTRIBUTE_VALUE_LENGTH_LIMIT")??1/0,attributeCountLimit:(0,Ls.getNumberFromEnv)("OTEL_ATTRIBUTE_COUNT_LIMIT")??128},spanLimits:{attributeValueLengthLimit:(0,Ls.getNumberFromEnv)("OTEL_SPAN_ATTRIBUTE_VALUE_LENGTH_LIMIT")??1/0,attributeCountLimit:(0,Ls.getNumberFromEnv)("OTEL_SPAN_ATTRIBUTE_COUNT_LIMIT")??128,linkCountLimit:(0,Ls.getNumberFromEnv)("OTEL_SPAN_LINK_COUNT_LIMIT")??128,eventCountLimit:(0,Ls.getNumberFromEnv)("OTEL_SPAN_EVENT_COUNT_LIMIT")??128,attributePerEventCountLimit:(0,Ls.getNumberFromEnv)("OTEL_SPAN_ATTRIBUTE_PER_EVENT_COUNT_LIMIT")??128,attributePerLinkCountLimit:(0,Ls.getNumberFromEnv)("OTEL_SPAN_ATTRIBUTE_PER_LINK_COUNT_LIMIT")??128}}}Zp.loadDefaultConfig=xTe;function EZ(){let t=(0,Ls.getStringFromEnv)("OTEL_TRACES_SAMPLER")??Ds.ParentBasedAlwaysOn;switch(t){case Ds.AlwaysOn:return new Xv.AlwaysOnSampler;case Ds.AlwaysOff:return new mZ.AlwaysOffSampler;case Ds.ParentBasedAlwaysOn:return new rS.ParentBasedSampler({root:new Xv.AlwaysOnSampler});case Ds.ParentBasedAlwaysOff:return new rS.ParentBasedSampler({root:new mZ.AlwaysOffSampler});case Ds.TraceIdRatio:return new _Z.TraceIdRatioBasedSampler(hZ());case Ds.ParentBasedTraceIdRatio:return new rS.ParentBasedSampler({root:new _Z.TraceIdRatioBasedSampler(hZ())});default:return ex.diag.error(`OTEL_TRACES_SAMPLER value "${t}" invalid, defaulting to "${Ds.ParentBasedAlwaysOn}".`),new rS.ParentBasedSampler({root:new Xv.AlwaysOnSampler})}}Zp.buildSamplerFromEnv=EZ;function hZ(){let t=(0,Ls.getNumberFromEnv)("OTEL_TRACES_SAMPLER_ARG");return t==null?(ex.diag.error(`OTEL_TRACES_SAMPLER_ARG is blank, defaulting to ${oS}.`),oS):t<0||t>1?(ex.diag.error(`OTEL_TRACES_SAMPLER_ARG=${t} was given, but it is out of range ([0..1]), defaulting to ${oS}.`),oS):t}});var nx=T(Ao=>{"use strict";Object.defineProperty(Ao,"__esModule",{value:!0});Ao.reconfigureLimits=Ao.mergeConfig=Ao.DEFAULT_ATTRIBUTE_VALUE_LENGTH_LIMIT=Ao.DEFAULT_ATTRIBUTE_COUNT_LIMIT=void 0;var TZ=tx(),sS=ze();Ao.DEFAULT_ATTRIBUTE_COUNT_LIMIT=128;Ao.DEFAULT_ATTRIBUTE_VALUE_LENGTH_LIMIT=1/0;function PTe(t){let e={sampler:(0,TZ.buildSamplerFromEnv)()},n=(0,TZ.loadDefaultConfig)(),r=Object.assign({},n,e,t);return r.generalLimits=Object.assign({},n.generalLimits,t.generalLimits||{}),r.spanLimits=Object.assign({},n.spanLimits,t.spanLimits||{}),r}Ao.mergeConfig=PTe;function CTe(t){let e=Object.assign({},t.spanLimits);return e.attributeCountLimit=t.spanLimits?.attributeCountLimit??t.generalLimits?.attributeCountLimit??(0,sS.getNumberFromEnv)("OTEL_SPAN_ATTRIBUTE_COUNT_LIMIT")??(0,sS.getNumberFromEnv)("OTEL_ATTRIBUTE_COUNT_LIMIT")??Ao.DEFAULT_ATTRIBUTE_COUNT_LIMIT,e.attributeValueLengthLimit=t.spanLimits?.attributeValueLengthLimit??t.generalLimits?.attributeValueLengthLimit??(0,sS.getNumberFromEnv)("OTEL_SPAN_ATTRIBUTE_VALUE_LENGTH_LIMIT")??(0,sS.getNumberFromEnv)("OTEL_ATTRIBUTE_VALUE_LENGTH_LIMIT")??Ao.DEFAULT_ATTRIBUTE_VALUE_LENGTH_LIMIT,Object.assign({},t,{spanLimits:e})}Ao.reconfigureLimits=CTe});var gZ=T(iS=>{"use strict";Object.defineProperty(iS,"__esModule",{value:!0});iS.BatchSpanProcessorBase=void 0;var Jp=U(),gi=ze(),rx=class{_exporter;_maxExportBatchSize;_maxQueueSize;_scheduledDelayMillis;_exportTimeoutMillis;_isExporting=!1;_finishedSpans=[];_timer;_shutdownOnce;_droppedSpansCount=0;constructor(e,n){this._exporter=e,this._maxExportBatchSize=typeof n?.maxExportBatchSize=="number"?n.maxExportBatchSize:(0,gi.getNumberFromEnv)("OTEL_BSP_MAX_EXPORT_BATCH_SIZE")??512,this._maxQueueSize=typeof n?.maxQueueSize=="number"?n.maxQueueSize:(0,gi.getNumberFromEnv)("OTEL_BSP_MAX_QUEUE_SIZE")??2048,this._scheduledDelayMillis=typeof n?.scheduledDelayMillis=="number"?n.scheduledDelayMillis:(0,gi.getNumberFromEnv)("OTEL_BSP_SCHEDULE_DELAY")??5e3,this._exportTimeoutMillis=typeof n?.exportTimeoutMillis=="number"?n.exportTimeoutMillis:(0,gi.getNumberFromEnv)("OTEL_BSP_EXPORT_TIMEOUT")??3e4,this._shutdownOnce=new gi.BindOnceFuture(this._shutdown,this),this._maxExportBatchSize>this._maxQueueSize&&(Jp.diag.warn("BatchSpanProcessor: maxExportBatchSize must be smaller or equal to maxQueueSize, setting maxExportBatchSize to match maxQueueSize"),this._maxExportBatchSize=this._maxQueueSize)}forceFlush(){return this._shutdownOnce.isCalled?this._shutdownOnce.promise:this._flushAll()}onStart(e,n){}onEnd(e){this._shutdownOnce.isCalled||(e.spanContext().traceFlags&Jp.TraceFlags.SAMPLED)!==0&&this._addToBuffer(e)}shutdown(){return this._shutdownOnce.call()}_shutdown(){return Promise.resolve().then(()=>this.onShutdown()).then(()=>this._flushAll()).then(()=>this._exporter.shutdown())}_addToBuffer(e){if(this._finishedSpans.length>=this._maxQueueSize){this._droppedSpansCount===0&&Jp.diag.debug("maxQueueSize reached, dropping spans"),this._droppedSpansCount++;return}this._droppedSpansCount>0&&(Jp.diag.warn(`Dropped ${this._droppedSpansCount} spans because maxQueueSize reached`),this._droppedSpansCount=0),this._finishedSpans.push(e),this._maybeStartTimer()}_flushAll(){return new Promise((e,n)=>{let r=[],o=Math.ceil(this._finishedSpans.length/this._maxExportBatchSize);for(let s=0,i=o;s<i;s++)r.push(this._flushOneBatch());Promise.all(r).then(()=>{e()}).catch(n)})}_flushOneBatch(){return this._clearTimer(),this._finishedSpans.length===0?Promise.resolve():new Promise((e,n)=>{let r=setTimeout(()=>{n(new Error("Timeout"))},this._exportTimeoutMillis);Jp.context.with((0,gi.suppressTracing)(Jp.context.active()),()=>{let o;this._finishedSpans.length<=this._maxExportBatchSize?(o=this._finishedSpans,this._finishedSpans=[]):o=this._finishedSpans.splice(0,this._maxExportBatchSize);let s=()=>this._exporter.export(o,a=>{clearTimeout(r),a.code===gi.ExportResultCode.SUCCESS?e():n(a.error??new Error("BatchSpanProcessor: span export failed"))}),i=null;for(let a=0,c=o.length;a<c;a++){let u=o[a];u.resource.asyncAttributesPending&&u.resource.waitForAsyncAttributes&&(i??=[],i.push(u.resource.waitForAsyncAttributes()))}i===null?s():Promise.all(i).then(s,a=>{(0,gi.globalErrorHandler)(a),n(a)})})})}_maybeStartTimer(){if(this._isExporting)return;let e=()=>{this._isExporting=!0,this._flushOneBatch().finally(()=>{this._isExporting=!1,this._finishedSpans.length>0&&(this._clearTimer(),this._maybeStartTimer())}).catch(n=>{this._isExporting=!1,(0,gi.globalErrorHandler)(n)})};if(this._finishedSpans.length>=this._maxExportBatchSize)return e();this._timer===void 0&&(this._timer=setTimeout(()=>e(),this._scheduledDelayMillis),typeof this._timer!="number"&&this._timer.unref())}_clearTimer(){this._timer!==void 0&&(clearTimeout(this._timer),this._timer=void 0)}};iS.BatchSpanProcessorBase=rx});var SZ=T(aS=>{"use strict";Object.defineProperty(aS,"__esModule",{value:!0});aS.BatchSpanProcessor=void 0;var MTe=gZ(),ox=class extends MTe.BatchSpanProcessorBase{onShutdown(){}};aS.BatchSpanProcessor=ox});var yZ=T(uS=>{"use strict";Object.defineProperty(uS,"__esModule",{value:!0});uS.RandomIdGenerator=void 0;var wTe=8,RZ=16,sx=class{generateTraceId=AZ(RZ);generateSpanId=AZ(wTe)};uS.RandomIdGenerator=sx;var cS=Buffer.allocUnsafe(RZ);function AZ(t){return function(){for(let n=0;n<t/4;n++)cS.writeUInt32BE(Math.random()*2**32>>>0,n*4);for(let n=0;n<t&&!(cS[n]>0);n++)n===t-1&&(cS[t-1]=1);return cS.toString("hex",0,t)}}});var bZ=T(Qp=>{"use strict";Object.defineProperty(Qp,"__esModule",{value:!0});Qp.RandomIdGenerator=Qp.BatchSpanProcessor=void 0;var LTe=SZ();Object.defineProperty(Qp,"BatchSpanProcessor",{enumerable:!0,get:function(){return LTe.BatchSpanProcessor}});var DTe=yZ();Object.defineProperty(Qp,"RandomIdGenerator",{enumerable:!0,get:function(){return DTe.RandomIdGenerator}})});var ix=T(Xp=>{"use strict";Object.defineProperty(Xp,"__esModule",{value:!0});Xp.RandomIdGenerator=Xp.BatchSpanProcessor=void 0;var NZ=bZ();Object.defineProperty(Xp,"BatchSpanProcessor",{enumerable:!0,get:function(){return NZ.BatchSpanProcessor}});Object.defineProperty(Xp,"RandomIdGenerator",{enumerable:!0,get:function(){return NZ.RandomIdGenerator}})});var OZ=T(lS=>{"use strict";Object.defineProperty(lS,"__esModule",{value:!0});lS.Tracer=void 0;var Mn=U(),pS=ze(),kTe=lZ(),UTe=nx(),$Te=ix(),ax=class{_sampler;_generalLimits;_spanLimits;_idGenerator;instrumentationScope;_resource;_spanProcessor;constructor(e,n,r,o){let s=(0,UTe.mergeConfig)(n);this._sampler=s.sampler,this._generalLimits=s.generalLimits,this._spanLimits=s.spanLimits,this._idGenerator=n.idGenerator||new $Te.RandomIdGenerator,this._resource=r,this._spanProcessor=o,this.instrumentationScope=e}startSpan(e,n={},r=Mn.context.active()){n.root&&(r=Mn.trace.deleteSpan(r));let o=Mn.trace.getSpan(r);if((0,pS.isTracingSuppressed)(r))return Mn.diag.debug("Instrumentation suppressed, returning Noop Span"),Mn.trace.wrapSpanContext(Mn.INVALID_SPAN_CONTEXT);let s=o?.spanContext(),i=this._idGenerator.generateSpanId(),a,c,u;!s||!Mn.trace.isSpanContextValid(s)?c=this._idGenerator.generateTraceId():(c=s.traceId,u=s.traceState,a=s);let p=n.kind??Mn.SpanKind.INTERNAL,l=(n.links??[]).map(R=>({context:R.context,attributes:(0,pS.sanitizeAttributes)(R.attributes)})),d=(0,pS.sanitizeAttributes)(n.attributes),f=this._sampler.shouldSample(r,c,e,p,d,l);u=f.traceState??u;let m=f.decision===Mn.SamplingDecision.RECORD_AND_SAMPLED?Mn.TraceFlags.SAMPLED:Mn.TraceFlags.NONE,h={traceId:c,spanId:i,traceFlags:m,traceState:u};if(f.decision===Mn.SamplingDecision.NOT_RECORD)return Mn.diag.debug("Recording is off, propagating context in a non-recording span"),Mn.trace.wrapSpanContext(h);let E=(0,pS.sanitizeAttributes)(Object.assign(d,f.attributes));return new kTe.SpanImpl({resource:this._resource,scope:this.instrumentationScope,context:r,spanContext:h,name:e,kind:p,links:l,parentSpanContext:a,attributes:E,startTime:n.startTime,spanProcessor:this._spanProcessor,spanLimits:this._spanLimits})}startActiveSpan(e,n,r,o){let s,i,a;if(arguments.length<2)return;arguments.length===2?a=n:arguments.length===3?(s=n,a=r):(s=n,i=r,a=o);let c=i??Mn.context.active(),u=this.startSpan(e,s,c),p=Mn.trace.setSpan(c,u);return Mn.context.with(p,a,void 0,u)}getGeneralLimits(){return this._generalLimits}getSpanLimits(){return this._spanLimits}};lS.Tracer=ax});var IZ=T(dS=>{"use strict";Object.defineProperty(dS,"__esModule",{value:!0});dS.MultiSpanProcessor=void 0;var GTe=ze(),cx=class{_spanProcessors;constructor(e){this._spanProcessors=e}forceFlush(){let e=[];for(let n of this._spanProcessors)e.push(n.forceFlush());return new Promise(n=>{Promise.all(e).then(()=>{n()}).catch(r=>{(0,GTe.globalErrorHandler)(r||new Error("MultiSpanProcessor: forceFlush failed")),n()})})}onStart(e,n){for(let r of this._spanProcessors)r.onStart(e,n)}onEnd(e){for(let n of this._spanProcessors)n.onEnd(e)}shutdown(){let e=[];for(let n of this._spanProcessors)e.push(n.shutdown());return new Promise((n,r)=>{Promise.all(e).then(()=>{n()},r)})}};dS.MultiSpanProcessor=cx});var vZ=T(eu=>{"use strict";Object.defineProperty(eu,"__esModule",{value:!0});eu.BasicTracerProvider=eu.ForceFlushState=void 0;var VTe=ze(),BTe=Fv(),jTe=OZ(),HTe=tx(),FTe=IZ(),qTe=nx(),el;(function(t){t[t.resolved=0]="resolved",t[t.timeout=1]="timeout",t[t.error=2]="error",t[t.unresolved=3]="unresolved"})(el=eu.ForceFlushState||(eu.ForceFlushState={}));var ux=class{_config;_tracers=new Map;_resource;_activeSpanProcessor;constructor(e={}){let n=(0,VTe.merge)({},(0,HTe.loadDefaultConfig)(),(0,qTe.reconfigureLimits)(e));this._resource=n.resource??(0,BTe.defaultResource)(),this._config=Object.assign({},n,{resource:this._resource});let r=[];e.spanProcessors?.length&&r.push(...e.spanProcessors),this._activeSpanProcessor=new FTe.MultiSpanProcessor(r)}getTracer(e,n,r){let o=`${e}@${n||""}:${r?.schemaUrl||""}`;return this._tracers.has(o)||this._tracers.set(o,new jTe.Tracer({name:e,version:n,schemaUrl:r?.schemaUrl},this._config,this._resource,this._activeSpanProcessor)),this._tracers.get(o)}forceFlush(){let e=this._config.forceFlushTimeoutMillis,n=this._activeSpanProcessor._spanProcessors.map(r=>new Promise(o=>{let s,i=setTimeout(()=>{o(new Error(`Span processor did not completed within timeout period of ${e} ms`)),s=el.timeout},e);r.forceFlush().then(()=>{clearTimeout(i),s!==el.timeout&&(s=el.resolved,o(s))}).catch(a=>{clearTimeout(i),s=el.error,o(a)})}));return new Promise((r,o)=>{Promise.all(n).then(s=>{let i=s.filter(a=>a!==el.resolved);i.length>0?o(i):r()}).catch(s=>o([s]))})}shutdown(){return this._activeSpanProcessor.shutdown()}};eu.BasicTracerProvider=ux});var xZ=T(fS=>{"use strict";Object.defineProperty(fS,"__esModule",{value:!0});fS.ConsoleSpanExporter=void 0;var px=ze(),lx=class{export(e,n){return this._sendSpans(e,n)}shutdown(){return this._sendSpans([]),this.forceFlush()}forceFlush(){return Promise.resolve()}_exportInfo(e){return{resource:{attributes:e.resource.attributes},instrumentationScope:e.instrumentationScope,traceId:e.spanContext().traceId,parentSpanContext:e.parentSpanContext,traceState:e.spanContext().traceState?.serialize(),name:e.name,id:e.spanContext().spanId,kind:e.kind,timestamp:(0,px.hrTimeToMicroseconds)(e.startTime),duration:(0,px.hrTimeToMicroseconds)(e.duration),attributes:e.attributes,status:e.status,events:e.events,links:e.links}}_sendSpans(e,n){for(let r of e)console.dir(this._exportInfo(r),{depth:3});if(n)return n({code:px.ExportResultCode.SUCCESS})}};fS.ConsoleSpanExporter=lx});var CZ=T(mS=>{"use strict";Object.defineProperty(mS,"__esModule",{value:!0});mS.InMemorySpanExporter=void 0;var PZ=ze(),dx=class{_finishedSpans=[];_stopped=!1;export(e,n){if(this._stopped)return n({code:PZ.ExportResultCode.FAILED,error:new Error("Exporter has been stopped")});this._finishedSpans.push(...e),setTimeout(()=>n({code:PZ.ExportResultCode.SUCCESS}),0)}shutdown(){return this._stopped=!0,this._finishedSpans=[],this.forceFlush()}forceFlush(){return Promise.resolve()}reset(){this._finishedSpans=[]}getFinishedSpans(){return this._finishedSpans}};mS.InMemorySpanExporter=dx});var MZ=T(hS=>{"use strict";Object.defineProperty(hS,"__esModule",{value:!0});hS.SimpleSpanProcessor=void 0;var zTe=U(),_S=ze(),fx=class{_exporter;_shutdownOnce;_pendingExports;constructor(e){this._exporter=e,this._shutdownOnce=new _S.BindOnceFuture(this._shutdown,this),this._pendingExports=new Set}async forceFlush(){await Promise.all(Array.from(this._pendingExports)),this._exporter.forceFlush&&await this._exporter.forceFlush()}onStart(e,n){}onEnd(e){if(this._shutdownOnce.isCalled||(e.spanContext().traceFlags&zTe.TraceFlags.SAMPLED)===0)return;let n=this._doExport(e).catch(r=>(0,_S.globalErrorHandler)(r));this._pendingExports.add(n),n.finally(()=>this._pendingExports.delete(n))}async _doExport(e){e.resource.asyncAttributesPending&&await e.resource.waitForAsyncAttributes?.();let n=await _S.internal._export(this._exporter,[e]);if(n.code!==_S.ExportResultCode.SUCCESS)throw n.error??new Error(`SimpleSpanProcessor: span export failed (status ${n})`)}shutdown(){return this._shutdownOnce.call()}_shutdown(){return this._exporter.shutdown()}};hS.SimpleSpanProcessor=fx});var wZ=T(ES=>{"use strict";Object.defineProperty(ES,"__esModule",{value:!0});ES.NoopSpanProcessor=void 0;var mx=class{onStart(e,n){}onEnd(e){}shutdown(){return Promise.resolve()}forceFlush(){return Promise.resolve()}};ES.NoopSpanProcessor=mx});var _x=T(ut=>{"use strict";Object.defineProperty(ut,"__esModule",{value:!0});ut.SamplingDecision=ut.TraceIdRatioBasedSampler=ut.ParentBasedSampler=ut.AlwaysOnSampler=ut.AlwaysOffSampler=ut.NoopSpanProcessor=ut.SimpleSpanProcessor=ut.InMemorySpanExporter=ut.ConsoleSpanExporter=ut.RandomIdGenerator=ut.BatchSpanProcessor=ut.BasicTracerProvider=void 0;var YTe=vZ();Object.defineProperty(ut,"BasicTracerProvider",{enumerable:!0,get:function(){return YTe.BasicTracerProvider}});var LZ=ix();Object.defineProperty(ut,"BatchSpanProcessor",{enumerable:!0,get:function(){return LZ.BatchSpanProcessor}});Object.defineProperty(ut,"RandomIdGenerator",{enumerable:!0,get:function(){return LZ.RandomIdGenerator}});var WTe=xZ();Object.defineProperty(ut,"ConsoleSpanExporter",{enumerable:!0,get:function(){return WTe.ConsoleSpanExporter}});var KTe=CZ();Object.defineProperty(ut,"InMemorySpanExporter",{enumerable:!0,get:function(){return KTe.InMemorySpanExporter}});var ZTe=MZ();Object.defineProperty(ut,"SimpleSpanProcessor",{enumerable:!0,get:function(){return ZTe.SimpleSpanProcessor}});var JTe=wZ();Object.defineProperty(ut,"NoopSpanProcessor",{enumerable:!0,get:function(){return JTe.NoopSpanProcessor}});var QTe=Jg();Object.defineProperty(ut,"AlwaysOffSampler",{enumerable:!0,get:function(){return QTe.AlwaysOffSampler}});var XTe=Xg();Object.defineProperty(ut,"AlwaysOnSampler",{enumerable:!0,get:function(){return XTe.AlwaysOnSampler}});var ege=Zv();Object.defineProperty(ut,"ParentBasedSampler",{enumerable:!0,get:function(){return ege.ParentBasedSampler}});var tge=Qv();Object.defineProperty(ut,"TraceIdRatioBasedSampler",{enumerable:!0,get:function(){return tge.TraceIdRatioBasedSampler}});var nge=um();Object.defineProperty(ut,"SamplingDecision",{enumerable:!0,get:function(){return nge.SamplingDecision}})});var Vx=T(OS=>{"use strict";Object.defineProperty(OS,"__esModule",{value:!0});OS.AbstractAsyncHooksContextManager=void 0;var aAe=q("events"),cAe=["addListener","on","once","prependListener","prependOnceListener"],Gx=class{bind(e,n){return n instanceof aAe.EventEmitter?this._bindEventEmitter(e,n):typeof n=="function"?this._bindFunction(e,n):n}_bindFunction(e,n){let r=this,o=function(...s){return r.with(e,()=>n.apply(this,s))};return Object.defineProperty(o,"length",{enumerable:!1,configurable:!0,writable:!1,value:n.length}),o}_bindEventEmitter(e,n){return this._getPatchMap(n)!==void 0||(this._createPatchMap(n),cAe.forEach(o=>{n[o]!==void 0&&(n[o]=this._patchAddListener(n,n[o],e))}),typeof n.removeListener=="function"&&(n.removeListener=this._patchRemoveListener(n,n.removeListener)),typeof n.off=="function"&&(n.off=this._patchRemoveListener(n,n.off)),typeof n.removeAllListeners=="function"&&(n.removeAllListeners=this._patchRemoveAllListeners(n,n.removeAllListeners))),n}_patchRemoveListener(e,n){let r=this;return function(o,s){let i=r._getPatchMap(e)?.[o];if(i===void 0)return n.call(this,o,s);let a=i.get(s);return n.call(this,o,a||s)}}_patchRemoveAllListeners(e,n){let r=this;return function(o){let s=r._getPatchMap(e);return s!==void 0&&(arguments.length===0?r._createPatchMap(e):s[o]!==void 0&&delete s[o]),n.apply(this,arguments)}}_patchAddListener(e,n,r){let o=this;return function(s,i){if(o._wrapped)return n.call(this,s,i);let a=o._getPatchMap(e);a===void 0&&(a=o._createPatchMap(e));let c=a[s];c===void 0&&(c=new WeakMap,a[s]=c);let u=o.bind(r,i);c.set(i,u),o._wrapped=!0;try{return n.call(this,s,u)}finally{o._wrapped=!1}}}_createPatchMap(e){let n=Object.create(null);return e[this._kOtListeners]=n,n}_getPatchMap(e){return e[this._kOtListeners]}_kOtListeners=Symbol("OtListeners");_wrapped=!1};OS.AbstractAsyncHooksContextManager=Gx});var n9=T(IS=>{"use strict";Object.defineProperty(IS,"__esModule",{value:!0});IS.AsyncHooksContextManager=void 0;var uAe=U(),pAe=q("async_hooks"),lAe=Vx(),Bx=class extends lAe.AbstractAsyncHooksContextManager{_asyncHook;_contexts=new Map;_stack=[];constructor(){super(),this._asyncHook=pAe.createHook({init:this._init.bind(this),before:this._before.bind(this),after:this._after.bind(this),destroy:this._destroy.bind(this),promiseResolve:this._destroy.bind(this)})}active(){return this._stack[this._stack.length-1]??uAe.ROOT_CONTEXT}with(e,n,r,...o){this._enterContext(e);try{return n.call(r,...o)}finally{this._exitContext()}}enable(){return this._asyncHook.enable(),this}disable(){return this._asyncHook.disable(),this._contexts.clear(),this._stack=[],this}_init(e,n){if(n==="TIMERWRAP")return;let r=this._stack[this._stack.length-1];r!==void 0&&this._contexts.set(e,r)}_destroy(e){this._contexts.delete(e)}_before(e){let n=this._contexts.get(e);n!==void 0&&this._enterContext(n)}_after(){this._exitContext()}_enterContext(e){this._stack.push(e)}_exitContext(){this._stack.pop()}};IS.AsyncHooksContextManager=Bx});var r9=T(vS=>{"use strict";Object.defineProperty(vS,"__esModule",{value:!0});vS.AsyncLocalStorageContextManager=void 0;var dAe=U(),fAe=q("async_hooks"),mAe=Vx(),jx=class extends mAe.AbstractAsyncHooksContextManager{_asyncLocalStorage;constructor(){super(),this._asyncLocalStorage=new fAe.AsyncLocalStorage}active(){return this._asyncLocalStorage.getStore()??dAe.ROOT_CONTEXT}with(e,n,r,...o){let s=r==null?n:n.bind(r);return this._asyncLocalStorage.run(e,s,...o)}enable(){return this}disable(){return this._asyncLocalStorage.disable(),this}};vS.AsyncLocalStorageContextManager=jx});var o9=T(il=>{"use strict";Object.defineProperty(il,"__esModule",{value:!0});il.AsyncLocalStorageContextManager=il.AsyncHooksContextManager=void 0;var _Ae=n9();Object.defineProperty(il,"AsyncHooksContextManager",{enumerable:!0,get:function(){return _Ae.AsyncHooksContextManager}});var hAe=r9();Object.defineProperty(il,"AsyncLocalStorageContextManager",{enumerable:!0,get:function(){return hAe.AsyncLocalStorageContextManager}})});var y9=T(al=>{"use strict";Object.defineProperty(al,"__esModule",{value:!0});al.PACKAGE_NAME=al.PACKAGE_VERSION=void 0;al.PACKAGE_VERSION="0.19.0";al.PACKAGE_NAME="@opentelemetry/instrumentation-undici"});var N9=T(DS=>{"use strict";Object.defineProperty(DS,"__esModule",{value:!0});DS.UndiciInstrumentation=void 0;var Jx=q("diagnostics_channel"),HAe=q("url"),Rm=_e(),to=U(),LS=ze(),sn=Qe(),b9=y9(),Qx=class extends Rm.InstrumentationBase{_recordFromReq=new WeakMap;constructor(e={}){super(b9.PACKAGE_NAME,b9.PACKAGE_VERSION,e)}init(){}disable(){super.disable(),this._channelSubs.forEach(e=>e.unsubscribe()),this._channelSubs.length=0}enable(){super.enable(),this._channelSubs=this._channelSubs||[],!(this._channelSubs.length>0)&&(this.subscribeToChannel("undici:request:create",this.onRequestCreated.bind(this)),this.subscribeToChannel("undici:client:sendHeaders",this.onRequestHeaders.bind(this)),this.subscribeToChannel("undici:request:headers",this.onResponseHeaders.bind(this)),this.subscribeToChannel("undici:request:trailers",this.onDone.bind(this)),this.subscribeToChannel("undici:request:error",this.onError.bind(this)))}_updateMetricInstruments(){this._httpClientDurationHistogram=this.meter.createHistogram(sn.METRIC_HTTP_CLIENT_REQUEST_DURATION,{description:"Measures the duration of outbound HTTP requests.",unit:"s",valueType:to.ValueType.DOUBLE,advice:{explicitBucketBoundaries:[.005,.01,.025,.05,.075,.1,.25,.5,.75,1,2.5,5,7.5,10]}})}subscribeToChannel(e,n){let[r,o]=process.version.replace("v","").split(".").map(a=>Number(a)),s=r>18||r===18&&o>=19,i;if(s)Jx.subscribe?.(e,n),i=()=>Jx.unsubscribe?.(e,n);else{let a=Jx.channel(e);a.subscribe(n),i=()=>a.unsubscribe(n)}this._channelSubs.push({name:e,unsubscribe:i})}parseRequestHeaders(e){let n=new Map;if(Array.isArray(e.headers))for(let r=0;r<e.headers.length;r+=2){let o=e.headers[r],s=e.headers[r+1];typeof o=="string"&&n.set(o.toLowerCase(),s)}else if(typeof e.headers=="string"){let r=e.headers.split(`\r
`);for(let o of r){if(!o)continue;let s=o.indexOf(":");if(s===-1)continue;let i=o.substring(0,s).toLowerCase(),a=o.substring(s+1).trim(),c=n.get(i);c&&Array.isArray(c)?c.push(a):c?n.set(i,[c,a]):n.set(i,a)}}return n}onRequestCreated({request:e}){let n=this.getConfig(),r=n.enabled!==!1;if((0,Rm.safeExecuteInTheMiddle)(()=>!r||e.method==="CONNECT"||n.ignoreRequestHook?.(e),M=>M&&this._diag.error("caught ignoreRequestHook error: ",M),!0))return;let s=(0,LS.hrTime)(),i;try{i=new HAe.URL(e.path,e.origin)}catch(M){this._diag.warn("could not determine url.full:",M);return}let a=i.protocol.replace(":",""),c=this.getRequestMethod(e.method),u={[sn.ATTR_HTTP_REQUEST_METHOD]:c,[sn.ATTR_HTTP_REQUEST_METHOD_ORIGINAL]:e.method,[sn.ATTR_URL_FULL]:i.toString(),[sn.ATTR_URL_PATH]:i.pathname,[sn.ATTR_URL_QUERY]:i.search,[sn.ATTR_URL_SCHEME]:a},p={https:"443",http:"80"},l=i.hostname,d=i.port||p[a];u[sn.ATTR_SERVER_ADDRESS]=l,d&&!isNaN(Number(d))&&(u[sn.ATTR_SERVER_PORT]=Number(d));let m=this.parseRequestHeaders(e).get("user-agent");if(m){let M=Array.isArray(m)?m[m.length-1]:m;u[sn.ATTR_USER_AGENT_ORIGINAL]=M}let h=(0,Rm.safeExecuteInTheMiddle)(()=>n.startSpanHook?.(e),M=>M&&this._diag.error("caught startSpanHook error: ",M),!0);h&&Object.entries(h).forEach(([M,j])=>{u[M]=j});let E=to.context.active(),A=to.trace.getSpan(E),R;n.requireParentforSpans&&(!A||!to.trace.isSpanContextValid(A.spanContext()))?R=to.trace.wrapSpanContext(to.INVALID_SPAN_CONTEXT):R=this.tracer.startSpan(c==="_OTHER"?"HTTP":c,{kind:to.SpanKind.CLIENT,attributes:u},E),(0,Rm.safeExecuteInTheMiddle)(()=>n.requestHook?.(R,e),M=>M&&this._diag.error("caught requestHook error: ",M),!0);let y=to.trace.setSpan(to.context.active(),R),O={};to.propagation.inject(y,O);let P=Object.entries(O);for(let M=0;M<P.length;M++){let[j,se]=P[M];typeof e.addHeader=="function"?e.addHeader(j,se):typeof e.headers=="string"?e.headers+=`${j}: ${se}\r
`:Array.isArray(e.headers)&&e.headers.push(j,se)}this._recordFromReq.set(e,{span:R,attributes:u,startTime:s})}onRequestHeaders({request:e,socket:n}){let r=this._recordFromReq.get(e);if(!r)return;let o=this.getConfig(),{span:s}=r,{remoteAddress:i,remotePort:a}=n,c={[sn.ATTR_NETWORK_PEER_ADDRESS]:i,[sn.ATTR_NETWORK_PEER_PORT]:a};if(o.headersToSpanAttributes?.requestHeaders){let u=new Set(o.headersToSpanAttributes.requestHeaders.map(l=>l.toLowerCase())),p=this.parseRequestHeaders(e);for(let[l,d]of p.entries())if(u.has(l)){let f=Array.isArray(d)?d.join(", "):d;c[`http.request.header.${l}`]=f}}s.setAttributes(c)}onResponseHeaders({request:e,response:n}){let r=this._recordFromReq.get(e);if(!r)return;let{span:o,attributes:s}=r,i={[sn.ATTR_HTTP_RESPONSE_STATUS_CODE]:n.statusCode},a=this.getConfig();(0,Rm.safeExecuteInTheMiddle)(()=>a.responseHook?.(o,{request:e,response:n}),u=>u&&this._diag.error("caught responseHook error: ",u),!0);let c=new Set;a.headersToSpanAttributes?.responseHeaders&&a.headersToSpanAttributes?.responseHeaders.forEach(u=>c.add(u.toLowerCase()));for(let u=0;u<n.headers.length;u=u+2){let p=n.headers[u].toString().toLowerCase(),l=n.headers[u+1];if(c.has(p)&&(i[`http.response.header.${p}`]=l.toString()),p==="content-length"){let d=Number(l.toString());isNaN(d)||(i["http.response.header.content-length"]=d)}}o.setAttributes(i),o.setStatus({code:n.statusCode>=400?to.SpanStatusCode.ERROR:to.SpanStatusCode.UNSET}),r.attributes=Object.assign(s,i)}onDone({request:e}){let n=this._recordFromReq.get(e);if(!n)return;let{span:r,attributes:o,startTime:s}=n;r.end(),this._recordFromReq.delete(e),this.recordRequestDuration(o,s)}onError({request:e,error:n}){let r=this._recordFromReq.get(e);if(!r)return;let{span:o,attributes:s,startTime:i}=r;o.recordException(n),o.setStatus({code:to.SpanStatusCode.ERROR,message:n.message}),o.end(),this._recordFromReq.delete(e),s[sn.ATTR_ERROR_TYPE]=n.message,this.recordRequestDuration(s,i)}recordRequestDuration(e,n){let r={};[sn.ATTR_HTTP_RESPONSE_STATUS_CODE,sn.ATTR_HTTP_REQUEST_METHOD,sn.ATTR_SERVER_ADDRESS,sn.ATTR_SERVER_PORT,sn.ATTR_URL_SCHEME,sn.ATTR_ERROR_TYPE].forEach(i=>{i in e&&(r[i]=e[i])});let s=(0,LS.hrTimeToMilliseconds)((0,LS.hrTimeDuration)(n,(0,LS.hrTime)()))/1e3;this._httpClientDurationHistogram.record(s,r)}getRequestMethod(e){let n={CONNECT:!0,OPTIONS:!0,HEAD:!0,GET:!0,POST:!0,PUT:!0,PATCH:!0,DELETE:!0,TRACE:!0};return e.toUpperCase()in n?e.toUpperCase():"_OTHER"}};DS.UndiciInstrumentation=Qx});var O9=T(kS=>{"use strict";Object.defineProperty(kS,"__esModule",{value:!0});kS.UndiciInstrumentation=void 0;var FAe=N9();Object.defineProperty(kS,"UndiciInstrumentation",{enumerable:!0,get:function(){return FAe.UndiciInstrumentation}})});var US=T(ym=>{"use strict";Object.defineProperty(ym,"__esModule",{value:!0});ym.ExpressLayerType=void 0;var JAe;(function(t){t.ROUTER="router",t.MIDDLEWARE="middleware",t.REQUEST_HANDLER="request_handler"})(JAe=ym.ExpressLayerType||(ym.ExpressLayerType={}))});var $S=T(bm=>{"use strict";Object.defineProperty(bm,"__esModule",{value:!0});bm.AttributeNames=void 0;var QAe;(function(t){t.EXPRESS_TYPE="express.type",t.EXPRESS_NAME="express.name"})(QAe=bm.AttributeNames||(bm.AttributeNames={}))});var Xx=T(cl=>{"use strict";Object.defineProperty(cl,"__esModule",{value:!0});cl._LAYERS_STORE_PROPERTY=cl.kLayerPatched=void 0;cl.kLayerPatched=Symbol("express-layer-patched");cl._LAYERS_STORE_PROPERTY="__ot_middlewares"});var M9=T(an=>{"use strict";Object.defineProperty(an,"__esModule",{value:!0});an.getActualMatchedRoute=an.getConstructedRoute=an.getLayerPath=an.asErrorAndMessage=an.isLayerIgnored=an.getLayerMetadata=an.getRouterPath=an.storeLayerPath=void 0;var eP=US(),ul=$S(),ou=Xx(),XAe=(t,e)=>(Array.isArray(t[ou._LAYERS_STORE_PROPERTY])===!1&&Object.defineProperty(t,ou._LAYERS_STORE_PROPERTY,{enumerable:!1,value:[]}),e===void 0?{isLayerPathStored:!1}:(t[ou._LAYERS_STORE_PROPERTY].push(e),{isLayerPathStored:!0}));an.storeLayerPath=XAe;var eRe=(t,e)=>{let n=e.handle?.stack?.[0];return n?.route?.path?`${t}${n.route.path}`:n?.handle?.stack?(0,an.getRouterPath)(t,n):t};an.getRouterPath=eRe;var tRe=(t,e,n)=>{if(e.name==="router"){let r=(0,an.getRouterPath)("",e),o=r||n||t||"/";return{attributes:{[ul.AttributeNames.EXPRESS_NAME]:o,[ul.AttributeNames.EXPRESS_TYPE]:eP.ExpressLayerType.ROUTER},name:`router - ${o}`}}else return e.name==="bound dispatch"||e.name==="handle"?{attributes:{[ul.AttributeNames.EXPRESS_NAME]:(t||n)??"request handler",[ul.AttributeNames.EXPRESS_TYPE]:eP.ExpressLayerType.REQUEST_HANDLER},name:`request handler${e.path?` - ${t||n}`:""}`}:{attributes:{[ul.AttributeNames.EXPRESS_NAME]:e.name,[ul.AttributeNames.EXPRESS_TYPE]:eP.ExpressLayerType.MIDDLEWARE},name:`middleware - ${e.name}`}};an.getLayerMetadata=tRe;var nRe=(t,e)=>{if(typeof e=="string")return e===t;if(e instanceof RegExp)return e.test(t);if(typeof e=="function")return e(t);throw new TypeError("Pattern is in unsupported datatype")},rRe=(t,e,n)=>{if(Array.isArray(n?.ignoreLayersType)&&n?.ignoreLayersType?.includes(e))return!0;if(Array.isArray(n?.ignoreLayers)===!1)return!1;try{for(let r of n.ignoreLayers)if(nRe(t,r))return!0}catch{}return!1};an.isLayerIgnored=rRe;var oRe=t=>t instanceof Error?[t,t.message]:[String(t),String(t)];an.asErrorAndMessage=oRe;var sRe=t=>{let e=t[0];return Array.isArray(e)?e.map(n=>P9(n)||"").join(","):P9(e)};an.getLayerPath=sRe;var P9=t=>{if(typeof t=="string")return t;if(t instanceof RegExp||typeof t=="number")return t.toString()};function C9(t){let n=(Array.isArray(t[ou._LAYERS_STORE_PROPERTY])?t[ou._LAYERS_STORE_PROPERTY]:[]).filter(r=>r!=="/"&&r!=="/*");return n.length===1&&n[0]==="*"?"*":n.join("").replace(/\/{2,}/g,"/")}an.getConstructedRoute=C9;function iRe(t){let e=Array.isArray(t[ou._LAYERS_STORE_PROPERTY])?t[ou._LAYERS_STORE_PROPERTY]:[];if(e.length===0)return;if(e.every(s=>s==="/"))return t.originalUrl==="/"?"/":void 0;let n=C9(t);if(n==="*"||n.includes("/")&&(n.includes(",")||n.includes("\\")||n.includes("*")||n.includes("[")))return n;let r=n.startsWith("/")?n:`/${n}`;return r.length>0&&(t.originalUrl===r||t.originalUrl.startsWith(r)||aRe(r))?r:void 0}an.getActualMatchedRoute=iRe;function aRe(t){return t.includes(":")||t.includes("*")}});var w9=T(pl=>{"use strict";Object.defineProperty(pl,"__esModule",{value:!0});pl.PACKAGE_NAME=pl.PACKAGE_VERSION=void 0;pl.PACKAGE_VERSION="0.57.0";pl.PACKAGE_NAME="@opentelemetry/instrumentation-express"});var $9=T(VS=>{"use strict";Object.defineProperty(VS,"__esModule",{value:!0});VS.ExpressInstrumentation=void 0;var L9=ze(),ts=U(),D9=US(),k9=$S(),Gs=M9(),U9=w9(),ll=_e(),cRe=Qe(),GS=Xx(),tP=class extends ll.InstrumentationBase{constructor(e={}){super(U9.PACKAGE_NAME,U9.PACKAGE_VERSION,e)}init(){return[new ll.InstrumentationNodeModuleDefinition("express",[">=4.0.0 <6"],e=>{let n=typeof e?.Router?.prototype?.route=="function",r=n?e.Router.prototype:e.Router;return(0,ll.isWrapped)(r.route)&&this._unwrap(r,"route"),this._wrap(r,"route",this._getRoutePatch()),(0,ll.isWrapped)(r.use)&&this._unwrap(r,"use"),this._wrap(r,"use",this._getRouterUsePatch()),(0,ll.isWrapped)(e.application.use)&&this._unwrap(e.application,"use"),this._wrap(e.application,"use",this._getAppUsePatch(n)),e},e=>{if(e===void 0)return;let r=typeof e?.Router?.prototype?.route=="function"?e.Router.prototype:e.Router;this._unwrap(r,"route"),this._unwrap(r,"use"),this._unwrap(e.application,"use")})]}_getRoutePatch(){let e=this;return function(n){return function(...o){let s=n.apply(this,o),i=this.stack[this.stack.length-1];return e._applyPatch(i,(0,Gs.getLayerPath)(o)),s}}}_getRouterUsePatch(){let e=this;return function(n){return function(...o){let s=n.apply(this,o),i=this.stack[this.stack.length-1];return e._applyPatch(i,(0,Gs.getLayerPath)(o)),s}}}_getAppUsePatch(e){let n=this;return function(r){return function(...s){let i=e?this.router:this._router,a=r.apply(this,s);if(i){let c=i.stack[i.stack.length-1];n._applyPatch(c,(0,Gs.getLayerPath)(s))}return a}}}_applyPatch(e,n){let r=this;e[GS.kLayerPatched]!==!0&&(e[GS.kLayerPatched]=!0,this._wrap(e,"handle",o=>{if(o.length===4)return o;let s=function(i,a){let{isLayerPathStored:c}=(0,Gs.storeLayerPath)(i,n),u=(0,Gs.getConstructedRoute)(i),p=(0,Gs.getActualMatchedRoute)(i),l={[cRe.ATTR_HTTP_ROUTE]:p},d=(0,Gs.getLayerMetadata)(u,e,n),f=d.attributes[k9.AttributeNames.EXPRESS_TYPE],m=(0,L9.getRPCMetadata)(ts.context.active());if(m?.type===L9.RPCType.HTTP&&(m.route=p),(0,Gs.isLayerIgnored)(d.name,f,r.getConfig()))return f===D9.ExpressLayerType.MIDDLEWARE&&i[GS._LAYERS_STORE_PROPERTY].pop(),o.apply(this,arguments);if(ts.trace.getSpan(ts.context.active())===void 0)return o.apply(this,arguments);let h=r._getSpanName({request:i,layerType:f,route:u},d.name),E=r.tracer.startSpan(h,{attributes:Object.assign(l,d.attributes)}),A=ts.context.active(),R=ts.trace.setSpan(A,E),{requestHook:y}=r.getConfig();y&&(0,ll.safeExecuteInTheMiddle)(()=>y(E,{request:i,layerType:f,route:u}),se=>{se&&ts.diag.error("express instrumentation: request hook failed",se)},!0);let O=!1;d.attributes[k9.AttributeNames.EXPRESS_TYPE]===D9.ExpressLayerType.ROUTER&&(E.end(),O=!0,R=A);let P=()=>{O===!1&&(O=!0,E.end())},M=Array.from(arguments),j=M.findIndex(se=>typeof se=="function");j>=0&&(arguments[j]=function(){let se=arguments[0],we=![void 0,null,"route","router"].includes(se);if(!O&&we){let[dn,fn]=(0,Gs.asErrorAndMessage)(se);E.recordException(dn),E.setStatus({code:ts.SpanStatusCode.ERROR,message:fn})}O===!1&&(O=!0,i.res?.removeListener("finish",P),E.end()),!(i.route&&we)&&c&&i[GS._LAYERS_STORE_PROPERTY].pop();let gt=M[j];return ts.context.bind(A,gt).apply(this,arguments)});try{return ts.context.bind(R,o).apply(this,arguments)}catch(se){let[we,gt]=(0,Gs.asErrorAndMessage)(se);throw E.recordException(we),E.setStatus({code:ts.SpanStatusCode.ERROR,message:gt}),se}finally{O||a.once("finish",P)}};for(let i in o)Object.defineProperty(s,i,{get(){return o[i]},set(a){o[i]=a}});return s}))}_getSpanName(e,n){let{spanNameHook:r}=this.getConfig();if(!(r instanceof Function))return n;try{return r(e,n)??n}catch(o){return ts.diag.error("express instrumentation: error calling span name rewrite hook",o),n}}};VS.ExpressInstrumentation=tP});var G9=T(Ia=>{"use strict";Object.defineProperty(Ia,"__esModule",{value:!0});Ia.AttributeNames=Ia.ExpressLayerType=Ia.ExpressInstrumentation=void 0;var uRe=$9();Object.defineProperty(Ia,"ExpressInstrumentation",{enumerable:!0,get:function(){return uRe.ExpressInstrumentation}});var pRe=US();Object.defineProperty(Ia,"ExpressLayerType",{enumerable:!0,get:function(){return pRe.ExpressLayerType}});var lRe=$S();Object.defineProperty(Ia,"AttributeNames",{enumerable:!0,get:function(){return lRe.AttributeNames}})});var W9=T((xQe,Y9)=>{"use strict";Y9.exports=q9;function q9(t,e,n){t instanceof RegExp&&(t=F9(t,n)),e instanceof RegExp&&(e=F9(e,n));var r=z9(t,e,n);return r&&{start:r[0],end:r[1],pre:n.slice(0,r[0]),body:n.slice(r[0]+t.length,r[1]),post:n.slice(r[1]+e.length)}}function F9(t,e){var n=e.match(t);return n?n[0]:null}q9.range=z9;function z9(t,e,n){var r,o,s,i,a,c=n.indexOf(t),u=n.indexOf(e,c+1),p=c;if(c>=0&&u>0){if(t===e)return[c,u];for(r=[],s=n.length;p>=0&&!a;)p==c?(r.push(p),c=n.indexOf(t,p+1)):r.length==1?a=[r.pop(),u]:(o=r.pop(),o<s&&(s=o,i=u),u=n.indexOf(e,p+1)),p=c<u&&c>=0?c:u;r.length&&(a=[s,i])}return a}});var n3=T((PQe,t3)=>{var K9=W9();t3.exports=ERe;var Z9="\0SLASH"+Math.random()+"\0",J9="\0OPEN"+Math.random()+"\0",rP="\0CLOSE"+Math.random()+"\0",Q9="\0COMMA"+Math.random()+"\0",X9="\0PERIOD"+Math.random()+"\0";function nP(t){return parseInt(t,10)==t?parseInt(t,10):t.charCodeAt(0)}function _Re(t){return t.split("\\\\").join(Z9).split("\\{").join(J9).split("\\}").join(rP).split("\\,").join(Q9).split("\\.").join(X9)}function hRe(t){return t.split(Z9).join("\\").split(J9).join("{").split(rP).join("}").split(Q9).join(",").split(X9).join(".")}function e3(t){if(!t)return[""];var e=[],n=K9("{","}",t);if(!n)return t.split(",");var r=n.pre,o=n.body,s=n.post,i=r.split(",");i[i.length-1]+="{"+o+"}";var a=e3(s);return s.length&&(i[i.length-1]+=a.shift(),i.push.apply(i,a)),e.push.apply(e,i),e}function ERe(t){return t?(t.substr(0,2)==="{}"&&(t="\\{\\}"+t.substr(2)),Nm(_Re(t),!0).map(hRe)):[]}function TRe(t){return"{"+t+"}"}function gRe(t){return/^-?0\d/.test(t)}function SRe(t,e){return t<=e}function ARe(t,e){return t>=e}function Nm(t,e){var n=[],r=K9("{","}",t);if(!r)return[t];var o=r.pre,s=r.post.length?Nm(r.post,!1):[""];if(/\$$/.test(r.pre))for(var i=0;i<s.length;i++){var a=o+"{"+r.body+"}"+s[i];n.push(a)}else{var c=/^-?\d+\.\.-?\d+(?:\.\.-?\d+)?$/.test(r.body),u=/^[a-zA-Z]\.\.[a-zA-Z](?:\.\.-?\d+)?$/.test(r.body),p=c||u,l=r.body.indexOf(",")>=0;if(!p&&!l)return r.post.match(/,(?!,).*\}/)?(t=r.pre+"{"+r.body+rP+r.post,Nm(t)):[t];var d;if(p)d=r.body.split(/\.\./);else if(d=e3(r.body),d.length===1&&(d=Nm(d[0],!1).map(TRe),d.length===1))return s.map(function(gt){return r.pre+d[0]+gt});var f;if(p){var m=nP(d[0]),h=nP(d[1]),E=Math.max(d[0].length,d[1].length),A=d.length==3?Math.abs(nP(d[2])):1,R=SRe,y=h<m;y&&(A*=-1,R=ARe);var O=d.some(gRe);f=[];for(var P=m;R(P,h);P+=A){var M;if(u)M=String.fromCharCode(P),M==="\\"&&(M="");else if(M=String(P),O){var j=E-M.length;if(j>0){var se=new Array(j+1).join("0");P<0?M="-"+se+M.slice(1):M=se+M}}f.push(M)}}else{f=[];for(var we=0;we<d.length;we++)f.push.apply(f,Nm(d[we],!1))}for(var we=0;we<f.length;we++)for(var i=0;i<s.length;i++){var a=o+f[we]+s[i];(!e||p||a)&&n.push(a)}}return n}});var cP=T(rs=>{"use strict";Object.defineProperty(rs,"__esModule",{value:!0});rs.SpanNames=rs.TokenKind=rs.AllowedOperationTypes=void 0;var _ye;(function(t){t.QUERY="query",t.MUTATION="mutation",t.SUBSCRIPTION="subscription"})(_ye=rs.AllowedOperationTypes||(rs.AllowedOperationTypes={}));var hye;(function(t){t.SOF="<SOF>",t.EOF="<EOF>",t.BANG="!",t.DOLLAR="$",t.AMP="&",t.PAREN_L="(",t.PAREN_R=")",t.SPREAD="...",t.COLON=":",t.EQUALS="=",t.AT="@",t.BRACKET_L="[",t.BRACKET_R="]",t.BRACE_L="{",t.PIPE="|",t.BRACE_R="}",t.NAME="Name",t.INT="Int",t.FLOAT="Float",t.STRING="String",t.BLOCK_STRING="BlockString",t.COMMENT="Comment"})(hye=rs.TokenKind||(rs.TokenKind={}));var Eye;(function(t){t.EXECUTE="graphql.execute",t.PARSE="graphql.parse",t.RESOLVE="graphql.resolve",t.VALIDATE="graphql.validate",t.SCHEMA_VALIDATE="graphql.validateSchema",t.SCHEMA_PARSE="graphql.parseSchema"})(Eye=rs.SpanNames||(rs.SpanNames={}))});var uP=T(Mm=>{"use strict";Object.defineProperty(Mm,"__esModule",{value:!0});Mm.AttributeNames=void 0;var Tye;(function(t){t.SOURCE="graphql.source",t.FIELD_NAME="graphql.field.name",t.FIELD_PATH="graphql.field.path",t.FIELD_TYPE="graphql.field.type",t.OPERATION_TYPE="graphql.operation.type",t.OPERATION_NAME="graphql.operation.name",t.VARIABLES="graphql.variables.",t.ERROR_VALIDATION_NAME="graphql.validation.error"})(Tye=Mm.AttributeNames||(Mm.AttributeNames={}))});var ZS=T(ml=>{"use strict";Object.defineProperty(ml,"__esModule",{value:!0});ml.OTEL_GRAPHQL_DATA_SYMBOL=ml.OTEL_PATCHED_SYMBOL=void 0;ml.OTEL_PATCHED_SYMBOL=Symbol.for("opentelemetry.patched");ml.OTEL_GRAPHQL_DATA_SYMBOL=Symbol.for("opentelemetry.graphql_data")});var w3=T(JS=>{"use strict";Object.defineProperty(JS,"__esModule",{value:!0});JS.OPERATION_NOT_SUPPORTED=void 0;var dXe=ZS();JS.OPERATION_NOT_SUPPORTED="Operation$operationName$not supported"});var Y3=T(hn=>{"use strict";Object.defineProperty(hn,"__esModule",{value:!0});hn.wrapFieldResolver=hn.wrapFields=hn.getSourceFromLocation=hn.getOperation=hn.endSpan=hn.addSpanSource=hn.addInputVariableAttributes=hn.isPromise=void 0;var hl=U(),Ca=cP(),_l=uP(),bi=ZS(),L3=Object.values(Ca.AllowedOperationTypes),gye=t=>typeof t?.then=="function";hn.isPromise=gye;var Sye=t=>typeof t=="object"&&t!==null;function pP(t,e,n){Array.isArray(n)?n.forEach((r,o)=>{pP(t,`${e}.${o}`,r)}):n instanceof Object?Object.entries(n).forEach(([r,o])=>{pP(t,`${e}.${r}`,o)}):t.setAttribute(`${_l.AttributeNames.VARIABLES}${String(e)}`,n)}function Aye(t,e){Object.entries(e).forEach(([n,r])=>{pP(t,n,r)})}hn.addInputVariableAttributes=Aye;function $3(t,e,n,r,o){let s=H3(e,n,r,o);t.setAttribute(_l.AttributeNames.SOURCE,s)}hn.addSpanSource=$3;function Rye(t,e,n,r,o){let s=G3(n,o);if(s)return{field:s,spanAdded:!1};let a=e().flatResolveSpans?B3(n):V3(n,o);return s={span:yye(t,e,n,r,o,a)},Oye(n,o,s),{field:s,spanAdded:!0}}function yye(t,e,n,r,o,s){let i={[_l.AttributeNames.FIELD_NAME]:r.fieldName,[_l.AttributeNames.FIELD_PATH]:o.join("."),[_l.AttributeNames.FIELD_TYPE]:r.returnType.toString()},a=t.startSpan(`${Ca.SpanNames.RESOLVE} ${i[_l.AttributeNames.FIELD_PATH]}`,{attributes:i},s?hl.trace.setSpan(hl.context.active(),s):void 0),c=n[bi.OTEL_GRAPHQL_DATA_SYMBOL].source,u=r.fieldNodes.find(p=>p.kind==="Field");return u&&$3(a,c.loc,e().allowValues,u.loc?.start,u.loc?.end),a}function bye(t,e){e&&t.recordException(e),t.end()}hn.endSpan=bye;function Nye(t,e){if(!(!t||!Array.isArray(t.definitions)))return e?t.definitions.filter(n=>L3.indexOf(n?.operation)!==-1).find(n=>e===n?.name?.value):t.definitions.find(n=>L3.indexOf(n?.operation)!==-1)}hn.getOperation=Nye;function Oye(t,e,n){return t[bi.OTEL_GRAPHQL_DATA_SYMBOL].fields[e.join(".")]=n}function G3(t,e){return t[bi.OTEL_GRAPHQL_DATA_SYMBOL].fields[e.join(".")]}function V3(t,e){for(let n=e.length-1;n>0;n--){let r=G3(t,e.slice(0,n));if(r)return r.span}return B3(t)}function B3(t){return t[bi.OTEL_GRAPHQL_DATA_SYMBOL].span}function Iye(t,e){let n=[],r=e;for(;r;){let o=r.key;t&&typeof o=="number"&&(o="*"),n.push(String(o)),r=r.prev}return n.reverse()}function vye(t){return j3(`
`,t)}function D3(t){return j3(" ",t)}function j3(t,e){let n="";for(let r=0;r<e;r++)n+=t;return n}var xye=[Ca.TokenKind.FLOAT,Ca.TokenKind.STRING,Ca.TokenKind.INT,Ca.TokenKind.BLOCK_STRING];function H3(t,e=!1,n,r){let o="";if(t?.startToken){let s=typeof n=="number"?n:t.start,i=typeof r=="number"?r:t.end,a=t.startToken.next,c=1;for(;a;){if(a.start<s){a=a.next,c=a?.line;continue}if(a.end>i){a=a.next,c=a?.line;continue}let u=a.value||a.kind,p="";!e&&xye.indexOf(a.kind)>=0&&(u="*"),a.kind===Ca.TokenKind.STRING&&(u=`"${u}"`),a.kind===Ca.TokenKind.EOF&&(u=""),a.line>c?(o+=vye(a.line-c),c=a.line,p=D3(a.column-1)):a.line===a.prev?.line&&(p=D3(a.start-(a.prev?.end||0))),o+=p+u,a&&(a=a.next)}}return o}hn.getSourceFromLocation=H3;function F3(t,e,n){if(!t||t[bi.OTEL_PATCHED_SYMBOL])return;let r=t.getFields();t[bi.OTEL_PATCHED_SYMBOL]=!0,Object.keys(r).forEach(o=>{let s=r[o];if(s&&(s.resolve&&(s.resolve=z3(e,n,s.resolve)),s.type)){let i=q3(s.type);for(let a of i)F3(a,e,n)}})}hn.wrapFields=F3;function q3(t){return"ofType"in t?q3(t.ofType):Pye(t)?t.getTypes():Cye(t)?[t]:[]}function Pye(t){return"getTypes"in t&&typeof t.getTypes=="function"}function Cye(t){return"getFields"in t&&typeof t.getFields=="function"}var k3=(t,e,n)=>{n&&(t.recordException(e),t.setStatus({code:hl.SpanStatusCode.ERROR,message:e.message}),t.end())},U3=(t,e)=>{e&&t.end()};function z3(t,e,n,r=!1){if(o[bi.OTEL_PATCHED_SYMBOL]||typeof n!="function")return n;function o(s,i,a,c){if(!n)return;let u=e();if(u.ignoreTrivialResolveSpans&&r&&(Sye(s)||typeof s=="function")&&typeof s[c.fieldName]!="function")return n.call(this,s,i,a,c);if(!a[bi.OTEL_GRAPHQL_DATA_SYMBOL])return n.call(this,s,i,a,c);let p=Iye(u.mergeItems,c&&c.path),l=p.filter(m=>typeof m=="string").length,d,f=!1;if(u.depth>=0&&u.depth<l)d=V3(a,p);else{let{field:m,spanAdded:h}=Rye(t,e,a,c,p);d=m.span,f=h}return hl.context.with(hl.trace.setSpan(hl.context.active(),d),()=>{try{let m=n.call(this,s,i,a,c);return(0,hn.isPromise)(m)?m.then(h=>(U3(d,f),h),h=>{throw k3(d,h,f),h}):(U3(d,f),m)}catch(m){throw k3(d,m,f),m}})}return o[bi.OTEL_PATCHED_SYMBOL]=!0,o}hn.wrapFieldResolver=z3});var W3=T(El=>{"use strict";Object.defineProperty(El,"__esModule",{value:!0});El.PACKAGE_NAME=El.PACKAGE_VERSION=void 0;El.PACKAGE_VERSION="0.56.0";El.PACKAGE_NAME="@opentelemetry/instrumentation-graphql"});var J3=T(eA=>{"use strict";Object.defineProperty(eA,"__esModule",{value:!0});eA.GraphQLInstrumentation=void 0;var Ni=U(),bo=_e(),wm=cP(),QS=uP(),lP=ZS(),Mye=w3(),Jn=Y3(),K3=W3(),Z3={mergeItems:!1,depth:-1,allowValues:!1,ignoreResolveSpans:!1},XS=[">=14.0.0 <17"],dP=class extends bo.InstrumentationBase{constructor(e={}){super(K3.PACKAGE_NAME,K3.PACKAGE_VERSION,{...Z3,...e})}setConfig(e={}){super.setConfig({...Z3,...e})}init(){let e=new bo.InstrumentationNodeModuleDefinition("graphql",XS);return e.files.push(this._addPatchingExecute()),e.files.push(this._addPatchingParser()),e.files.push(this._addPatchingValidate()),e}_addPatchingExecute(){return new bo.InstrumentationNodeModuleFile("graphql/execution/execute.js",XS,e=>((0,bo.isWrapped)(e.execute)&&this._unwrap(e,"execute"),this._wrap(e,"execute",this._patchExecute(e.defaultFieldResolver)),e),e=>{e&&this._unwrap(e,"execute")})}_addPatchingParser(){return new bo.InstrumentationNodeModuleFile("graphql/language/parser.js",XS,e=>((0,bo.isWrapped)(e.parse)&&this._unwrap(e,"parse"),this._wrap(e,"parse",this._patchParse()),e),e=>{e&&this._unwrap(e,"parse")})}_addPatchingValidate(){return new bo.InstrumentationNodeModuleFile("graphql/validation/validate.js",XS,e=>((0,bo.isWrapped)(e.validate)&&this._unwrap(e,"validate"),this._wrap(e,"validate",this._patchValidate()),e),e=>{e&&this._unwrap(e,"validate")})}_patchExecute(e){let n=this;return function(o){return function(){let i;if(arguments.length>=2){let u=arguments;i=n._wrapExecuteArgs(u[0],u[1],u[2],u[3],u[4],u[5],u[6],u[7],e)}else{let u=arguments[0];i=n._wrapExecuteArgs(u.schema,u.document,u.rootValue,u.contextValue,u.variableValues,u.operationName,u.fieldResolver,u.typeResolver,e)}let a=(0,Jn.getOperation)(i.document,i.operationName),c=n._createExecuteSpan(a,i);return i.contextValue[lP.OTEL_GRAPHQL_DATA_SYMBOL]={source:i.document?i.document||i.document[lP.OTEL_GRAPHQL_DATA_SYMBOL]:void 0,span:c,fields:{}},Ni.context.with(Ni.trace.setSpan(Ni.context.active(),c),()=>(0,bo.safeExecuteInTheMiddle)(()=>o.apply(this,[i]),(u,p)=>{n._handleExecutionResult(c,u,p)}))}}}_handleExecutionResult(e,n,r){let o=this.getConfig();if(r===void 0||n){(0,Jn.endSpan)(e,n);return}if((0,Jn.isPromise)(r))r.then(s=>{if(typeof o.responseHook!="function"){(0,Jn.endSpan)(e);return}this._executeResponseHook(e,s)},s=>{(0,Jn.endSpan)(e,s)});else{if(typeof o.responseHook!="function"){(0,Jn.endSpan)(e);return}this._executeResponseHook(e,r)}}_executeResponseHook(e,n){let{responseHook:r}=this.getConfig();r&&(0,bo.safeExecuteInTheMiddle)(()=>{r(e,n)},o=>{o&&this._diag.error("Error running response hook",o),(0,Jn.endSpan)(e,void 0)},!0)}_patchParse(){let e=this;return function(r){return function(s,i){return e._parse(this,r,s,i)}}}_patchValidate(){let e=this;return function(r){return function(s,i,a,c,u){return e._validate(this,r,s,i,a,u,c)}}}_parse(e,n,r,o){let s=this.getConfig(),i=this.tracer.startSpan(wm.SpanNames.PARSE);return Ni.context.with(Ni.trace.setSpan(Ni.context.active(),i),()=>(0,bo.safeExecuteInTheMiddle)(()=>n.call(e,r,o),(a,c)=>{c&&((0,Jn.getOperation)(c)?c.loc&&(0,Jn.addSpanSource)(i,c.loc,s.allowValues):i.updateName(wm.SpanNames.SCHEMA_PARSE)),(0,Jn.endSpan)(i,a)}))}_validate(e,n,r,o,s,i,a){let c=this.tracer.startSpan(wm.SpanNames.VALIDATE,{});return Ni.context.with(Ni.trace.setSpan(Ni.context.active(),c),()=>(0,bo.safeExecuteInTheMiddle)(()=>n.call(e,r,o,s,a,i),(u,p)=>{o.loc||c.updateName(wm.SpanNames.SCHEMA_VALIDATE),p&&p.length&&c.recordException({name:QS.AttributeNames.ERROR_VALIDATION_NAME,message:JSON.stringify(p)}),(0,Jn.endSpan)(c,u)}))}_createExecuteSpan(e,n){let r=this.getConfig(),o=this.tracer.startSpan(wm.SpanNames.EXECUTE,{});if(e){let{operation:s,name:i}=e;o.setAttribute(QS.AttributeNames.OPERATION_TYPE,s);let a=i?.value;a?(o.setAttribute(QS.AttributeNames.OPERATION_NAME,a),o.updateName(`${s} ${a}`)):o.updateName(s)}else{let s=" ";n.operationName&&(s=` "${n.operationName}" `),s=Mye.OPERATION_NOT_SUPPORTED.replace("$operationName$",s),o.setAttribute(QS.AttributeNames.OPERATION_NAME,s)}return n.document?.loc&&(0,Jn.addSpanSource)(o,n.document.loc,r.allowValues),n.variableValues&&r.allowValues&&(0,Jn.addInputVariableAttributes)(o,n.variableValues),o}_wrapExecuteArgs(e,n,r,o,s,i,a,c,u){if(o||(o={}),o[lP.OTEL_GRAPHQL_DATA_SYMBOL]||this.getConfig().ignoreResolveSpans)return{schema:e,document:n,rootValue:r,contextValue:o,variableValues:s,operationName:i,fieldResolver:a,typeResolver:c};let p=a==null,l=a??u;return a=(0,Jn.wrapFieldResolver)(this.tracer,()=>this.getConfig(),l,p),e&&((0,Jn.wrapFields)(e.getQueryType(),this.tracer,()=>this.getConfig()),(0,Jn.wrapFields)(e.getMutationType(),this.tracer,()=>this.getConfig())),{schema:e,document:n,rootValue:r,contextValue:o,variableValues:s,operationName:i,fieldResolver:a,typeResolver:c}}};eA.GraphQLInstrumentation=dP});var Q3=T(tA=>{"use strict";Object.defineProperty(tA,"__esModule",{value:!0});tA.GraphQLInstrumentation=void 0;var wye=J3();Object.defineProperty(tA,"GraphQLInstrumentation",{enumerable:!0,get:function(){return wye.GraphQLInstrumentation}})});var s6=T(nA=>{"use strict";Object.defineProperty(nA,"__esModule",{value:!0});nA.EVENT_LISTENERS_SET=void 0;nA.EVENT_LISTENERS_SET=Symbol("opentelemetry.instrumentation.kafkajs.eventListenersSet")});var i6=T(rA=>{"use strict";Object.defineProperty(rA,"__esModule",{value:!0});rA.bufferTextMapGetter=void 0;rA.bufferTextMapGetter={get(t,e){if(!t)return;let n=Object.keys(t);for(let r of n)if(r===e||r.toLowerCase()===e)return t[r]?.toString()},keys(t){return t?Object.keys(t):[]}}});var a6=T(Le=>{"use strict";Object.defineProperty(Le,"__esModule",{value:!0});Le.METRIC_MESSAGING_PROCESS_DURATION=Le.METRIC_MESSAGING_CLIENT_SENT_MESSAGES=Le.METRIC_MESSAGING_CLIENT_OPERATION_DURATION=Le.METRIC_MESSAGING_CLIENT_CONSUMED_MESSAGES=Le.MESSAGING_SYSTEM_VALUE_KAFKA=Le.MESSAGING_OPERATION_TYPE_VALUE_SEND=Le.MESSAGING_OPERATION_TYPE_VALUE_RECEIVE=Le.MESSAGING_OPERATION_TYPE_VALUE_PROCESS=Le.ATTR_MESSAGING_SYSTEM=Le.ATTR_MESSAGING_OPERATION_TYPE=Le.ATTR_MESSAGING_OPERATION_NAME=Le.ATTR_MESSAGING_KAFKA_OFFSET=Le.ATTR_MESSAGING_KAFKA_MESSAGE_TOMBSTONE=Le.ATTR_MESSAGING_KAFKA_MESSAGE_KEY=Le.ATTR_MESSAGING_DESTINATION_PARTITION_ID=Le.ATTR_MESSAGING_DESTINATION_NAME=Le.ATTR_MESSAGING_BATCH_MESSAGE_COUNT=void 0;Le.ATTR_MESSAGING_BATCH_MESSAGE_COUNT="messaging.batch.message_count";Le.ATTR_MESSAGING_DESTINATION_NAME="messaging.destination.name";Le.ATTR_MESSAGING_DESTINATION_PARTITION_ID="messaging.destination.partition.id";Le.ATTR_MESSAGING_KAFKA_MESSAGE_KEY="messaging.kafka.message.key";Le.ATTR_MESSAGING_KAFKA_MESSAGE_TOMBSTONE="messaging.kafka.message.tombstone";Le.ATTR_MESSAGING_KAFKA_OFFSET="messaging.kafka.offset";Le.ATTR_MESSAGING_OPERATION_NAME="messaging.operation.name";Le.ATTR_MESSAGING_OPERATION_TYPE="messaging.operation.type";Le.ATTR_MESSAGING_SYSTEM="messaging.system";Le.MESSAGING_OPERATION_TYPE_VALUE_PROCESS="process";Le.MESSAGING_OPERATION_TYPE_VALUE_RECEIVE="receive";Le.MESSAGING_OPERATION_TYPE_VALUE_SEND="send";Le.MESSAGING_SYSTEM_VALUE_KAFKA="kafka";Le.METRIC_MESSAGING_CLIENT_CONSUMED_MESSAGES="messaging.client.consumed.messages";Le.METRIC_MESSAGING_CLIENT_OPERATION_DURATION="messaging.client.operation.duration";Le.METRIC_MESSAGING_CLIENT_SENT_MESSAGES="messaging.client.sent.messages";Le.METRIC_MESSAGING_PROCESS_DURATION="messaging.process.duration"});var c6=T(Tl=>{"use strict";Object.defineProperty(Tl,"__esModule",{value:!0});Tl.PACKAGE_NAME=Tl.PACKAGE_VERSION=void 0;Tl.PACKAGE_VERSION="0.18.0";Tl.PACKAGE_NAME="@opentelemetry/instrumentation-kafkajs"});var m6=T(sA=>{"use strict";Object.defineProperty(sA,"__esModule",{value:!0});sA.KafkaJsInstrumentation=void 0;var nt=U(),No=_e(),gl=Qe(),u6=s6(),p6=i6(),K=a6(),l6=c6();function oA(t,e,n){return r=>{t.add(e,{...n,...r?{[gl.ATTR_ERROR_TYPE]:r}:{}})}}function d6(t,e,n){return r=>{t.record((Date.now()-e)/1e3,{...n,...r?{[gl.ATTR_ERROR_TYPE]:r}:{}})}}var f6=[.005,.01,.025,.05,.075,.1,.25,.5,.75,1,2.5,5,7.5,10],fP=class extends No.InstrumentationBase{constructor(e={}){super(l6.PACKAGE_NAME,l6.PACKAGE_VERSION,e)}_updateMetricInstruments(){this._clientDuration=this.meter.createHistogram(K.METRIC_MESSAGING_CLIENT_OPERATION_DURATION,{advice:{explicitBucketBoundaries:f6}}),this._sentMessages=this.meter.createCounter(K.METRIC_MESSAGING_CLIENT_SENT_MESSAGES),this._consumedMessages=this.meter.createCounter(K.METRIC_MESSAGING_CLIENT_CONSUMED_MESSAGES),this._processDuration=this.meter.createHistogram(K.METRIC_MESSAGING_PROCESS_DURATION,{advice:{explicitBucketBoundaries:f6}})}init(){let e=r=>{(0,No.isWrapped)(r?.Kafka?.prototype.producer)&&this._unwrap(r.Kafka.prototype,"producer"),(0,No.isWrapped)(r?.Kafka?.prototype.consumer)&&this._unwrap(r.Kafka.prototype,"consumer")};return new No.InstrumentationNodeModuleDefinition("kafkajs",[">=0.3.0 <3"],r=>(e(r),this._wrap(r?.Kafka?.prototype,"producer",this._getProducerPatch()),this._wrap(r?.Kafka?.prototype,"consumer",this._getConsumerPatch()),r),e)}_getConsumerPatch(){let e=this;return n=>function(...o){let s=n.apply(this,o);return(0,No.isWrapped)(s.run)&&e._unwrap(s,"run"),e._wrap(s,"run",e._getConsumerRunPatch()),e._setKafkaEventListeners(s),s}}_setKafkaEventListeners(e){e[u6.EVENT_LISTENERS_SET]||(e.events?.REQUEST&&e.on(e.events.REQUEST,this._recordClientDurationMetric.bind(this)),e[u6.EVENT_LISTENERS_SET]=!0)}_recordClientDurationMetric(e){let[n,r]=e.payload.broker.split(":");this._clientDuration.record(e.payload.duration/1e3,{[K.ATTR_MESSAGING_SYSTEM]:K.MESSAGING_SYSTEM_VALUE_KAFKA,[K.ATTR_MESSAGING_OPERATION_NAME]:`${e.payload.apiName}`,[gl.ATTR_SERVER_ADDRESS]:n,[gl.ATTR_SERVER_PORT]:Number.parseInt(r,10)})}_getProducerPatch(){let e=this;return n=>function(...o){let s=n.apply(this,o);return(0,No.isWrapped)(s.sendBatch)&&e._unwrap(s,"sendBatch"),e._wrap(s,"sendBatch",e._getSendBatchPatch()),(0,No.isWrapped)(s.send)&&e._unwrap(s,"send"),e._wrap(s,"send",e._getSendPatch()),(0,No.isWrapped)(s.transaction)&&e._unwrap(s,"transaction"),e._wrap(s,"transaction",e._getProducerTransactionPatch()),e._setKafkaEventListeners(s),s}}_getConsumerRunPatch(){let e=this;return n=>function(...o){let s=o[0];return s?.eachMessage&&((0,No.isWrapped)(s.eachMessage)&&e._unwrap(s,"eachMessage"),e._wrap(s,"eachMessage",e._getConsumerEachMessagePatch())),s?.eachBatch&&((0,No.isWrapped)(s.eachBatch)&&e._unwrap(s,"eachBatch"),e._wrap(s,"eachBatch",e._getConsumerEachBatchPatch())),n.call(this,s)}}_getConsumerEachMessagePatch(){let e=this;return n=>function(...o){let s=o[0],i=nt.propagation.extract(nt.ROOT_CONTEXT,s.message.headers,p6.bufferTextMapGetter),a=e._startConsumerSpan({topic:s.topic,message:s.message,operationType:K.MESSAGING_OPERATION_TYPE_VALUE_PROCESS,ctx:i,attributes:{[K.ATTR_MESSAGING_DESTINATION_PARTITION_ID]:String(s.partition)}}),c=[d6(e._processDuration,Date.now(),{[K.ATTR_MESSAGING_SYSTEM]:K.MESSAGING_SYSTEM_VALUE_KAFKA,[K.ATTR_MESSAGING_OPERATION_NAME]:"process",[K.ATTR_MESSAGING_DESTINATION_NAME]:s.topic,[K.ATTR_MESSAGING_DESTINATION_PARTITION_ID]:String(s.partition)}),oA(e._consumedMessages,1,{[K.ATTR_MESSAGING_SYSTEM]:K.MESSAGING_SYSTEM_VALUE_KAFKA,[K.ATTR_MESSAGING_OPERATION_NAME]:"process",[K.ATTR_MESSAGING_DESTINATION_NAME]:s.topic,[K.ATTR_MESSAGING_DESTINATION_PARTITION_ID]:String(s.partition)})],u=nt.context.with(nt.trace.setSpan(i,a),()=>n.apply(this,o));return e._endSpansOnPromise([a],c,u)}}_getConsumerEachBatchPatch(){return e=>{let n=this;return function(...o){let s=o[0],i=n._startConsumerSpan({topic:s.batch.topic,message:void 0,operationType:K.MESSAGING_OPERATION_TYPE_VALUE_RECEIVE,ctx:nt.ROOT_CONTEXT,attributes:{[K.ATTR_MESSAGING_BATCH_MESSAGE_COUNT]:s.batch.messages.length,[K.ATTR_MESSAGING_DESTINATION_PARTITION_ID]:String(s.batch.partition)}});return nt.context.with(nt.trace.setSpan(nt.context.active(),i),()=>{let a=Date.now(),c=[],u=[oA(n._consumedMessages,s.batch.messages.length,{[K.ATTR_MESSAGING_SYSTEM]:K.MESSAGING_SYSTEM_VALUE_KAFKA,[K.ATTR_MESSAGING_OPERATION_NAME]:"process",[K.ATTR_MESSAGING_DESTINATION_NAME]:s.batch.topic,[K.ATTR_MESSAGING_DESTINATION_PARTITION_ID]:String(s.batch.partition)})];s.batch.messages.forEach(l=>{let d=nt.propagation.extract(nt.ROOT_CONTEXT,l.headers,p6.bufferTextMapGetter),f=nt.trace.getSpan(d)?.spanContext(),m;f&&(m={context:f}),c.push(n._startConsumerSpan({topic:s.batch.topic,message:l,operationType:K.MESSAGING_OPERATION_TYPE_VALUE_PROCESS,link:m,attributes:{[K.ATTR_MESSAGING_DESTINATION_PARTITION_ID]:String(s.batch.partition)}})),u.push(d6(n._processDuration,a,{[K.ATTR_MESSAGING_SYSTEM]:K.MESSAGING_SYSTEM_VALUE_KAFKA,[K.ATTR_MESSAGING_OPERATION_NAME]:"process",[K.ATTR_MESSAGING_DESTINATION_NAME]:s.batch.topic,[K.ATTR_MESSAGING_DESTINATION_PARTITION_ID]:String(s.batch.partition)}))});let p=e.apply(this,o);return c.unshift(i),n._endSpansOnPromise(c,u,p)})}}}_getProducerTransactionPatch(){let e=this;return n=>function(...o){let s=e.tracer.startSpan("transaction"),i=n.apply(this,o);return i.then(a=>{let c=a.send;a.send=function(...f){return nt.context.with(nt.trace.setSpan(nt.context.active(),s),()=>e._getSendPatch()(c).apply(this,f).catch(h=>{throw s.setStatus({code:nt.SpanStatusCode.ERROR,message:h?.message}),s.recordException(h),h}))};let u=a.sendBatch;a.sendBatch=function(...f){return nt.context.with(nt.trace.setSpan(nt.context.active(),s),()=>e._getSendBatchPatch()(u).apply(this,f).catch(h=>{throw s.setStatus({code:nt.SpanStatusCode.ERROR,message:h?.message}),s.recordException(h),h}))};let p=a.commit;a.commit=function(...f){let m=p.apply(this,f).then(()=>{s.setStatus({code:nt.SpanStatusCode.OK})});return e._endSpansOnPromise([s],[],m)};let l=a.abort;a.abort=function(...f){let m=l.apply(this,f);return e._endSpansOnPromise([s],[],m)}}).catch(a=>{s.setStatus({code:nt.SpanStatusCode.ERROR,message:a?.message}),s.recordException(a),s.end()}),i}}_getSendBatchPatch(){let e=this;return n=>function(...o){let i=o[0].topicMessages||[],a=[],c=[];i.forEach(p=>{p.messages.forEach(l=>{a.push(e._startProducerSpan(p.topic,l)),c.push(oA(e._sentMessages,1,{[K.ATTR_MESSAGING_SYSTEM]:K.MESSAGING_SYSTEM_VALUE_KAFKA,[K.ATTR_MESSAGING_OPERATION_NAME]:"send",[K.ATTR_MESSAGING_DESTINATION_NAME]:p.topic,...l.partition!==void 0?{[K.ATTR_MESSAGING_DESTINATION_PARTITION_ID]:String(l.partition)}:{}}))})});let u=n.apply(this,o);return e._endSpansOnPromise(a,c,u)}}_getSendPatch(){let e=this;return n=>function(...o){let s=o[0],i=s.messages.map(u=>e._startProducerSpan(s.topic,u)),a=s.messages.map(u=>oA(e._sentMessages,1,{[K.ATTR_MESSAGING_SYSTEM]:K.MESSAGING_SYSTEM_VALUE_KAFKA,[K.ATTR_MESSAGING_OPERATION_NAME]:"send",[K.ATTR_MESSAGING_DESTINATION_NAME]:s.topic,...u.partition!==void 0?{[K.ATTR_MESSAGING_DESTINATION_PARTITION_ID]:String(u.partition)}:{}})),c=n.apply(this,o);return e._endSpansOnPromise(i,a,c)}}_endSpansOnPromise(e,n,r){return Promise.resolve(r).then(o=>(n.forEach(s=>s()),o)).catch(o=>{let s,i=gl.ERROR_TYPE_VALUE_OTHER;throw typeof o=="string"||o===void 0?s=o:typeof o=="object"&&Object.prototype.hasOwnProperty.call(o,"message")&&(s=o.message,i=o.constructor.name),n.forEach(a=>a(i)),e.forEach(a=>{a.setAttribute(gl.ATTR_ERROR_TYPE,i),a.setStatus({code:nt.SpanStatusCode.ERROR,message:s})}),o}).finally(()=>{e.forEach(o=>o.end())})}_startConsumerSpan({topic:e,message:n,operationType:r,ctx:o,link:s,attributes:i}){let a=r===K.MESSAGING_OPERATION_TYPE_VALUE_RECEIVE?"poll":r,c=this.tracer.startSpan(`${a} ${e}`,{kind:r===K.MESSAGING_OPERATION_TYPE_VALUE_RECEIVE?nt.SpanKind.CLIENT:nt.SpanKind.CONSUMER,attributes:{...i,[K.ATTR_MESSAGING_SYSTEM]:K.MESSAGING_SYSTEM_VALUE_KAFKA,[K.ATTR_MESSAGING_DESTINATION_NAME]:e,[K.ATTR_MESSAGING_OPERATION_TYPE]:r,[K.ATTR_MESSAGING_OPERATION_NAME]:a,[K.ATTR_MESSAGING_KAFKA_MESSAGE_KEY]:n?.key?String(n.key):void 0,[K.ATTR_MESSAGING_KAFKA_MESSAGE_TOMBSTONE]:n?.key&&n.value===null?!0:void 0,[K.ATTR_MESSAGING_KAFKA_OFFSET]:n?.offset},links:s?[s]:[]},o),{consumerHook:u}=this.getConfig();return u&&n&&(0,No.safeExecuteInTheMiddle)(()=>u(c,{topic:e,message:n}),p=>{p&&this._diag.error("consumerHook error",p)},!0),c}_startProducerSpan(e,n){let r=this.tracer.startSpan(`send ${e}`,{kind:nt.SpanKind.PRODUCER,attributes:{[K.ATTR_MESSAGING_SYSTEM]:K.MESSAGING_SYSTEM_VALUE_KAFKA,[K.ATTR_MESSAGING_DESTINATION_NAME]:e,[K.ATTR_MESSAGING_KAFKA_MESSAGE_KEY]:n.key?String(n.key):void 0,[K.ATTR_MESSAGING_KAFKA_MESSAGE_TOMBSTONE]:n.key&&n.value===null?!0:void 0,[K.ATTR_MESSAGING_DESTINATION_PARTITION_ID]:n.partition!==void 0?String(n.partition):void 0,[K.ATTR_MESSAGING_OPERATION_NAME]:"send",[K.ATTR_MESSAGING_OPERATION_TYPE]:K.MESSAGING_OPERATION_TYPE_VALUE_SEND}});n.headers=n.headers??{},nt.propagation.inject(nt.trace.setSpan(nt.context.active(),r),n.headers);let{producerHook:o}=this.getConfig();return o&&(0,No.safeExecuteInTheMiddle)(()=>o(r,{topic:e,message:n}),s=>{s&&this._diag.error("producerHook error",s)},!0),r}};sA.KafkaJsInstrumentation=fP});var _6=T(iA=>{"use strict";Object.defineProperty(iA,"__esModule",{value:!0});iA.KafkaJsInstrumentation=void 0;var kye=m6();Object.defineProperty(iA,"KafkaJsInstrumentation",{enumerable:!0,get:function(){return kye.KafkaJsInstrumentation}})});var S6=T(Sl=>{"use strict";Object.defineProperty(Sl,"__esModule",{value:!0});Sl.PACKAGE_NAME=Sl.PACKAGE_VERSION=void 0;Sl.PACKAGE_VERSION="0.53.0";Sl.PACKAGE_NAME="@opentelemetry/instrumentation-lru-memoizer"});var b6=T(aA=>{"use strict";Object.defineProperty(aA,"__esModule",{value:!0});aA.LruMemoizerInstrumentation=void 0;var A6=U(),R6=_e(),y6=S6(),mP=class extends R6.InstrumentationBase{constructor(e={}){super(y6.PACKAGE_NAME,y6.PACKAGE_VERSION,e)}init(){return[new R6.InstrumentationNodeModuleDefinition("lru-memoizer",[">=1.3 <3"],e=>{let n=function(){let r=e.apply(this,arguments);return function(){let o=[...arguments],s=o.pop(),i=typeof s=="function"?A6.context.bind(A6.context.active(),s):s;return o.push(i),r.apply(this,o)}};return n.sync=e.sync,n},void 0)]}};aA.LruMemoizerInstrumentation=mP});var N6=T(cA=>{"use strict";Object.defineProperty(cA,"__esModule",{value:!0});cA.LruMemoizerInstrumentation=void 0;var $ye=b6();Object.defineProperty(cA,"LruMemoizerInstrumentation",{enumerable:!0,get:function(){return $ye.LruMemoizerInstrumentation}})});var P6=T($t=>{"use strict";Object.defineProperty($t,"__esModule",{value:!0});$t.METRIC_DB_CLIENT_CONNECTIONS_USAGE=$t.DB_SYSTEM_VALUE_MONGODB=$t.ATTR_NET_PEER_PORT=$t.ATTR_NET_PEER_NAME=$t.ATTR_DB_SYSTEM=$t.ATTR_DB_STATEMENT=$t.ATTR_DB_OPERATION=$t.ATTR_DB_NAME=$t.ATTR_DB_MONGODB_COLLECTION=$t.ATTR_DB_CONNECTION_STRING=void 0;$t.ATTR_DB_CONNECTION_STRING="db.connection_string";$t.ATTR_DB_MONGODB_COLLECTION="db.mongodb.collection";$t.ATTR_DB_NAME="db.name";$t.ATTR_DB_OPERATION="db.operation";$t.ATTR_DB_STATEMENT="db.statement";$t.ATTR_DB_SYSTEM="db.system";$t.ATTR_NET_PEER_NAME="net.peer.name";$t.ATTR_NET_PEER_PORT="net.peer.port";$t.DB_SYSTEM_VALUE_MONGODB="mongodb";$t.METRIC_DB_CLIENT_CONNECTIONS_USAGE="db.client.connections.usage"});var C6=T(Lm=>{"use strict";Object.defineProperty(Lm,"__esModule",{value:!0});Lm.MongodbCommandType=void 0;var Vye;(function(t){t.CREATE_INDEXES="createIndexes",t.FIND_AND_MODIFY="findAndModify",t.IS_MASTER="isMaster",t.COUNT="count",t.AGGREGATE="aggregate",t.UNKNOWN="unknown"})(Vye=Lm.MongodbCommandType||(Lm.MongodbCommandType={}))});var M6=T(Al=>{"use strict";Object.defineProperty(Al,"__esModule",{value:!0});Al.PACKAGE_NAME=Al.PACKAGE_VERSION=void 0;Al.PACKAGE_VERSION="0.61.0";Al.PACKAGE_NAME="@opentelemetry/instrumentation-mongodb"});var D6=T(uA=>{"use strict";Object.defineProperty(uA,"__esModule",{value:!0});uA.MongoDBInstrumentation=void 0;var Ot=U(),mt=_e(),Vs=P6(),Ma=C6(),w6=M6(),L6={requireParentSpan:!0},_P=class t extends mt.InstrumentationBase{constructor(e={}){super(w6.PACKAGE_NAME,w6.PACKAGE_VERSION,{...L6,...e})}setConfig(e={}){super.setConfig({...L6,...e})}_updateMetricInstruments(){this._connectionsUsage=this.meter.createUpDownCounter(Vs.METRIC_DB_CLIENT_CONNECTIONS_USAGE,{description:"The number of connections that are currently in state described by the state attribute.",unit:"{connection}"})}init(){let{v3PatchConnection:e,v3UnpatchConnection:n}=this._getV3ConnectionPatches(),{v4PatchConnect:r,v4UnpatchConnect:o}=this._getV4ConnectPatches(),{v4PatchConnectionCallback:s,v4PatchConnectionPromise:i,v4UnpatchConnection:a}=this._getV4ConnectionPatches(),{v4PatchConnectionPool:c,v4UnpatchConnectionPool:u}=this._getV4ConnectionPoolPatches(),{v4PatchSessions:p,v4UnpatchSessions:l}=this._getV4SessionsPatches();return[new mt.InstrumentationNodeModuleDefinition("mongodb",[">=3.3.0 <4"],void 0,void 0,[new mt.InstrumentationNodeModuleFile("mongodb/lib/core/wireprotocol/index.js",[">=3.3.0 <4"],e,n)]),new mt.InstrumentationNodeModuleDefinition("mongodb",[">=4.0.0 <7"],void 0,void 0,[new mt.InstrumentationNodeModuleFile("mongodb/lib/cmap/connection.js",[">=4.0.0 <6.4"],s,a),new mt.InstrumentationNodeModuleFile("mongodb/lib/cmap/connection.js",[">=6.4.0 <7"],i,a),new mt.InstrumentationNodeModuleFile("mongodb/lib/cmap/connection_pool.js",[">=4.0.0 <6.4"],c,u),new mt.InstrumentationNodeModuleFile("mongodb/lib/cmap/connect.js",[">=4.0.0 <7"],r,o),new mt.InstrumentationNodeModuleFile("mongodb/lib/sessions.js",[">=4.0.0 <7"],p,l)])]}_getV3ConnectionPatches(){return{v3PatchConnection:e=>((0,mt.isWrapped)(e.insert)&&this._unwrap(e,"insert"),this._wrap(e,"insert",this._getV3PatchOperation("insert")),(0,mt.isWrapped)(e.remove)&&this._unwrap(e,"remove"),this._wrap(e,"remove",this._getV3PatchOperation("remove")),(0,mt.isWrapped)(e.update)&&this._unwrap(e,"update"),this._wrap(e,"update",this._getV3PatchOperation("update")),(0,mt.isWrapped)(e.command)&&this._unwrap(e,"command"),this._wrap(e,"command",this._getV3PatchCommand()),(0,mt.isWrapped)(e.query)&&this._unwrap(e,"query"),this._wrap(e,"query",this._getV3PatchFind()),(0,mt.isWrapped)(e.getMore)&&this._unwrap(e,"getMore"),this._wrap(e,"getMore",this._getV3PatchCursor()),e),v3UnpatchConnection:e=>{e!==void 0&&(this._unwrap(e,"insert"),this._unwrap(e,"remove"),this._unwrap(e,"update"),this._unwrap(e,"command"),this._unwrap(e,"query"),this._unwrap(e,"getMore"))}}}_getV4SessionsPatches(){return{v4PatchSessions:e=>((0,mt.isWrapped)(e.acquire)&&this._unwrap(e,"acquire"),this._wrap(e.ServerSessionPool.prototype,"acquire",this._getV4AcquireCommand()),(0,mt.isWrapped)(e.release)&&this._unwrap(e,"release"),this._wrap(e.ServerSessionPool.prototype,"release",this._getV4ReleaseCommand()),e),v4UnpatchSessions:e=>{e!==void 0&&((0,mt.isWrapped)(e.acquire)&&this._unwrap(e,"acquire"),(0,mt.isWrapped)(e.release)&&this._unwrap(e,"release"))}}}_getV4AcquireCommand(){let e=this;return n=>function(){let o=this.sessions.length,s=n.call(this),i=this.sessions.length;return o===i?e._connectionsUsage.add(1,{state:"used","pool.name":e._poolName}):o-1===i&&(e._connectionsUsage.add(-1,{state:"idle","pool.name":e._poolName}),e._connectionsUsage.add(1,{state:"used","pool.name":e._poolName})),s}}_getV4ReleaseCommand(){let e=this;return n=>function(o){let s=n.call(this,o);return e._connectionsUsage.add(-1,{state:"used","pool.name":e._poolName}),e._connectionsUsage.add(1,{state:"idle","pool.name":e._poolName}),s}}_getV4ConnectionPoolPatches(){return{v4PatchConnectionPool:e=>{let n=e.ConnectionPool.prototype;return(0,mt.isWrapped)(n.checkOut)&&this._unwrap(n,"checkOut"),this._wrap(n,"checkOut",this._getV4ConnectionPoolCheckOut()),e},v4UnpatchConnectionPool:e=>{e!==void 0&&this._unwrap(e.ConnectionPool.prototype,"checkOut")}}}_getV4ConnectPatches(){return{v4PatchConnect:e=>((0,mt.isWrapped)(e.connect)&&this._unwrap(e,"connect"),this._wrap(e,"connect",this._getV4ConnectCommand()),e),v4UnpatchConnect:e=>{e!==void 0&&this._unwrap(e,"connect")}}}_getV4ConnectionPoolCheckOut(){return e=>function(r){let o=Ot.context.bind(Ot.context.active(),r);return e.call(this,o)}}_getV4ConnectCommand(){let e=this;return n=>function(o,s){if(n.length===1){let a=n.call(this,o);return a&&typeof a.then=="function"&&a.then(()=>e.setPoolName(o),()=>{}),a}let i=function(a,c){if(a||!c){s(a,c);return}e.setPoolName(o),s(a,c)};return n.call(this,o,i)}}_getV4ConnectionPatches(){return{v4PatchConnectionCallback:e=>((0,mt.isWrapped)(e.Connection.prototype.command)&&this._unwrap(e.Connection.prototype,"command"),this._wrap(e.Connection.prototype,"command",this._getV4PatchCommandCallback()),e),v4PatchConnectionPromise:e=>((0,mt.isWrapped)(e.Connection.prototype.command)&&this._unwrap(e.Connection.prototype,"command"),this._wrap(e.Connection.prototype,"command",this._getV4PatchCommandPromise()),e),v4UnpatchConnection:e=>{e!==void 0&&this._unwrap(e.Connection.prototype,"command")}}}_getV3PatchOperation(e){let n=this;return r=>function(s,i,a,c,u){let p=Ot.trace.getSpan(Ot.context.active()),l=n._checkSkipInstrumentation(p),d=typeof c=="function"?c:u;if(l||typeof d!="function"||typeof a!="object")return typeof c=="function"?r.call(this,s,i,a,c):r.call(this,s,i,a,c,u);let f=n.tracer.startSpan(`mongodb.${e}`,{kind:Ot.SpanKind.CLIENT});n._populateV3Attributes(f,i,s,a[0],e);let m=n._patchEnd(f,d);return typeof c=="function"?r.call(this,s,i,a,m):r.call(this,s,i,a,c,m)}}_getV3PatchCommand(){let e=this;return n=>function(o,s,i,a,c){let u=Ot.trace.getSpan(Ot.context.active()),p=e._checkSkipInstrumentation(u),l=typeof a=="function"?a:c;if(p||typeof l!="function"||typeof i!="object")return typeof a=="function"?n.call(this,o,s,i,a):n.call(this,o,s,i,a,c);let d=t._getCommandType(i),f=d===Ma.MongodbCommandType.UNKNOWN?"command":d,m=e.tracer.startSpan(`mongodb.${f}`,{kind:Ot.SpanKind.CLIENT}),h=d===Ma.MongodbCommandType.UNKNOWN?void 0:d;e._populateV3Attributes(m,s,o,i,h);let E=e._patchEnd(m,l);return typeof a=="function"?n.call(this,o,s,i,E):n.call(this,o,s,i,a,E)}}_getV4PatchCommandCallback(){let e=this;return n=>function(o,s,i,a){let c=Ot.trace.getSpan(Ot.context.active()),u=e._checkSkipInstrumentation(c),p=a,l=Object.keys(s)[0];if(typeof s!="object"||s.ismaster||s.hello)return n.call(this,o,s,i,a);let d;u||(d=e.tracer.startSpan(`mongodb.${l}`,{kind:Ot.SpanKind.CLIENT}),e._populateV4Attributes(d,this,o,s,l));let f=e._patchEnd(d,p,this.id,l);return n.call(this,o,s,i,f)}}_getV4PatchCommandPromise(){let e=this;return n=>function(...o){let[s,i]=o,a=Ot.trace.getSpan(Ot.context.active()),c=e._checkSkipInstrumentation(a),u=Object.keys(i)[0],p=()=>{};if(typeof i!="object"||i.ismaster||i.hello)return n.apply(this,o);let l;c||(l=e.tracer.startSpan(`mongodb.${u}`,{kind:Ot.SpanKind.CLIENT}),e._populateV4Attributes(l,this,s,i,u));let d=e._patchEnd(l,p,this.id,u),f=n.apply(this,o);return f.then(m=>d(null,m),m=>d(m)),f}}_getV3PatchFind(){let e=this;return n=>function(o,s,i,a,c,u){let p=Ot.trace.getSpan(Ot.context.active()),l=e._checkSkipInstrumentation(p),d=typeof c=="function"?c:u;if(l||typeof d!="function"||typeof i!="object")return typeof c=="function"?n.call(this,o,s,i,a,c):n.call(this,o,s,i,a,c,u);let f=e.tracer.startSpan("mongodb.find",{kind:Ot.SpanKind.CLIENT});e._populateV3Attributes(f,s,o,i,"find");let m=e._patchEnd(f,d);return typeof c=="function"?n.call(this,o,s,i,a,m):n.call(this,o,s,i,a,c,m)}}_getV3PatchCursor(){let e=this;return n=>function(o,s,i,a,c,u){let p=Ot.trace.getSpan(Ot.context.active()),l=e._checkSkipInstrumentation(p),d=typeof c=="function"?c:u;if(l||typeof d!="function")return typeof c=="function"?n.call(this,o,s,i,a,c):n.call(this,o,s,i,a,c,u);let f=e.tracer.startSpan("mongodb.getMore",{kind:Ot.SpanKind.CLIENT});e._populateV3Attributes(f,s,o,i.cmd,"getMore");let m=e._patchEnd(f,d);return typeof c=="function"?n.call(this,o,s,i,a,m):n.call(this,o,s,i,a,c,m)}}static _getCommandType(e){return e.createIndexes!==void 0?Ma.MongodbCommandType.CREATE_INDEXES:e.findandmodify!==void 0?Ma.MongodbCommandType.FIND_AND_MODIFY:e.ismaster!==void 0?Ma.MongodbCommandType.IS_MASTER:e.count!==void 0?Ma.MongodbCommandType.COUNT:e.aggregate!==void 0?Ma.MongodbCommandType.AGGREGATE:Ma.MongodbCommandType.UNKNOWN}_populateV4Attributes(e,n,r,o,s){let i,a;if(n){let u=typeof n.address=="string"?n.address.split(":"):"";u.length===2&&(i=u[0],a=u[1])}let c;o?.documents&&o.documents[0]?c=o.documents[0]:o?.cursors?c=o.cursors:c=o,this._addAllSpanAttributes(e,r.db,r.collection,i,a,c,s)}_populateV3Attributes(e,n,r,o,s){let i,a;if(r&&r.s&&(i=r.s.options?.host??r.s.host,a=(r.s.options?.port??r.s.port)?.toString(),i==null||a==null)){let l=r.description?.address;if(l){let d=l.split(":");i=d[0],a=d[1]}}let[c,u]=n.toString().split("."),p=o?.query??o?.q??o;this._addAllSpanAttributes(e,c,u,i,a,p,s)}_addAllSpanAttributes(e,n,r,o,s,i,a){if(e.setAttributes({[Vs.ATTR_DB_SYSTEM]:Vs.DB_SYSTEM_VALUE_MONGODB,[Vs.ATTR_DB_NAME]:n,[Vs.ATTR_DB_MONGODB_COLLECTION]:r,[Vs.ATTR_DB_OPERATION]:a,[Vs.ATTR_DB_CONNECTION_STRING]:`mongodb://${o}:${s}/${n}`}),o&&s){e.setAttribute(Vs.ATTR_NET_PEER_NAME,o);let p=parseInt(s,10);isNaN(p)||e.setAttribute(Vs.ATTR_NET_PEER_PORT,p)}if(!i)return;let{dbStatementSerializer:c}=this.getConfig(),u=typeof c=="function"?c:this._defaultDbStatementSerializer.bind(this);(0,mt.safeExecuteInTheMiddle)(()=>{let p=u(i);e.setAttribute(Vs.ATTR_DB_STATEMENT,p)},p=>{p&&this._diag.error("Error running dbStatementSerializer hook",p)},!0)}_getDefaultDbStatementReplacer(){let e=new WeakSet;return(n,r)=>typeof r!="object"||!r?"?":e.has(r)?"[Circular]":(e.add(r),r)}_defaultDbStatementSerializer(e){let{enhancedDatabaseReporting:n}=this.getConfig();return n?JSON.stringify(e):JSON.stringify(e,this._getDefaultDbStatementReplacer())}_handleExecutionResult(e,n){let{responseHook:r}=this.getConfig();typeof r=="function"&&(0,mt.safeExecuteInTheMiddle)(()=>{r(e,{data:n})},o=>{o&&this._diag.error("Error running response hook",o)},!0)}_patchEnd(e,n,r,o){let s=Ot.context.active(),i=this;return function(...c){let u=c[0];if(e){if(u instanceof Error)e?.setStatus({code:Ot.SpanStatusCode.ERROR,message:u.message});else{let p=c[1];i._handleExecutionResult(e,p)}e.end()}return Ot.context.with(s,()=>(o==="endSessions"&&i._connectionsUsage.add(-1,{state:"idle","pool.name":i._poolName}),n.apply(this,c)))}}setPoolName(e){let n=e.hostAddress?.host,r=e.hostAddress?.port,o=e.dbName,s=`mongodb://${n}:${r}/${o}`;this._poolName=s}_checkSkipInstrumentation(e){return this.getConfig().requireParentSpan===!0&&e===void 0}};uA.MongoDBInstrumentation=_P});var k6=T(Dm=>{"use strict";Object.defineProperty(Dm,"__esModule",{value:!0});Dm.MongodbCommandType=void 0;var Bye;(function(t){t.CREATE_INDEXES="createIndexes",t.FIND_AND_MODIFY="findAndModify",t.IS_MASTER="isMaster",t.COUNT="count",t.UNKNOWN="unknown"})(Bye=Dm.MongodbCommandType||(Dm.MongodbCommandType={}))});var U6=T(Rl=>{"use strict";Object.defineProperty(Rl,"__esModule",{value:!0});Rl.MongodbCommandType=Rl.MongoDBInstrumentation=void 0;var jye=D6();Object.defineProperty(Rl,"MongoDBInstrumentation",{enumerable:!0,get:function(){return jye.MongoDBInstrumentation}});var Hye=k6();Object.defineProperty(Rl,"MongodbCommandType",{enumerable:!0,get:function(){return Hye.MongodbCommandType}})});var EP=T(bn=>{"use strict";Object.defineProperty(bn,"__esModule",{value:!0});bn.ATTR_NET_PEER_PORT=bn.ATTR_NET_PEER_NAME=bn.ATTR_DB_USER=bn.ATTR_DB_SYSTEM=bn.ATTR_DB_STATEMENT=bn.ATTR_DB_OPERATION=bn.ATTR_DB_NAME=bn.ATTR_DB_MONGODB_COLLECTION=void 0;bn.ATTR_DB_MONGODB_COLLECTION="db.mongodb.collection";bn.ATTR_DB_NAME="db.name";bn.ATTR_DB_OPERATION="db.operation";bn.ATTR_DB_STATEMENT="db.statement";bn.ATTR_DB_SYSTEM="db.system";bn.ATTR_DB_USER="db.user";bn.ATTR_NET_PEER_NAME="net.peer.name";bn.ATTR_NET_PEER_PORT="net.peer.port"});var F6=T(wa=>{"use strict";Object.defineProperty(wa,"__esModule",{value:!0});wa.handleCallbackResponse=wa.handlePromiseResponse=wa.getAttributesFromCollection=void 0;var j6=U(),Kye=_e(),km=EP();function Zye(t){return{[km.ATTR_DB_MONGODB_COLLECTION]:t.name,[km.ATTR_DB_NAME]:t.conn.name,[km.ATTR_DB_USER]:t.conn.user,[km.ATTR_NET_PEER_NAME]:t.conn.host,[km.ATTR_NET_PEER_PORT]:t.conn.port}}wa.getAttributesFromCollection=Zye;function H6(t,e={}){t.recordException(e),t.setStatus({code:j6.SpanStatusCode.ERROR,message:`${e.message} ${e.code?`
Mongoose Error Code: ${e.code}`:""}`})}function TP(t,e,n,r=void 0){n&&(0,Kye.safeExecuteInTheMiddle)(()=>n(t,{moduleVersion:r,response:e}),o=>{o&&j6.diag.error("mongoose instrumentation: responseHook error",o)},!0)}function Jye(t,e,n,r=void 0){return t instanceof Promise?t.then(o=>(TP(e,o,n,r),o)).catch(o=>{throw H6(e,o),o}).finally(()=>e.end()):(TP(e,t,n,r),e.end(),t)}wa.handlePromiseResponse=Jye;function Qye(t,e,n,r,o,s,i=void 0){let a=0;return o.length===2?a=1:o.length===3&&(a=2),o[a]=(c,u)=>(c?H6(r,c):TP(r,u,s,i),r.end(),t(c,u)),e.apply(n,o)}wa.handleCallbackResponse=Qye});var q6=T(yl=>{"use strict";Object.defineProperty(yl,"__esModule",{value:!0});yl.PACKAGE_NAME=yl.PACKAGE_VERSION=void 0;yl.PACKAGE_VERSION="0.55.0";yl.PACKAGE_NAME="@opentelemetry/instrumentation-mongoose"});var Z6=T(Bs=>{"use strict";Object.defineProperty(Bs,"__esModule",{value:!0});Bs.MongooseInstrumentation=Bs._STORED_PARENT_SPAN=void 0;var Ln=U(),Xye=ze(),gP=F6(),z6=_e(),Y6=q6(),bl=EP(),pA=["deleteOne","deleteMany","find","findOne","estimatedDocumentCount","countDocuments","distinct","where","$where","findOneAndUpdate","findOneAndDelete","findOneAndReplace"],ebe=["remove","count","findOneAndRemove",...pA],tbe=["count","findOneAndRemove",...pA],nbe=[...pA];function W6(t){return t?t.startsWith("6.")||t.startsWith("5.")?ebe:t.startsWith("7.")?tbe:nbe:pA}function K6(t){return t&&(t.startsWith("5.")||t.startsWith("6."))||!1}Bs._STORED_PARENT_SPAN=Symbol("stored-parent-span");var SP=class extends z6.InstrumentationBase{constructor(e={}){super(Y6.PACKAGE_NAME,Y6.PACKAGE_VERSION,e)}init(){return new z6.InstrumentationNodeModuleDefinition("mongoose",[">=5.9.7 <9"],this.patch.bind(this),this.unpatch.bind(this))}patch(e,n){let r=e[Symbol.toStringTag]==="Module"?e.default:e;return this._wrap(r.Model.prototype,"save",this.patchOnModelMethods("save",n)),r.Model.prototype.$save=r.Model.prototype.save,K6(n)&&this._wrap(r.Model.prototype,"remove",this.patchOnModelMethods("remove",n)),this._wrap(r.Query.prototype,"exec",this.patchQueryExec(n)),this._wrap(r.Aggregate.prototype,"exec",this.patchAggregateExec(n)),W6(n).forEach(s=>{this._wrap(r.Query.prototype,s,this.patchAndCaptureSpanContext(s))}),this._wrap(r.Model,"aggregate",this.patchModelAggregate()),this._wrap(r.Model,"insertMany",this.patchModelStatic("insertMany",n)),this._wrap(r.Model,"bulkWrite",this.patchModelStatic("bulkWrite",n)),r}unpatch(e,n){let r=e[Symbol.toStringTag]==="Module"?e.default:e,o=W6(n);this._unwrap(r.Model.prototype,"save"),r.Model.prototype.$save=r.Model.prototype.save,K6(n)&&this._unwrap(r.Model.prototype,"remove"),this._unwrap(r.Query.prototype,"exec"),this._unwrap(r.Aggregate.prototype,"exec"),o.forEach(s=>{this._unwrap(r.Query.prototype,s)}),this._unwrap(r.Model,"aggregate"),this._unwrap(r.Model,"insertMany"),this._unwrap(r.Model,"bulkWrite")}patchAggregateExec(e){let n=this;return r=>function(s){if(n.getConfig().requireParentSpan&&Ln.trace.getSpan(Ln.context.active())===void 0)return r.apply(this,arguments);let i=this[Bs._STORED_PARENT_SPAN],a={},{dbStatementSerializer:c}=n.getConfig();c&&(a[bl.ATTR_DB_STATEMENT]=c("aggregate",{options:this.options,aggregatePipeline:this._pipeline}));let u=n._startSpan(this._model.collection,this._model?.modelName,"aggregate",a,i);return n._handleResponse(u,r,this,arguments,s,e)}}patchQueryExec(e){let n=this;return r=>function(s){if(n.getConfig().requireParentSpan&&Ln.trace.getSpan(Ln.context.active())===void 0)return r.apply(this,arguments);let i=this[Bs._STORED_PARENT_SPAN],a={},{dbStatementSerializer:c}=n.getConfig();c&&(a[bl.ATTR_DB_STATEMENT]=c(this.op,{condition:this._conditions,updates:this._update,options:this.options,fields:this._fields}));let u=n._startSpan(this.mongooseCollection,this.model.modelName,this.op,a,i);return n._handleResponse(u,r,this,arguments,s,e)}}patchOnModelMethods(e,n){let r=this;return o=>function(i,a){if(r.getConfig().requireParentSpan&&Ln.trace.getSpan(Ln.context.active())===void 0)return o.apply(this,arguments);let c={document:this};i&&!(i instanceof Function)&&(c.options=i);let u={},{dbStatementSerializer:p}=r.getConfig();p&&(u[bl.ATTR_DB_STATEMENT]=p(e,c));let l=r._startSpan(this.constructor.collection,this.constructor.modelName,e,u);return i instanceof Function&&(a=i,i=void 0),r._handleResponse(l,o,this,arguments,a,n)}}patchModelStatic(e,n){let r=this;return o=>function(i,a,c){if(r.getConfig().requireParentSpan&&Ln.trace.getSpan(Ln.context.active())===void 0)return o.apply(this,arguments);typeof a=="function"&&(c=a,a=void 0);let u={};switch(e){case"insertMany":u.documents=i;break;case"bulkWrite":u.operations=i;break;default:u.document=i;break}a!==void 0&&(u.options=a);let p={},{dbStatementSerializer:l}=r.getConfig();l&&(p[bl.ATTR_DB_STATEMENT]=l(e,u));let d=r._startSpan(this.collection,this.modelName,e,p);return r._handleResponse(d,o,this,arguments,c,n)}}patchModelAggregate(){let e=this;return n=>function(){let o=Ln.trace.getSpan(Ln.context.active()),s=e._callOriginalFunction(()=>n.apply(this,arguments));return s&&(s[Bs._STORED_PARENT_SPAN]=o),s}}patchAndCaptureSpanContext(e){let n=this;return r=>function(){return this[Bs._STORED_PARENT_SPAN]=Ln.trace.getSpan(Ln.context.active()),n._callOriginalFunction(()=>r.apply(this,arguments))}}_startSpan(e,n,r,o,s){return this.tracer.startSpan(`mongoose.${n}.${r}`,{kind:Ln.SpanKind.CLIENT,attributes:{...o,...(0,gP.getAttributesFromCollection)(e),[bl.ATTR_DB_OPERATION]:r,[bl.ATTR_DB_SYSTEM]:"mongoose"}},s?Ln.trace.setSpan(Ln.context.active(),s):void 0)}_handleResponse(e,n,r,o,s,i=void 0){let a=this;if(s instanceof Function)return a._callOriginalFunction(()=>(0,gP.handleCallbackResponse)(s,n,r,e,o,a.getConfig().responseHook,i));{let c=a._callOriginalFunction(()=>n.apply(r,o));return(0,gP.handlePromiseResponse)(c,e,a.getConfig().responseHook,i)}}_callOriginalFunction(e){return this.getConfig().suppressInternalInstrumentation?Ln.context.with((0,Xye.suppressTracing)(Ln.context.active()),e):e()}};Bs.MongooseInstrumentation=SP});var J6=T(lA=>{"use strict";Object.defineProperty(lA,"__esModule",{value:!0});lA.MongooseInstrumentation=void 0;var rbe=Z6();Object.defineProperty(lA,"MongooseInstrumentation",{enumerable:!0,get:function(){return rbe.MongooseInstrumentation}})});var AP=T(un=>{"use strict";Object.defineProperty(un,"__esModule",{value:!0});un.METRIC_DB_CLIENT_CONNECTIONS_USAGE=un.DB_SYSTEM_VALUE_MYSQL=un.ATTR_NET_PEER_PORT=un.ATTR_NET_PEER_NAME=un.ATTR_DB_USER=un.ATTR_DB_SYSTEM=un.ATTR_DB_STATEMENT=un.ATTR_DB_NAME=un.ATTR_DB_CONNECTION_STRING=void 0;un.ATTR_DB_CONNECTION_STRING="db.connection_string";un.ATTR_DB_NAME="db.name";un.ATTR_DB_STATEMENT="db.statement";un.ATTR_DB_SYSTEM="db.system";un.ATTR_DB_USER="db.user";un.ATTR_NET_PEER_NAME="net.peer.name";un.ATTR_NET_PEER_PORT="net.peer.port";un.DB_SYSTEM_VALUE_MYSQL="mysql";un.METRIC_DB_CLIENT_CONNECTIONS_USAGE="db.client.connections.usage"});var n5=T(Um=>{"use strict";Object.defineProperty(Um,"__esModule",{value:!0});Um.AttributeNames=void 0;var sbe;(function(t){t.MYSQL_VALUES="db.mysql.values"})(sbe=Um.AttributeNames||(Um.AttributeNames={}))});var o5=T(xr=>{"use strict";Object.defineProperty(xr,"__esModule",{value:!0});xr.getPoolName=xr.arrayStringifyHelper=xr.getSpanName=xr.getDbValues=xr.getDbStatement=xr.getConnectionAttributes=void 0;var Oi=AP();function ibe(t){let{host:e,port:n,database:r,user:o}=abe(t),s=parseInt(n,10);return isNaN(s)?{[Oi.ATTR_NET_PEER_NAME]:e,[Oi.ATTR_DB_CONNECTION_STRING]:r5(e,n,r),[Oi.ATTR_DB_NAME]:r,[Oi.ATTR_DB_USER]:o}:{[Oi.ATTR_NET_PEER_NAME]:e,[Oi.ATTR_NET_PEER_PORT]:s,[Oi.ATTR_DB_CONNECTION_STRING]:r5(e,n,r),[Oi.ATTR_DB_NAME]:r,[Oi.ATTR_DB_USER]:o}}xr.getConnectionAttributes=ibe;function abe(t){let{host:e,port:n,database:r,user:o}=t&&t.connectionConfig||t||{};return{host:e,port:n,database:r,user:o}}function r5(t,e,n){let r=`jdbc:mysql://${t||"localhost"}`;return typeof e=="number"&&(r+=`:${e}`),typeof n=="string"&&(r+=`/${n}`),r}function cbe(t){return typeof t=="string"?t:t.sql}xr.getDbStatement=cbe;function ube(t,e){return RP(typeof t=="string"?e:e||t.values)}xr.getDbValues=ube;function pbe(t){let e=typeof t=="object"?t.sql:t,n=e?.indexOf(" ");return typeof n=="number"&&n!==-1?e?.substring(0,n):e}xr.getSpanName=pbe;function RP(t){return t?`[${t.toString()}]`:""}xr.arrayStringifyHelper=RP;function lbe(t){let e=t.config.connectionConfig,n="";return n+=e.host?`host: '${e.host}', `:"",n+=e.port?`port: ${e.port}, `:"",n+=e.database?`database: '${e.database}', `:"",n+=e.user?`user: '${e.user}'`:"",e.user||(n=n.substring(0,n.length-2)),n.trim()}xr.getPoolName=lbe});var s5=T(Nl=>{"use strict";Object.defineProperty(Nl,"__esModule",{value:!0});Nl.PACKAGE_NAME=Nl.PACKAGE_VERSION=void 0;Nl.PACKAGE_VERSION="0.54.0";Nl.PACKAGE_NAME="@opentelemetry/instrumentation-mysql"});var a5=T(fA=>{"use strict";Object.defineProperty(fA,"__esModule",{value:!0});fA.MySQLInstrumentation=void 0;var Pr=U(),Ol=_e(),dA=AP(),dbe=n5(),Il=o5(),i5=s5(),yP=class t extends Ol.InstrumentationBase{static COMMON_ATTRIBUTES={[dA.ATTR_DB_SYSTEM]:dA.DB_SYSTEM_VALUE_MYSQL};constructor(e={}){super(i5.PACKAGE_NAME,i5.PACKAGE_VERSION,e)}_updateMetricInstruments(){this._connectionsUsage=this.meter.createUpDownCounter(dA.METRIC_DB_CLIENT_CONNECTIONS_USAGE,{description:"The number of connections that are currently in state described by the state attribute.",unit:"{connection}"})}init(){return[new Ol.InstrumentationNodeModuleDefinition("mysql",[">=2.0.0 <3"],e=>((0,Ol.isWrapped)(e.createConnection)&&this._unwrap(e,"createConnection"),this._wrap(e,"createConnection",this._patchCreateConnection()),(0,Ol.isWrapped)(e.createPool)&&this._unwrap(e,"createPool"),this._wrap(e,"createPool",this._patchCreatePool()),(0,Ol.isWrapped)(e.createPoolCluster)&&this._unwrap(e,"createPoolCluster"),this._wrap(e,"createPoolCluster",this._patchCreatePoolCluster()),e),e=>{e!==void 0&&(this._unwrap(e,"createConnection"),this._unwrap(e,"createPool"),this._unwrap(e,"createPoolCluster"))})]}_patchCreateConnection(){return e=>{let n=this;return function(o){let s=e(...arguments);return n._wrap(s,"query",n._patchQuery(s)),s}}}_patchCreatePool(){return e=>{let n=this;return function(o){let s=e(...arguments);return n._wrap(s,"query",n._patchQuery(s)),n._wrap(s,"getConnection",n._patchGetConnection(s)),n._wrap(s,"end",n._patchPoolEnd(s)),n._setPoolcallbacks(s,n,""),s}}}_patchPoolEnd(e){return n=>{let r=this;return function(s){let i=e._allConnections.length,a=e._freeConnections.length,c=i-a,u=(0,Il.getPoolName)(e);r._connectionsUsage.add(-c,{state:"used",name:u}),r._connectionsUsage.add(-a,{state:"idle",name:u}),n.apply(e,arguments)}}}_patchCreatePoolCluster(){return e=>{let n=this;return function(o){let s=e(...arguments);return n._wrap(s,"getConnection",n._patchGetConnection(s)),n._wrap(s,"add",n._patchAdd(s)),s}}}_patchAdd(e){return n=>{let r=this;return function(s,i){if(!r._enabled)return r._unwrap(e,"add"),n.apply(e,arguments);n.apply(e,arguments);let a=e._nodes;if(a){let c=typeof s=="object"?"CLUSTER::"+e._lastId:String(s),u=a[c].pool;r._setPoolcallbacks(u,r,s)}}}}_patchGetConnection(e){return n=>{let r=this;return function(s,i,a){if(!r._enabled)return r._unwrap(e,"getConnection"),n.apply(e,arguments);if(arguments.length===1&&typeof s=="function"){let c=r._getConnectionCallbackPatchFn(s);return n.call(e,c)}if(arguments.length===2&&typeof i=="function"){let c=r._getConnectionCallbackPatchFn(i);return n.call(e,s,c)}if(arguments.length===3&&typeof a=="function"){let c=r._getConnectionCallbackPatchFn(a);return n.call(e,s,i,c)}return n.apply(e,arguments)}}}_getConnectionCallbackPatchFn(e){let n=this,r=Pr.context.active();return function(o,s){s&&((0,Ol.isWrapped)(s.query)||n._wrap(s,"query",n._patchQuery(s))),typeof e=="function"&&Pr.context.with(r,e,this,o,s)}}_patchQuery(e){return n=>{let r=this;return function(o,s,i){if(!r._enabled)return r._unwrap(e,"query"),n.apply(e,arguments);let a=r.tracer.startSpan((0,Il.getSpanName)(o),{kind:Pr.SpanKind.CLIENT,attributes:{...t.COMMON_ATTRIBUTES,...(0,Il.getConnectionAttributes)(e.config)}});if(a.setAttribute(dA.ATTR_DB_STATEMENT,(0,Il.getDbStatement)(o)),r.getConfig().enhancedDatabaseReporting){let p;Array.isArray(s)?p=s:arguments[2]&&(p=[s]),a.setAttribute(dbe.AttributeNames.MYSQL_VALUES,(0,Il.getDbValues)(o,p))}let c=Array.from(arguments).findIndex(p=>typeof p=="function"),u=Pr.context.active();if(c===-1){let p=Pr.context.with(Pr.trace.setSpan(Pr.context.active(),a),()=>n.apply(e,arguments));return Pr.context.bind(u,p),p.on("error",l=>a.setStatus({code:Pr.SpanStatusCode.ERROR,message:l.message})).on("end",()=>{a.end()})}else return r._wrap(arguments,c,r._patchCallbackQuery(a,u)),Pr.context.with(Pr.trace.setSpan(Pr.context.active(),a),()=>n.apply(e,arguments))}}}_patchCallbackQuery(e,n){return r=>function(o,s,i){return o&&e.setStatus({code:Pr.SpanStatusCode.ERROR,message:o.message}),e.end(),Pr.context.with(n,()=>r(...arguments))}}_setPoolcallbacks(e,n,r){let o=r||(0,Il.getPoolName)(e);e.on("connection",s=>{n._connectionsUsage.add(1,{state:"idle",name:o})}),e.on("acquire",s=>{n._connectionsUsage.add(-1,{state:"idle",name:o}),n._connectionsUsage.add(1,{state:"used",name:o})}),e.on("release",s=>{n._connectionsUsage.add(-1,{state:"used",name:o}),n._connectionsUsage.add(1,{state:"idle",name:o})})}};fA.MySQLInstrumentation=yP});var c5=T(mA=>{"use strict";Object.defineProperty(mA,"__esModule",{value:!0});mA.MySQLInstrumentation=void 0;var fbe=a5();Object.defineProperty(mA,"MySQLInstrumentation",{enumerable:!0,get:function(){return fbe.MySQLInstrumentation}})});var bP=T(Nn=>{"use strict";Object.defineProperty(Nn,"__esModule",{value:!0});Nn.DB_SYSTEM_VALUE_MYSQL=Nn.ATTR_NET_PEER_PORT=Nn.ATTR_NET_PEER_NAME=Nn.ATTR_DB_USER=Nn.ATTR_DB_SYSTEM=Nn.ATTR_DB_STATEMENT=Nn.ATTR_DB_NAME=Nn.ATTR_DB_CONNECTION_STRING=void 0;Nn.ATTR_DB_CONNECTION_STRING="db.connection_string";Nn.ATTR_DB_NAME="db.name";Nn.ATTR_DB_STATEMENT="db.statement";Nn.ATTR_DB_SYSTEM="db.system";Nn.ATTR_DB_USER="db.user";Nn.ATTR_NET_PEER_NAME="net.peer.name";Nn.ATTR_NET_PEER_PORT="net.peer.port";Nn.DB_SYSTEM_VALUE_MYSQL="mysql"});var OP=T(_A=>{"use strict";Object.defineProperty(_A,"__esModule",{value:!0});_A.addSqlCommenterComment=void 0;var NP=U(),_be=ze();function hbe(t){let e=t.indexOf("--");if(e>=0)return!0;if(t.indexOf("/*")<0)return!1;let r=t.indexOf("*/");return e<r}function Ebe(t){return encodeURIComponent(t).replace(/[!'()*]/g,e=>`%${e.charCodeAt(0).toString(16).toUpperCase()}`)}function Tbe(t,e){if(typeof e!="string"||e.length===0||hbe(e))return e;let n=new _be.W3CTraceContextPropagator,r={};n.inject(NP.trace.setSpan(NP.ROOT_CONTEXT,t),r,NP.defaultTextMapSetter);let o=Object.keys(r).sort();if(o.length===0)return e;let s=o.map(i=>{let a=Ebe(r[i]);return`${i}='${a}'`}).join(",");return`${e} /*${s}*/`}_A.addSqlCommenterComment=Tbe});var f5=T(Oo=>{"use strict";Object.defineProperty(Oo,"__esModule",{value:!0});Oo.getConnectionPrototypeToInstrument=Oo.once=Oo.getSpanName=Oo.getQueryText=Oo.getConnectionAttributes=void 0;var $m=bP(),hA=_e(),IP=Qe();function gbe(t,e,n){let{host:r,port:o,database:s,user:i}=Sbe(t),a={};e&hA.SemconvStability.OLD&&(a[$m.ATTR_DB_CONNECTION_STRING]=Abe(r,o,s),a[$m.ATTR_DB_NAME]=s,a[$m.ATTR_DB_USER]=i),e&hA.SemconvStability.STABLE&&(a[IP.ATTR_DB_NAMESPACE]=s);let c=parseInt(o,10);return n&hA.SemconvStability.OLD&&(a[$m.ATTR_NET_PEER_NAME]=r,isNaN(c)||(a[$m.ATTR_NET_PEER_PORT]=c)),n&hA.SemconvStability.STABLE&&(a[IP.ATTR_SERVER_ADDRESS]=r,isNaN(c)||(a[IP.ATTR_SERVER_PORT]=c)),a}Oo.getConnectionAttributes=gbe;function Sbe(t){let{host:e,port:n,database:r,user:o}=t&&t.connectionConfig||t||{};return{host:e,port:n,database:r,user:o}}function Abe(t,e,n){let r=`jdbc:mysql://${t||"localhost"}`;return typeof e=="number"&&(r+=`:${e}`),typeof n=="string"&&(r+=`/${n}`),r}function Rbe(t,e,n,r=!1,o=ybe){let[s,i]=typeof t=="string"?[t,n]:[t.sql,bbe(t)?n||t.values:n];try{return r?o(s):e&&i?e(s,i):s}catch{return"Could not determine the query due to an error in masking or formatting"}}Oo.getQueryText=Rbe;function ybe(t){return t.replace(/\b\d+\b/g,"?").replace(/(["'])(?:(?=(\\?))\2.)*?\1/g,"?")}function bbe(t){return"values"in t}function Nbe(t){let e=typeof t=="object"?t.sql:t,n=e?.indexOf(" ");return typeof n=="number"&&n!==-1?e?.substring(0,n):e}Oo.getSpanName=Nbe;var Obe=t=>{let e=!1;return(...n)=>{if(!e)return e=!0,t(...n)}};Oo.once=Obe;function Ibe(t){let e=t.prototype,n=Object.getPrototypeOf(e);return typeof n?.query=="function"&&typeof n?.execute=="function"?n:e}Oo.getConnectionPrototypeToInstrument=Ibe});var m5=T(vl=>{"use strict";Object.defineProperty(vl,"__esModule",{value:!0});vl.PACKAGE_NAME=vl.PACKAGE_VERSION=void 0;vl.PACKAGE_VERSION="0.55.0";vl.PACKAGE_NAME="@opentelemetry/instrumentation-mysql2"});var T5=T(EA=>{"use strict";Object.defineProperty(EA,"__esModule",{value:!0});EA.MySQL2Instrumentation=void 0;var _5=U(),os=_e(),vP=bP(),h5=OP(),xl=f5(),E5=m5(),xP=Qe(),PP=[">=1.4.2 <4"],CP=class extends os.InstrumentationBase{_netSemconvStability;_dbSemconvStability;constructor(e={}){super(E5.PACKAGE_NAME,E5.PACKAGE_VERSION,e),this._setSemconvStabilityFromEnv()}_setSemconvStabilityFromEnv(){this._netSemconvStability=(0,os.semconvStabilityFromStr)("http",process.env.OTEL_SEMCONV_STABILITY_OPT_IN),this._dbSemconvStability=(0,os.semconvStabilityFromStr)("database",process.env.OTEL_SEMCONV_STABILITY_OPT_IN)}init(){let e;function n(s){!e&&s.format&&(e=s.format)}let r=s=>{(0,os.isWrapped)(s.query)&&this._unwrap(s,"query"),this._wrap(s,"query",this._patchQuery(e,!1)),(0,os.isWrapped)(s.execute)&&this._unwrap(s,"execute"),this._wrap(s,"execute",this._patchQuery(e,!0))},o=s=>{this._unwrap(s,"query"),this._unwrap(s,"execute")};return[new os.InstrumentationNodeModuleDefinition("mysql2",PP,s=>(n(s),s),()=>{},[new os.InstrumentationNodeModuleFile("mysql2/promise.js",PP,s=>(n(s),s),()=>{}),new os.InstrumentationNodeModuleFile("mysql2/lib/connection.js",PP,s=>{let i=(0,xl.getConnectionPrototypeToInstrument)(s);return r(i),s},s=>{if(s===void 0)return;let i=(0,xl.getConnectionPrototypeToInstrument)(s);o(i)})])]}_patchQuery(e,n){return r=>{let o=this;return function(s,i,a){let c;Array.isArray(i)?c=i:arguments[2]&&(c=[i]);let{maskStatement:u,maskStatementHook:p,responseHook:l}=o.getConfig(),d=(0,xl.getConnectionAttributes)(this.config,o._dbSemconvStability,o._netSemconvStability),f=(0,xl.getQueryText)(s,e,c,u,p);o._dbSemconvStability&os.SemconvStability.OLD&&(d[vP.ATTR_DB_SYSTEM]=vP.DB_SYSTEM_VALUE_MYSQL,d[vP.ATTR_DB_STATEMENT]=f),o._dbSemconvStability&os.SemconvStability.STABLE&&(d[xP.ATTR_DB_SYSTEM_NAME]=xP.DB_SYSTEM_NAME_VALUE_MYSQL,d[xP.ATTR_DB_QUERY_TEXT]=f);let m=o.tracer.startSpan((0,xl.getSpanName)(s),{kind:_5.SpanKind.CLIENT,attributes:d});!n&&o.getConfig().addSqlCommenterCommentToQueries&&(arguments[0]=s=typeof s=="string"?(0,h5.addSqlCommenterComment)(m,s):Object.assign(s,{sql:(0,h5.addSqlCommenterComment)(m,s.sql)}));let h=(0,xl.once)((E,A)=>{E?m.setStatus({code:_5.SpanStatusCode.ERROR,message:E.message}):typeof l=="function"&&(0,os.safeExecuteInTheMiddle)(()=>{l(m,{queryResults:A})},R=>{R&&o._diag.warn("Failed executing responseHook",R)},!0),m.end()});if(arguments.length===1){typeof s.onResult=="function"&&o._wrap(s,"onResult",o._patchCallbackQuery(h));let E=r.apply(this,arguments);return E.once("error",A=>{h(A)}).once("result",A=>{h(void 0,A)}),E}return typeof arguments[1]=="function"?o._wrap(arguments,1,o._patchCallbackQuery(h)):typeof arguments[2]=="function"&&o._wrap(arguments,2,o._patchCallbackQuery(h)),r.apply(this,arguments)}}}_patchCallbackQuery(e){return n=>function(r,o,s){return e(r,o),n(...arguments)}}};EA.MySQL2Instrumentation=CP});var g5=T(TA=>{"use strict";Object.defineProperty(TA,"__esModule",{value:!0});TA.MySQL2Instrumentation=void 0;var vbe=T5();Object.defineProperty(TA,"MySQL2Instrumentation",{enumerable:!0,get:function(){return vbe.MySQL2Instrumentation}})});var b5=T(Cr=>{"use strict";Object.defineProperty(Cr,"__esModule",{value:!0});Cr.DB_SYSTEM_VALUE_REDIS=Cr.ATTR_NET_PEER_PORT=Cr.ATTR_NET_PEER_NAME=Cr.ATTR_DB_SYSTEM=Cr.ATTR_DB_STATEMENT=Cr.ATTR_DB_CONNECTION_STRING=void 0;Cr.ATTR_DB_CONNECTION_STRING="db.connection_string";Cr.ATTR_DB_STATEMENT="db.statement";Cr.ATTR_DB_SYSTEM="db.system";Cr.ATTR_NET_PEER_NAME="net.peer.name";Cr.ATTR_NET_PEER_PORT="net.peer.port";Cr.DB_SYSTEM_VALUE_REDIS="redis"});var N5=T(gA=>{"use strict";Object.defineProperty(gA,"__esModule",{value:!0});gA.endSpan=void 0;var Pbe=U(),Cbe=(t,e)=>{e&&(t.recordException(e),t.setStatus({code:Pbe.SpanStatusCode.ERROR,message:e.message})),t.end()};gA.endSpan=Cbe});var AA=T(SA=>{"use strict";Object.defineProperty(SA,"__esModule",{value:!0});SA.defaultDbStatementSerializer=void 0;var Mbe=[{regex:/^ECHO/i,args:0},{regex:/^(LPUSH|MSET|PFA|PUBLISH|RPUSH|SADD|SET|SPUBLISH|XADD|ZADD)/i,args:1},{regex:/^(HSET|HMSET|LSET|LINSERT)/i,args:2},{regex:/^(ACL|BIT|B[LRZ]|CLIENT|CLUSTER|CONFIG|COMMAND|DECR|DEL|EVAL|EX|FUNCTION|GEO|GET|HINCR|HMGET|HSCAN|INCR|L[TRLM]|MEMORY|P[EFISTU]|RPOP|S[CDIMORSU]|XACK|X[CDGILPRT]|Z[CDILMPRS])/i,args:-1}],wbe=(t,e)=>{if(Array.isArray(e)&&e.length){let n=Mbe.find(({regex:o})=>o.test(t))?.args??0,r=n>=0?e.slice(0,n):e;return e.length>r.length&&r.push(`[${e.length-n} other arguments]`),`${t} ${r.join(" ")}`}return t};SA.defaultDbStatementSerializer=wbe});var O5=T(Pl=>{"use strict";Object.defineProperty(Pl,"__esModule",{value:!0});Pl.PACKAGE_NAME=Pl.PACKAGE_VERSION=void 0;Pl.PACKAGE_VERSION="0.56.0";Pl.PACKAGE_NAME="@opentelemetry/instrumentation-ioredis"});var P5=T(yA=>{"use strict";Object.defineProperty(yA,"__esModule",{value:!0});yA.IORedisInstrumentation=void 0;var La=U(),RA=_e(),Io=b5(),I5=_e(),Gm=N5(),Lbe=AA(),v5=O5(),x5={requireParentSpan:!0},MP=class extends RA.InstrumentationBase{constructor(e={}){super(v5.PACKAGE_NAME,v5.PACKAGE_VERSION,{...x5,...e})}setConfig(e={}){super.setConfig({...x5,...e})}init(){return[new RA.InstrumentationNodeModuleDefinition("ioredis",[">=2.0.0 <6"],(e,n)=>{let r=e[Symbol.toStringTag]==="Module"?e.default:e;return(0,RA.isWrapped)(r.prototype.sendCommand)&&this._unwrap(r.prototype,"sendCommand"),this._wrap(r.prototype,"sendCommand",this._patchSendCommand(n)),(0,RA.isWrapped)(r.prototype.connect)&&this._unwrap(r.prototype,"connect"),this._wrap(r.prototype,"connect",this._patchConnection()),e},e=>{if(e===void 0)return;let n=e[Symbol.toStringTag]==="Module"?e.default:e;this._unwrap(n.prototype,"sendCommand"),this._unwrap(n.prototype,"connect")})]}_patchSendCommand(e){return n=>this._traceSendCommand(n,e)}_patchConnection(){return e=>this._traceConnection(e)}_traceSendCommand(e,n){let r=this;return function(o){if(arguments.length<1||typeof o!="object")return e.apply(this,arguments);let s=r.getConfig(),i=s.dbStatementSerializer||Lbe.defaultDbStatementSerializer,a=La.trace.getSpan(La.context.active())===void 0;if(s.requireParentSpan===!0&&a)return e.apply(this,arguments);let c=r.tracer.startSpan(o.name,{kind:La.SpanKind.CLIENT,attributes:{[Io.ATTR_DB_SYSTEM]:Io.DB_SYSTEM_VALUE_REDIS,[Io.ATTR_DB_STATEMENT]:i(o.name,o.args)}}),{requestHook:u}=s;u&&(0,I5.safeExecuteInTheMiddle)(()=>u(c,{moduleVersion:n,cmdName:o.name,cmdArgs:o.args}),d=>{d&&La.diag.error("ioredis instrumentation: request hook failed",d)},!0);let{host:p,port:l}=this.options;c.setAttributes({[Io.ATTR_NET_PEER_NAME]:p,[Io.ATTR_NET_PEER_PORT]:l,[Io.ATTR_DB_CONNECTION_STRING]:`redis://${p}:${l}`});try{let d=e.apply(this,arguments),f=o.resolve;o.resolve=function(h){(0,I5.safeExecuteInTheMiddle)(()=>s.responseHook?.(c,o.name,o.args,h),E=>{E&&La.diag.error("ioredis instrumentation: response hook failed",E)},!0),(0,Gm.endSpan)(c,null),f(h)};let m=o.reject;return o.reject=function(h){(0,Gm.endSpan)(c,h),m(h)},d}catch(d){throw(0,Gm.endSpan)(c,d),d}}}_traceConnection(e){let n=this;return function(){let r=La.trace.getSpan(La.context.active())===void 0;if(n.getConfig().requireParentSpan===!0&&r)return e.apply(this,arguments);let o=n.tracer.startSpan("connect",{kind:La.SpanKind.CLIENT,attributes:{[Io.ATTR_DB_SYSTEM]:Io.DB_SYSTEM_VALUE_REDIS,[Io.ATTR_DB_STATEMENT]:"connect"}}),{host:s,port:i}=this.options;o.setAttributes({[Io.ATTR_NET_PEER_NAME]:s,[Io.ATTR_NET_PEER_PORT]:i,[Io.ATTR_DB_CONNECTION_STRING]:`redis://${s}:${i}`});try{let a=e.apply(this,arguments);return(0,Gm.endSpan)(o,null),a}catch(a){throw(0,Gm.endSpan)(o,a),a}}}};yA.IORedisInstrumentation=MP});var C5=T(bA=>{"use strict";Object.defineProperty(bA,"__esModule",{value:!0});bA.IORedisInstrumentation=void 0;var Dbe=P5();Object.defineProperty(bA,"IORedisInstrumentation",{enumerable:!0,get:function(){return Dbe.IORedisInstrumentation}})});var NA=T(Cl=>{"use strict";Object.defineProperty(Cl,"__esModule",{value:!0});Cl.PACKAGE_NAME=Cl.PACKAGE_VERSION=void 0;Cl.PACKAGE_VERSION="0.57.0";Cl.PACKAGE_NAME="@opentelemetry/instrumentation-redis"});var M5=T(Da=>{"use strict";Object.defineProperty(Da,"__esModule",{value:!0});Da.getTracedCreateStreamTrace=Da.getTracedCreateClient=Da.endSpan=void 0;var Vm=U(),kbe=(t,e)=>{e&&t.setStatus({code:Vm.SpanStatusCode.ERROR,message:e.message}),t.end()};Da.endSpan=kbe;var Ube=t=>function(){let n=t.apply(this,arguments);return Vm.context.bind(Vm.context.active(),n)};Da.getTracedCreateClient=Ube;var $be=t=>function(){return Object.prototype.hasOwnProperty.call(this,"stream")||Object.defineProperty(this,"stream",{get(){return this._patched_redis_stream},set(n){Vm.context.bind(Vm.context.active(),n),this._patched_redis_stream=n}}),t.apply(this,arguments)};Da.getTracedCreateStreamTrace=$be});var OA=T(Qn=>{"use strict";Object.defineProperty(Qn,"__esModule",{value:!0});Qn.DB_SYSTEM_VALUE_REDIS=Qn.DB_SYSTEM_NAME_VALUE_REDIS=Qn.ATTR_NET_PEER_PORT=Qn.ATTR_NET_PEER_NAME=Qn.ATTR_DB_SYSTEM=Qn.ATTR_DB_STATEMENT=Qn.ATTR_DB_CONNECTION_STRING=void 0;Qn.ATTR_DB_CONNECTION_STRING="db.connection_string";Qn.ATTR_DB_STATEMENT="db.statement";Qn.ATTR_DB_SYSTEM="db.system";Qn.ATTR_NET_PEER_NAME="net.peer.name";Qn.ATTR_NET_PEER_PORT="net.peer.port";Qn.DB_SYSTEM_NAME_VALUE_REDIS="redis";Qn.DB_SYSTEM_VALUE_REDIS="redis"});var L5=T(vA=>{"use strict";Object.defineProperty(vA,"__esModule",{value:!0});vA.RedisInstrumentationV2_V3=void 0;var no=_e(),IA=M5(),w5=NA(),Bm=U(),jm=Qe(),iu=OA(),Gbe=AA(),wP=class t extends no.InstrumentationBase{static COMPONENT="redis";_semconvStability;constructor(e={}){super(w5.PACKAGE_NAME,w5.PACKAGE_VERSION,e),this._semconvStability=e.semconvStability?e.semconvStability:(0,no.semconvStabilityFromStr)("database",process.env.OTEL_SEMCONV_STABILITY_OPT_IN)}setConfig(e={}){super.setConfig(e),this._semconvStability=e.semconvStability?e.semconvStability:(0,no.semconvStabilityFromStr)("database",process.env.OTEL_SEMCONV_STABILITY_OPT_IN)}init(){return[new no.InstrumentationNodeModuleDefinition("redis",[">=2.6.0 <4"],e=>((0,no.isWrapped)(e.RedisClient.prototype.internal_send_command)&&this._unwrap(e.RedisClient.prototype,"internal_send_command"),this._wrap(e.RedisClient.prototype,"internal_send_command",this._getPatchInternalSendCommand()),(0,no.isWrapped)(e.RedisClient.prototype.create_stream)&&this._unwrap(e.RedisClient.prototype,"create_stream"),this._wrap(e.RedisClient.prototype,"create_stream",this._getPatchCreateStream()),(0,no.isWrapped)(e.createClient)&&this._unwrap(e,"createClient"),this._wrap(e,"createClient",this._getPatchCreateClient()),e),e=>{e!==void 0&&(this._unwrap(e.RedisClient.prototype,"internal_send_command"),this._unwrap(e.RedisClient.prototype,"create_stream"),this._unwrap(e,"createClient"))})]}_getPatchInternalSendCommand(){let e=this;return function(r){return function(s){if(arguments.length!==1||typeof s!="object")return r.apply(this,arguments);let i=e.getConfig(),a=Bm.trace.getSpan(Bm.context.active())===void 0;if(i.requireParentSpan===!0&&a)return r.apply(this,arguments);let c=i?.dbStatementSerializer||Gbe.defaultDbStatementSerializer,u={};e._semconvStability&no.SemconvStability.OLD&&Object.assign(u,{[iu.ATTR_DB_SYSTEM]:iu.DB_SYSTEM_VALUE_REDIS,[iu.ATTR_DB_STATEMENT]:c(s.command,s.args)}),e._semconvStability&no.SemconvStability.STABLE&&Object.assign(u,{[jm.ATTR_DB_SYSTEM_NAME]:iu.DB_SYSTEM_NAME_VALUE_REDIS,[jm.ATTR_DB_OPERATION_NAME]:s.command,[jm.ATTR_DB_QUERY_TEXT]:c(s.command,s.args)});let p=e.tracer.startSpan(`${t.COMPONENT}-${s.command}`,{kind:Bm.SpanKind.CLIENT,attributes:u});if(this.connection_options){let d={};e._semconvStability&no.SemconvStability.OLD&&Object.assign(d,{[iu.ATTR_NET_PEER_NAME]:this.connection_options.host,[iu.ATTR_NET_PEER_PORT]:this.connection_options.port}),e._semconvStability&no.SemconvStability.STABLE&&Object.assign(d,{[jm.ATTR_SERVER_ADDRESS]:this.connection_options.host,[jm.ATTR_SERVER_PORT]:this.connection_options.port}),p.setAttributes(d)}this.address&&e._semconvStability&no.SemconvStability.OLD&&p.setAttribute(iu.ATTR_DB_CONNECTION_STRING,`redis://${this.address}`);let l=arguments[0].callback;if(l){let d=Bm.context.active();arguments[0].callback=function(m,h){if(i?.responseHook){let E=i.responseHook;(0,no.safeExecuteInTheMiddle)(()=>{E(p,s.command,s.args,h)},A=>{A&&e._diag.error("Error executing responseHook",A)},!0)}return(0,IA.endSpan)(p,m),Bm.context.with(d,l,this,...arguments)}}try{return r.apply(this,arguments)}catch(d){throw(0,IA.endSpan)(p,d),d}}}}_getPatchCreateClient(){return function(n){return(0,IA.getTracedCreateClient)(n)}}_getPatchCreateStream(){return function(n){return(0,IA.getTracedCreateStreamTrace)(n)}}};vA.RedisInstrumentationV2_V3=wP});var k5=T(xA=>{"use strict";Object.defineProperty(xA,"__esModule",{value:!0});xA.getClientAttributes=void 0;var LP=Qe(),Ml=OA(),D5=_e();function Vbe(t,e,n){let r={};return n&D5.SemconvStability.OLD&&Object.assign(r,{[Ml.ATTR_DB_SYSTEM]:Ml.DB_SYSTEM_VALUE_REDIS,[Ml.ATTR_NET_PEER_NAME]:e?.socket?.host,[Ml.ATTR_NET_PEER_PORT]:e?.socket?.port,[Ml.ATTR_DB_CONNECTION_STRING]:Bbe(t,e?.url)}),n&D5.SemconvStability.STABLE&&Object.assign(r,{[LP.ATTR_DB_SYSTEM_NAME]:Ml.DB_SYSTEM_NAME_VALUE_REDIS,[LP.ATTR_SERVER_ADDRESS]:e?.socket?.host,[LP.ATTR_SERVER_PORT]:e?.socket?.port}),r}xA.getClientAttributes=Vbe;function Bbe(t,e){if(!(typeof e!="string"||!e))try{let n=new URL(e);return n.searchParams.delete("user_pwd"),n.username="",n.password="",n.href}catch(n){t.error("failed to sanitize redis connection url",n)}}});var B5=T(PA=>{"use strict";Object.defineProperty(PA,"__esModule",{value:!0});PA.RedisInstrumentationV4_V5=void 0;var vo=U(),It=_e(),U5=k5(),jbe=AA(),$5=NA(),G5=Qe(),Hbe=OA(),Hm=Symbol("opentelemetry.instrumentation.redis.open_spans"),V5=Symbol("opentelemetry.instrumentation.redis.multi_command_options"),DP=class t extends It.InstrumentationBase{static COMPONENT="redis";_semconvStability;constructor(e={}){super($5.PACKAGE_NAME,$5.PACKAGE_VERSION,e),this._semconvStability=e.semconvStability?e.semconvStability:(0,It.semconvStabilityFromStr)("database",process.env.OTEL_SEMCONV_STABILITY_OPT_IN)}setConfig(e={}){super.setConfig(e),this._semconvStability=e.semconvStability?e.semconvStability:(0,It.semconvStabilityFromStr)("database",process.env.OTEL_SEMCONV_STABILITY_OPT_IN)}init(){return[this._getInstrumentationNodeModuleDefinition("@redis/client"),this._getInstrumentationNodeModuleDefinition("@node-redis/client")]}_getInstrumentationNodeModuleDefinition(e){let n=new It.InstrumentationNodeModuleFile(`${e}/dist/lib/commander.js`,["^1.0.0"],(s,i)=>{let a=s.transformCommandArguments;if(!a)return this._diag.error("internal instrumentation error, missing transformCommandArguments function"),s;let c=i?.startsWith("1.0.")?"extendWithCommands":"attachCommands";return(0,It.isWrapped)(s?.[c])&&this._unwrap(s,c),this._wrap(s,c,this._getPatchExtendWithCommands(a)),s},s=>{(0,It.isWrapped)(s?.extendWithCommands)&&this._unwrap(s,"extendWithCommands"),(0,It.isWrapped)(s?.attachCommands)&&this._unwrap(s,"attachCommands")}),r=new It.InstrumentationNodeModuleFile(`${e}/dist/lib/client/multi-command.js`,["^1.0.0","^5.0.0"],s=>{let i=s?.default?.prototype;return(0,It.isWrapped)(i?.exec)&&this._unwrap(i,"exec"),this._wrap(i,"exec",this._getPatchMultiCommandsExec()),(0,It.isWrapped)(i?.addCommand)&&this._unwrap(i,"addCommand"),this._wrap(i,"addCommand",this._getPatchMultiCommandsAddCommand()),s},s=>{let i=s?.default?.prototype;(0,It.isWrapped)(i?.exec)&&this._unwrap(i,"exec"),(0,It.isWrapped)(i?.addCommand)&&this._unwrap(i,"addCommand")}),o=new It.InstrumentationNodeModuleFile(`${e}/dist/lib/client/index.js`,["^1.0.0","^5.0.0"],s=>{let i=s?.default?.prototype;return i?.multi&&((0,It.isWrapped)(i?.multi)&&this._unwrap(i,"multi"),this._wrap(i,"multi",this._getPatchRedisClientMulti())),i?.MULTI&&((0,It.isWrapped)(i?.MULTI)&&this._unwrap(i,"MULTI"),this._wrap(i,"MULTI",this._getPatchRedisClientMulti())),(0,It.isWrapped)(i?.sendCommand)&&this._unwrap(i,"sendCommand"),this._wrap(i,"sendCommand",this._getPatchRedisClientSendCommand()),this._wrap(i,"connect",this._getPatchedClientConnect()),s},s=>{let i=s?.default?.prototype;(0,It.isWrapped)(i?.multi)&&this._unwrap(i,"multi"),(0,It.isWrapped)(i?.MULTI)&&this._unwrap(i,"MULTI"),(0,It.isWrapped)(i?.sendCommand)&&this._unwrap(i,"sendCommand")});return new It.InstrumentationNodeModuleDefinition(e,["^1.0.0","^5.0.0"],s=>s,()=>{},[n,r,o])}_getPatchExtendWithCommands(e){let n=this;return function(o){return function(i){if(i?.BaseClass?.name!=="RedisClient")return o.apply(this,arguments);let a=i.executor;return i.executor=function(c,u){let p=e(c,u).args;return n._traceClientCommand(a,this,arguments,p)},o.apply(this,arguments)}}}_getPatchMultiCommandsExec(){let e=this;return function(r){return function(){let s=r.apply(this,arguments);return typeof s?.then!="function"?(e._diag.error("got non promise result when patching RedisClientMultiCommand.exec"),s):s.then(i=>{let a=this[Hm];return e._endSpansWithRedisReplies(a,i),i}).catch(i=>{let a=this[Hm];if(!a)e._diag.error("cannot find open spans to end for redis multi command");else{let c=i.constructor.name==="MultiErrorReply"?i.replies:new Array(a.length).fill(i);e._endSpansWithRedisReplies(a,c)}return Promise.reject(i)})}}}_getPatchMultiCommandsAddCommand(){let e=this;return function(r){return function(s){return e._traceClientCommand(r,this,arguments,s)}}}_getPatchRedisClientMulti(){return function(n){return function(){let o=n.apply(this,arguments);return o[V5]=this.options,o}}}_getPatchRedisClientSendCommand(){let e=this;return function(r){return function(s){return e._traceClientCommand(r,this,arguments,s)}}}_getPatchedClientConnect(){let e=this;return function(r){return function(){let s=this.options,i=(0,U5.getClientAttributes)(e._diag,s,e._semconvStability),a=e.tracer.startSpan(`${t.COMPONENT}-connect`,{kind:vo.SpanKind.CLIENT,attributes:i});return vo.context.with(vo.trace.setSpan(vo.context.active(),a),()=>r.apply(this)).then(u=>(a.end(),u)).catch(u=>(a.recordException(u),a.setStatus({code:vo.SpanStatusCode.ERROR,message:u.message}),a.end(),Promise.reject(u)))}}}_traceClientCommand(e,n,r,o){if(vo.trace.getSpan(vo.context.active())===void 0&&this.getConfig().requireParentSpan)return e.apply(n,r);let i=n.options||n[V5],a=o[0],c=o.slice(1),u=this.getConfig().dbStatementSerializer||jbe.defaultDbStatementSerializer,p=(0,U5.getClientAttributes)(this._diag,i,this._semconvStability);this._semconvStability&It.SemconvStability.STABLE&&(p[G5.ATTR_DB_OPERATION_NAME]=a);try{let f=u(a,c);f!=null&&(this._semconvStability&It.SemconvStability.OLD&&(p[Hbe.ATTR_DB_STATEMENT]=f),this._semconvStability&It.SemconvStability.STABLE&&(p[G5.ATTR_DB_QUERY_TEXT]=f))}catch(f){this._diag.error("dbStatementSerializer throw an exception",f,{commandName:a})}let l=this.tracer.startSpan(`${t.COMPONENT}-${a}`,{kind:vo.SpanKind.CLIENT,attributes:p}),d=vo.context.with(vo.trace.setSpan(vo.context.active(),l),()=>e.apply(n,r));if(typeof d?.then=="function")d.then(f=>{this._endSpanWithResponse(l,a,c,f,void 0)},f=>{this._endSpanWithResponse(l,a,c,null,f)});else{let f=d;f[Hm]=f[Hm]||[],f[Hm].push({span:l,commandName:a,commandArgs:c})}return d}_endSpansWithRedisReplies(e,n){if(!e)return this._diag.error("cannot find open spans to end for redis multi command");if(n.length!==e.length)return this._diag.error("number of multi command spans does not match response from redis");for(let r=0;r<e.length;r++){let{span:o,commandName:s,commandArgs:i}=e[r],a=n[r],[c,u]=a instanceof Error?[null,a]:[a,void 0];this._endSpanWithResponse(o,s,i,c,u)}}_endSpanWithResponse(e,n,r,o,s){let{responseHook:i}=this.getConfig();if(!s&&i)try{i(e,n,r,o)}catch(a){this._diag.error("responseHook throw an exception",a)}s&&(e.recordException(s),e.setStatus({code:vo.SpanStatusCode.ERROR,message:s?.message})),e.end()}};PA.RedisInstrumentationV4_V5=DP});var F5=T(CA=>{"use strict";Object.defineProperty(CA,"__esModule",{value:!0});CA.RedisInstrumentation=void 0;var Fbe=_e(),j5=NA(),qbe=L5(),zbe=B5(),H5={requireParentSpan:!1},kP=class extends Fbe.InstrumentationBase{instrumentationV2_V3;instrumentationV4_V5;initialized=!1;constructor(e={}){let n={...H5,...e};super(j5.PACKAGE_NAME,j5.PACKAGE_VERSION,n),this.instrumentationV2_V3=new qbe.RedisInstrumentationV2_V3(this.getConfig()),this.instrumentationV4_V5=new zbe.RedisInstrumentationV4_V5(this.getConfig()),this.initialized=!0}setConfig(e={}){let n={...H5,...e};super.setConfig(n),this.initialized&&(this.instrumentationV2_V3.setConfig(n),this.instrumentationV4_V5.setConfig(n))}init(){}getModuleDefinitions(){return[...this.instrumentationV2_V3.getModuleDefinitions(),...this.instrumentationV4_V5.getModuleDefinitions()]}setTracerProvider(e){super.setTracerProvider(e),this.initialized&&(this.instrumentationV2_V3.setTracerProvider(e),this.instrumentationV4_V5.setTracerProvider(e))}enable(){super.enable(),this.initialized&&(this.instrumentationV2_V3.enable(),this.instrumentationV4_V5.enable())}disable(){super.disable(),this.initialized&&(this.instrumentationV2_V3.disable(),this.instrumentationV4_V5.disable())}};CA.RedisInstrumentation=kP});var q5=T(MA=>{"use strict";Object.defineProperty(MA,"__esModule",{value:!0});MA.RedisInstrumentation=void 0;var Ybe=F5();Object.defineProperty(MA,"RedisInstrumentation",{enumerable:!0,get:function(){return Ybe.RedisInstrumentation}})});var tJ=T(LA=>{"use strict";Object.defineProperty(LA,"__esModule",{value:!0});LA.EVENT_LISTENERS_SET=void 0;LA.EVENT_LISTENERS_SET=Symbol("opentelemetry.instrumentation.pg.eventListenersSet")});var GP=T(zm=>{"use strict";Object.defineProperty(zm,"__esModule",{value:!0});zm.AttributeNames=void 0;var eNe;(function(t){t.PG_VALUES="db.postgresql.values",t.PG_PLAN="db.postgresql.plan",t.IDLE_TIMEOUT_MILLIS="db.postgresql.idle.timeout.millis",t.MAX_CLIENT="db.postgresql.max.client"})(eNe=zm.AttributeNames||(zm.AttributeNames={}))});var VP=T(Ze=>{"use strict";Object.defineProperty(Ze,"__esModule",{value:!0});Ze.METRIC_DB_CLIENT_CONNECTION_PENDING_REQUESTS=Ze.METRIC_DB_CLIENT_CONNECTION_COUNT=Ze.DB_SYSTEM_VALUE_POSTGRESQL=Ze.DB_CLIENT_CONNECTION_STATE_VALUE_USED=Ze.DB_CLIENT_CONNECTION_STATE_VALUE_IDLE=Ze.ATTR_NET_PEER_PORT=Ze.ATTR_NET_PEER_NAME=Ze.ATTR_DB_USER=Ze.ATTR_DB_SYSTEM=Ze.ATTR_DB_STATEMENT=Ze.ATTR_DB_NAME=Ze.ATTR_DB_CONNECTION_STRING=Ze.ATTR_DB_CLIENT_CONNECTION_STATE=Ze.ATTR_DB_CLIENT_CONNECTION_POOL_NAME=void 0;Ze.ATTR_DB_CLIENT_CONNECTION_POOL_NAME="db.client.connection.pool.name";Ze.ATTR_DB_CLIENT_CONNECTION_STATE="db.client.connection.state";Ze.ATTR_DB_CONNECTION_STRING="db.connection_string";Ze.ATTR_DB_NAME="db.name";Ze.ATTR_DB_STATEMENT="db.statement";Ze.ATTR_DB_SYSTEM="db.system";Ze.ATTR_DB_USER="db.user";Ze.ATTR_NET_PEER_NAME="net.peer.name";Ze.ATTR_NET_PEER_PORT="net.peer.port";Ze.DB_CLIENT_CONNECTION_STATE_VALUE_IDLE="idle";Ze.DB_CLIENT_CONNECTION_STATE_VALUE_USED="used";Ze.DB_SYSTEM_VALUE_POSTGRESQL="postgresql";Ze.METRIC_DB_CLIENT_CONNECTION_COUNT="db.client.connection.count";Ze.METRIC_DB_CLIENT_CONNECTION_PENDING_REQUESTS="db.client.connection.pending_requests"});var BP=T(Ym=>{"use strict";Object.defineProperty(Ym,"__esModule",{value:!0});Ym.SpanNames=void 0;var tNe;(function(t){t.QUERY_PREFIX="pg.query",t.CONNECT="pg.connect",t.POOL_CONNECT="pg-pool.connect"})(tNe=Ym.SpanNames||(Ym.SpanNames={}))});var cJ=T(De=>{"use strict";Object.defineProperty(De,"__esModule",{value:!0});De.sanitizedErrorMessage=De.isObjectWithTextString=De.getErrorMessage=De.patchClientConnectCallback=De.patchCallbackPGPool=De.updateCounter=De.getPoolName=De.patchCallback=De.handleExecutionResult=De.handleConfigQuery=De.shouldSkipInstrumentation=De.getSemanticAttributesFromPoolConnection=De.getSemanticAttributesFromConnection=De.getConnectionString=De.parseAndMaskConnectionString=De.parseNormalizedOperationName=De.getQuerySpanName=void 0;var ka=U(),DA=GP(),xo=Qe(),Gt=VP(),au=_e(),nJ=BP();function rJ(t,e){if(!e)return nJ.SpanNames.QUERY_PREFIX;let n=typeof e.name=="string"&&e.name?e.name:oJ(e.text);return`${nJ.SpanNames.QUERY_PREFIX}:${n}${t?` ${t}`:""}`}De.getQuerySpanName=rJ;function oJ(t){let e=t.indexOf(" "),n=e===-1?t:t.slice(0,e);return n=n.toUpperCase(),n.endsWith(";")?n.slice(0,-1):n}De.parseNormalizedOperationName=oJ;function sJ(t){try{let e=new URL(t);return e.username="",e.password="",e.toString()}catch{return"postgresql://localhost:5432/"}}De.parseAndMaskConnectionString=sJ;function jP(t){if("connectionString"in t&&t.connectionString)return sJ(t.connectionString);let e=t.host||"localhost",n=t.port||5432,r=t.database||"";return`postgresql://${e}:${n}/${r}`}De.getConnectionString=jP;function kA(t){if(Number.isInteger(t))return t}function iJ(t,e){let n={};return e&au.SemconvStability.OLD&&(n={...n,[Gt.ATTR_DB_SYSTEM]:Gt.DB_SYSTEM_VALUE_POSTGRESQL,[Gt.ATTR_DB_NAME]:t.database,[Gt.ATTR_DB_CONNECTION_STRING]:jP(t),[Gt.ATTR_DB_USER]:t.user,[Gt.ATTR_NET_PEER_NAME]:t.host,[Gt.ATTR_NET_PEER_PORT]:kA(t.port)}),e&au.SemconvStability.STABLE&&(n={...n,[xo.ATTR_DB_SYSTEM_NAME]:xo.DB_SYSTEM_NAME_VALUE_POSTGRESQL,[xo.ATTR_DB_NAMESPACE]:t.namespace,[xo.ATTR_SERVER_ADDRESS]:t.host,[xo.ATTR_SERVER_PORT]:kA(t.port)}),n}De.getSemanticAttributesFromConnection=iJ;function nNe(t,e){let n;try{n=t.connectionString?new URL(t.connectionString):void 0}catch{n=void 0}let r={[DA.AttributeNames.IDLE_TIMEOUT_MILLIS]:t.idleTimeoutMillis,[DA.AttributeNames.MAX_CLIENT]:t.maxClient};return e&au.SemconvStability.OLD&&(r={...r,[Gt.ATTR_DB_SYSTEM]:Gt.DB_SYSTEM_VALUE_POSTGRESQL,[Gt.ATTR_DB_NAME]:n?.pathname.slice(1)??t.database,[Gt.ATTR_DB_CONNECTION_STRING]:jP(t),[Gt.ATTR_NET_PEER_NAME]:n?.hostname??t.host,[Gt.ATTR_NET_PEER_PORT]:Number(n?.port)||kA(t.port),[Gt.ATTR_DB_USER]:n?.username??t.user}),e&au.SemconvStability.STABLE&&(r={...r,[xo.ATTR_DB_SYSTEM_NAME]:xo.DB_SYSTEM_NAME_VALUE_POSTGRESQL,[xo.ATTR_DB_NAMESPACE]:t.namespace,[xo.ATTR_SERVER_ADDRESS]:n?.hostname??t.host,[xo.ATTR_SERVER_PORT]:Number(n?.port)||kA(t.port)}),r}De.getSemanticAttributesFromPoolConnection=nNe;function rNe(t){return t.requireParentSpan===!0&&ka.trace.getSpan(ka.context.active())===void 0}De.shouldSkipInstrumentation=rNe;function oNe(t,e,n,r){let{connectionParameters:o}=this,s=o.database,i=rJ(s,r),a=t.startSpan(i,{kind:ka.SpanKind.CLIENT,attributes:iJ(o,n)});if(!r)return a;if(r.text&&(n&au.SemconvStability.OLD&&a.setAttribute(Gt.ATTR_DB_STATEMENT,r.text),n&au.SemconvStability.STABLE&&a.setAttribute(xo.ATTR_DB_QUERY_TEXT,r.text)),e.enhancedDatabaseReporting&&Array.isArray(r.values))try{let c=r.values.map(u=>u==null?"null":u instanceof Buffer?u.toString():typeof u=="object"?typeof u.toPostgres=="function"?u.toPostgres():JSON.stringify(u):u.toString());a.setAttribute(DA.AttributeNames.PG_VALUES,c)}catch(c){ka.diag.error("failed to stringify ",r.values,c)}return typeof r.name=="string"&&a.setAttribute(DA.AttributeNames.PG_PLAN,r.name),a}De.handleConfigQuery=oNe;function aJ(t,e,n){typeof t.responseHook=="function"&&(0,au.safeExecuteInTheMiddle)(()=>{t.responseHook(e,{data:n})},r=>{r&&ka.diag.error("Error running response hook",r)},!0)}De.handleExecutionResult=aJ;function sNe(t,e,n,r,o){return function(i,a){i?(Object.prototype.hasOwnProperty.call(i,"code")&&(r[xo.ATTR_ERROR_TYPE]=i.code),i instanceof Error&&e.recordException(UA(i)),e.setStatus({code:ka.SpanStatusCode.ERROR,message:i.message})):aJ(t,e,a),o(),e.end(),n.call(this,i,a)}}De.patchCallback=sNe;function iNe(t){let e="";return e+=(t?.host?`${t.host}`:"unknown_host")+":",e+=(t?.port?`${t.port}`:"unknown_port")+"/",e+=t?.database?`${t.database}`:"unknown_database",e.trim()}De.getPoolName=iNe;function aNe(t,e,n,r,o){let s=e.totalCount,i=e.waitingCount,a=e.idleCount,c=s-a;return n.add(c-o.used,{[Gt.ATTR_DB_CLIENT_CONNECTION_STATE]:Gt.DB_CLIENT_CONNECTION_STATE_VALUE_USED,[Gt.ATTR_DB_CLIENT_CONNECTION_POOL_NAME]:t}),n.add(a-o.idle,{[Gt.ATTR_DB_CLIENT_CONNECTION_STATE]:Gt.DB_CLIENT_CONNECTION_STATE_VALUE_IDLE,[Gt.ATTR_DB_CLIENT_CONNECTION_POOL_NAME]:t}),r.add(i-o.pending,{[Gt.ATTR_DB_CLIENT_CONNECTION_POOL_NAME]:t}),{used:c,idle:a,pending:i}}De.updateCounter=aNe;function cNe(t,e){return function(r,o,s){r&&(r instanceof Error&&t.recordException(UA(r)),t.setStatus({code:ka.SpanStatusCode.ERROR,message:r.message})),t.end(),e.call(this,r,o,s)}}De.patchCallbackPGPool=cNe;function uNe(t,e){return function(r){r&&(r instanceof Error&&t.recordException(UA(r)),t.setStatus({code:ka.SpanStatusCode.ERROR,message:r.message})),t.end(),e.apply(this,arguments)}}De.patchClientConnectCallback=uNe;function pNe(t){return typeof t=="object"&&t!==null&&"message"in t?String(t.message):void 0}De.getErrorMessage=pNe;function lNe(t){return typeof t=="object"&&typeof t?.text=="string"}De.isObjectWithTextString=lNe;function UA(t){let e=t?.name??"PostgreSQLError",n=t?.code??"UNKNOWN";return`PostgreSQL error of type '${e}' occurred (code: ${n})`}De.sanitizedErrorMessage=UA});var uJ=T(wl=>{"use strict";Object.defineProperty(wl,"__esModule",{value:!0});wl.PACKAGE_NAME=wl.PACKAGE_VERSION=void 0;wl.PACKAGE_VERSION="0.61.0";wl.PACKAGE_NAME="@opentelemetry/instrumentation-pg"});var _J=T(GA=>{"use strict";Object.defineProperty(GA,"__esModule",{value:!0});GA.PgInstrumentation=void 0;var lr=_e(),rt=U(),pJ=tJ(),vt=cJ(),lJ=OP(),dJ=uJ(),fJ=BP(),$A=ze(),ss=Qe(),Wm=VP();function Ll(t){return t[Symbol.toStringTag]==="Module"?t.default:t}var HP=class extends lr.InstrumentationBase{_connectionsCounter={used:0,idle:0,pending:0};_semconvStability;constructor(e={}){super(dJ.PACKAGE_NAME,dJ.PACKAGE_VERSION,e),this._semconvStability=(0,lr.semconvStabilityFromStr)("database",process.env.OTEL_SEMCONV_STABILITY_OPT_IN)}_updateMetricInstruments(){this._operationDuration=this.meter.createHistogram(ss.METRIC_DB_CLIENT_OPERATION_DURATION,{description:"Duration of database client operations.",unit:"s",valueType:rt.ValueType.DOUBLE,advice:{explicitBucketBoundaries:[.001,.005,.01,.05,.1,.5,1,5,10]}}),this._connectionsCounter={idle:0,pending:0,used:0},this._connectionsCount=this.meter.createUpDownCounter(Wm.METRIC_DB_CLIENT_CONNECTION_COUNT,{description:"The number of connections that are currently in state described by the state attribute.",unit:"{connection}"}),this._connectionPendingRequests=this.meter.createUpDownCounter(Wm.METRIC_DB_CLIENT_CONNECTION_PENDING_REQUESTS,{description:"The number of current pending requests for an open connection.",unit:"{connection}"})}init(){let e=[">=8.0.3 <9"],n=[">=2.0.0 <4"],r=new lr.InstrumentationNodeModuleFile("pg/lib/native/client.js",e,this._patchPgClient.bind(this),this._unpatchPgClient.bind(this)),o=new lr.InstrumentationNodeModuleFile("pg/lib/client.js",e,this._patchPgClient.bind(this),this._unpatchPgClient.bind(this)),s=new lr.InstrumentationNodeModuleDefinition("pg",e,a=>{let c=Ll(a);return this._patchPgClient(c.Client),a},a=>{let c=Ll(a);return this._unpatchPgClient(c.Client),a},[o,r]),i=new lr.InstrumentationNodeModuleDefinition("pg-pool",n,a=>{let c=Ll(a);return(0,lr.isWrapped)(c.prototype.connect)&&this._unwrap(c.prototype,"connect"),this._wrap(c.prototype,"connect",this._getPoolConnectPatch()),c},a=>{let c=Ll(a);(0,lr.isWrapped)(c.prototype.connect)&&this._unwrap(c.prototype,"connect")});return[s,i]}_patchPgClient(e){if(!e)return;let n=Ll(e);return(0,lr.isWrapped)(n.prototype.query)&&this._unwrap(n.prototype,"query"),(0,lr.isWrapped)(n.prototype.connect)&&this._unwrap(n.prototype,"connect"),this._wrap(n.prototype,"query",this._getClientQueryPatch()),this._wrap(n.prototype,"connect",this._getClientConnectPatch()),e}_unpatchPgClient(e){let n=Ll(e);return(0,lr.isWrapped)(n.prototype.query)&&this._unwrap(n.prototype,"query"),(0,lr.isWrapped)(n.prototype.connect)&&this._unwrap(n.prototype,"connect"),e}_getClientConnectPatch(){let e=this;return n=>function(o){if(vt.shouldSkipInstrumentation(e.getConfig()))return n.call(this,o);let s=e.tracer.startSpan(fJ.SpanNames.CONNECT,{kind:rt.SpanKind.CLIENT,attributes:vt.getSemanticAttributesFromConnection(this,e._semconvStability)});if(o){let a=rt.trace.getSpan(rt.context.active());o=vt.patchClientConnectCallback(s,o),a&&(o=rt.context.bind(rt.context.active(),o))}let i=rt.context.with(rt.trace.setSpan(rt.context.active(),s),()=>n.call(this,o));return mJ(s,i)}}recordOperationDuration(e,n){let r={},o=[ss.ATTR_DB_NAMESPACE,ss.ATTR_ERROR_TYPE,ss.ATTR_SERVER_PORT,ss.ATTR_SERVER_ADDRESS,ss.ATTR_DB_OPERATION_NAME];this._semconvStability&lr.SemconvStability.OLD&&o.push(Wm.ATTR_DB_SYSTEM),this._semconvStability&lr.SemconvStability.STABLE&&o.push(ss.ATTR_DB_SYSTEM_NAME),o.forEach(i=>{i in e&&(r[i]=e[i])});let s=(0,$A.hrTimeToMilliseconds)((0,$A.hrTimeDuration)(n,(0,$A.hrTime)()))/1e3;this._operationDuration.record(s,r)}_getClientQueryPatch(){let e=this;return n=>(this._diag.debug("Patching pg.Client.prototype.query"),function(...o){if(vt.shouldSkipInstrumentation(e.getConfig()))return n.apply(this,o);let s=(0,$A.hrTime)(),i=o[0],a=typeof i=="string",c=vt.isObjectWithTextString(i),u=a?{text:i,values:Array.isArray(o[1])?o[1]:void 0}:c?i:void 0,p={[Wm.ATTR_DB_SYSTEM]:Wm.DB_SYSTEM_VALUE_POSTGRESQL,[ss.ATTR_DB_NAMESPACE]:this.database,[ss.ATTR_SERVER_PORT]:this.connectionParameters.port,[ss.ATTR_SERVER_ADDRESS]:this.connectionParameters.host};u?.text&&(p[ss.ATTR_DB_OPERATION_NAME]=vt.parseNormalizedOperationName(u?.text));let l=()=>{e.recordOperationDuration(p,s)},d=e.getConfig(),f=vt.handleConfigQuery.call(this,e.tracer,d,e._semconvStability,u);if(d.addSqlCommenterCommentToQueries&&(a?o[0]=(0,lJ.addSqlCommenterComment)(f,i):c&&!("name"in i)&&(o[0]={...i,text:(0,lJ.addSqlCommenterComment)(f,i.text)})),o.length>0){let E=rt.trace.getSpan(rt.context.active());if(typeof o[o.length-1]=="function")o[o.length-1]=vt.patchCallback(d,f,o[o.length-1],p,l),E&&(o[o.length-1]=rt.context.bind(rt.context.active(),o[o.length-1]));else if(typeof u?.callback=="function"){let A=vt.patchCallback(e.getConfig(),f,u.callback,p,l);E&&(A=rt.context.bind(rt.context.active(),A)),o[0].callback=A}}let{requestHook:m}=d;typeof m=="function"&&u&&(0,lr.safeExecuteInTheMiddle)(()=>{let{database:E,host:A,port:R,user:y}=this.connectionParameters;m(f,{connection:{database:E,host:A,port:R,user:y},query:{text:u.text,values:u.values,name:u.name}})},E=>{E&&e._diag.error("Error running query hook",E)},!0);let h;try{h=n.apply(this,o)}catch(E){throw E instanceof Error&&f.recordException(vt.sanitizedErrorMessage(E)),f.setStatus({code:rt.SpanStatusCode.ERROR,message:vt.getErrorMessage(E)}),f.end(),E}return h instanceof Promise?h.then(E=>new Promise(A=>{vt.handleExecutionResult(e.getConfig(),f,E),l(),f.end(),A(E)})).catch(E=>new Promise((A,R)=>{E instanceof Error&&f.recordException(vt.sanitizedErrorMessage(E)),f.setStatus({code:rt.SpanStatusCode.ERROR,message:E.message}),l(),f.end(),R(E)})):h})}_setPoolConnectEventListeners(e){if(e[pJ.EVENT_LISTENERS_SET])return;let n=vt.getPoolName(e.options);e.on("connect",()=>{this._connectionsCounter=vt.updateCounter(n,e,this._connectionsCount,this._connectionPendingRequests,this._connectionsCounter)}),e.on("acquire",()=>{this._connectionsCounter=vt.updateCounter(n,e,this._connectionsCount,this._connectionPendingRequests,this._connectionsCounter)}),e.on("remove",()=>{this._connectionsCounter=vt.updateCounter(n,e,this._connectionsCount,this._connectionPendingRequests,this._connectionsCounter)}),e.on("release",()=>{this._connectionsCounter=vt.updateCounter(n,e,this._connectionsCount,this._connectionPendingRequests,this._connectionsCounter)}),e[pJ.EVENT_LISTENERS_SET]=!0}_getPoolConnectPatch(){let e=this;return n=>function(o){if(vt.shouldSkipInstrumentation(e.getConfig()))return n.call(this,o);let s=e.tracer.startSpan(fJ.SpanNames.POOL_CONNECT,{kind:rt.SpanKind.CLIENT,attributes:vt.getSemanticAttributesFromPoolConnection(this.options,e._semconvStability)});if(e._setPoolConnectEventListeners(this),o){let a=rt.trace.getSpan(rt.context.active());o=vt.patchCallbackPGPool(s,o),a&&(o=rt.context.bind(rt.context.active(),o))}let i=rt.context.with(rt.trace.setSpan(rt.context.active(),s),()=>n.call(this,o));return mJ(s,i)}}};GA.PgInstrumentation=HP;function mJ(t,e){if(!(e instanceof Promise))return e;let n=e;return rt.context.bind(rt.context.active(),n.then(r=>(t.end(),r)).catch(r=>(r instanceof Error&&t.recordException(vt.sanitizedErrorMessage(r)),t.setStatus({code:rt.SpanStatusCode.ERROR,message:vt.getErrorMessage(r)}),t.end(),Promise.reject(r))))}});var hJ=T(Dl=>{"use strict";Object.defineProperty(Dl,"__esModule",{value:!0});Dl.AttributeNames=Dl.PgInstrumentation=void 0;var dNe=_J();Object.defineProperty(Dl,"PgInstrumentation",{enumerable:!0,get:function(){return dNe.PgInstrumentation}});var fNe=GP();Object.defineProperty(Dl,"AttributeNames",{enumerable:!0,get:function(){return fNe.AttributeNames}})});var DJ=T(kl=>{"use strict";Object.defineProperty(kl,"__esModule",{value:!0});kl.PACKAGE_NAME=kl.PACKAGE_VERSION=void 0;kl.PACKAGE_VERSION="0.55.0";kl.PACKAGE_NAME="@opentelemetry/instrumentation-hapi"});var KP=T(js=>{"use strict";Object.defineProperty(js,"__esModule",{value:!0});js.HapiLifecycleMethodNames=js.HapiLayerType=js.handlerPatched=js.HapiComponentName=void 0;js.HapiComponentName="@hapi/hapi";js.handlerPatched=Symbol("hapi-handler-patched");js.HapiLayerType={ROUTER:"router",PLUGIN:"plugin",EXT:"server.ext"};js.HapiLifecycleMethodNames=new Set(["onPreAuth","onCredentials","onPostAuth","onPreHandler","onPostHandler","onPreResponse","onRequest"])});var kJ=T(FA=>{"use strict";Object.defineProperty(FA,"__esModule",{value:!0});FA.ATTR_HTTP_METHOD=void 0;FA.ATTR_HTTP_METHOD="http.method"});var ZP=T(Km=>{"use strict";Object.defineProperty(Km,"__esModule",{value:!0});Km.AttributeNames=void 0;var vNe;(function(t){t.HAPI_TYPE="hapi.type",t.PLUGIN_NAME="hapi.plugin.name",t.EXT_TYPE="server.ext.type"})(vNe=Km.AttributeNames||(Km.AttributeNames={}))});var GJ=T(pn=>{"use strict";Object.defineProperty(pn,"__esModule",{value:!0});pn.getPluginFromInput=pn.getExtMetadata=pn.getRouteMetadata=pn.isPatchableExtMethod=pn.isDirectExtInput=pn.isLifecycleExtEventObj=pn.isLifecycleExtType=pn.getPluginName=void 0;var UJ=Qe(),xNe=kJ(),Zm=KP(),$a=ZP(),$J=_e();function PNe(t){return t.name?t.name:t.pkg.name}pn.getPluginName=PNe;var CNe=t=>typeof t=="string"&&Zm.HapiLifecycleMethodNames.has(t);pn.isLifecycleExtType=CNe;var MNe=t=>{let e=t?.type;return e!==void 0&&(0,pn.isLifecycleExtType)(e)};pn.isLifecycleExtEventObj=MNe;var wNe=t=>Array.isArray(t)&&t.length<=3&&(0,pn.isLifecycleExtType)(t[0])&&typeof t[1]=="function";pn.isDirectExtInput=wNe;var LNe=t=>!Array.isArray(t);pn.isPatchableExtMethod=LNe;var DNe=(t,e,n)=>{let r={[UJ.ATTR_HTTP_ROUTE]:t.path};e&$J.SemconvStability.OLD&&(r[xNe.ATTR_HTTP_METHOD]=t.method),e&$J.SemconvStability.STABLE&&(r[UJ.ATTR_HTTP_REQUEST_METHOD]=t.method);let o;return n?(r[$a.AttributeNames.HAPI_TYPE]=Zm.HapiLayerType.PLUGIN,r[$a.AttributeNames.PLUGIN_NAME]=n,o=`${n}: route - ${t.path}`):(r[$a.AttributeNames.HAPI_TYPE]=Zm.HapiLayerType.ROUTER,o=`route - ${t.path}`),{attributes:r,name:o}};pn.getRouteMetadata=DNe;var kNe=(t,e)=>e?{attributes:{[$a.AttributeNames.EXT_TYPE]:t,[$a.AttributeNames.HAPI_TYPE]:Zm.HapiLayerType.EXT,[$a.AttributeNames.PLUGIN_NAME]:e},name:`${e}: ext - ${t}`}:{attributes:{[$a.AttributeNames.EXT_TYPE]:t,[$a.AttributeNames.HAPI_TYPE]:Zm.HapiLayerType.EXT},name:`ext - ${t}`};pn.getExtMetadata=kNe;var UNe=t=>"plugin"in t?"plugin"in t.plugin?t.plugin.plugin:t.plugin:t;pn.getPluginFromInput=UNe});var jJ=T(qA=>{"use strict";Object.defineProperty(qA,"__esModule",{value:!0});qA.HapiInstrumentation=void 0;var ro=U(),VJ=ze(),Jm=_e(),BJ=DJ(),Qm=KP(),vi=GJ(),JP=class extends Jm.InstrumentationBase{_semconvStability;constructor(e={}){super(BJ.PACKAGE_NAME,BJ.PACKAGE_VERSION,e),this._semconvStability=(0,Jm.semconvStabilityFromStr)("http",process.env.OTEL_SEMCONV_STABILITY_OPT_IN)}init(){return new Jm.InstrumentationNodeModuleDefinition(Qm.HapiComponentName,[">=17.0.0 <22"],e=>{let n=e[Symbol.toStringTag]==="Module"?e.default:e;return(0,Jm.isWrapped)(n.server)||this._wrap(n,"server",this._getServerPatch.bind(this)),(0,Jm.isWrapped)(n.Server)||this._wrap(n,"Server",this._getServerPatch.bind(this)),n},e=>{let n=e[Symbol.toStringTag]==="Module"?e.default:e;this._massUnwrap([n],["server","Server"])})}_getServerPatch(e){let n=this,r=this;return function(s){let i=e.apply(this,[s]);return r._wrap(i,"route",a=>n._getServerRoutePatch.bind(n)(a)),r._wrap(i,"ext",a=>n._getServerExtPatch.bind(n)(a)),r._wrap(i,"register",n._getServerRegisterPatch.bind(n)),i}}_getServerRegisterPatch(e){let n=this;return function(o,s){if(Array.isArray(o))for(let i of o){let a=(0,vi.getPluginFromInput)(i);n._wrapRegisterHandler(a)}else{let i=(0,vi.getPluginFromInput)(o);n._wrapRegisterHandler(i)}return e.apply(this,[o,s])}}_getServerExtPatch(e,n){let r=this;return function(...s){if(Array.isArray(s[0])){let i=s[0];for(let a=0;a<i.length;a++){let c=i[a];if((0,vi.isLifecycleExtType)(c.type)){let u=c,p=r._wrapExtMethods(u.method,c.type,n);u.method=p,i[a]=u}}return e.apply(this,s)}else if((0,vi.isDirectExtInput)(s)){let i=s,a=i[1],c=r._wrapExtMethods(a,i[0],n);return e.apply(this,[i[0],c,i[2]])}else if((0,vi.isLifecycleExtEventObj)(s[0])){let i=s[0],a=r._wrapExtMethods(i.method,i.type,n);return i.method=a,e.call(this,i)}return e.apply(this,s)}}_getServerRoutePatch(e,n){let r=this;return function(o){if(Array.isArray(o))for(let s=0;s<o.length;s++){let i=r._wrapRouteHandler.call(r,o[s],n);o[s]=i}else o=r._wrapRouteHandler.call(r,o,n);return e.apply(this,[o])}}_wrapRegisterHandler(e){let n=this,r=(0,vi.getPluginName)(e),o=e.register,s=this,i=function(a,c){return s._wrap(a,"route",u=>n._getServerRoutePatch.bind(n)(u,r)),s._wrap(a,"ext",u=>n._getServerExtPatch.bind(n)(u,r)),o.call(this,a,c)};e.register=i}_wrapExtMethods(e,n,r){let o=this;if(e instanceof Array){for(let s=0;s<e.length;s++)e[s]=o._wrapExtMethods(e[s],n);return e}else if((0,vi.isPatchableExtMethod)(e))return e[Qm.handlerPatched]===!0?e:(e[Qm.handlerPatched]=!0,async function(...i){if(ro.trace.getSpan(ro.context.active())===void 0)return await e.apply(this,i);let a=(0,vi.getExtMetadata)(n,r),c=o.tracer.startSpan(a.name,{attributes:a.attributes});try{return await ro.context.with(ro.trace.setSpan(ro.context.active(),c),e,void 0,...i)}catch(u){throw c.recordException(u),c.setStatus({code:ro.SpanStatusCode.ERROR,message:u.message}),u}finally{c.end()}});return e}_wrapRouteHandler(e,n){let r=this;if(e[Qm.handlerPatched]===!0)return e;e[Qm.handlerPatched]=!0;let o=s=>async function(...i){if(ro.trace.getSpan(ro.context.active())===void 0)return await s.call(this,...i);let a=(0,VJ.getRPCMetadata)(ro.context.active());a?.type===VJ.RPCType.HTTP&&(a.route=e.path);let c=(0,vi.getRouteMetadata)(e,r._semconvStability,n),u=r.tracer.startSpan(c.name,{attributes:c.attributes});try{return await ro.context.with(ro.trace.setSpan(ro.context.active(),u),()=>s.call(this,...i))}catch(p){throw u.recordException(p),u.setStatus({code:ro.SpanStatusCode.ERROR,message:p.message}),p}finally{u.end()}};if(typeof e.handler=="function")e.handler=o(e.handler);else if(typeof e.options=="function"){let s=e.options;e.options=function(i){let a=s(i);return typeof a.handler=="function"&&(a.handler=o(a.handler)),a}}else typeof e.options?.handler=="function"&&(e.options.handler=o(e.options.handler));return e}};qA.HapiInstrumentation=JP});var HJ=T(Ul=>{"use strict";Object.defineProperty(Ul,"__esModule",{value:!0});Ul.AttributeNames=Ul.HapiInstrumentation=void 0;var $Ne=jJ();Object.defineProperty(Ul,"HapiInstrumentation",{enumerable:!0,get:function(){return $Ne.HapiInstrumentation}});var GNe=ZP();Object.defineProperty(Ul,"AttributeNames",{enumerable:!0,get:function(){return GNe.AttributeNames}})});var KA=T(e_=>{"use strict";Object.defineProperty(e_,"__esModule",{value:!0});e_.KoaLayerType=void 0;var qNe;(function(t){t.ROUTER="router",t.MIDDLEWARE="middleware"})(qNe=e_.KoaLayerType||(e_.KoaLayerType={}))});var JJ=T($l=>{"use strict";Object.defineProperty($l,"__esModule",{value:!0});$l.PACKAGE_NAME=$l.PACKAGE_VERSION=void 0;$l.PACKAGE_VERSION="0.57.0";$l.PACKAGE_NAME="@opentelemetry/instrumentation-koa"});var QP=T(t_=>{"use strict";Object.defineProperty(t_,"__esModule",{value:!0});t_.AttributeNames=void 0;var zNe;(function(t){t.KOA_TYPE="koa.type",t.KOA_NAME="koa.name"})(zNe=t_.AttributeNames||(t_.AttributeNames={}))});var XJ=T(Gl=>{"use strict";Object.defineProperty(Gl,"__esModule",{value:!0});Gl.isLayerIgnored=Gl.getMiddlewareMetadata=void 0;var QJ=KA(),ZA=QP(),YNe=Qe(),WNe=(t,e,n,r)=>n?{attributes:{[ZA.AttributeNames.KOA_NAME]:r?.toString(),[ZA.AttributeNames.KOA_TYPE]:QJ.KoaLayerType.ROUTER,[YNe.ATTR_HTTP_ROUTE]:r?.toString()},name:t._matchedRouteName||`router - ${r}`}:{attributes:{[ZA.AttributeNames.KOA_NAME]:e.name??"middleware",[ZA.AttributeNames.KOA_TYPE]:QJ.KoaLayerType.MIDDLEWARE},name:`middleware - ${e.name}`};Gl.getMiddlewareMetadata=WNe;var KNe=(t,e)=>!!(Array.isArray(e?.ignoreLayersType)&&e?.ignoreLayersType?.includes(t));Gl.isLayerIgnored=KNe});var eQ=T(JA=>{"use strict";Object.defineProperty(JA,"__esModule",{value:!0});JA.kLayerPatched=void 0;JA.kLayerPatched=Symbol("koa-layer-patched")});var iQ=T(QA=>{"use strict";Object.defineProperty(QA,"__esModule",{value:!0});QA.KoaInstrumentation=void 0;var Hs=U(),n_=_e(),tQ=KA(),nQ=JJ(),rQ=XJ(),oQ=ze(),sQ=eQ(),XP=class extends n_.InstrumentationBase{constructor(e={}){super(nQ.PACKAGE_NAME,nQ.PACKAGE_VERSION,e)}init(){return new n_.InstrumentationNodeModuleDefinition("koa",[">=2.0.0 <4"],e=>{let n=e[Symbol.toStringTag]==="Module"?e.default:e;return n==null?n:((0,n_.isWrapped)(n.prototype.use)&&this._unwrap(n.prototype,"use"),this._wrap(n.prototype,"use",this._getKoaUsePatch.bind(this)),e)},e=>{let n=e[Symbol.toStringTag]==="Module"?e.default:e;(0,n_.isWrapped)(n.prototype.use)&&this._unwrap(n.prototype,"use")})}_getKoaUsePatch(e){let n=this;return function(o){let s;return o.router?s=n._patchRouterDispatch(o):s=n._patchLayer(o,!1),e.apply(this,[s])}}_patchRouterDispatch(e){Hs.diag.debug("Patching @koa/router dispatch");let r=e.router?.stack??[];for(let o of r){let s=o.path,i=o.stack;for(let a=0;a<i.length;a++){let c=i[a];i[a]=this._patchLayer(c,!0,s)}}return e}_patchLayer(e,n,r){let o=n?tQ.KoaLayerType.ROUTER:tQ.KoaLayerType.MIDDLEWARE;return e[sQ.kLayerPatched]===!0||(0,rQ.isLayerIgnored)(o,this.getConfig())?e:e.constructor.name==="GeneratorFunction"||e.constructor.name==="AsyncGeneratorFunction"?(Hs.diag.debug("ignoring generator-based Koa middleware layer"),e):(e[sQ.kLayerPatched]=!0,Hs.diag.debug("patching Koa middleware layer"),async(s,i)=>{if(Hs.trace.getSpan(Hs.context.active())===void 0)return e(s,i);let c=(0,rQ.getMiddlewareMetadata)(s,e,n,r),u=this.tracer.startSpan(c.name,{attributes:c.attributes}),p=(0,oQ.getRPCMetadata)(Hs.context.active());p?.type===oQ.RPCType.HTTP&&s._matchedRoute&&(p.route=s._matchedRoute.toString());let{requestHook:l}=this.getConfig();l&&(0,n_.safeExecuteInTheMiddle)(()=>l(u,{context:s,middlewareLayer:e,layerType:o}),f=>{f&&Hs.diag.error("koa instrumentation: request hook failed",f)},!0);let d=Hs.trace.setSpan(Hs.context.active(),u);return Hs.context.with(d,async()=>{try{return await e(s,i)}catch(f){throw u.recordException(f),f}finally{u.end()}})})}};QA.KoaInstrumentation=XP});var aQ=T(Va=>{"use strict";Object.defineProperty(Va,"__esModule",{value:!0});Va.KoaLayerType=Va.AttributeNames=Va.KoaInstrumentation=void 0;var ZNe=iQ();Object.defineProperty(Va,"KoaInstrumentation",{enumerable:!0,get:function(){return ZNe.KoaInstrumentation}});var JNe=QP();Object.defineProperty(Va,"AttributeNames",{enumerable:!0,get:function(){return JNe.AttributeNames}});var QNe=KA();Object.defineProperty(Va,"KoaLayerType",{enumerable:!0,get:function(){return QNe.KoaLayerType}})});var eC=T(is=>{"use strict";Object.defineProperty(is,"__esModule",{value:!0});is.ConnectNames=is.ConnectTypes=is.AttributeNames=void 0;var eOe;(function(t){t.CONNECT_TYPE="connect.type",t.CONNECT_NAME="connect.name"})(eOe=is.AttributeNames||(is.AttributeNames={}));var tOe;(function(t){t.MIDDLEWARE="middleware",t.REQUEST_HANDLER="request_handler"})(tOe=is.ConnectTypes||(is.ConnectTypes={}));var nOe;(function(t){t.MIDDLEWARE="middleware",t.REQUEST_HANDLER="request handler"})(nOe=is.ConnectNames||(is.ConnectNames={}))});var fQ=T(Vl=>{"use strict";Object.defineProperty(Vl,"__esModule",{value:!0});Vl.PACKAGE_NAME=Vl.PACKAGE_VERSION=void 0;Vl.PACKAGE_VERSION="0.52.0";Vl.PACKAGE_NAME="@opentelemetry/instrumentation-connect"});var mQ=T(XA=>{"use strict";Object.defineProperty(XA,"__esModule",{value:!0});XA._LAYERS_STORE_PROPERTY=void 0;XA._LAYERS_STORE_PROPERTY=Symbol("opentelemetry.instrumentation-connect.request-route-stack")});var _Q=T(ja=>{"use strict";Object.defineProperty(ja,"__esModule",{value:!0});ja.generateRoute=ja.replaceCurrentStackRoute=ja.addNewStackLayer=void 0;var rOe=U(),Ba=mQ(),oOe=t=>{Array.isArray(t[Ba._LAYERS_STORE_PROPERTY])===!1&&Object.defineProperty(t,Ba._LAYERS_STORE_PROPERTY,{enumerable:!1,value:[]}),t[Ba._LAYERS_STORE_PROPERTY].push("/");let e=t[Ba._LAYERS_STORE_PROPERTY].length;return()=>{e===t[Ba._LAYERS_STORE_PROPERTY].length?t[Ba._LAYERS_STORE_PROPERTY].pop():rOe.diag.warn("Connect: Trying to pop the stack multiple time")}};ja.addNewStackLayer=oOe;var sOe=(t,e)=>{e&&t[Ba._LAYERS_STORE_PROPERTY].splice(-1,1,e)};ja.replaceCurrentStackRoute=sOe;var iOe=t=>t[Ba._LAYERS_STORE_PROPERTY].reduce((e,n)=>e.replace(/\/+$/,"")+n);ja.generateRoute=iOe});var TQ=T(Ha=>{"use strict";Object.defineProperty(Ha,"__esModule",{value:!0});Ha.ConnectInstrumentation=Ha.ANONYMOUS_NAME=void 0;var aOe=U(),hQ=ze(),Bl=eC(),EQ=fQ(),eR=_e(),cOe=Qe(),tC=_Q();Ha.ANONYMOUS_NAME="anonymous";var nC=class extends eR.InstrumentationBase{constructor(e={}){super(EQ.PACKAGE_NAME,EQ.PACKAGE_VERSION,e)}init(){return[new eR.InstrumentationNodeModuleDefinition("connect",[">=3.0.0 <4"],e=>this._patchConstructor(e))]}_patchApp(e){(0,eR.isWrapped)(e.use)||this._wrap(e,"use",this._patchUse.bind(this)),(0,eR.isWrapped)(e.handle)||this._wrap(e,"handle",this._patchHandle.bind(this))}_patchConstructor(e){let n=this;return function(...r){let o=e.apply(this,r);return n._patchApp(o),o}}_patchNext(e,n){return function(o){let s=e.apply(this,[o]);return n(),s}}_startSpan(e,n){let r,o,s;e?(r=Bl.ConnectTypes.REQUEST_HANDLER,s=Bl.ConnectNames.REQUEST_HANDLER,o=e):(r=Bl.ConnectTypes.MIDDLEWARE,s=Bl.ConnectNames.MIDDLEWARE,o=n.name||Ha.ANONYMOUS_NAME);let i=`${s} - ${o}`,a={attributes:{[cOe.ATTR_HTTP_ROUTE]:e.length>0?e:"/",[Bl.AttributeNames.CONNECT_TYPE]:r,[Bl.AttributeNames.CONNECT_NAME]:o}};return this.tracer.startSpan(i,a)}_patchMiddleware(e,n){let r=this,o=n.length===4;function s(){if(!r.isEnabled())return n.apply(this,arguments);let[i,a,c]=o?[1,2,3]:[0,1,2],u=arguments[i],p=arguments[a],l=arguments[c];(0,tC.replaceCurrentStackRoute)(u,e);let d=(0,hQ.getRPCMetadata)(aOe.context.active());e&&d?.type===hQ.RPCType.HTTP&&(d.route=(0,tC.generateRoute)(u));let f="";e?f=`request handler - ${e}`:f=`middleware - ${n.name||Ha.ANONYMOUS_NAME}`;let m=r._startSpan(e,n);r._diag.debug("start span",f);let h=!1;function E(){h?r._diag.debug(`span ${m.name} - already finished`):(h=!0,r._diag.debug(`finishing span ${m.name}`),m.end()),p.removeListener("close",E)}return p.addListener("close",E),arguments[c]=r._patchNext(l,E),n.apply(this,arguments)}return Object.defineProperty(s,"length",{value:n.length,writable:!1,configurable:!0}),s}_patchUse(e){let n=this;return function(...r){let o=r[r.length-1],s=r[r.length-2]||"";return r[r.length-1]=n._patchMiddleware(s,o),e.apply(this,r)}}_patchHandle(e){let n=this;return function(){let[r,o]=[0,2],s=arguments[r],i=arguments[o],a=(0,tC.addNewStackLayer)(s);return typeof i=="function"&&(arguments[o]=n._patchOut(i,a)),e.apply(this,arguments)}}_patchOut(e,n){return function(...o){return n(),Reflect.apply(e,this,o)}}};Ha.ConnectInstrumentation=nC});var SQ=T(Co=>{"use strict";Object.defineProperty(Co,"__esModule",{value:!0});Co.ConnectTypes=Co.ConnectNames=Co.AttributeNames=Co.ANONYMOUS_NAME=Co.ConnectInstrumentation=void 0;var gQ=TQ();Object.defineProperty(Co,"ConnectInstrumentation",{enumerable:!0,get:function(){return gQ.ConnectInstrumentation}});Object.defineProperty(Co,"ANONYMOUS_NAME",{enumerable:!0,get:function(){return gQ.ANONYMOUS_NAME}});var rC=eC();Object.defineProperty(Co,"AttributeNames",{enumerable:!0,get:function(){return rC.AttributeNames}});Object.defineProperty(Co,"ConnectNames",{enumerable:!0,get:function(){return rC.ConnectNames}});Object.defineProperty(Co,"ConnectTypes",{enumerable:!0,get:function(){return rC.ConnectTypes}})});var NQ=T(On=>{"use strict";Object.defineProperty(On,"__esModule",{value:!0});On.DB_SYSTEM_VALUE_MSSQL=On.ATTR_NET_PEER_PORT=On.ATTR_NET_PEER_NAME=On.ATTR_DB_USER=On.ATTR_DB_SYSTEM=On.ATTR_DB_STATEMENT=On.ATTR_DB_SQL_TABLE=On.ATTR_DB_NAME=void 0;On.ATTR_DB_NAME="db.name";On.ATTR_DB_SQL_TABLE="db.sql.table";On.ATTR_DB_STATEMENT="db.statement";On.ATTR_DB_SYSTEM="db.system";On.ATTR_DB_USER="db.user";On.ATTR_NET_PEER_NAME="net.peer.name";On.ATTR_NET_PEER_PORT="net.peer.port";On.DB_SYSTEM_VALUE_MSSQL="mssql"});var OQ=T(jl=>{"use strict";Object.defineProperty(jl,"__esModule",{value:!0});jl.once=jl.getSpanName=void 0;function pOe(t,e,n,r){return t==="execBulkLoad"&&r&&e?`${t} ${r} ${e}`:t==="callProcedure"?e?`${t} ${n} ${e}`:`${t} ${n}`:e?`${t} ${e}`:`${t}`}jl.getSpanName=pOe;var lOe=t=>{let e=!1;return(...n)=>{if(!e)return e=!0,t(...n)}};jl.once=lOe});var IQ=T(Hl=>{"use strict";Object.defineProperty(Hl,"__esModule",{value:!0});Hl.PACKAGE_NAME=Hl.PACKAGE_VERSION=void 0;Hl.PACKAGE_VERSION="0.27.0";Hl.PACKAGE_NAME="@opentelemetry/instrumentation-tedious"});var MQ=T(qa=>{"use strict";Object.defineProperty(qa,"__esModule",{value:!0});qa.TediousInstrumentation=qa.INJECTED_CTX=void 0;var Fl=U(),dOe=q("events"),tR=_e(),Fa=NQ(),vQ=OQ(),xQ=IQ(),CQ=Symbol("opentelemetry.instrumentation-tedious.current-database");qa.INJECTED_CTX=Symbol("opentelemetry.instrumentation-tedious.context-info-injected");var PQ=["callProcedure","execSql","execSqlBatch","execBulkLoad","prepare","execute"];function nR(t){Object.defineProperty(this,CQ,{value:t,writable:!0})}var oC=class t extends tR.InstrumentationBase{static COMPONENT="tedious";constructor(e={}){super(xQ.PACKAGE_NAME,xQ.PACKAGE_VERSION,e)}init(){return[new tR.InstrumentationNodeModuleDefinition(t.COMPONENT,[">=1.11.0 <20"],e=>{let n=e.Connection.prototype;for(let r of PQ)(0,tR.isWrapped)(n[r])&&this._unwrap(n,r),this._wrap(n,r,this._patchQuery(r,e));return(0,tR.isWrapped)(n.connect)&&this._unwrap(n,"connect"),this._wrap(n,"connect",this._patchConnect),e},e=>{if(e===void 0)return;let n=e.Connection.prototype;for(let r of PQ)this._unwrap(n,r);this._unwrap(n,"connect")})]}_patchConnect(e){return function(){return nR.call(this,this.config?.options?.database),this.removeListener("databaseChange",nR),this.on("databaseChange",nR),this.once("end",()=>{this.removeListener("databaseChange",nR)}),e.apply(this,arguments)}}_buildTraceparent(e){let n=e.spanContext();return`00-${n.traceId}-${n.spanId}-0${Number(n.traceFlags||Fl.TraceFlags.NONE).toString(16)}`}_injectContextInfo(e,n,r){return new Promise(o=>{try{let s="set context_info @opentelemetry_traceparent",i=new n.Request(s,c=>{o()});Object.defineProperty(i,qa.INJECTED_CTX,{value:!0});let a=Buffer.from(r,"utf8");i.addParameter("opentelemetry_traceparent",n.TYPES.VarBinary,a,{length:a.length}),e.execSql(i)}catch{o()}})}_shouldInjectFor(e){return e==="execSql"||e==="execSqlBatch"||e==="callProcedure"||e==="execute"}_patchQuery(e,n){return r=>{let o=this;function s(i){if(i?.[qa.INJECTED_CTX])return r.apply(this,arguments);if(!(i instanceof dOe.EventEmitter))return o._diag.warn(`Unexpected invocation of patched ${e} method. Span not recorded`),r.apply(this,arguments);let a=0,c=0,u=()=>c++,p=()=>a++,l=this[CQ],d=(y=>y.sqlTextOrProcedure==="sp_prepare"&&y.parametersByName?.stmt?.value?y.parametersByName.stmt.value:y.sqlTextOrProcedure)(i),f=o.tracer.startSpan((0,vQ.getSpanName)(e,l,d,i.table),{kind:Fl.SpanKind.CLIENT,attributes:{[Fa.ATTR_DB_SYSTEM]:Fa.DB_SYSTEM_VALUE_MSSQL,[Fa.ATTR_DB_NAME]:l,[Fa.ATTR_NET_PEER_PORT]:this.config?.options?.port,[Fa.ATTR_NET_PEER_NAME]:this.config?.server,[Fa.ATTR_DB_USER]:this.config?.userName??this.config?.authentication?.options?.userName,[Fa.ATTR_DB_STATEMENT]:d,[Fa.ATTR_DB_SQL_TABLE]:i.table}}),m=(0,vQ.once)(y=>{i.removeListener("done",u),i.removeListener("doneInProc",u),i.removeListener("doneProc",p),i.removeListener("error",m),this.removeListener("end",m),f.setAttribute("tedious.procedure_count",a),f.setAttribute("tedious.statement_count",c),y&&f.setStatus({code:Fl.SpanStatusCode.ERROR,message:y.message}),f.end()});i.on("done",u),i.on("doneInProc",u),i.on("doneProc",p),i.once("error",m),this.on("end",m),typeof i.callback=="function"?o._wrap(i,"callback",o._patchCallbackQuery(m)):o._diag.error("Expected request.callback to be a function");let h=()=>Fl.context.with(Fl.trace.setSpan(Fl.context.active(),f),r,this,...arguments);if(!(o.getConfig().enableTraceContextPropagation&&o._shouldInjectFor(e)))return h();let R=o._buildTraceparent(f);o._injectContextInfo(this,n,R).finally(h)}return Object.defineProperty(s,"length",{value:r.length,writable:!1}),s}}_patchCallbackQuery(e){return n=>function(r,o,s){return e(r),n.apply(this,arguments)}}};qa.TediousInstrumentation=oC});var wQ=T(rR=>{"use strict";Object.defineProperty(rR,"__esModule",{value:!0});rR.TediousInstrumentation=void 0;var fOe=MQ();Object.defineProperty(rR,"TediousInstrumentation",{enumerable:!0,get:function(){return fOe.TediousInstrumentation}})});var $Q=T(ql=>{"use strict";Object.defineProperty(ql,"__esModule",{value:!0});ql.PACKAGE_NAME=ql.PACKAGE_VERSION=void 0;ql.PACKAGE_VERSION="0.52.0";ql.PACKAGE_NAME="@opentelemetry/instrumentation-generic-pool"});var VQ=T(oR=>{"use strict";Object.defineProperty(oR,"__esModule",{value:!0});oR.GenericPoolInstrumentation=void 0;var zl=U(),uu=_e(),GQ=$Q(),sC="generic-pool",iC=class extends uu.InstrumentationBase{_isDisabled=!1;constructor(e={}){super(GQ.PACKAGE_NAME,GQ.PACKAGE_VERSION,e)}init(){return[new uu.InstrumentationNodeModuleDefinition(sC,[">=3.0.0 <4"],e=>{let n=e.Pool;return(0,uu.isWrapped)(n.prototype.acquire)&&this._unwrap(n.prototype,"acquire"),this._wrap(n.prototype,"acquire",this._acquirePatcher.bind(this)),e},e=>{let n=e.Pool;return this._unwrap(n.prototype,"acquire"),e}),new uu.InstrumentationNodeModuleDefinition(sC,[">=2.4.0 <3"],e=>{let n=e.Pool;return(0,uu.isWrapped)(n.prototype.acquire)&&this._unwrap(n.prototype,"acquire"),this._wrap(n.prototype,"acquire",this._acquireWithCallbacksPatcher.bind(this)),e},e=>{let n=e.Pool;return this._unwrap(n.prototype,"acquire"),e}),new uu.InstrumentationNodeModuleDefinition(sC,[">=2.0.0 <2.4"],e=>(this._isDisabled=!1,(0,uu.isWrapped)(e.Pool)&&this._unwrap(e,"Pool"),this._wrap(e,"Pool",this._poolWrapper.bind(this)),e),e=>(this._isDisabled=!0,e))]}_acquirePatcher(e){let n=this;return function(...o){let s=zl.context.active(),i=n.tracer.startSpan("generic-pool.acquire",{},s);return zl.context.with(zl.trace.setSpan(s,i),()=>e.call(this,...o).then(a=>(i.end(),a),a=>{throw i.recordException(a),i.end(),a}))}}_poolWrapper(e){let n=this;return function(){let o=e.apply(this,arguments);return n._wrap(o,"acquire",n._acquireWithCallbacksPatcher.bind(n)),o}}_acquireWithCallbacksPatcher(e){let n=this;return function(o,s){if(n._isDisabled)return e.call(this,o,s);let i=zl.context.active(),a=n.tracer.startSpan("generic-pool.acquire",{},i);return zl.context.with(zl.trace.setSpan(i,a),()=>{e.call(this,(c,u)=>{if(a.end(),o)return o(c,u)},s)})}}};oR.GenericPoolInstrumentation=iC});var BQ=T(sR=>{"use strict";Object.defineProperty(sR,"__esModule",{value:!0});sR.GenericPoolInstrumentation=void 0;var hOe=VQ();Object.defineProperty(sR,"GenericPoolInstrumentation",{enumerable:!0,get:function(){return hOe.GenericPoolInstrumentation}})});var aC=T(Fs=>{"use strict";Object.defineProperty(Fs,"__esModule",{value:!0});Fs.ATTR_NET_PEER_PORT=Fs.ATTR_NET_PEER_NAME=Fs.ATTR_MESSAGING_SYSTEM=Fs.ATTR_MESSAGING_OPERATION=void 0;Fs.ATTR_MESSAGING_OPERATION="messaging.operation";Fs.ATTR_MESSAGING_SYSTEM="messaging.system";Fs.ATTR_NET_PEER_NAME="net.peer.name";Fs.ATTR_NET_PEER_PORT="net.peer.port"});var cC=T(Vt=>{"use strict";Object.defineProperty(Vt,"__esModule",{value:!0});Vt.ATTR_MESSAGING_CONVERSATION_ID=Vt.OLD_ATTR_MESSAGING_MESSAGE_ID=Vt.MESSAGING_DESTINATION_KIND_VALUE_TOPIC=Vt.ATTR_MESSAGING_URL=Vt.ATTR_MESSAGING_PROTOCOL_VERSION=Vt.ATTR_MESSAGING_PROTOCOL=Vt.MESSAGING_OPERATION_VALUE_PROCESS=Vt.ATTR_MESSAGING_RABBITMQ_ROUTING_KEY=Vt.ATTR_MESSAGING_DESTINATION_KIND=Vt.ATTR_MESSAGING_DESTINATION=void 0;Vt.ATTR_MESSAGING_DESTINATION="messaging.destination";Vt.ATTR_MESSAGING_DESTINATION_KIND="messaging.destination_kind";Vt.ATTR_MESSAGING_RABBITMQ_ROUTING_KEY="messaging.rabbitmq.routing_key";Vt.MESSAGING_OPERATION_VALUE_PROCESS="process";Vt.ATTR_MESSAGING_PROTOCOL="messaging.protocol";Vt.ATTR_MESSAGING_PROTOCOL_VERSION="messaging.protocol_version";Vt.ATTR_MESSAGING_URL="messaging.url";Vt.MESSAGING_DESTINATION_KIND_VALUE_TOPIC="topic";Vt.OLD_ATTR_MESSAGING_MESSAGE_ID="messaging.message_id";Vt.ATTR_MESSAGING_CONVERSATION_ID="messaging.conversation_id"});var uC=T(pu=>{"use strict";Object.defineProperty(pu,"__esModule",{value:!0});pu.DEFAULT_CONFIG=pu.EndOperation=void 0;var TOe;(function(t){t.AutoAck="auto ack",t.Ack="ack",t.AckAll="ackAll",t.Reject="reject",t.Nack="nack",t.NackAll="nackAll",t.ChannelClosed="channel closed",t.ChannelError="channel error",t.InstrumentationTimeout="instrumentation timeout"})(TOe=pu.EndOperation||(pu.EndOperation={}));pu.DEFAULT_CONFIG={consumeTimeoutMs:1e3*60,useLinksForConsume:!1}});var KQ=T(Bt=>{"use strict";Object.defineProperty(Bt,"__esModule",{value:!0});Bt.isConfirmChannelTracing=Bt.unmarkConfirmChannelTracing=Bt.markConfirmChannelTracing=Bt.getConnectionAttributesFromUrl=Bt.getConnectionAttributesFromServer=Bt.normalizeExchange=Bt.CONNECTION_ATTRIBUTES=Bt.CHANNEL_CONSUME_TIMEOUT_TIMER=Bt.CHANNEL_SPANS_NOT_ENDED=Bt.MESSAGE_STORED_SPAN=void 0;var pC=U(),r_=aC(),iR=cC();Bt.MESSAGE_STORED_SPAN=Symbol("opentelemetry.amqplib.message.stored-span");Bt.CHANNEL_SPANS_NOT_ENDED=Symbol("opentelemetry.amqplib.channel.spans-not-ended");Bt.CHANNEL_CONSUME_TIMEOUT_TIMER=Symbol("opentelemetry.amqplib.channel.consumer-timeout-timer");Bt.CONNECTION_ATTRIBUTES=Symbol("opentelemetry.amqplib.connection.attributes");var lC=(0,pC.createContextKey)("opentelemetry.amqplib.channel.is-confirm-channel"),gOe=t=>t!==""?t:"<default>";Bt.normalizeExchange=gOe;var SOe=t=>t.replace(/:[^:@/]*@/,":***@"),zQ=(t,e)=>t||(e==="AMQP"?5672:5671),YQ=t=>{let e=t||"amqp";return(e.endsWith(":")?e.substring(0,e.length-1):e).toUpperCase()},WQ=t=>t||"localhost",Yl=(t,e,n,r)=>n?{[e]:n}:(pC.diag.error(`amqplib instrumentation: could not extract connection attribute ${r} from user supplied url`,{url:t}),{}),AOe=t=>{let e=t.serverProperties.product?.toLowerCase?.();return e?{[r_.ATTR_MESSAGING_SYSTEM]:e}:{}};Bt.getConnectionAttributesFromServer=AOe;var ROe=t=>{let e={[iR.ATTR_MESSAGING_PROTOCOL_VERSION]:"0.9.1"};if(t=t||"amqp://localhost",typeof t=="object"){let n=t,r=YQ(n?.protocol);Object.assign(e,{...Yl(t,iR.ATTR_MESSAGING_PROTOCOL,r,"protocol")});let o=WQ(n?.hostname);Object.assign(e,{...Yl(t,r_.ATTR_NET_PEER_NAME,o,"hostname")});let s=zQ(n.port,r);Object.assign(e,{...Yl(t,r_.ATTR_NET_PEER_PORT,s,"port")})}else{let n=SOe(t);e[iR.ATTR_MESSAGING_URL]=n;try{let r=new URL(n),o=YQ(r.protocol);Object.assign(e,{...Yl(n,iR.ATTR_MESSAGING_PROTOCOL,o,"protocol")});let s=WQ(r.hostname);Object.assign(e,{...Yl(n,r_.ATTR_NET_PEER_NAME,s,"hostname")});let i=zQ(r.port?parseInt(r.port):void 0,o);Object.assign(e,{...Yl(n,r_.ATTR_NET_PEER_PORT,i,"port")})}catch(r){pC.diag.error("amqplib instrumentation: error while extracting connection details from connection url",{censoredUrl:n,err:r})}}return e};Bt.getConnectionAttributesFromUrl=ROe;var yOe=t=>t.setValue(lC,!0);Bt.markConfirmChannelTracing=yOe;var bOe=t=>t.deleteValue(lC);Bt.unmarkConfirmChannelTracing=bOe;var NOe=t=>t.getValue(lC)===!0;Bt.isConfirmChannelTracing=NOe});var ZQ=T(Wl=>{"use strict";Object.defineProperty(Wl,"__esModule",{value:!0});Wl.PACKAGE_NAME=Wl.PACKAGE_VERSION=void 0;Wl.PACKAGE_VERSION="0.55.0";Wl.PACKAGE_NAME="@opentelemetry/instrumentation-amqplib"});var QQ=T(uR=>{"use strict";Object.defineProperty(uR,"__esModule",{value:!0});uR.AmqplibInstrumentation=void 0;var xt=U(),aR=ze(),Je=_e(),OOe=aC(),oo=cC(),dr=uC(),jt=KQ(),JQ=ZQ(),cR=[">=0.5.5 <1"],dC=class extends Je.InstrumentationBase{constructor(e={}){super(JQ.PACKAGE_NAME,JQ.PACKAGE_VERSION,{...dr.DEFAULT_CONFIG,...e})}setConfig(e={}){super.setConfig({...dr.DEFAULT_CONFIG,...e})}init(){let e=new Je.InstrumentationNodeModuleFile("amqplib/lib/channel_model.js",cR,this.patchChannelModel.bind(this),this.unpatchChannelModel.bind(this)),n=new Je.InstrumentationNodeModuleFile("amqplib/lib/callback_model.js",cR,this.patchChannelModel.bind(this),this.unpatchChannelModel.bind(this)),r=new Je.InstrumentationNodeModuleFile("amqplib/lib/connect.js",cR,this.patchConnect.bind(this),this.unpatchConnect.bind(this));return new Je.InstrumentationNodeModuleDefinition("amqplib",cR,void 0,void 0,[e,r,n])}patchConnect(e){return e=this.unpatchConnect(e),(0,Je.isWrapped)(e.connect)||this._wrap(e,"connect",this.getConnectPatch.bind(this)),e}unpatchConnect(e){return(0,Je.isWrapped)(e.connect)&&this._unwrap(e,"connect"),e}patchChannelModel(e,n){return(0,Je.isWrapped)(e.Channel.prototype.publish)||this._wrap(e.Channel.prototype,"publish",this.getPublishPatch.bind(this,n)),(0,Je.isWrapped)(e.Channel.prototype.consume)||this._wrap(e.Channel.prototype,"consume",this.getConsumePatch.bind(this,n)),(0,Je.isWrapped)(e.Channel.prototype.ack)||this._wrap(e.Channel.prototype,"ack",this.getAckPatch.bind(this,!1,dr.EndOperation.Ack)),(0,Je.isWrapped)(e.Channel.prototype.nack)||this._wrap(e.Channel.prototype,"nack",this.getAckPatch.bind(this,!0,dr.EndOperation.Nack)),(0,Je.isWrapped)(e.Channel.prototype.reject)||this._wrap(e.Channel.prototype,"reject",this.getAckPatch.bind(this,!0,dr.EndOperation.Reject)),(0,Je.isWrapped)(e.Channel.prototype.ackAll)||this._wrap(e.Channel.prototype,"ackAll",this.getAckAllPatch.bind(this,!1,dr.EndOperation.AckAll)),(0,Je.isWrapped)(e.Channel.prototype.nackAll)||this._wrap(e.Channel.prototype,"nackAll",this.getAckAllPatch.bind(this,!0,dr.EndOperation.NackAll)),(0,Je.isWrapped)(e.Channel.prototype.emit)||this._wrap(e.Channel.prototype,"emit",this.getChannelEmitPatch.bind(this)),(0,Je.isWrapped)(e.ConfirmChannel.prototype.publish)||this._wrap(e.ConfirmChannel.prototype,"publish",this.getConfirmedPublishPatch.bind(this,n)),e}unpatchChannelModel(e){return(0,Je.isWrapped)(e.Channel.prototype.publish)&&this._unwrap(e.Channel.prototype,"publish"),(0,Je.isWrapped)(e.Channel.prototype.consume)&&this._unwrap(e.Channel.prototype,"consume"),(0,Je.isWrapped)(e.Channel.prototype.ack)&&this._unwrap(e.Channel.prototype,"ack"),(0,Je.isWrapped)(e.Channel.prototype.nack)&&this._unwrap(e.Channel.prototype,"nack"),(0,Je.isWrapped)(e.Channel.prototype.reject)&&this._unwrap(e.Channel.prototype,"reject"),(0,Je.isWrapped)(e.Channel.prototype.ackAll)&&this._unwrap(e.Channel.prototype,"ackAll"),(0,Je.isWrapped)(e.Channel.prototype.nackAll)&&this._unwrap(e.Channel.prototype,"nackAll"),(0,Je.isWrapped)(e.Channel.prototype.emit)&&this._unwrap(e.Channel.prototype,"emit"),(0,Je.isWrapped)(e.ConfirmChannel.prototype.publish)&&this._unwrap(e.ConfirmChannel.prototype,"publish"),e}getConnectPatch(e){return function(r,o,s){return e.call(this,r,o,function(i,a){if(i==null){let c=(0,jt.getConnectionAttributesFromUrl)(r),u=(0,jt.getConnectionAttributesFromServer)(a);a[jt.CONNECTION_ATTRIBUTES]={...c,...u}}s.apply(this,arguments)})}}getChannelEmitPatch(e){let n=this;return function(o){if(o==="close"){n.endAllSpansOnChannel(this,!0,dr.EndOperation.ChannelClosed,void 0);let s=this[jt.CHANNEL_CONSUME_TIMEOUT_TIMER];s&&clearInterval(s),this[jt.CHANNEL_CONSUME_TIMEOUT_TIMER]=void 0}else o==="error"&&n.endAllSpansOnChannel(this,!0,dr.EndOperation.ChannelError,void 0);return e.apply(this,arguments)}}getAckAllPatch(e,n,r){let o=this;return function(i){return o.endAllSpansOnChannel(this,e,n,i),r.apply(this,arguments)}}getAckPatch(e,n,r){let o=this;return function(i,a,c){let u=this,p=n===dr.EndOperation.Reject?a:c,l=u[jt.CHANNEL_SPANS_NOT_ENDED]??[],d=l.findIndex(f=>f.msg===i);if(d<0)o.endConsumerSpan(i,e,n,p);else if(n!==dr.EndOperation.Reject&&a){for(let f=0;f<=d;f++)o.endConsumerSpan(l[f].msg,e,n,p);l.splice(0,d+1)}else o.endConsumerSpan(i,e,n,p),l.splice(d,1);return r.apply(this,arguments)}}getConsumePatch(e,n){let r=this;return function(s,i,a){let c=this;if(!Object.prototype.hasOwnProperty.call(c,jt.CHANNEL_SPANS_NOT_ENDED)){let{consumeTimeoutMs:p}=r.getConfig();if(p){let l=setInterval(()=>{r.checkConsumeTimeoutOnChannel(c)},p);l.unref(),c[jt.CHANNEL_CONSUME_TIMEOUT_TIMER]=l}c[jt.CHANNEL_SPANS_NOT_ENDED]=[]}let u=function(p){if(!p)return i.call(this,p);let l=p.properties.headers??{},d=xt.propagation.extract(xt.ROOT_CONTEXT,l),f=p.fields?.exchange,m;if(r._config.useLinksForConsume){let R=d?xt.trace.getSpan(d)?.spanContext():void 0;d=void 0,R&&(m=[{context:R}])}let h=r.tracer.startSpan(`${s} process`,{kind:xt.SpanKind.CONSUMER,attributes:{...c?.connection?.[jt.CONNECTION_ATTRIBUTES],[oo.ATTR_MESSAGING_DESTINATION]:f,[oo.ATTR_MESSAGING_DESTINATION_KIND]:oo.MESSAGING_DESTINATION_KIND_VALUE_TOPIC,[oo.ATTR_MESSAGING_RABBITMQ_ROUTING_KEY]:p.fields?.routingKey,[OOe.ATTR_MESSAGING_OPERATION]:oo.MESSAGING_OPERATION_VALUE_PROCESS,[oo.OLD_ATTR_MESSAGING_MESSAGE_ID]:p?.properties.messageId,[oo.ATTR_MESSAGING_CONVERSATION_ID]:p?.properties.correlationId},links:m},d),{consumeHook:E}=r.getConfig();E&&(0,Je.safeExecuteInTheMiddle)(()=>E(h,{moduleVersion:e,msg:p}),R=>{R&&xt.diag.error("amqplib instrumentation: consumerHook error",R)},!0),a?.noAck||(c[jt.CHANNEL_SPANS_NOT_ENDED].push({msg:p,timeOfConsume:(0,aR.hrTime)()}),p[jt.MESSAGE_STORED_SPAN]=h);let A=d||xt.ROOT_CONTEXT;xt.context.with(xt.trace.setSpan(A,h),()=>{i.call(this,p)}),a?.noAck&&(r.callConsumeEndHook(h,p,!1,dr.EndOperation.AutoAck),h.end())};return arguments[1]=u,n.apply(this,arguments)}}getConfirmedPublishPatch(e,n){let r=this;return function(s,i,a,c,u){let p=this,{span:l,modifiedOptions:d}=r.createPublishSpan(r,s,i,p,c),{publishHook:f}=r.getConfig();f&&(0,Je.safeExecuteInTheMiddle)(()=>f(l,{moduleVersion:e,exchange:s,routingKey:i,content:a,options:d,isConfirmChannel:!0}),A=>{A&&xt.diag.error("amqplib instrumentation: publishHook error",A)},!0);let m=function(A,R){try{u?.call(this,A,R)}finally{let{publishConfirmHook:y}=r.getConfig();y&&(0,Je.safeExecuteInTheMiddle)(()=>y(l,{moduleVersion:e,exchange:s,routingKey:i,content:a,options:c,isConfirmChannel:!0,confirmError:A}),O=>{O&&xt.diag.error("amqplib instrumentation: publishConfirmHook error",O)},!0),A&&l.setStatus({code:xt.SpanStatusCode.ERROR,message:"message confirmation has been nack'ed"}),l.end()}},h=(0,jt.markConfirmChannelTracing)(xt.context.active()),E=[...arguments];return E[3]=d,E[4]=xt.context.bind((0,jt.unmarkConfirmChannelTracing)(xt.trace.setSpan(h,l)),m),xt.context.with(h,n.bind(this,...E))}}getPublishPatch(e,n){let r=this;return function(s,i,a,c){if((0,jt.isConfirmChannelTracing)(xt.context.active()))return n.apply(this,arguments);{let u=this,{span:p,modifiedOptions:l}=r.createPublishSpan(r,s,i,u,c),{publishHook:d}=r.getConfig();d&&(0,Je.safeExecuteInTheMiddle)(()=>d(p,{moduleVersion:e,exchange:s,routingKey:i,content:a,options:l,isConfirmChannel:!1}),h=>{h&&xt.diag.error("amqplib instrumentation: publishHook error",h)},!0);let f=[...arguments];f[3]=l;let m=n.apply(this,f);return p.end(),m}}}createPublishSpan(e,n,r,o,s){let i=(0,jt.normalizeExchange)(n),a=e.tracer.startSpan(`publish ${i}`,{kind:xt.SpanKind.PRODUCER,attributes:{...o.connection[jt.CONNECTION_ATTRIBUTES],[oo.ATTR_MESSAGING_DESTINATION]:n,[oo.ATTR_MESSAGING_DESTINATION_KIND]:oo.MESSAGING_DESTINATION_KIND_VALUE_TOPIC,[oo.ATTR_MESSAGING_RABBITMQ_ROUTING_KEY]:r,[oo.OLD_ATTR_MESSAGING_MESSAGE_ID]:s?.messageId,[oo.ATTR_MESSAGING_CONVERSATION_ID]:s?.correlationId}}),c=s??{};return c.headers=c.headers??{},xt.propagation.inject(xt.trace.setSpan(xt.context.active(),a),c.headers),{span:a,modifiedOptions:c}}endConsumerSpan(e,n,r,o){let s=e[jt.MESSAGE_STORED_SPAN];s&&(n!==!1&&s.setStatus({code:xt.SpanStatusCode.ERROR,message:r!==dr.EndOperation.ChannelClosed&&r!==dr.EndOperation.ChannelError?`${r} called on message${o===!0?" with requeue":o===!1?" without requeue":""}`:r}),this.callConsumeEndHook(s,e,n,r),s.end(),e[jt.MESSAGE_STORED_SPAN]=void 0)}endAllSpansOnChannel(e,n,r,o){(e[jt.CHANNEL_SPANS_NOT_ENDED]??[]).forEach(i=>{this.endConsumerSpan(i.msg,n,r,o)}),e[jt.CHANNEL_SPANS_NOT_ENDED]=[]}callConsumeEndHook(e,n,r,o){let{consumeEndHook:s}=this.getConfig();s&&(0,Je.safeExecuteInTheMiddle)(()=>s(e,{msg:n,rejected:r,endOperation:o}),i=>{i&&xt.diag.error("amqplib instrumentation: consumerEndHook error",i)},!0)}checkConsumeTimeoutOnChannel(e){let n=(0,aR.hrTime)(),r=e[jt.CHANNEL_SPANS_NOT_ENDED]??[],o,{consumeTimeoutMs:s}=this.getConfig();for(o=0;o<r.length;o++){let i=r[o],a=(0,aR.hrTimeDuration)(i.timeOfConsume,n);if((0,aR.hrTimeToMilliseconds)(a)<s)break;this.endConsumerSpan(i.msg,null,dr.EndOperation.InstrumentationTimeout,!0)}r.splice(0,o)}};uR.AmqplibInstrumentation=dC});var eX=T(za=>{"use strict";Object.defineProperty(za,"__esModule",{value:!0});za.EndOperation=za.DEFAULT_CONFIG=za.AmqplibInstrumentation=void 0;var IOe=QQ();Object.defineProperty(za,"AmqplibInstrumentation",{enumerable:!0,get:function(){return IOe.AmqplibInstrumentation}});var XQ=uC();Object.defineProperty(za,"DEFAULT_CONFIG",{enumerable:!0,get:function(){return XQ.DEFAULT_CONFIG}});Object.defineProperty(za,"EndOperation",{enumerable:!0,get:function(){return XQ.EndOperation}})});var L_=T(He=>{"use strict";Object.defineProperty(He,"__esModule",{value:!0});He.regexpCode=He.getEsmExportName=He.getProperty=He.safeStringify=He.stringify=He.strConcat=He.addCodeArg=He.str=He._=He.nil=He._Code=He.Name=He.IDENTIFIER=He._CodeOrName=void 0;var M_=class{};He._CodeOrName=M_;He.IDENTIFIER=/^[a-z$_][a-z$_0-9]*$/i;var Lu=class extends M_{constructor(e){if(super(),!He.IDENTIFIER.test(e))throw new Error("CodeGen: name must be a valid identifier");this.str=e}toString(){return this.str}emptyStr(){return!1}get names(){return{[this.str]:1}}};He.Name=Lu;var $o=class extends M_{constructor(e){super(),this._items=typeof e=="string"?[e]:e}toString(){return this.str}emptyStr(){if(this._items.length>1)return!1;let e=this._items[0];return e===""||e==='""'}get str(){var e;return(e=this._str)!==null&&e!==void 0?e:this._str=this._items.reduce((n,r)=>`${n}${r}`,"")}get names(){var e;return(e=this._names)!==null&&e!==void 0?e:this._names=this._items.reduce((n,r)=>(r instanceof Lu&&(n[r.str]=(n[r.str]||0)+1),n),{})}};He._Code=$o;He.nil=new $o("");function Pee(t,...e){let n=[t[0]],r=0;for(;r<e.length;)Qw(n,e[r]),n.push(t[++r]);return new $o(n)}He._=Pee;var Jw=new $o("+");function Cee(t,...e){let n=[w_(t[0])],r=0;for(;r<e.length;)n.push(Jw),Qw(n,e[r]),n.push(Jw,w_(t[++r]));return oMe(n),new $o(n)}He.str=Cee;function Qw(t,e){e instanceof $o?t.push(...e._items):e instanceof Lu?t.push(e):t.push(aMe(e))}He.addCodeArg=Qw;function oMe(t){let e=1;for(;e<t.length-1;){if(t[e]===Jw){let n=sMe(t[e-1],t[e+1]);if(n!==void 0){t.splice(e-1,3,n);continue}t[e++]="+"}e++}}function sMe(t,e){if(e==='""')return t;if(t==='""')return e;if(typeof t=="string")return e instanceof Lu||t[t.length-1]!=='"'?void 0:typeof e!="string"?`${t.slice(0,-1)}${e}"`:e[0]==='"'?t.slice(0,-1)+e.slice(1):void 0;if(typeof e=="string"&&e[0]==='"'&&!(t instanceof Lu))return`"${t}${e.slice(1)}`}function iMe(t,e){return e.emptyStr()?t:t.emptyStr()?e:Cee`${t}${e}`}He.strConcat=iMe;function aMe(t){return typeof t=="number"||typeof t=="boolean"||t===null?t:w_(Array.isArray(t)?t.join(","):t)}function cMe(t){return new $o(w_(t))}He.stringify=cMe;function w_(t){return JSON.stringify(t).replace(/\u2028/g,"\\u2028").replace(/\u2029/g,"\\u2029")}He.safeStringify=w_;function uMe(t){return typeof t=="string"&&He.IDENTIFIER.test(t)?new $o(`.${t}`):Pee`[${t}]`}He.getProperty=uMe;function pMe(t){if(typeof t=="string"&&He.IDENTIFIER.test(t))return new $o(`${t}`);throw new Error(`CodeGen: invalid export name: ${t}, use explicit $id name mapping`)}He.getEsmExportName=pMe;function lMe(t){return new $o(t.toString())}He.regexpCode=lMe});var t0=T(Ur=>{"use strict";Object.defineProperty(Ur,"__esModule",{value:!0});Ur.ValueScope=Ur.ValueScopeName=Ur.Scope=Ur.varKinds=Ur.UsedValueState=void 0;var kr=L_(),Xw=class extends Error{constructor(e){super(`CodeGen: "code" for ${e} not defined`),this.value=e.value}},Ny;(function(t){t[t.Started=0]="Started",t[t.Completed=1]="Completed"})(Ny||(Ur.UsedValueState=Ny={}));Ur.varKinds={const:new kr.Name("const"),let:new kr.Name("let"),var:new kr.Name("var")};var Oy=class{constructor({prefixes:e,parent:n}={}){this._names={},this._prefixes=e,this._parent=n}toName(e){return e instanceof kr.Name?e:this.name(e)}name(e){return new kr.Name(this._newName(e))}_newName(e){let n=this._names[e]||this._nameGroup(e);return`${e}${n.index++}`}_nameGroup(e){var n,r;if(!((r=(n=this._parent)===null||n===void 0?void 0:n._prefixes)===null||r===void 0)&&r.has(e)||this._prefixes&&!this._prefixes.has(e))throw new Error(`CodeGen: prefix "${e}" is not allowed in this scope`);return this._names[e]={prefix:e,index:0}}};Ur.Scope=Oy;var Iy=class extends kr.Name{constructor(e,n){super(n),this.prefix=e}setValue(e,{property:n,itemIndex:r}){this.value=e,this.scopePath=(0,kr._)`.${new kr.Name(n)}[${r}]`}};Ur.ValueScopeName=Iy;var dMe=(0,kr._)`\n`,e0=class extends Oy{constructor(e){super(e),this._values={},this._scope=e.scope,this.opts={...e,_n:e.lines?dMe:kr.nil}}get(){return this._scope}name(e){return new Iy(e,this._newName(e))}value(e,n){var r;if(n.ref===void 0)throw new Error("CodeGen: ref must be passed in value");let o=this.toName(e),{prefix:s}=o,i=(r=n.key)!==null&&r!==void 0?r:n.ref,a=this._values[s];if(a){let p=a.get(i);if(p)return p}else a=this._values[s]=new Map;a.set(i,o);let c=this._scope[s]||(this._scope[s]=[]),u=c.length;return c[u]=n.ref,o.setValue(n,{property:s,itemIndex:u}),o}getValue(e,n){let r=this._values[e];if(r)return r.get(n)}scopeRefs(e,n=this._values){return this._reduceValues(n,r=>{if(r.scopePath===void 0)throw new Error(`CodeGen: name "${r}" has no value`);return(0,kr._)`${e}${r.scopePath}`})}scopeCode(e=this._values,n,r){return this._reduceValues(e,o=>{if(o.value===void 0)throw new Error(`CodeGen: name "${o}" has no value`);return o.value.code},n,r)}_reduceValues(e,n,r={},o){let s=kr.nil;for(let i in e){let a=e[i];if(!a)continue;let c=r[i]=r[i]||new Map;a.forEach(u=>{if(c.has(u))return;c.set(u,Ny.Started);let p=n(u);if(p){let l=this.opts.es5?Ur.varKinds.var:Ur.varKinds.const;s=(0,kr._)`${s}${l} ${u} = ${p};${this.opts._n}`}else if(p=o?.(u))s=(0,kr._)`${s}${p}${this.opts._n}`;else throw new Xw(u);c.set(u,Ny.Completed)})}return s}};Ur.ValueScope=e0});var Oe=T(Ie=>{"use strict";Object.defineProperty(Ie,"__esModule",{value:!0});Ie.or=Ie.and=Ie.not=Ie.CodeGen=Ie.operators=Ie.varKinds=Ie.ValueScopeName=Ie.ValueScope=Ie.Scope=Ie.Name=Ie.regexpCode=Ie.stringify=Ie.getProperty=Ie.nil=Ie.strConcat=Ie.str=Ie._=void 0;var Ge=L_(),ls=t0(),oc=L_();Object.defineProperty(Ie,"_",{enumerable:!0,get:function(){return oc._}});Object.defineProperty(Ie,"str",{enumerable:!0,get:function(){return oc.str}});Object.defineProperty(Ie,"strConcat",{enumerable:!0,get:function(){return oc.strConcat}});Object.defineProperty(Ie,"nil",{enumerable:!0,get:function(){return oc.nil}});Object.defineProperty(Ie,"getProperty",{enumerable:!0,get:function(){return oc.getProperty}});Object.defineProperty(Ie,"stringify",{enumerable:!0,get:function(){return oc.stringify}});Object.defineProperty(Ie,"regexpCode",{enumerable:!0,get:function(){return oc.regexpCode}});Object.defineProperty(Ie,"Name",{enumerable:!0,get:function(){return oc.Name}});var Cy=t0();Object.defineProperty(Ie,"Scope",{enumerable:!0,get:function(){return Cy.Scope}});Object.defineProperty(Ie,"ValueScope",{enumerable:!0,get:function(){return Cy.ValueScope}});Object.defineProperty(Ie,"ValueScopeName",{enumerable:!0,get:function(){return Cy.ValueScopeName}});Object.defineProperty(Ie,"varKinds",{enumerable:!0,get:function(){return Cy.varKinds}});Ie.operators={GT:new Ge._Code(">"),GTE:new Ge._Code(">="),LT:new Ge._Code("<"),LTE:new Ge._Code("<="),EQ:new Ge._Code("==="),NEQ:new Ge._Code("!=="),NOT:new Ge._Code("!"),OR:new Ge._Code("||"),AND:new Ge._Code("&&"),ADD:new Ge._Code("+")};var Ui=class{optimizeNodes(){return this}optimizeNames(e,n){return this}},n0=class extends Ui{constructor(e,n,r){super(),this.varKind=e,this.name=n,this.rhs=r}render({es5:e,_n:n}){let r=e?ls.varKinds.var:this.varKind,o=this.rhs===void 0?"":` = ${this.rhs}`;return`${r} ${this.name}${o};`+n}optimizeNames(e,n){if(e[this.name.str])return this.rhs&&(this.rhs=hd(this.rhs,e,n)),this}get names(){return this.rhs instanceof Ge._CodeOrName?this.rhs.names:{}}},vy=class extends Ui{constructor(e,n,r){super(),this.lhs=e,this.rhs=n,this.sideEffects=r}render({_n:e}){return`${this.lhs} = ${this.rhs};`+e}optimizeNames(e,n){if(!(this.lhs instanceof Ge.Name&&!e[this.lhs.str]&&!this.sideEffects))return this.rhs=hd(this.rhs,e,n),this}get names(){let e=this.lhs instanceof Ge.Name?{}:{...this.lhs.names};return Py(e,this.rhs)}},r0=class extends vy{constructor(e,n,r,o){super(e,r,o),this.op=n}render({_n:e}){return`${this.lhs} ${this.op}= ${this.rhs};`+e}},o0=class extends Ui{constructor(e){super(),this.label=e,this.names={}}render({_n:e}){return`${this.label}:`+e}},s0=class extends Ui{constructor(e){super(),this.label=e,this.names={}}render({_n:e}){return`break${this.label?` ${this.label}`:""};`+e}},i0=class extends Ui{constructor(e){super(),this.error=e}render({_n:e}){return`throw ${this.error};`+e}get names(){return this.error.names}},a0=class extends Ui{constructor(e){super(),this.code=e}render({_n:e}){return`${this.code};`+e}optimizeNodes(){return`${this.code}`?this:void 0}optimizeNames(e,n){return this.code=hd(this.code,e,n),this}get names(){return this.code instanceof Ge._CodeOrName?this.code.names:{}}},D_=class extends Ui{constructor(e=[]){super(),this.nodes=e}render(e){return this.nodes.reduce((n,r)=>n+r.render(e),"")}optimizeNodes(){let{nodes:e}=this,n=e.length;for(;n--;){let r=e[n].optimizeNodes();Array.isArray(r)?e.splice(n,1,...r):r?e[n]=r:e.splice(n,1)}return e.length>0?this:void 0}optimizeNames(e,n){let{nodes:r}=this,o=r.length;for(;o--;){let s=r[o];s.optimizeNames(e,n)||(fMe(e,s.names),r.splice(o,1))}return r.length>0?this:void 0}get names(){return this.nodes.reduce((e,n)=>Uu(e,n.names),{})}},$i=class extends D_{render(e){return"{"+e._n+super.render(e)+"}"+e._n}},c0=class extends D_{},_d=class extends $i{};_d.kind="else";var Du=class t extends $i{constructor(e,n){super(n),this.condition=e}render(e){let n=`if(${this.condition})`+super.render(e);return this.else&&(n+="else "+this.else.render(e)),n}optimizeNodes(){super.optimizeNodes();let e=this.condition;if(e===!0)return this.nodes;let n=this.else;if(n){let r=n.optimizeNodes();n=this.else=Array.isArray(r)?new _d(r):r}if(n)return e===!1?n instanceof t?n:n.nodes:this.nodes.length?this:new t(Mee(e),n instanceof t?[n]:n.nodes);if(!(e===!1||!this.nodes.length))return this}optimizeNames(e,n){var r;if(this.else=(r=this.else)===null||r===void 0?void 0:r.optimizeNames(e,n),!!(super.optimizeNames(e,n)||this.else))return this.condition=hd(this.condition,e,n),this}get names(){let e=super.names;return Py(e,this.condition),this.else&&Uu(e,this.else.names),e}};Du.kind="if";var ku=class extends $i{};ku.kind="for";var u0=class extends ku{constructor(e){super(),this.iteration=e}render(e){return`for(${this.iteration})`+super.render(e)}optimizeNames(e,n){if(super.optimizeNames(e,n))return this.iteration=hd(this.iteration,e,n),this}get names(){return Uu(super.names,this.iteration.names)}},p0=class extends ku{constructor(e,n,r,o){super(),this.varKind=e,this.name=n,this.from=r,this.to=o}render(e){let n=e.es5?ls.varKinds.var:this.varKind,{name:r,from:o,to:s}=this;return`for(${n} ${r}=${o}; ${r}<${s}; ${r}++)`+super.render(e)}get names(){let e=Py(super.names,this.from);return Py(e,this.to)}},xy=class extends ku{constructor(e,n,r,o){super(),this.loop=e,this.varKind=n,this.name=r,this.iterable=o}render(e){return`for(${this.varKind} ${this.name} ${this.loop} ${this.iterable})`+super.render(e)}optimizeNames(e,n){if(super.optimizeNames(e,n))return this.iterable=hd(this.iterable,e,n),this}get names(){return Uu(super.names,this.iterable.names)}},k_=class extends $i{constructor(e,n,r){super(),this.name=e,this.args=n,this.async=r}render(e){return`${this.async?"async ":""}function ${this.name}(${this.args})`+super.render(e)}};k_.kind="func";var U_=class extends D_{render(e){return"return "+super.render(e)}};U_.kind="return";var l0=class extends $i{render(e){let n="try"+super.render(e);return this.catch&&(n+=this.catch.render(e)),this.finally&&(n+=this.finally.render(e)),n}optimizeNodes(){var e,n;return super.optimizeNodes(),(e=this.catch)===null||e===void 0||e.optimizeNodes(),(n=this.finally)===null||n===void 0||n.optimizeNodes(),this}optimizeNames(e,n){var r,o;return super.optimizeNames(e,n),(r=this.catch)===null||r===void 0||r.optimizeNames(e,n),(o=this.finally)===null||o===void 0||o.optimizeNames(e,n),this}get names(){let e=super.names;return this.catch&&Uu(e,this.catch.names),this.finally&&Uu(e,this.finally.names),e}},$_=class extends $i{constructor(e){super(),this.error=e}render(e){return`catch(${this.error})`+super.render(e)}};$_.kind="catch";var G_=class extends $i{render(e){return"finally"+super.render(e)}};G_.kind="finally";var d0=class{constructor(e,n={}){this._values={},this._blockStarts=[],this._constants={},this.opts={...n,_n:n.lines?`
`:""},this._extScope=e,this._scope=new ls.Scope({parent:e}),this._nodes=[new c0]}toString(){return this._root.render(this.opts)}name(e){return this._scope.name(e)}scopeName(e){return this._extScope.name(e)}scopeValue(e,n){let r=this._extScope.value(e,n);return(this._values[r.prefix]||(this._values[r.prefix]=new Set)).add(r),r}getScopeValue(e,n){return this._extScope.getValue(e,n)}scopeRefs(e){return this._extScope.scopeRefs(e,this._values)}scopeCode(){return this._extScope.scopeCode(this._values)}_def(e,n,r,o){let s=this._scope.toName(n);return r!==void 0&&o&&(this._constants[s.str]=r),this._leafNode(new n0(e,s,r)),s}const(e,n,r){return this._def(ls.varKinds.const,e,n,r)}let(e,n,r){return this._def(ls.varKinds.let,e,n,r)}var(e,n,r){return this._def(ls.varKinds.var,e,n,r)}assign(e,n,r){return this._leafNode(new vy(e,n,r))}add(e,n){return this._leafNode(new r0(e,Ie.operators.ADD,n))}code(e){return typeof e=="function"?e():e!==Ge.nil&&this._leafNode(new a0(e)),this}object(...e){let n=["{"];for(let[r,o]of e)n.length>1&&n.push(","),n.push(r),(r!==o||this.opts.es5)&&(n.push(":"),(0,Ge.addCodeArg)(n,o));return n.push("}"),new Ge._Code(n)}if(e,n,r){if(this._blockNode(new Du(e)),n&&r)this.code(n).else().code(r).endIf();else if(n)this.code(n).endIf();else if(r)throw new Error('CodeGen: "else" body without "then" body');return this}elseIf(e){return this._elseNode(new Du(e))}else(){return this._elseNode(new _d)}endIf(){return this._endBlockNode(Du,_d)}_for(e,n){return this._blockNode(e),n&&this.code(n).endFor(),this}for(e,n){return this._for(new u0(e),n)}forRange(e,n,r,o,s=this.opts.es5?ls.varKinds.var:ls.varKinds.let){let i=this._scope.toName(e);return this._for(new p0(s,i,n,r),()=>o(i))}forOf(e,n,r,o=ls.varKinds.const){let s=this._scope.toName(e);if(this.opts.es5){let i=n instanceof Ge.Name?n:this.var("_arr",n);return this.forRange("_i",0,(0,Ge._)`${i}.length`,a=>{this.var(s,(0,Ge._)`${i}[${a}]`),r(s)})}return this._for(new xy("of",o,s,n),()=>r(s))}forIn(e,n,r,o=this.opts.es5?ls.varKinds.var:ls.varKinds.const){if(this.opts.ownProperties)return this.forOf(e,(0,Ge._)`Object.keys(${n})`,r);let s=this._scope.toName(e);return this._for(new xy("in",o,s,n),()=>r(s))}endFor(){return this._endBlockNode(ku)}label(e){return this._leafNode(new o0(e))}break(e){return this._leafNode(new s0(e))}return(e){let n=new U_;if(this._blockNode(n),this.code(e),n.nodes.length!==1)throw new Error('CodeGen: "return" should have one node');return this._endBlockNode(U_)}try(e,n,r){if(!n&&!r)throw new Error('CodeGen: "try" without "catch" and "finally"');let o=new l0;if(this._blockNode(o),this.code(e),n){let s=this.name("e");this._currNode=o.catch=new $_(s),n(s)}return r&&(this._currNode=o.finally=new G_,this.code(r)),this._endBlockNode($_,G_)}throw(e){return this._leafNode(new i0(e))}block(e,n){return this._blockStarts.push(this._nodes.length),e&&this.code(e).endBlock(n),this}endBlock(e){let n=this._blockStarts.pop();if(n===void 0)throw new Error("CodeGen: not in self-balancing block");let r=this._nodes.length-n;if(r<0||e!==void 0&&r!==e)throw new Error(`CodeGen: wrong number of nodes: ${r} vs ${e} expected`);return this._nodes.length=n,this}func(e,n=Ge.nil,r,o){return this._blockNode(new k_(e,n,r)),o&&this.code(o).endFunc(),this}endFunc(){return this._endBlockNode(k_)}optimize(e=1){for(;e-- >0;)this._root.optimizeNodes(),this._root.optimizeNames(this._root.names,this._constants)}_leafNode(e){return this._currNode.nodes.push(e),this}_blockNode(e){this._currNode.nodes.push(e),this._nodes.push(e)}_endBlockNode(e,n){let r=this._currNode;if(r instanceof e||n&&r instanceof n)return this._nodes.pop(),this;throw new Error(`CodeGen: not in block "${n?`${e.kind}/${n.kind}`:e.kind}"`)}_elseNode(e){let n=this._currNode;if(!(n instanceof Du))throw new Error('CodeGen: "else" without "if"');return this._currNode=n.else=e,this}get _root(){return this._nodes[0]}get _currNode(){let e=this._nodes;return e[e.length-1]}set _currNode(e){let n=this._nodes;n[n.length-1]=e}};Ie.CodeGen=d0;function Uu(t,e){for(let n in e)t[n]=(t[n]||0)+(e[n]||0);return t}function Py(t,e){return e instanceof Ge._CodeOrName?Uu(t,e.names):t}function hd(t,e,n){if(t instanceof Ge.Name)return r(t);if(!o(t))return t;return new Ge._Code(t._items.reduce((s,i)=>(i instanceof Ge.Name&&(i=r(i)),i instanceof Ge._Code?s.push(...i._items):s.push(i),s),[]));function r(s){let i=n[s.str];return i===void 0||e[s.str]!==1?s:(delete e[s.str],i)}function o(s){return s instanceof Ge._Code&&s._items.some(i=>i instanceof Ge.Name&&e[i.str]===1&&n[i.str]!==void 0)}}function fMe(t,e){for(let n in e)t[n]=(t[n]||0)-(e[n]||0)}function Mee(t){return typeof t=="boolean"||typeof t=="number"||t===null?!t:(0,Ge._)`!${f0(t)}`}Ie.not=Mee;var mMe=wee(Ie.operators.AND);function _Me(...t){return t.reduce(mMe)}Ie.and=_Me;var hMe=wee(Ie.operators.OR);function EMe(...t){return t.reduce(hMe)}Ie.or=EMe;function wee(t){return(e,n)=>e===Ge.nil?n:n===Ge.nil?e:(0,Ge._)`${f0(e)} ${t} ${f0(n)}`}function f0(t){return t instanceof Ge.Name?t:(0,Ge._)`(${t})`}});var Fe=T(xe=>{"use strict";Object.defineProperty(xe,"__esModule",{value:!0});xe.checkStrictMode=xe.getErrorPath=xe.Type=xe.useFunc=xe.setEvaluated=xe.evaluatedPropsToName=xe.mergeEvaluated=xe.eachItem=xe.unescapeJsonPointer=xe.escapeJsonPointer=xe.escapeFragment=xe.unescapeFragment=xe.schemaRefOrVal=xe.schemaHasRulesButRef=xe.schemaHasRules=xe.checkUnknownRules=xe.alwaysValidSchema=xe.toHash=void 0;var at=Oe(),TMe=L_();function gMe(t){let e={};for(let n of t)e[n]=!0;return e}xe.toHash=gMe;function SMe(t,e){return typeof e=="boolean"?e:Object.keys(e).length===0?!0:(kee(t,e),!Uee(e,t.self.RULES.all))}xe.alwaysValidSchema=SMe;function kee(t,e=t.schema){let{opts:n,self:r}=t;if(!n.strictSchema||typeof e=="boolean")return;let o=r.RULES.keywords;for(let s in e)o[s]||Vee(t,`unknown keyword: "${s}"`)}xe.checkUnknownRules=kee;function Uee(t,e){if(typeof t=="boolean")return!t;for(let n in t)if(e[n])return!0;return!1}xe.schemaHasRules=Uee;function AMe(t,e){if(typeof t=="boolean")return!t;for(let n in t)if(n!=="$ref"&&e.all[n])return!0;return!1}xe.schemaHasRulesButRef=AMe;function RMe({topSchemaRef:t,schemaPath:e},n,r,o){if(!o){if(typeof n=="number"||typeof n=="boolean")return n;if(typeof n=="string")return(0,at._)`${n}`}return(0,at._)`${t}${e}${(0,at.getProperty)(r)}`}xe.schemaRefOrVal=RMe;function yMe(t){return $ee(decodeURIComponent(t))}xe.unescapeFragment=yMe;function bMe(t){return encodeURIComponent(_0(t))}xe.escapeFragment=bMe;function _0(t){return typeof t=="number"?`${t}`:t.replace(/~/g,"~0").replace(/\//g,"~1")}xe.escapeJsonPointer=_0;function $ee(t){return t.replace(/~1/g,"/").replace(/~0/g,"~")}xe.unescapeJsonPointer=$ee;function NMe(t,e){if(Array.isArray(t))for(let n of t)e(n);else e(t)}xe.eachItem=NMe;function Lee({mergeNames:t,mergeToName:e,mergeValues:n,resultToName:r}){return(o,s,i,a)=>{let c=i===void 0?s:i instanceof at.Name?(s instanceof at.Name?t(o,s,i):e(o,s,i),i):s instanceof at.Name?(e(o,i,s),s):n(s,i);return a===at.Name&&!(c instanceof at.Name)?r(o,c):c}}xe.mergeEvaluated={props:Lee({mergeNames:(t,e,n)=>t.if((0,at._)`${n} !== true && ${e} !== undefined`,()=>{t.if((0,at._)`${e} === true`,()=>t.assign(n,!0),()=>t.assign(n,(0,at._)`${n} || {}`).code((0,at._)`Object.assign(${n}, ${e})`))}),mergeToName:(t,e,n)=>t.if((0,at._)`${n} !== true`,()=>{e===!0?t.assign(n,!0):(t.assign(n,(0,at._)`${n} || {}`),h0(t,n,e))}),mergeValues:(t,e)=>t===!0?!0:{...t,...e},resultToName:Gee}),items:Lee({mergeNames:(t,e,n)=>t.if((0,at._)`${n} !== true && ${e} !== undefined`,()=>t.assign(n,(0,at._)`${e} === true ? true : ${n} > ${e} ? ${n} : ${e}`)),mergeToName:(t,e,n)=>t.if((0,at._)`${n} !== true`,()=>t.assign(n,e===!0?!0:(0,at._)`${n} > ${e} ? ${n} : ${e}`)),mergeValues:(t,e)=>t===!0?!0:Math.max(t,e),resultToName:(t,e)=>t.var("items",e)})};function Gee(t,e){if(e===!0)return t.var("props",!0);let n=t.var("props",(0,at._)`{}`);return e!==void 0&&h0(t,n,e),n}xe.evaluatedPropsToName=Gee;function h0(t,e,n){Object.keys(n).forEach(r=>t.assign((0,at._)`${e}${(0,at.getProperty)(r)}`,!0))}xe.setEvaluated=h0;var Dee={};function OMe(t,e){return t.scopeValue("func",{ref:e,code:Dee[e.code]||(Dee[e.code]=new TMe._Code(e.code))})}xe.useFunc=OMe;var m0;(function(t){t[t.Num=0]="Num",t[t.Str=1]="Str"})(m0||(xe.Type=m0={}));function IMe(t,e,n){if(t instanceof at.Name){let r=e===m0.Num;return n?r?(0,at._)`"[" + ${t} + "]"`:(0,at._)`"['" + ${t} + "']"`:r?(0,at._)`"/" + ${t}`:(0,at._)`"/" + ${t}.replace(/~/g, "~0").replace(/\\//g, "~1")`}return n?(0,at.getProperty)(t).toString():"/"+_0(t)}xe.getErrorPath=IMe;function Vee(t,e,n=t.opts.strictSchema){if(n){if(e=`strict mode: ${e}`,n===!0)throw new Error(e);t.self.logger.warn(e)}}xe.checkStrictMode=Vee});var Gi=T(E0=>{"use strict";Object.defineProperty(E0,"__esModule",{value:!0});var er=Oe(),vMe={data:new er.Name("data"),valCxt:new er.Name("valCxt"),instancePath:new er.Name("instancePath"),parentData:new er.Name("parentData"),parentDataProperty:new er.Name("parentDataProperty"),rootData:new er.Name("rootData"),dynamicAnchors:new er.Name("dynamicAnchors"),vErrors:new er.Name("vErrors"),errors:new er.Name("errors"),this:new er.Name("this"),self:new er.Name("self"),scope:new er.Name("scope"),json:new er.Name("json"),jsonPos:new er.Name("jsonPos"),jsonLen:new er.Name("jsonLen"),jsonPart:new er.Name("jsonPart")};E0.default=vMe});var V_=T(tr=>{"use strict";Object.defineProperty(tr,"__esModule",{value:!0});tr.extendErrors=tr.resetErrorsCount=tr.reportExtraError=tr.reportError=tr.keyword$DataError=tr.keywordError=void 0;var Ve=Oe(),My=Fe(),hr=Gi();tr.keywordError={message:({keyword:t})=>(0,Ve.str)`must pass "${t}" keyword validation`};tr.keyword$DataError={message:({keyword:t,schemaType:e})=>e?(0,Ve.str)`"${t}" keyword must be ${e} ($data)`:(0,Ve.str)`"${t}" keyword is invalid ($data)`};function xMe(t,e=tr.keywordError,n,r){let{it:o}=t,{gen:s,compositeRule:i,allErrors:a}=o,c=Hee(t,e,n);r??(i||a)?Bee(s,c):jee(o,(0,Ve._)`[${c}]`)}tr.reportError=xMe;function PMe(t,e=tr.keywordError,n){let{it:r}=t,{gen:o,compositeRule:s,allErrors:i}=r,a=Hee(t,e,n);Bee(o,a),s||i||jee(r,hr.default.vErrors)}tr.reportExtraError=PMe;function CMe(t,e){t.assign(hr.default.errors,e),t.if((0,Ve._)`${hr.default.vErrors} !== null`,()=>t.if(e,()=>t.assign((0,Ve._)`${hr.default.vErrors}.length`,e),()=>t.assign(hr.default.vErrors,null)))}tr.resetErrorsCount=CMe;function MMe({gen:t,keyword:e,schemaValue:n,data:r,errsCount:o,it:s}){if(o===void 0)throw new Error("ajv implementation error");let i=t.name("err");t.forRange("i",o,hr.default.errors,a=>{t.const(i,(0,Ve._)`${hr.default.vErrors}[${a}]`),t.if((0,Ve._)`${i}.instancePath === undefined`,()=>t.assign((0,Ve._)`${i}.instancePath`,(0,Ve.strConcat)(hr.default.instancePath,s.errorPath))),t.assign((0,Ve._)`${i}.schemaPath`,(0,Ve.str)`${s.errSchemaPath}/${e}`),s.opts.verbose&&(t.assign((0,Ve._)`${i}.schema`,n),t.assign((0,Ve._)`${i}.data`,r))})}tr.extendErrors=MMe;function Bee(t,e){let n=t.const("err",e);t.if((0,Ve._)`${hr.default.vErrors} === null`,()=>t.assign(hr.default.vErrors,(0,Ve._)`[${n}]`),(0,Ve._)`${hr.default.vErrors}.push(${n})`),t.code((0,Ve._)`${hr.default.errors}++`)}function jee(t,e){let{gen:n,validateName:r,schemaEnv:o}=t;o.$async?n.throw((0,Ve._)`new ${t.ValidationError}(${e})`):(n.assign((0,Ve._)`${r}.errors`,e),n.return(!1))}var $u={keyword:new Ve.Name("keyword"),schemaPath:new Ve.Name("schemaPath"),params:new Ve.Name("params"),propertyName:new Ve.Name("propertyName"),message:new Ve.Name("message"),schema:new Ve.Name("schema"),parentSchema:new Ve.Name("parentSchema")};function Hee(t,e,n){let{createErrors:r}=t.it;return r===!1?(0,Ve._)`{}`:wMe(t,e,n)}function wMe(t,e,n={}){let{gen:r,it:o}=t,s=[LMe(o,n),DMe(t,n)];return kMe(t,e,s),r.object(...s)}function LMe({errorPath:t},{instancePath:e}){let n=e?(0,Ve.str)`${t}${(0,My.getErrorPath)(e,My.Type.Str)}`:t;return[hr.default.instancePath,(0,Ve.strConcat)(hr.default.instancePath,n)]}function DMe({keyword:t,it:{errSchemaPath:e}},{schemaPath:n,parentSchema:r}){let o=r?e:(0,Ve.str)`${e}/${t}`;return n&&(o=(0,Ve.str)`${o}${(0,My.getErrorPath)(n,My.Type.Str)}`),[$u.schemaPath,o]}function kMe(t,{params:e,message:n},r){let{keyword:o,data:s,schemaValue:i,it:a}=t,{opts:c,propertyName:u,topSchemaRef:p,schemaPath:l}=a;r.push([$u.keyword,o],[$u.params,typeof e=="function"?e(t):e||(0,Ve._)`{}`]),c.messages&&r.push([$u.message,typeof n=="function"?n(t):n]),c.verbose&&r.push([$u.schema,i],[$u.parentSchema,(0,Ve._)`${p}${l}`],[hr.default.data,s]),u&&r.push([$u.propertyName,u])}});var qee=T(Ed=>{"use strict";Object.defineProperty(Ed,"__esModule",{value:!0});Ed.boolOrEmptySchema=Ed.topBoolOrEmptySchema=void 0;var UMe=V_(),$Me=Oe(),GMe=Gi(),VMe={message:"boolean schema is false"};function BMe(t){let{gen:e,schema:n,validateName:r}=t;n===!1?Fee(t,!1):typeof n=="object"&&n.$async===!0?e.return(GMe.default.data):(e.assign((0,$Me._)`${r}.errors`,null),e.return(!0))}Ed.topBoolOrEmptySchema=BMe;function jMe(t,e){let{gen:n,schema:r}=t;r===!1?(n.var(e,!1),Fee(t)):n.var(e,!0)}Ed.boolOrEmptySchema=jMe;function Fee(t,e){let{gen:n,data:r}=t,o={gen:n,keyword:"false schema",data:r,schema:!1,schemaCode:!1,schemaValue:!1,params:{},it:t};(0,UMe.reportError)(o,VMe,void 0,e)}});var T0=T(Td=>{"use strict";Object.defineProperty(Td,"__esModule",{value:!0});Td.getRules=Td.isJSONType=void 0;var HMe=["string","number","integer","boolean","null","object","array"],FMe=new Set(HMe);function qMe(t){return typeof t=="string"&&FMe.has(t)}Td.isJSONType=qMe;function zMe(){let t={number:{type:"number",rules:[]},string:{type:"string",rules:[]},array:{type:"array",rules:[]},object:{type:"object",rules:[]}};return{types:{...t,integer:!0,boolean:!0,null:!0},rules:[{rules:[]},t.number,t.string,t.array,t.object],post:{rules:[]},all:{},keywords:{}}}Td.getRules=zMe});var g0=T(sc=>{"use strict";Object.defineProperty(sc,"__esModule",{value:!0});sc.shouldUseRule=sc.shouldUseGroup=sc.schemaHasRulesForType=void 0;function YMe({schema:t,self:e},n){let r=e.RULES.types[n];return r&&r!==!0&&zee(t,r)}sc.schemaHasRulesForType=YMe;function zee(t,e){return e.rules.some(n=>Yee(t,n))}sc.shouldUseGroup=zee;function Yee(t,e){var n;return t[e.keyword]!==void 0||((n=e.definition.implements)===null||n===void 0?void 0:n.some(r=>t[r]!==void 0))}sc.shouldUseRule=Yee});var B_=T(nr=>{"use strict";Object.defineProperty(nr,"__esModule",{value:!0});nr.reportTypeError=nr.checkDataTypes=nr.checkDataType=nr.coerceAndCheckDataType=nr.getJSONTypes=nr.getSchemaTypes=nr.DataType=void 0;var WMe=T0(),KMe=g0(),ZMe=V_(),be=Oe(),Wee=Fe(),gd;(function(t){t[t.Correct=0]="Correct",t[t.Wrong=1]="Wrong"})(gd||(nr.DataType=gd={}));function JMe(t){let e=Kee(t.type);if(e.includes("null")){if(t.nullable===!1)throw new Error("type: null contradicts nullable: false")}else{if(!e.length&&t.nullable!==void 0)throw new Error('"nullable" cannot be used without "type"');t.nullable===!0&&e.push("null")}return e}nr.getSchemaTypes=JMe;function Kee(t){let e=Array.isArray(t)?t:t?[t]:[];if(e.every(WMe.isJSONType))return e;throw new Error("type must be JSONType or JSONType[]: "+e.join(","))}nr.getJSONTypes=Kee;function QMe(t,e){let{gen:n,data:r,opts:o}=t,s=XMe(e,o.coerceTypes),i=e.length>0&&!(s.length===0&&e.length===1&&(0,KMe.schemaHasRulesForType)(t,e[0]));if(i){let a=A0(e,r,o.strictNumbers,gd.Wrong);n.if(a,()=>{s.length?ewe(t,e,s):R0(t)})}return i}nr.coerceAndCheckDataType=QMe;var Zee=new Set(["string","number","integer","boolean","null"]);function XMe(t,e){return e?t.filter(n=>Zee.has(n)||e==="array"&&n==="array"):[]}function ewe(t,e,n){let{gen:r,data:o,opts:s}=t,i=r.let("dataType",(0,be._)`typeof ${o}`),a=r.let("coerced",(0,be._)`undefined`);s.coerceTypes==="array"&&r.if((0,be._)`${i} == 'object' && Array.isArray(${o}) && ${o}.length == 1`,()=>r.assign(o,(0,be._)`${o}[0]`).assign(i,(0,be._)`typeof ${o}`).if(A0(e,o,s.strictNumbers),()=>r.assign(a,o))),r.if((0,be._)`${a} !== undefined`);for(let u of n)(Zee.has(u)||u==="array"&&s.coerceTypes==="array")&&c(u);r.else(),R0(t),r.endIf(),r.if((0,be._)`${a} !== undefined`,()=>{r.assign(o,a),twe(t,a)});function c(u){switch(u){case"string":r.elseIf((0,be._)`${i} == "number" || ${i} == "boolean"`).assign(a,(0,be._)`"" + ${o}`).elseIf((0,be._)`${o} === null`).assign(a,(0,be._)`""`);return;case"number":r.elseIf((0,be._)`${i} == "boolean" || ${o} === null
              || (${i} == "string" && ${o} && ${o} == +${o})`).assign(a,(0,be._)`+${o}`);return;case"integer":r.elseIf((0,be._)`${i} === "boolean" || ${o} === null
              || (${i} === "string" && ${o} && ${o} == +${o} && !(${o} % 1))`).assign(a,(0,be._)`+${o}`);return;case"boolean":r.elseIf((0,be._)`${o} === "false" || ${o} === 0 || ${o} === null`).assign(a,!1).elseIf((0,be._)`${o} === "true" || ${o} === 1`).assign(a,!0);return;case"null":r.elseIf((0,be._)`${o} === "" || ${o} === 0 || ${o} === false`),r.assign(a,null);return;case"array":r.elseIf((0,be._)`${i} === "string" || ${i} === "number"
              || ${i} === "boolean" || ${o} === null`).assign(a,(0,be._)`[${o}]`)}}}function twe({gen:t,parentData:e,parentDataProperty:n},r){t.if((0,be._)`${e} !== undefined`,()=>t.assign((0,be._)`${e}[${n}]`,r))}function S0(t,e,n,r=gd.Correct){let o=r===gd.Correct?be.operators.EQ:be.operators.NEQ,s;switch(t){case"null":return(0,be._)`${e} ${o} null`;case"array":s=(0,be._)`Array.isArray(${e})`;break;case"object":s=(0,be._)`${e} && typeof ${e} == "object" && !Array.isArray(${e})`;break;case"integer":s=i((0,be._)`!(${e} % 1) && !isNaN(${e})`);break;case"number":s=i();break;default:return(0,be._)`typeof ${e} ${o} ${t}`}return r===gd.Correct?s:(0,be.not)(s);function i(a=be.nil){return(0,be.and)((0,be._)`typeof ${e} == "number"`,a,n?(0,be._)`isFinite(${e})`:be.nil)}}nr.checkDataType=S0;function A0(t,e,n,r){if(t.length===1)return S0(t[0],e,n,r);let o,s=(0,Wee.toHash)(t);if(s.array&&s.object){let i=(0,be._)`typeof ${e} != "object"`;o=s.null?i:(0,be._)`!${e} || ${i}`,delete s.null,delete s.array,delete s.object}else o=be.nil;s.number&&delete s.integer;for(let i in s)o=(0,be.and)(o,S0(i,e,n,r));return o}nr.checkDataTypes=A0;var nwe={message:({schema:t})=>`must be ${t}`,params:({schema:t,schemaValue:e})=>typeof t=="string"?(0,be._)`{type: ${t}}`:(0,be._)`{type: ${e}}`};function R0(t){let e=rwe(t);(0,ZMe.reportError)(e,nwe)}nr.reportTypeError=R0;function rwe(t){let{gen:e,data:n,schema:r}=t,o=(0,Wee.schemaRefOrVal)(t,r,"type");return{gen:e,keyword:"type",data:n,schema:r.type,schemaCode:o,schemaValue:o,parentSchema:r,params:{},it:t}}});var Qee=T(wy=>{"use strict";Object.defineProperty(wy,"__esModule",{value:!0});wy.assignDefaults=void 0;var Sd=Oe(),owe=Fe();function swe(t,e){let{properties:n,items:r}=t.schema;if(e==="object"&&n)for(let o in n)Jee(t,o,n[o].default);else e==="array"&&Array.isArray(r)&&r.forEach((o,s)=>Jee(t,s,o.default))}wy.assignDefaults=swe;function Jee(t,e,n){let{gen:r,compositeRule:o,data:s,opts:i}=t;if(n===void 0)return;let a=(0,Sd._)`${s}${(0,Sd.getProperty)(e)}`;if(o){(0,owe.checkStrictMode)(t,`default is ignored for: ${a}`);return}let c=(0,Sd._)`${a} === undefined`;i.useDefaults==="empty"&&(c=(0,Sd._)`${c} || ${a} === null || ${a} === ""`),r.if(c,(0,Sd._)`${a} = ${(0,Sd.stringify)(n)}`)}});var Go=T(st=>{"use strict";Object.defineProperty(st,"__esModule",{value:!0});st.validateUnion=st.validateArray=st.usePattern=st.callValidateCode=st.schemaProperties=st.allSchemaProperties=st.noPropertyInData=st.propertyInData=st.isOwnProperty=st.hasPropFunc=st.reportMissingProp=st.checkMissingProp=st.checkReportMissingProp=void 0;var _t=Oe(),y0=Fe(),ic=Gi(),iwe=Fe();function awe(t,e){let{gen:n,data:r,it:o}=t;n.if(N0(n,r,e,o.opts.ownProperties),()=>{t.setParams({missingProperty:(0,_t._)`${e}`},!0),t.error()})}st.checkReportMissingProp=awe;function cwe({gen:t,data:e,it:{opts:n}},r,o){return(0,_t.or)(...r.map(s=>(0,_t.and)(N0(t,e,s,n.ownProperties),(0,_t._)`${o} = ${s}`)))}st.checkMissingProp=cwe;function uwe(t,e){t.setParams({missingProperty:e},!0),t.error()}st.reportMissingProp=uwe;function Xee(t){return t.scopeValue("func",{ref:Object.prototype.hasOwnProperty,code:(0,_t._)`Object.prototype.hasOwnProperty`})}st.hasPropFunc=Xee;function b0(t,e,n){return(0,_t._)`${Xee(t)}.call(${e}, ${n})`}st.isOwnProperty=b0;function pwe(t,e,n,r){let o=(0,_t._)`${e}${(0,_t.getProperty)(n)} !== undefined`;return r?(0,_t._)`${o} && ${b0(t,e,n)}`:o}st.propertyInData=pwe;function N0(t,e,n,r){let o=(0,_t._)`${e}${(0,_t.getProperty)(n)} === undefined`;return r?(0,_t.or)(o,(0,_t.not)(b0(t,e,n))):o}st.noPropertyInData=N0;function ete(t){return t?Object.keys(t).filter(e=>e!=="__proto__"):[]}st.allSchemaProperties=ete;function lwe(t,e){return ete(e).filter(n=>!(0,y0.alwaysValidSchema)(t,e[n]))}st.schemaProperties=lwe;function dwe({schemaCode:t,data:e,it:{gen:n,topSchemaRef:r,schemaPath:o,errorPath:s},it:i},a,c,u){let p=u?(0,_t._)`${t}, ${e}, ${r}${o}`:e,l=[[ic.default.instancePath,(0,_t.strConcat)(ic.default.instancePath,s)],[ic.default.parentData,i.parentData],[ic.default.parentDataProperty,i.parentDataProperty],[ic.default.rootData,ic.default.rootData]];i.opts.dynamicRef&&l.push([ic.default.dynamicAnchors,ic.default.dynamicAnchors]);let d=(0,_t._)`${p}, ${n.object(...l)}`;return c!==_t.nil?(0,_t._)`${a}.call(${c}, ${d})`:(0,_t._)`${a}(${d})`}st.callValidateCode=dwe;var fwe=(0,_t._)`new RegExp`;function mwe({gen:t,it:{opts:e}},n){let r=e.unicodeRegExp?"u":"",{regExp:o}=e.code,s=o(n,r);return t.scopeValue("pattern",{key:s.toString(),ref:s,code:(0,_t._)`${o.code==="new RegExp"?fwe:(0,iwe.useFunc)(t,o)}(${n}, ${r})`})}st.usePattern=mwe;function _we(t){let{gen:e,data:n,keyword:r,it:o}=t,s=e.name("valid");if(o.allErrors){let a=e.let("valid",!0);return i(()=>e.assign(a,!1)),a}return e.var(s,!0),i(()=>e.break()),s;function i(a){let c=e.const("len",(0,_t._)`${n}.length`);e.forRange("i",0,c,u=>{t.subschema({keyword:r,dataProp:u,dataPropType:y0.Type.Num},s),e.if((0,_t.not)(s),a)})}}st.validateArray=_we;function hwe(t){let{gen:e,schema:n,keyword:r,it:o}=t;if(!Array.isArray(n))throw new Error("ajv implementation error");if(n.some(c=>(0,y0.alwaysValidSchema)(o,c))&&!o.opts.unevaluated)return;let i=e.let("valid",!1),a=e.name("_valid");e.block(()=>n.forEach((c,u)=>{let p=t.subschema({keyword:r,schemaProp:u,compositeRule:!0},a);e.assign(i,(0,_t._)`${i} || ${a}`),t.mergeValidEvaluated(p,a)||e.if((0,_t.not)(i))})),t.result(i,()=>t.reset(),()=>t.error(!0))}st.validateUnion=hwe});var rte=T(Zs=>{"use strict";Object.defineProperty(Zs,"__esModule",{value:!0});Zs.validateKeywordUsage=Zs.validSchemaType=Zs.funcKeywordCode=Zs.macroKeywordCode=void 0;var Er=Oe(),Gu=Gi(),Ewe=Go(),Twe=V_();function gwe(t,e){let{gen:n,keyword:r,schema:o,parentSchema:s,it:i}=t,a=e.macro.call(i.self,o,s,i),c=nte(n,r,a);i.opts.validateSchema!==!1&&i.self.validateSchema(a,!0);let u=n.name("valid");t.subschema({schema:a,schemaPath:Er.nil,errSchemaPath:`${i.errSchemaPath}/${r}`,topSchemaRef:c,compositeRule:!0},u),t.pass(u,()=>t.error(!0))}Zs.macroKeywordCode=gwe;function Swe(t,e){var n;let{gen:r,keyword:o,schema:s,parentSchema:i,$data:a,it:c}=t;Rwe(c,e);let u=!a&&e.compile?e.compile.call(c.self,s,i,c):e.validate,p=nte(r,o,u),l=r.let("valid");t.block$data(l,d),t.ok((n=e.valid)!==null&&n!==void 0?n:l);function d(){if(e.errors===!1)h(),e.modifying&&tte(t),E(()=>t.error());else{let A=e.async?f():m();e.modifying&&tte(t),E(()=>Awe(t,A))}}function f(){let A=r.let("ruleErrs",null);return r.try(()=>h((0,Er._)`await `),R=>r.assign(l,!1).if((0,Er._)`${R} instanceof ${c.ValidationError}`,()=>r.assign(A,(0,Er._)`${R}.errors`),()=>r.throw(R))),A}function m(){let A=(0,Er._)`${p}.errors`;return r.assign(A,null),h(Er.nil),A}function h(A=e.async?(0,Er._)`await `:Er.nil){let R=c.opts.passContext?Gu.default.this:Gu.default.self,y=!("compile"in e&&!a||e.schema===!1);r.assign(l,(0,Er._)`${A}${(0,Ewe.callValidateCode)(t,p,R,y)}`,e.modifying)}function E(A){var R;r.if((0,Er.not)((R=e.valid)!==null&&R!==void 0?R:l),A)}}Zs.funcKeywordCode=Swe;function tte(t){let{gen:e,data:n,it:r}=t;e.if(r.parentData,()=>e.assign(n,(0,Er._)`${r.parentData}[${r.parentDataProperty}]`))}function Awe(t,e){let{gen:n}=t;n.if((0,Er._)`Array.isArray(${e})`,()=>{n.assign(Gu.default.vErrors,(0,Er._)`${Gu.default.vErrors} === null ? ${e} : ${Gu.default.vErrors}.concat(${e})`).assign(Gu.default.errors,(0,Er._)`${Gu.default.vErrors}.length`),(0,Twe.extendErrors)(t)},()=>t.error())}function Rwe({schemaEnv:t},e){if(e.async&&!t.$async)throw new Error("async keyword in sync schema")}function nte(t,e,n){if(n===void 0)throw new Error(`keyword "${e}" failed to compile`);return t.scopeValue("keyword",typeof n=="function"?{ref:n}:{ref:n,code:(0,Er.stringify)(n)})}function ywe(t,e,n=!1){return!e.length||e.some(r=>r==="array"?Array.isArray(t):r==="object"?t&&typeof t=="object"&&!Array.isArray(t):typeof t==r||n&&typeof t>"u")}Zs.validSchemaType=ywe;function bwe({schema:t,opts:e,self:n,errSchemaPath:r},o,s){if(Array.isArray(o.keyword)?!o.keyword.includes(s):o.keyword!==s)throw new Error("ajv implementation error");let i=o.dependencies;if(i?.some(a=>!Object.prototype.hasOwnProperty.call(t,a)))throw new Error(`parent schema must have dependencies of ${s}: ${i.join(",")}`);if(o.validateSchema&&!o.validateSchema(t[s])){let c=`keyword "${s}" value is invalid at path "${r}": `+n.errorsText(o.validateSchema.errors);if(e.validateSchema==="log")n.logger.error(c);else throw new Error(c)}}Zs.validateKeywordUsage=bwe});var ste=T(ac=>{"use strict";Object.defineProperty(ac,"__esModule",{value:!0});ac.extendSubschemaMode=ac.extendSubschemaData=ac.getSubschema=void 0;var Js=Oe(),ote=Fe();function Nwe(t,{keyword:e,schemaProp:n,schema:r,schemaPath:o,errSchemaPath:s,topSchemaRef:i}){if(e!==void 0&&r!==void 0)throw new Error('both "keyword" and "schema" passed, only one allowed');if(e!==void 0){let a=t.schema[e];return n===void 0?{schema:a,schemaPath:(0,Js._)`${t.schemaPath}${(0,Js.getProperty)(e)}`,errSchemaPath:`${t.errSchemaPath}/${e}`}:{schema:a[n],schemaPath:(0,Js._)`${t.schemaPath}${(0,Js.getProperty)(e)}${(0,Js.getProperty)(n)}`,errSchemaPath:`${t.errSchemaPath}/${e}/${(0,ote.escapeFragment)(n)}`}}if(r!==void 0){if(o===void 0||s===void 0||i===void 0)throw new Error('"schemaPath", "errSchemaPath" and "topSchemaRef" are required with "schema"');return{schema:r,schemaPath:o,topSchemaRef:i,errSchemaPath:s}}throw new Error('either "keyword" or "schema" must be passed')}ac.getSubschema=Nwe;function Owe(t,e,{dataProp:n,dataPropType:r,data:o,dataTypes:s,propertyName:i}){if(o!==void 0&&n!==void 0)throw new Error('both "data" and "dataProp" passed, only one allowed');let{gen:a}=e;if(n!==void 0){let{errorPath:u,dataPathArr:p,opts:l}=e,d=a.let("data",(0,Js._)`${e.data}${(0,Js.getProperty)(n)}`,!0);c(d),t.errorPath=(0,Js.str)`${u}${(0,ote.getErrorPath)(n,r,l.jsPropertySyntax)}`,t.parentDataProperty=(0,Js._)`${n}`,t.dataPathArr=[...p,t.parentDataProperty]}if(o!==void 0){let u=o instanceof Js.Name?o:a.let("data",o,!0);c(u),i!==void 0&&(t.propertyName=i)}s&&(t.dataTypes=s);function c(u){t.data=u,t.dataLevel=e.dataLevel+1,t.dataTypes=[],e.definedProperties=new Set,t.parentData=e.data,t.dataNames=[...e.dataNames,u]}}ac.extendSubschemaData=Owe;function Iwe(t,{jtdDiscriminator:e,jtdMetadata:n,compositeRule:r,createErrors:o,allErrors:s}){r!==void 0&&(t.compositeRule=r),o!==void 0&&(t.createErrors=o),s!==void 0&&(t.allErrors=s),t.jtdDiscriminator=e,t.jtdMetadata=n}ac.extendSubschemaMode=Iwe});var O0=T((Aat,ite)=>{"use strict";ite.exports=function t(e,n){if(e===n)return!0;if(e&&n&&typeof e=="object"&&typeof n=="object"){if(e.constructor!==n.constructor)return!1;var r,o,s;if(Array.isArray(e)){if(r=e.length,r!=n.length)return!1;for(o=r;o--!==0;)if(!t(e[o],n[o]))return!1;return!0}if(e.constructor===RegExp)return e.source===n.source&&e.flags===n.flags;if(e.valueOf!==Object.prototype.valueOf)return e.valueOf()===n.valueOf();if(e.toString!==Object.prototype.toString)return e.toString()===n.toString();if(s=Object.keys(e),r=s.length,r!==Object.keys(n).length)return!1;for(o=r;o--!==0;)if(!Object.prototype.hasOwnProperty.call(n,s[o]))return!1;for(o=r;o--!==0;){var i=s[o];if(!t(e[i],n[i]))return!1}return!0}return e!==e&&n!==n}});var cte=T((Rat,ate)=>{"use strict";var cc=ate.exports=function(t,e,n){typeof e=="function"&&(n=e,e={}),n=e.cb||n;var r=typeof n=="function"?n:n.pre||function(){},o=n.post||function(){};Ly(e,r,o,t,"",t)};cc.keywords={additionalItems:!0,items:!0,contains:!0,additionalProperties:!0,propertyNames:!0,not:!0,if:!0,then:!0,else:!0};cc.arrayKeywords={items:!0,allOf:!0,anyOf:!0,oneOf:!0};cc.propsKeywords={$defs:!0,definitions:!0,properties:!0,patternProperties:!0,dependencies:!0};cc.skipKeywords={default:!0,enum:!0,const:!0,required:!0,maximum:!0,minimum:!0,exclusiveMaximum:!0,exclusiveMinimum:!0,multipleOf:!0,maxLength:!0,minLength:!0,pattern:!0,format:!0,maxItems:!0,minItems:!0,uniqueItems:!0,maxProperties:!0,minProperties:!0};function Ly(t,e,n,r,o,s,i,a,c,u){if(r&&typeof r=="object"&&!Array.isArray(r)){e(r,o,s,i,a,c,u);for(var p in r){var l=r[p];if(Array.isArray(l)){if(p in cc.arrayKeywords)for(var d=0;d<l.length;d++)Ly(t,e,n,l[d],o+"/"+p+"/"+d,s,o,p,r,d)}else if(p in cc.propsKeywords){if(l&&typeof l=="object")for(var f in l)Ly(t,e,n,l[f],o+"/"+p+"/"+vwe(f),s,o,p,r,f)}else(p in cc.keywords||t.allKeys&&!(p in cc.skipKeywords))&&Ly(t,e,n,l,o+"/"+p,s,o,p,r)}n(r,o,s,i,a,c,u)}}function vwe(t){return t.replace(/~/g,"~0").replace(/\//g,"~1")}});var j_=T($r=>{"use strict";Object.defineProperty($r,"__esModule",{value:!0});$r.getSchemaRefs=$r.resolveUrl=$r.normalizeId=$r._getFullPath=$r.getFullPath=$r.inlineRef=void 0;var xwe=Fe(),Pwe=O0(),Cwe=cte(),Mwe=new Set(["type","format","pattern","maxLength","minLength","maxProperties","minProperties","maxItems","minItems","maximum","minimum","uniqueItems","multipleOf","required","enum","const"]);function wwe(t,e=!0){return typeof t=="boolean"?!0:e===!0?!I0(t):e?ute(t)<=e:!1}$r.inlineRef=wwe;var Lwe=new Set(["$ref","$recursiveRef","$recursiveAnchor","$dynamicRef","$dynamicAnchor"]);function I0(t){for(let e in t){if(Lwe.has(e))return!0;let n=t[e];if(Array.isArray(n)&&n.some(I0)||typeof n=="object"&&I0(n))return!0}return!1}function ute(t){let e=0;for(let n in t){if(n==="$ref")return 1/0;if(e++,!Mwe.has(n)&&(typeof t[n]=="object"&&(0,xwe.eachItem)(t[n],r=>e+=ute(r)),e===1/0))return 1/0}return e}function pte(t,e="",n){n!==!1&&(e=Ad(e));let r=t.parse(e);return lte(t,r)}$r.getFullPath=pte;function lte(t,e){return t.serialize(e).split("#")[0]+"#"}$r._getFullPath=lte;var Dwe=/#\/?$/;function Ad(t){return t?t.replace(Dwe,""):""}$r.normalizeId=Ad;function kwe(t,e,n){return n=Ad(n),t.resolve(e,n)}$r.resolveUrl=kwe;var Uwe=/^[a-z_][-a-z0-9._]*$/i;function $we(t,e){if(typeof t=="boolean")return{};let{schemaId:n,uriResolver:r}=this.opts,o=Ad(t[n]||e),s={"":o},i=pte(r,o,!1),a={},c=new Set;return Cwe(t,{allKeys:!0},(l,d,f,m)=>{if(m===void 0)return;let h=i+d,E=s[m];typeof l[n]=="string"&&(E=A.call(this,l[n])),R.call(this,l.$anchor),R.call(this,l.$dynamicAnchor),s[d]=E;function A(y){let O=this.opts.uriResolver.resolve;if(y=Ad(E?O(E,y):y),c.has(y))throw p(y);c.add(y);let P=this.refs[y];return typeof P=="string"&&(P=this.refs[P]),typeof P=="object"?u(l,P.schema,y):y!==Ad(h)&&(y[0]==="#"?(u(l,a[y],y),a[y]=l):this.refs[y]=h),y}function R(y){if(typeof y=="string"){if(!Uwe.test(y))throw new Error(`invalid anchor "${y}"`);A.call(this,`#${y}`)}}}),a;function u(l,d,f){if(d!==void 0&&!Pwe(l,d))throw p(f)}function p(l){return new Error(`reference "${l}" resolves to more than one schema`)}}$r.getSchemaRefs=$we});var q_=T(uc=>{"use strict";Object.defineProperty(uc,"__esModule",{value:!0});uc.getData=uc.KeywordCxt=uc.validateFunctionCode=void 0;var hte=qee(),dte=B_(),x0=g0(),Dy=B_(),Gwe=Qee(),F_=rte(),v0=ste(),te=Oe(),he=Gi(),Vwe=j_(),Vi=Fe(),H_=V_();function Bwe(t){if(gte(t)&&(Ste(t),Tte(t))){Fwe(t);return}Ete(t,()=>(0,hte.topBoolOrEmptySchema)(t))}uc.validateFunctionCode=Bwe;function Ete({gen:t,validateName:e,schema:n,schemaEnv:r,opts:o},s){o.code.es5?t.func(e,(0,te._)`${he.default.data}, ${he.default.valCxt}`,r.$async,()=>{t.code((0,te._)`"use strict"; ${fte(n,o)}`),Hwe(t,o),t.code(s)}):t.func(e,(0,te._)`${he.default.data}, ${jwe(o)}`,r.$async,()=>t.code(fte(n,o)).code(s))}function jwe(t){return(0,te._)`{${he.default.instancePath}="", ${he.default.parentData}, ${he.default.parentDataProperty}, ${he.default.rootData}=${he.default.data}${t.dynamicRef?(0,te._)`, ${he.default.dynamicAnchors}={}`:te.nil}}={}`}function Hwe(t,e){t.if(he.default.valCxt,()=>{t.var(he.default.instancePath,(0,te._)`${he.default.valCxt}.${he.default.instancePath}`),t.var(he.default.parentData,(0,te._)`${he.default.valCxt}.${he.default.parentData}`),t.var(he.default.parentDataProperty,(0,te._)`${he.default.valCxt}.${he.default.parentDataProperty}`),t.var(he.default.rootData,(0,te._)`${he.default.valCxt}.${he.default.rootData}`),e.dynamicRef&&t.var(he.default.dynamicAnchors,(0,te._)`${he.default.valCxt}.${he.default.dynamicAnchors}`)},()=>{t.var(he.default.instancePath,(0,te._)`""`),t.var(he.default.parentData,(0,te._)`undefined`),t.var(he.default.parentDataProperty,(0,te._)`undefined`),t.var(he.default.rootData,he.default.data),e.dynamicRef&&t.var(he.default.dynamicAnchors,(0,te._)`{}`)})}function Fwe(t){let{schema:e,opts:n,gen:r}=t;Ete(t,()=>{n.$comment&&e.$comment&&Rte(t),Kwe(t),r.let(he.default.vErrors,null),r.let(he.default.errors,0),n.unevaluated&&qwe(t),Ate(t),Qwe(t)})}function qwe(t){let{gen:e,validateName:n}=t;t.evaluated=e.const("evaluated",(0,te._)`${n}.evaluated`),e.if((0,te._)`${t.evaluated}.dynamicProps`,()=>e.assign((0,te._)`${t.evaluated}.props`,(0,te._)`undefined`)),e.if((0,te._)`${t.evaluated}.dynamicItems`,()=>e.assign((0,te._)`${t.evaluated}.items`,(0,te._)`undefined`))}function fte(t,e){let n=typeof t=="object"&&t[e.schemaId];return n&&(e.code.source||e.code.process)?(0,te._)`/*# sourceURL=${n} */`:te.nil}function zwe(t,e){if(gte(t)&&(Ste(t),Tte(t))){Ywe(t,e);return}(0,hte.boolOrEmptySchema)(t,e)}function Tte({schema:t,self:e}){if(typeof t=="boolean")return!t;for(let n in t)if(e.RULES.all[n])return!0;return!1}function gte(t){return typeof t.schema!="boolean"}function Ywe(t,e){let{schema:n,gen:r,opts:o}=t;o.$comment&&n.$comment&&Rte(t),Zwe(t),Jwe(t);let s=r.const("_errs",he.default.errors);Ate(t,s),r.var(e,(0,te._)`${s} === ${he.default.errors}`)}function Ste(t){(0,Vi.checkUnknownRules)(t),Wwe(t)}function Ate(t,e){if(t.opts.jtd)return mte(t,[],!1,e);let n=(0,dte.getSchemaTypes)(t.schema),r=(0,dte.coerceAndCheckDataType)(t,n);mte(t,n,!r,e)}function Wwe(t){let{schema:e,errSchemaPath:n,opts:r,self:o}=t;e.$ref&&r.ignoreKeywordsWithRef&&(0,Vi.schemaHasRulesButRef)(e,o.RULES)&&o.logger.warn(`$ref: keywords ignored in schema at path "${n}"`)}function Kwe(t){let{schema:e,opts:n}=t;e.default!==void 0&&n.useDefaults&&n.strictSchema&&(0,Vi.checkStrictMode)(t,"default is ignored in the schema root")}function Zwe(t){let e=t.schema[t.opts.schemaId];e&&(t.baseId=(0,Vwe.resolveUrl)(t.opts.uriResolver,t.baseId,e))}function Jwe(t){if(t.schema.$async&&!t.schemaEnv.$async)throw new Error("async schema in sync schema")}function Rte({gen:t,schemaEnv:e,schema:n,errSchemaPath:r,opts:o}){let s=n.$comment;if(o.$comment===!0)t.code((0,te._)`${he.default.self}.logger.log(${s})`);else if(typeof o.$comment=="function"){let i=(0,te.str)`${r}/$comment`,a=t.scopeValue("root",{ref:e.root});t.code((0,te._)`${he.default.self}.opts.$comment(${s}, ${i}, ${a}.schema)`)}}function Qwe(t){let{gen:e,schemaEnv:n,validateName:r,ValidationError:o,opts:s}=t;n.$async?e.if((0,te._)`${he.default.errors} === 0`,()=>e.return(he.default.data),()=>e.throw((0,te._)`new ${o}(${he.default.vErrors})`)):(e.assign((0,te._)`${r}.errors`,he.default.vErrors),s.unevaluated&&Xwe(t),e.return((0,te._)`${he.default.errors} === 0`))}function Xwe({gen:t,evaluated:e,props:n,items:r}){n instanceof te.Name&&t.assign((0,te._)`${e}.props`,n),r instanceof te.Name&&t.assign((0,te._)`${e}.items`,r)}function mte(t,e,n,r){let{gen:o,schema:s,data:i,allErrors:a,opts:c,self:u}=t,{RULES:p}=u;if(s.$ref&&(c.ignoreKeywordsWithRef||!(0,Vi.schemaHasRulesButRef)(s,p))){o.block(()=>bte(t,"$ref",p.all.$ref.definition));return}c.jtd||e0e(t,e),o.block(()=>{for(let d of p.rules)l(d);l(p.post)});function l(d){(0,x0.shouldUseGroup)(s,d)&&(d.type?(o.if((0,Dy.checkDataType)(d.type,i,c.strictNumbers)),_te(t,d),e.length===1&&e[0]===d.type&&n&&(o.else(),(0,Dy.reportTypeError)(t)),o.endIf()):_te(t,d),a||o.if((0,te._)`${he.default.errors} === ${r||0}`))}}function _te(t,e){let{gen:n,schema:r,opts:{useDefaults:o}}=t;o&&(0,Gwe.assignDefaults)(t,e.type),n.block(()=>{for(let s of e.rules)(0,x0.shouldUseRule)(r,s)&&bte(t,s.keyword,s.definition,e.type)})}function e0e(t,e){t.schemaEnv.meta||!t.opts.strictTypes||(t0e(t,e),t.opts.allowUnionTypes||n0e(t,e),r0e(t,t.dataTypes))}function t0e(t,e){if(e.length){if(!t.dataTypes.length){t.dataTypes=e;return}e.forEach(n=>{yte(t.dataTypes,n)||P0(t,`type "${n}" not allowed by context "${t.dataTypes.join(",")}"`)}),s0e(t,e)}}function n0e(t,e){e.length>1&&!(e.length===2&&e.includes("null"))&&P0(t,"use allowUnionTypes to allow union type keyword")}function r0e(t,e){let n=t.self.RULES.all;for(let r in n){let o=n[r];if(typeof o=="object"&&(0,x0.shouldUseRule)(t.schema,o)){let{type:s}=o.definition;s.length&&!s.some(i=>o0e(e,i))&&P0(t,`missing type "${s.join(",")}" for keyword "${r}"`)}}}function o0e(t,e){return t.includes(e)||e==="number"&&t.includes("integer")}function yte(t,e){return t.includes(e)||e==="integer"&&t.includes("number")}function s0e(t,e){let n=[];for(let r of t.dataTypes)yte(e,r)?n.push(r):e.includes("integer")&&r==="number"&&n.push("integer");t.dataTypes=n}function P0(t,e){let n=t.schemaEnv.baseId+t.errSchemaPath;e+=` at "${n}" (strictTypes)`,(0,Vi.checkStrictMode)(t,e,t.opts.strictTypes)}var ky=class{constructor(e,n,r){if((0,F_.validateKeywordUsage)(e,n,r),this.gen=e.gen,this.allErrors=e.allErrors,this.keyword=r,this.data=e.data,this.schema=e.schema[r],this.$data=n.$data&&e.opts.$data&&this.schema&&this.schema.$data,this.schemaValue=(0,Vi.schemaRefOrVal)(e,this.schema,r,this.$data),this.schemaType=n.schemaType,this.parentSchema=e.schema,this.params={},this.it=e,this.def=n,this.$data)this.schemaCode=e.gen.const("vSchema",Nte(this.$data,e));else if(this.schemaCode=this.schemaValue,!(0,F_.validSchemaType)(this.schema,n.schemaType,n.allowUndefined))throw new Error(`${r} value must be ${JSON.stringify(n.schemaType)}`);("code"in n?n.trackErrors:n.errors!==!1)&&(this.errsCount=e.gen.const("_errs",he.default.errors))}result(e,n,r){this.failResult((0,te.not)(e),n,r)}failResult(e,n,r){this.gen.if(e),r?r():this.error(),n?(this.gen.else(),n(),this.allErrors&&this.gen.endIf()):this.allErrors?this.gen.endIf():this.gen.else()}pass(e,n){this.failResult((0,te.not)(e),void 0,n)}fail(e){if(e===void 0){this.error(),this.allErrors||this.gen.if(!1);return}this.gen.if(e),this.error(),this.allErrors?this.gen.endIf():this.gen.else()}fail$data(e){if(!this.$data)return this.fail(e);let{schemaCode:n}=this;this.fail((0,te._)`${n} !== undefined && (${(0,te.or)(this.invalid$data(),e)})`)}error(e,n,r){if(n){this.setParams(n),this._error(e,r),this.setParams({});return}this._error(e,r)}_error(e,n){(e?H_.reportExtraError:H_.reportError)(this,this.def.error,n)}$dataError(){(0,H_.reportError)(this,this.def.$dataError||H_.keyword$DataError)}reset(){if(this.errsCount===void 0)throw new Error('add "trackErrors" to keyword definition');(0,H_.resetErrorsCount)(this.gen,this.errsCount)}ok(e){this.allErrors||this.gen.if(e)}setParams(e,n){n?Object.assign(this.params,e):this.params=e}block$data(e,n,r=te.nil){this.gen.block(()=>{this.check$data(e,r),n()})}check$data(e=te.nil,n=te.nil){if(!this.$data)return;let{gen:r,schemaCode:o,schemaType:s,def:i}=this;r.if((0,te.or)((0,te._)`${o} === undefined`,n)),e!==te.nil&&r.assign(e,!0),(s.length||i.validateSchema)&&(r.elseIf(this.invalid$data()),this.$dataError(),e!==te.nil&&r.assign(e,!1)),r.else()}invalid$data(){let{gen:e,schemaCode:n,schemaType:r,def:o,it:s}=this;return(0,te.or)(i(),a());function i(){if(r.length){if(!(n instanceof te.Name))throw new Error("ajv implementation error");let c=Array.isArray(r)?r:[r];return(0,te._)`${(0,Dy.checkDataTypes)(c,n,s.opts.strictNumbers,Dy.DataType.Wrong)}`}return te.nil}function a(){if(o.validateSchema){let c=e.scopeValue("validate$data",{ref:o.validateSchema});return(0,te._)`!${c}(${n})`}return te.nil}}subschema(e,n){let r=(0,v0.getSubschema)(this.it,e);(0,v0.extendSubschemaData)(r,this.it,e),(0,v0.extendSubschemaMode)(r,e);let o={...this.it,...r,items:void 0,props:void 0};return zwe(o,n),o}mergeEvaluated(e,n){let{it:r,gen:o}=this;r.opts.unevaluated&&(r.props!==!0&&e.props!==void 0&&(r.props=Vi.mergeEvaluated.props(o,e.props,r.props,n)),r.items!==!0&&e.items!==void 0&&(r.items=Vi.mergeEvaluated.items(o,e.items,r.items,n)))}mergeValidEvaluated(e,n){let{it:r,gen:o}=this;if(r.opts.unevaluated&&(r.props!==!0||r.items!==!0))return o.if(n,()=>this.mergeEvaluated(e,te.Name)),!0}};uc.KeywordCxt=ky;function bte(t,e,n,r){let o=new ky(t,n,e);"code"in n?n.code(o,r):o.$data&&n.validate?(0,F_.funcKeywordCode)(o,n):"macro"in n?(0,F_.macroKeywordCode)(o,n):(n.compile||n.validate)&&(0,F_.funcKeywordCode)(o,n)}var i0e=/^\/(?:[^~]|~0|~1)*$/,a0e=/^([0-9]+)(#|\/(?:[^~]|~0|~1)*)?$/;function Nte(t,{dataLevel:e,dataNames:n,dataPathArr:r}){let o,s;if(t==="")return he.default.rootData;if(t[0]==="/"){if(!i0e.test(t))throw new Error(`Invalid JSON-pointer: ${t}`);o=t,s=he.default.rootData}else{let u=a0e.exec(t);if(!u)throw new Error(`Invalid JSON-pointer: ${t}`);let p=+u[1];if(o=u[2],o==="#"){if(p>=e)throw new Error(c("property/index",p));return r[e-p]}if(p>e)throw new Error(c("data",p));if(s=n[e-p],!o)return s}let i=s,a=o.split("/");for(let u of a)u&&(s=(0,te._)`${s}${(0,te.getProperty)((0,Vi.unescapeJsonPointer)(u))}`,i=(0,te._)`${i} && ${s}`);return i;function c(u,p){return`Cannot access ${u} ${p} levels up, current level is ${e}`}}uc.getData=Nte});var Uy=T(M0=>{"use strict";Object.defineProperty(M0,"__esModule",{value:!0});var C0=class extends Error{constructor(e){super("validation failed"),this.errors=e,this.ajv=this.validation=!0}};M0.default=C0});var z_=T(D0=>{"use strict";Object.defineProperty(D0,"__esModule",{value:!0});var w0=j_(),L0=class extends Error{constructor(e,n,r,o){super(o||`can't resolve reference ${r} from id ${n}`),this.missingRef=(0,w0.resolveUrl)(e,n,r),this.missingSchema=(0,w0.normalizeId)((0,w0.getFullPath)(e,this.missingRef))}};D0.default=L0});var Gy=T(Vo=>{"use strict";Object.defineProperty(Vo,"__esModule",{value:!0});Vo.resolveSchema=Vo.getCompilingSchema=Vo.resolveRef=Vo.compileSchema=Vo.SchemaEnv=void 0;var ds=Oe(),c0e=Uy(),Vu=Gi(),fs=j_(),Ote=Fe(),u0e=q_(),Rd=class{constructor(e){var n;this.refs={},this.dynamicAnchors={};let r;typeof e.schema=="object"&&(r=e.schema),this.schema=e.schema,this.schemaId=e.schemaId,this.root=e.root||this,this.baseId=(n=e.baseId)!==null&&n!==void 0?n:(0,fs.normalizeId)(r?.[e.schemaId||"$id"]),this.schemaPath=e.schemaPath,this.localRefs=e.localRefs,this.meta=e.meta,this.$async=r?.$async,this.refs={}}};Vo.SchemaEnv=Rd;function U0(t){let e=Ite.call(this,t);if(e)return e;let n=(0,fs.getFullPath)(this.opts.uriResolver,t.root.baseId),{es5:r,lines:o}=this.opts.code,{ownProperties:s}=this.opts,i=new ds.CodeGen(this.scope,{es5:r,lines:o,ownProperties:s}),a;t.$async&&(a=i.scopeValue("Error",{ref:c0e.default,code:(0,ds._)`require("ajv/dist/runtime/validation_error").default`}));let c=i.scopeName("validate");t.validateName=c;let u={gen:i,allErrors:this.opts.allErrors,data:Vu.default.data,parentData:Vu.default.parentData,parentDataProperty:Vu.default.parentDataProperty,dataNames:[Vu.default.data],dataPathArr:[ds.nil],dataLevel:0,dataTypes:[],definedProperties:new Set,topSchemaRef:i.scopeValue("schema",this.opts.code.source===!0?{ref:t.schema,code:(0,ds.stringify)(t.schema)}:{ref:t.schema}),validateName:c,ValidationError:a,schema:t.schema,schemaEnv:t,rootId:n,baseId:t.baseId||n,schemaPath:ds.nil,errSchemaPath:t.schemaPath||(this.opts.jtd?"":"#"),errorPath:(0,ds._)`""`,opts:this.opts,self:this},p;try{this._compilations.add(t),(0,u0e.validateFunctionCode)(u),i.optimize(this.opts.code.optimize);let l=i.toString();p=`${i.scopeRefs(Vu.default.scope)}return ${l}`,this.opts.code.process&&(p=this.opts.code.process(p,t));let f=new Function(`${Vu.default.self}`,`${Vu.default.scope}`,p)(this,this.scope.get());if(this.scope.value(c,{ref:f}),f.errors=null,f.schema=t.schema,f.schemaEnv=t,t.$async&&(f.$async=!0),this.opts.code.source===!0&&(f.source={validateName:c,validateCode:l,scopeValues:i._values}),this.opts.unevaluated){let{props:m,items:h}=u;f.evaluated={props:m instanceof ds.Name?void 0:m,items:h instanceof ds.Name?void 0:h,dynamicProps:m instanceof ds.Name,dynamicItems:h instanceof ds.Name},f.source&&(f.source.evaluated=(0,ds.stringify)(f.evaluated))}return t.validate=f,t}catch(l){throw delete t.validate,delete t.validateName,p&&this.logger.error("Error compiling schema, function code:",p),l}finally{this._compilations.delete(t)}}Vo.compileSchema=U0;function p0e(t,e,n){var r;n=(0,fs.resolveUrl)(this.opts.uriResolver,e,n);let o=t.refs[n];if(o)return o;let s=f0e.call(this,t,n);if(s===void 0){let i=(r=t.localRefs)===null||r===void 0?void 0:r[n],{schemaId:a}=this.opts;i&&(s=new Rd({schema:i,schemaId:a,root:t,baseId:e}))}if(s!==void 0)return t.refs[n]=l0e.call(this,s)}Vo.resolveRef=p0e;function l0e(t){return(0,fs.inlineRef)(t.schema,this.opts.inlineRefs)?t.schema:t.validate?t:U0.call(this,t)}function Ite(t){for(let e of this._compilations)if(d0e(e,t))return e}Vo.getCompilingSchema=Ite;function d0e(t,e){return t.schema===e.schema&&t.root===e.root&&t.baseId===e.baseId}function f0e(t,e){let n;for(;typeof(n=this.refs[e])=="string";)e=n;return n||this.schemas[e]||$y.call(this,t,e)}function $y(t,e){let n=this.opts.uriResolver.parse(e),r=(0,fs._getFullPath)(this.opts.uriResolver,n),o=(0,fs.getFullPath)(this.opts.uriResolver,t.baseId,void 0);if(Object.keys(t.schema).length>0&&r===o)return k0.call(this,n,t);let s=(0,fs.normalizeId)(r),i=this.refs[s]||this.schemas[s];if(typeof i=="string"){let a=$y.call(this,t,i);return typeof a?.schema!="object"?void 0:k0.call(this,n,a)}if(typeof i?.schema=="object"){if(i.validate||U0.call(this,i),s===(0,fs.normalizeId)(e)){let{schema:a}=i,{schemaId:c}=this.opts,u=a[c];return u&&(o=(0,fs.resolveUrl)(this.opts.uriResolver,o,u)),new Rd({schema:a,schemaId:c,root:t,baseId:o})}return k0.call(this,n,i)}}Vo.resolveSchema=$y;var m0e=new Set(["properties","patternProperties","enum","dependencies","definitions"]);function k0(t,{baseId:e,schema:n,root:r}){var o;if(((o=t.fragment)===null||o===void 0?void 0:o[0])!=="/")return;for(let a of t.fragment.slice(1).split("/")){if(typeof n=="boolean")return;let c=n[(0,Ote.unescapeFragment)(a)];if(c===void 0)return;n=c;let u=typeof n=="object"&&n[this.opts.schemaId];!m0e.has(a)&&u&&(e=(0,fs.resolveUrl)(this.opts.uriResolver,e,u))}let s;if(typeof n!="boolean"&&n.$ref&&!(0,Ote.schemaHasRulesButRef)(n,this.RULES)){let a=(0,fs.resolveUrl)(this.opts.uriResolver,e,n.$ref);s=$y.call(this,r,a)}let{schemaId:i}=this.opts;if(s=s||new Rd({schema:n,schemaId:i,root:r,baseId:e}),s.schema!==s.root.schema)return s}});var vte=T((vat,_0e)=>{_0e.exports={$id:"https://raw.githubusercontent.com/ajv-validator/ajv/master/lib/refs/data.json#",description:"Meta-schema for $data reference (JSON AnySchema extension proposal)",type:"object",required:["$data"],properties:{$data:{type:"string",anyOf:[{format:"relative-json-pointer"},{format:"json-pointer"}]}},additionalProperties:!1}});var G0=T((xat,Mte)=>{"use strict";var h0e=RegExp.prototype.test.bind(/^[\da-f]{8}-[\da-f]{4}-[\da-f]{4}-[\da-f]{4}-[\da-f]{12}$/iu),Pte=RegExp.prototype.test.bind(/^(?:(?:25[0-5]|2[0-4]\d|1\d{2}|[1-9]\d|\d)\.){3}(?:25[0-5]|2[0-4]\d|1\d{2}|[1-9]\d|\d)$/u);function $0(t){let e="",n=0,r=0;for(r=0;r<t.length;r++)if(n=t[r].charCodeAt(0),n!==48){if(!(n>=48&&n<=57||n>=65&&n<=70||n>=97&&n<=102))return"";e+=t[r];break}for(r+=1;r<t.length;r++){if(n=t[r].charCodeAt(0),!(n>=48&&n<=57||n>=65&&n<=70||n>=97&&n<=102))return"";e+=t[r]}return e}var E0e=RegExp.prototype.test.bind(/[^!"$&'()*+,\-.;=_`a-z{}~]/u);function xte(t){return t.length=0,!0}function T0e(t,e,n){if(t.length){let r=$0(t);if(r!=="")e.push(r);else return n.error=!0,!1;t.length=0}return!0}function g0e(t){let e=0,n={error:!1,address:"",zone:""},r=[],o=[],s=!1,i=!1,a=T0e;for(let c=0;c<t.length;c++){let u=t[c];if(!(u==="["||u==="]"))if(u===":"){if(s===!0&&(i=!0),!a(o,r,n))break;if(++e>7){n.error=!0;break}c>0&&t[c-1]===":"&&(s=!0),r.push(":");continue}else if(u==="%"){if(!a(o,r,n))break;a=xte}else{o.push(u);continue}}return o.length&&(a===xte?n.zone=o.join(""):i?r.push(o.join("")):r.push($0(o))),n.address=r.join(""),n}function Cte(t){if(S0e(t,":")<2)return{host:t,isIPV6:!1};let e=g0e(t);if(e.error)return{host:t,isIPV6:!1};{let n=e.address,r=e.address;return e.zone&&(n+="%"+e.zone,r+="%25"+e.zone),{host:n,isIPV6:!0,escapedHost:r}}}function S0e(t,e){let n=0;for(let r=0;r<t.length;r++)t[r]===e&&n++;return n}function A0e(t){let e=t,n=[],r=-1,o=0;for(;o=e.length;){if(o===1){if(e===".")break;if(e==="/"){n.push("/");break}else{n.push(e);break}}else if(o===2){if(e[0]==="."){if(e[1]===".")break;if(e[1]==="/"){e=e.slice(2);continue}}else if(e[0]==="/"&&(e[1]==="."||e[1]==="/")){n.push("/");break}}else if(o===3&&e==="/.."){n.length!==0&&n.pop(),n.push("/");break}if(e[0]==="."){if(e[1]==="."){if(e[2]==="/"){e=e.slice(3);continue}}else if(e[1]==="/"){e=e.slice(2);continue}}else if(e[0]==="/"&&e[1]==="."){if(e[2]==="/"){e=e.slice(2);continue}else if(e[2]==="."&&e[3]==="/"){e=e.slice(3),n.length!==0&&n.pop();continue}}if((r=e.indexOf("/",1))===-1){n.push(e);break}else n.push(e.slice(0,r)),e=e.slice(r)}return n.join("")}function R0e(t,e){let n=e!==!0?escape:unescape;return t.scheme!==void 0&&(t.scheme=n(t.scheme)),t.userinfo!==void 0&&(t.userinfo=n(t.userinfo)),t.host!==void 0&&(t.host=n(t.host)),t.path!==void 0&&(t.path=n(t.path)),t.query!==void 0&&(t.query=n(t.query)),t.fragment!==void 0&&(t.fragment=n(t.fragment)),t}function y0e(t){let e=[];if(t.userinfo!==void 0&&(e.push(t.userinfo),e.push("@")),t.host!==void 0){let n=unescape(t.host);if(!Pte(n)){let r=Cte(n);r.isIPV6===!0?n=`[${r.escapedHost}]`:n=t.host}e.push(n)}return(typeof t.port=="number"||typeof t.port=="string")&&(e.push(":"),e.push(String(t.port))),e.length?e.join(""):void 0}Mte.exports={nonSimpleDomain:E0e,recomposeAuthority:y0e,normalizeComponentEncoding:R0e,removeDotSegments:A0e,isIPv4:Pte,isUUID:h0e,normalizeIPv6:Cte,stringArrayToHexStripped:$0}});var Ute=T((Pat,kte)=>{"use strict";var{isUUID:b0e}=G0(),N0e=/([\da-z][\d\-a-z]{0,31}):((?:[\w!$'()*+,\-.:;=@]|%[\da-f]{2})+)/iu,O0e=["http","https","ws","wss","urn","urn:uuid"];function I0e(t){return O0e.indexOf(t)!==-1}function V0(t){return t.secure===!0?!0:t.secure===!1?!1:t.scheme?t.scheme.length===3&&(t.scheme[0]==="w"||t.scheme[0]==="W")&&(t.scheme[1]==="s"||t.scheme[1]==="S")&&(t.scheme[2]==="s"||t.scheme[2]==="S"):!1}function wte(t){return t.host||(t.error=t.error||"HTTP URIs must have a host."),t}function Lte(t){let e=String(t.scheme).toLowerCase()==="https";return(t.port===(e?443:80)||t.port==="")&&(t.port=void 0),t.path||(t.path="/"),t}function v0e(t){return t.secure=V0(t),t.resourceName=(t.path||"/")+(t.query?"?"+t.query:""),t.path=void 0,t.query=void 0,t}function x0e(t){if((t.port===(V0(t)?443:80)||t.port==="")&&(t.port=void 0),typeof t.secure=="boolean"&&(t.scheme=t.secure?"wss":"ws",t.secure=void 0),t.resourceName){let[e,n]=t.resourceName.split("?");t.path=e&&e!=="/"?e:void 0,t.query=n,t.resourceName=void 0}return t.fragment=void 0,t}function P0e(t,e){if(!t.path)return t.error="URN can not be parsed",t;let n=t.path.match(N0e);if(n){let r=e.scheme||t.scheme||"urn";t.nid=n[1].toLowerCase(),t.nss=n[2];let o=`${r}:${e.nid||t.nid}`,s=B0(o);t.path=void 0,s&&(t=s.parse(t,e))}else t.error=t.error||"URN can not be parsed.";return t}function C0e(t,e){if(t.nid===void 0)throw new Error("URN without nid cannot be serialized");let n=e.scheme||t.scheme||"urn",r=t.nid.toLowerCase(),o=`${n}:${e.nid||r}`,s=B0(o);s&&(t=s.serialize(t,e));let i=t,a=t.nss;return i.path=`${r||e.nid}:${a}`,e.skipEscape=!0,i}function M0e(t,e){let n=t;return n.uuid=n.nss,n.nss=void 0,!e.tolerant&&(!n.uuid||!b0e(n.uuid))&&(n.error=n.error||"UUID is not valid."),n}function w0e(t){let e=t;return e.nss=(t.uuid||"").toLowerCase(),e}var Dte={scheme:"http",domainHost:!0,parse:wte,serialize:Lte},L0e={scheme:"https",domainHost:Dte.domainHost,parse:wte,serialize:Lte},Vy={scheme:"ws",domainHost:!0,parse:v0e,serialize:x0e},D0e={scheme:"wss",domainHost:Vy.domainHost,parse:Vy.parse,serialize:Vy.serialize},k0e={scheme:"urn",parse:P0e,serialize:C0e,skipNormalize:!0},U0e={scheme:"urn:uuid",parse:M0e,serialize:w0e,skipNormalize:!0},By={http:Dte,https:L0e,ws:Vy,wss:D0e,urn:k0e,"urn:uuid":U0e};Object.setPrototypeOf(By,null);function B0(t){return t&&(By[t]||By[t.toLowerCase()])||void 0}kte.exports={wsIsSecure:V0,SCHEMES:By,isValidSchemeName:I0e,getSchemeHandler:B0}});var Vte=T((Cat,Hy)=>{"use strict";var{normalizeIPv6:$0e,removeDotSegments:Y_,recomposeAuthority:G0e,normalizeComponentEncoding:jy,isIPv4:V0e,nonSimpleDomain:B0e}=G0(),{SCHEMES:j0e,getSchemeHandler:$te}=Ute();function H0e(t,e){return typeof t=="string"?t=Qs(Bi(t,e),e):typeof t=="object"&&(t=Bi(Qs(t,e),e)),t}function F0e(t,e,n){let r=n?Object.assign({scheme:"null"},n):{scheme:"null"},o=Gte(Bi(t,r),Bi(e,r),r,!0);return r.skipEscape=!0,Qs(o,r)}function Gte(t,e,n,r){let o={};return r||(t=Bi(Qs(t,n),n),e=Bi(Qs(e,n),n)),n=n||{},!n.tolerant&&e.scheme?(o.scheme=e.scheme,o.userinfo=e.userinfo,o.host=e.host,o.port=e.port,o.path=Y_(e.path||""),o.query=e.query):(e.userinfo!==void 0||e.host!==void 0||e.port!==void 0?(o.userinfo=e.userinfo,o.host=e.host,o.port=e.port,o.path=Y_(e.path||""),o.query=e.query):(e.path?(e.path[0]==="/"?o.path=Y_(e.path):((t.userinfo!==void 0||t.host!==void 0||t.port!==void 0)&&!t.path?o.path="/"+e.path:t.path?o.path=t.path.slice(0,t.path.lastIndexOf("/")+1)+e.path:o.path=e.path,o.path=Y_(o.path)),o.query=e.query):(o.path=t.path,e.query!==void 0?o.query=e.query:o.query=t.query),o.userinfo=t.userinfo,o.host=t.host,o.port=t.port),o.scheme=t.scheme),o.fragment=e.fragment,o}function q0e(t,e,n){return typeof t=="string"?(t=unescape(t),t=Qs(jy(Bi(t,n),!0),{...n,skipEscape:!0})):typeof t=="object"&&(t=Qs(jy(t,!0),{...n,skipEscape:!0})),typeof e=="string"?(e=unescape(e),e=Qs(jy(Bi(e,n),!0),{...n,skipEscape:!0})):typeof e=="object"&&(e=Qs(jy(e,!0),{...n,skipEscape:!0})),t.toLowerCase()===e.toLowerCase()}function Qs(t,e){let n={host:t.host,scheme:t.scheme,userinfo:t.userinfo,port:t.port,path:t.path,query:t.query,nid:t.nid,nss:t.nss,uuid:t.uuid,fragment:t.fragment,reference:t.reference,resourceName:t.resourceName,secure:t.secure,error:""},r=Object.assign({},e),o=[],s=$te(r.scheme||n.scheme);s&&s.serialize&&s.serialize(n,r),n.path!==void 0&&(r.skipEscape?n.path=unescape(n.path):(n.path=escape(n.path),n.scheme!==void 0&&(n.path=n.path.split("%3A").join(":")))),r.reference!=="suffix"&&n.scheme&&o.push(n.scheme,":");let i=G0e(n);if(i!==void 0&&(r.reference!=="suffix"&&o.push("//"),o.push(i),n.path&&n.path[0]!=="/"&&o.push("/")),n.path!==void 0){let a=n.path;!r.absolutePath&&(!s||!s.absolutePath)&&(a=Y_(a)),i===void 0&&a[0]==="/"&&a[1]==="/"&&(a="/%2F"+a.slice(2)),o.push(a)}return n.query!==void 0&&o.push("?",n.query),n.fragment!==void 0&&o.push("#",n.fragment),o.join("")}var z0e=/^(?:([^#/:?]+):)?(?:\/\/((?:([^#/?@]*)@)?(\[[^#/?\]]+\]|[^#/:?]*)(?::(\d*))?))?([^#?]*)(?:\?([^#]*))?(?:#((?:.|[\n\r])*))?/u;function Bi(t,e){let n=Object.assign({},e),r={scheme:void 0,userinfo:void 0,host:"",port:void 0,path:"",query:void 0,fragment:void 0},o=!1;n.reference==="suffix"&&(n.scheme?t=n.scheme+":"+t:t="//"+t);let s=t.match(z0e);if(s){if(r.scheme=s[1],r.userinfo=s[3],r.host=s[4],r.port=parseInt(s[5],10),r.path=s[6]||"",r.query=s[7],r.fragment=s[8],isNaN(r.port)&&(r.port=s[5]),r.host)if(V0e(r.host)===!1){let c=$0e(r.host);r.host=c.host.toLowerCase(),o=c.isIPV6}else o=!0;r.scheme===void 0&&r.userinfo===void 0&&r.host===void 0&&r.port===void 0&&r.query===void 0&&!r.path?r.reference="same-document":r.scheme===void 0?r.reference="relative":r.fragment===void 0?r.reference="absolute":r.reference="uri",n.reference&&n.reference!=="suffix"&&n.reference!==r.reference&&(r.error=r.error||"URI is not a "+n.reference+" reference.");let i=$te(n.scheme||r.scheme);if(!n.unicodeSupport&&(!i||!i.unicodeSupport)&&r.host&&(n.domainHost||i&&i.domainHost)&&o===!1&&B0e(r.host))try{r.host=URL.domainToASCII(r.host.toLowerCase())}catch(a){r.error=r.error||"Host's domain name can not be converted to ASCII: "+a}(!i||i&&!i.skipNormalize)&&(t.indexOf("%")!==-1&&(r.scheme!==void 0&&(r.scheme=unescape(r.scheme)),r.host!==void 0&&(r.host=unescape(r.host))),r.path&&(r.path=escape(unescape(r.path))),r.fragment&&(r.fragment=encodeURI(decodeURIComponent(r.fragment)))),i&&i.parse&&i.parse(r,n)}else r.error=r.error||"URI can not be parsed.";return r}var j0={SCHEMES:j0e,normalize:H0e,resolve:F0e,resolveComponent:Gte,equal:q0e,serialize:Qs,parse:Bi};Hy.exports=j0;Hy.exports.default=j0;Hy.exports.fastUri=j0});var jte=T(H0=>{"use strict";Object.defineProperty(H0,"__esModule",{value:!0});var Bte=Vte();Bte.code='require("ajv/dist/runtime/uri").default';H0.default=Bte});var Zte=T(Vn=>{"use strict";Object.defineProperty(Vn,"__esModule",{value:!0});Vn.CodeGen=Vn.Name=Vn.nil=Vn.stringify=Vn.str=Vn._=Vn.KeywordCxt=void 0;var Y0e=q_();Object.defineProperty(Vn,"KeywordCxt",{enumerable:!0,get:function(){return Y0e.KeywordCxt}});var yd=Oe();Object.defineProperty(Vn,"_",{enumerable:!0,get:function(){return yd._}});Object.defineProperty(Vn,"str",{enumerable:!0,get:function(){return yd.str}});Object.defineProperty(Vn,"stringify",{enumerable:!0,get:function(){return yd.stringify}});Object.defineProperty(Vn,"nil",{enumerable:!0,get:function(){return yd.nil}});Object.defineProperty(Vn,"Name",{enumerable:!0,get:function(){return yd.Name}});Object.defineProperty(Vn,"CodeGen",{enumerable:!0,get:function(){return yd.CodeGen}});var W0e=Uy(),Yte=z_(),K0e=T0(),W_=Gy(),Z0e=Oe(),K_=j_(),Fy=B_(),q0=Fe(),Hte=vte(),J0e=jte(),Wte=(t,e)=>new RegExp(t,e);Wte.code="new RegExp";var Q0e=["removeAdditional","useDefaults","coerceTypes"],X0e=new Set(["validate","serialize","parse","wrapper","root","schema","keyword","pattern","formats","validate$data","func","obj","Error"]),eLe={errorDataPath:"",format:"`validateFormats: false` can be used instead.",nullable:'"nullable" keyword is supported by default.',jsonPointers:"Deprecated jsPropertySyntax can be used instead.",extendRefs:"Deprecated ignoreKeywordsWithRef can be used instead.",missingRefs:"Pass empty schema with $id that should be ignored to ajv.addSchema.",processCode:"Use option `code: {process: (code, schemaEnv: object) => string}`",sourceCode:"Use option `code: {source: true}`",strictDefaults:"It is default now, see option `strict`.",strictKeywords:"It is default now, see option `strict`.",uniqueItems:'"uniqueItems" keyword is always validated.',unknownFormats:"Disable strict mode or pass `true` to `ajv.addFormat` (or `formats` option).",cache:"Map is used as cache, schema object as key.",serialize:"Map is used as cache, schema object as key.",ajvErrors:"It is default now."},tLe={ignoreKeywordsWithRef:"",jsPropertySyntax:"",unicode:'"minLength"/"maxLength" account for unicode characters by default.'},Fte=200;function nLe(t){var e,n,r,o,s,i,a,c,u,p,l,d,f,m,h,E,A,R,y,O,P,M,j,se,we;let gt=t.strict,dn=(e=t.code)===null||e===void 0?void 0:e.optimize,fn=dn===!0||dn===void 0?1:dn||0,Ke=(r=(n=t.code)===null||n===void 0?void 0:n.regExp)!==null&&r!==void 0?r:Wte,jn=(o=t.uriResolver)!==null&&o!==void 0?o:J0e.default;return{strictSchema:(i=(s=t.strictSchema)!==null&&s!==void 0?s:gt)!==null&&i!==void 0?i:!0,strictNumbers:(c=(a=t.strictNumbers)!==null&&a!==void 0?a:gt)!==null&&c!==void 0?c:!0,strictTypes:(p=(u=t.strictTypes)!==null&&u!==void 0?u:gt)!==null&&p!==void 0?p:"log",strictTuples:(d=(l=t.strictTuples)!==null&&l!==void 0?l:gt)!==null&&d!==void 0?d:"log",strictRequired:(m=(f=t.strictRequired)!==null&&f!==void 0?f:gt)!==null&&m!==void 0?m:!1,code:t.code?{...t.code,optimize:fn,regExp:Ke}:{optimize:fn,regExp:Ke},loopRequired:(h=t.loopRequired)!==null&&h!==void 0?h:Fte,loopEnum:(E=t.loopEnum)!==null&&E!==void 0?E:Fte,meta:(A=t.meta)!==null&&A!==void 0?A:!0,messages:(R=t.messages)!==null&&R!==void 0?R:!0,inlineRefs:(y=t.inlineRefs)!==null&&y!==void 0?y:!0,schemaId:(O=t.schemaId)!==null&&O!==void 0?O:"$id",addUsedSchema:(P=t.addUsedSchema)!==null&&P!==void 0?P:!0,validateSchema:(M=t.validateSchema)!==null&&M!==void 0?M:!0,validateFormats:(j=t.validateFormats)!==null&&j!==void 0?j:!0,unicodeRegExp:(se=t.unicodeRegExp)!==null&&se!==void 0?se:!0,int32range:(we=t.int32range)!==null&&we!==void 0?we:!0,uriResolver:jn}}var Z_=class{constructor(e={}){this.schemas={},this.refs={},this.formats={},this._compilations=new Set,this._loading={},this._cache=new Map,e=this.opts={...e,...nLe(e)};let{es5:n,lines:r}=this.opts.code;this.scope=new Z0e.ValueScope({scope:{},prefixes:X0e,es5:n,lines:r}),this.logger=cLe(e.logger);let o=e.validateFormats;e.validateFormats=!1,this.RULES=(0,K0e.getRules)(),qte.call(this,eLe,e,"NOT SUPPORTED"),qte.call(this,tLe,e,"DEPRECATED","warn"),this._metaOpts=iLe.call(this),e.formats&&oLe.call(this),this._addVocabularies(),this._addDefaultMetaSchema(),e.keywords&&sLe.call(this,e.keywords),typeof e.meta=="object"&&this.addMetaSchema(e.meta),rLe.call(this),e.validateFormats=o}_addVocabularies(){this.addKeyword("$async")}_addDefaultMetaSchema(){let{$data:e,meta:n,schemaId:r}=this.opts,o=Hte;r==="id"&&(o={...Hte},o.id=o.$id,delete o.$id),n&&e&&this.addMetaSchema(o,o[r],!1)}defaultMeta(){let{meta:e,schemaId:n}=this.opts;return this.opts.defaultMeta=typeof e=="object"?e[n]||e:void 0}validate(e,n){let r;if(typeof e=="string"){if(r=this.getSchema(e),!r)throw new Error(`no schema with key or ref "${e}"`)}else r=this.compile(e);let o=r(n);return"$async"in r||(this.errors=r.errors),o}compile(e,n){let r=this._addSchema(e,n);return r.validate||this._compileSchemaEnv(r)}compileAsync(e,n){if(typeof this.opts.loadSchema!="function")throw new Error("options.loadSchema should be a function");let{loadSchema:r}=this.opts;return o.call(this,e,n);async function o(p,l){await s.call(this,p.$schema);let d=this._addSchema(p,l);return d.validate||i.call(this,d)}async function s(p){p&&!this.getSchema(p)&&await o.call(this,{$ref:p},!0)}async function i(p){try{return this._compileSchemaEnv(p)}catch(l){if(!(l instanceof Yte.default))throw l;return a.call(this,l),await c.call(this,l.missingSchema),i.call(this,p)}}function a({missingSchema:p,missingRef:l}){if(this.refs[p])throw new Error(`AnySchema ${p} is loaded but ${l} cannot be resolved`)}async function c(p){let l=await u.call(this,p);this.refs[p]||await s.call(this,l.$schema),this.refs[p]||this.addSchema(l,p,n)}async function u(p){let l=this._loading[p];if(l)return l;try{return await(this._loading[p]=r(p))}finally{delete this._loading[p]}}}addSchema(e,n,r,o=this.opts.validateSchema){if(Array.isArray(e)){for(let i of e)this.addSchema(i,void 0,r,o);return this}let s;if(typeof e=="object"){let{schemaId:i}=this.opts;if(s=e[i],s!==void 0&&typeof s!="string")throw new Error(`schema ${i} must be string`)}return n=(0,K_.normalizeId)(n||s),this._checkUnique(n),this.schemas[n]=this._addSchema(e,r,n,o,!0),this}addMetaSchema(e,n,r=this.opts.validateSchema){return this.addSchema(e,n,!0,r),this}validateSchema(e,n){if(typeof e=="boolean")return!0;let r;if(r=e.$schema,r!==void 0&&typeof r!="string")throw new Error("$schema must be a string");if(r=r||this.opts.defaultMeta||this.defaultMeta(),!r)return this.logger.warn("meta-schema not available"),this.errors=null,!0;let o=this.validate(r,e);if(!o&&n){let s="schema is invalid: "+this.errorsText();if(this.opts.validateSchema==="log")this.logger.error(s);else throw new Error(s)}return o}getSchema(e){let n;for(;typeof(n=zte.call(this,e))=="string";)e=n;if(n===void 0){let{schemaId:r}=this.opts,o=new W_.SchemaEnv({schema:{},schemaId:r});if(n=W_.resolveSchema.call(this,o,e),!n)return;this.refs[e]=n}return n.validate||this._compileSchemaEnv(n)}removeSchema(e){if(e instanceof RegExp)return this._removeAllSchemas(this.schemas,e),this._removeAllSchemas(this.refs,e),this;switch(typeof e){case"undefined":return this._removeAllSchemas(this.schemas),this._removeAllSchemas(this.refs),this._cache.clear(),this;case"string":{let n=zte.call(this,e);return typeof n=="object"&&this._cache.delete(n.schema),delete this.schemas[e],delete this.refs[e],this}case"object":{let n=e;this._cache.delete(n);let r=e[this.opts.schemaId];return r&&(r=(0,K_.normalizeId)(r),delete this.schemas[r],delete this.refs[r]),this}default:throw new Error("ajv.removeSchema: invalid parameter")}}addVocabulary(e){for(let n of e)this.addKeyword(n);return this}addKeyword(e,n){let r;if(typeof e=="string")r=e,typeof n=="object"&&(this.logger.warn("these parameters are deprecated, see docs for addKeyword"),n.keyword=r);else if(typeof e=="object"&&n===void 0){if(n=e,r=n.keyword,Array.isArray(r)&&!r.length)throw new Error("addKeywords: keyword must be string or non-empty array")}else throw new Error("invalid addKeywords parameters");if(pLe.call(this,r,n),!n)return(0,q0.eachItem)(r,s=>F0.call(this,s)),this;dLe.call(this,n);let o={...n,type:(0,Fy.getJSONTypes)(n.type),schemaType:(0,Fy.getJSONTypes)(n.schemaType)};return(0,q0.eachItem)(r,o.type.length===0?s=>F0.call(this,s,o):s=>o.type.forEach(i=>F0.call(this,s,o,i))),this}getKeyword(e){let n=this.RULES.all[e];return typeof n=="object"?n.definition:!!n}removeKeyword(e){let{RULES:n}=this;delete n.keywords[e],delete n.all[e];for(let r of n.rules){let o=r.rules.findIndex(s=>s.keyword===e);o>=0&&r.rules.splice(o,1)}return this}addFormat(e,n){return typeof n=="string"&&(n=new RegExp(n)),this.formats[e]=n,this}errorsText(e=this.errors,{separator:n=", ",dataVar:r="data"}={}){return!e||e.length===0?"No errors":e.map(o=>`${r}${o.instancePath} ${o.message}`).reduce((o,s)=>o+n+s)}$dataMetaSchema(e,n){let r=this.RULES.all;e=JSON.parse(JSON.stringify(e));for(let o of n){let s=o.split("/").slice(1),i=e;for(let a of s)i=i[a];for(let a in r){let c=r[a];if(typeof c!="object")continue;let{$data:u}=c.definition,p=i[a];u&&p&&(i[a]=Kte(p))}}return e}_removeAllSchemas(e,n){for(let r in e){let o=e[r];(!n||n.test(r))&&(typeof o=="string"?delete e[r]:o&&!o.meta&&(this._cache.delete(o.schema),delete e[r]))}}_addSchema(e,n,r,o=this.opts.validateSchema,s=this.opts.addUsedSchema){let i,{schemaId:a}=this.opts;if(typeof e=="object")i=e[a];else{if(this.opts.jtd)throw new Error("schema must be object");if(typeof e!="boolean")throw new Error("schema must be object or boolean")}let c=this._cache.get(e);if(c!==void 0)return c;r=(0,K_.normalizeId)(i||r);let u=K_.getSchemaRefs.call(this,e,r);return c=new W_.SchemaEnv({schema:e,schemaId:a,meta:n,baseId:r,localRefs:u}),this._cache.set(c.schema,c),s&&!r.startsWith("#")&&(r&&this._checkUnique(r),this.refs[r]=c),o&&this.validateSchema(e,!0),c}_checkUnique(e){if(this.schemas[e]||this.refs[e])throw new Error(`schema with key or id "${e}" already exists`)}_compileSchemaEnv(e){if(e.meta?this._compileMetaSchema(e):W_.compileSchema.call(this,e),!e.validate)throw new Error("ajv implementation error");return e.validate}_compileMetaSchema(e){let n=this.opts;this.opts=this._metaOpts;try{W_.compileSchema.call(this,e)}finally{this.opts=n}}};Z_.ValidationError=W0e.default;Z_.MissingRefError=Yte.default;Vn.default=Z_;function qte(t,e,n,r="error"){for(let o in t){let s=o;s in e&&this.logger[r](`${n}: option ${o}. ${t[s]}`)}}function zte(t){return t=(0,K_.normalizeId)(t),this.schemas[t]||this.refs[t]}function rLe(){let t=this.opts.schemas;if(t)if(Array.isArray(t))this.addSchema(t);else for(let e in t)this.addSchema(t[e],e)}function oLe(){for(let t in this.opts.formats){let e=this.opts.formats[t];e&&this.addFormat(t,e)}}function sLe(t){if(Array.isArray(t)){this.addVocabulary(t);return}this.logger.warn("keywords option as map is deprecated, pass array");for(let e in t){let n=t[e];n.keyword||(n.keyword=e),this.addKeyword(n)}}function iLe(){let t={...this.opts};for(let e of Q0e)delete t[e];return t}var aLe={log(){},warn(){},error(){}};function cLe(t){if(t===!1)return aLe;if(t===void 0)return console;if(t.log&&t.warn&&t.error)return t;throw new Error("logger must implement log, warn and error methods")}var uLe=/^[a-z_$][a-z0-9_$:-]*$/i;function pLe(t,e){let{RULES:n}=this;if((0,q0.eachItem)(t,r=>{if(n.keywords[r])throw new Error(`Keyword ${r} is already defined`);if(!uLe.test(r))throw new Error(`Keyword ${r} has invalid name`)}),!!e&&e.$data&&!("code"in e||"validate"in e))throw new Error('$data keyword must have "code" or "validate" function')}function F0(t,e,n){var r;let o=e?.post;if(n&&o)throw new Error('keyword with "post" flag cannot have "type"');let{RULES:s}=this,i=o?s.post:s.rules.find(({type:c})=>c===n);if(i||(i={type:n,rules:[]},s.rules.push(i)),s.keywords[t]=!0,!e)return;let a={keyword:t,definition:{...e,type:(0,Fy.getJSONTypes)(e.type),schemaType:(0,Fy.getJSONTypes)(e.schemaType)}};e.before?lLe.call(this,i,a,e.before):i.rules.push(a),s.all[t]=a,(r=e.implements)===null||r===void 0||r.forEach(c=>this.addKeyword(c))}function lLe(t,e,n){let r=t.rules.findIndex(o=>o.keyword===n);r>=0?t.rules.splice(r,0,e):(t.rules.push(e),this.logger.warn(`rule ${n} is not defined`))}function dLe(t){let{metaSchema:e}=t;e!==void 0&&(t.$data&&this.opts.$data&&(e=Kte(e)),t.validateSchema=this.compile(e,!0))}var fLe={$ref:"https://raw.githubusercontent.com/ajv-validator/ajv/master/lib/refs/data.json#"};function Kte(t){return{anyOf:[t,fLe]}}});var Jte=T(z0=>{"use strict";Object.defineProperty(z0,"__esModule",{value:!0});var mLe={keyword:"id",code(){throw new Error('NOT SUPPORTED: keyword "id", use "$id" for schema ID')}};z0.default=mLe});var tne=T(Bu=>{"use strict";Object.defineProperty(Bu,"__esModule",{value:!0});Bu.callRef=Bu.getValidate=void 0;var _Le=z_(),Qte=Go(),Gr=Oe(),bd=Gi(),Xte=Gy(),qy=Fe(),hLe={keyword:"$ref",schemaType:"string",code(t){let{gen:e,schema:n,it:r}=t,{baseId:o,schemaEnv:s,validateName:i,opts:a,self:c}=r,{root:u}=s;if((n==="#"||n==="#/")&&o===u.baseId)return l();let p=Xte.resolveRef.call(c,u,o,n);if(p===void 0)throw new _Le.default(r.opts.uriResolver,o,n);if(p instanceof Xte.SchemaEnv)return d(p);return f(p);function l(){if(s===u)return zy(t,i,s,s.$async);let m=e.scopeValue("root",{ref:u});return zy(t,(0,Gr._)`${m}.validate`,u,u.$async)}function d(m){let h=ene(t,m);zy(t,h,m,m.$async)}function f(m){let h=e.scopeValue("schema",a.code.source===!0?{ref:m,code:(0,Gr.stringify)(m)}:{ref:m}),E=e.name("valid"),A=t.subschema({schema:m,dataTypes:[],schemaPath:Gr.nil,topSchemaRef:h,errSchemaPath:n},E);t.mergeEvaluated(A),t.ok(E)}}};function ene(t,e){let{gen:n}=t;return e.validate?n.scopeValue("validate",{ref:e.validate}):(0,Gr._)`${n.scopeValue("wrapper",{ref:e})}.validate`}Bu.getValidate=ene;function zy(t,e,n,r){let{gen:o,it:s}=t,{allErrors:i,schemaEnv:a,opts:c}=s,u=c.passContext?bd.default.this:Gr.nil;r?p():l();function p(){if(!a.$async)throw new Error("async schema referenced by sync schema");let m=o.let("valid");o.try(()=>{o.code((0,Gr._)`await ${(0,Qte.callValidateCode)(t,e,u)}`),f(e),i||o.assign(m,!0)},h=>{o.if((0,Gr._)`!(${h} instanceof ${s.ValidationError})`,()=>o.throw(h)),d(h),i||o.assign(m,!1)}),t.ok(m)}function l(){t.result((0,Qte.callValidateCode)(t,e,u),()=>f(e),()=>d(e))}function d(m){let h=(0,Gr._)`${m}.errors`;o.assign(bd.default.vErrors,(0,Gr._)`${bd.default.vErrors} === null ? ${h} : ${bd.default.vErrors}.concat(${h})`),o.assign(bd.default.errors,(0,Gr._)`${bd.default.vErrors}.length`)}function f(m){var h;if(!s.opts.unevaluated)return;let E=(h=n?.validate)===null||h===void 0?void 0:h.evaluated;if(s.props!==!0)if(E&&!E.dynamicProps)E.props!==void 0&&(s.props=qy.mergeEvaluated.props(o,E.props,s.props));else{let A=o.var("props",(0,Gr._)`${m}.evaluated.props`);s.props=qy.mergeEvaluated.props(o,A,s.props,Gr.Name)}if(s.items!==!0)if(E&&!E.dynamicItems)E.items!==void 0&&(s.items=qy.mergeEvaluated.items(o,E.items,s.items));else{let A=o.var("items",(0,Gr._)`${m}.evaluated.items`);s.items=qy.mergeEvaluated.items(o,A,s.items,Gr.Name)}}}Bu.callRef=zy;Bu.default=hLe});var nne=T(Y0=>{"use strict";Object.defineProperty(Y0,"__esModule",{value:!0});var ELe=Jte(),TLe=tne(),gLe=["$schema","$id","$defs","$vocabulary",{keyword:"$comment"},"definitions",ELe.default,TLe.default];Y0.default=gLe});var rne=T(W0=>{"use strict";Object.defineProperty(W0,"__esModule",{value:!0});var Yy=Oe(),pc=Yy.operators,Wy={maximum:{okStr:"<=",ok:pc.LTE,fail:pc.GT},minimum:{okStr:">=",ok:pc.GTE,fail:pc.LT},exclusiveMaximum:{okStr:"<",ok:pc.LT,fail:pc.GTE},exclusiveMinimum:{okStr:">",ok:pc.GT,fail:pc.LTE}},SLe={message:({keyword:t,schemaCode:e})=>(0,Yy.str)`must be ${Wy[t].okStr} ${e}`,params:({keyword:t,schemaCode:e})=>(0,Yy._)`{comparison: ${Wy[t].okStr}, limit: ${e}}`},ALe={keyword:Object.keys(Wy),type:"number",schemaType:"number",$data:!0,error:SLe,code(t){let{keyword:e,data:n,schemaCode:r}=t;t.fail$data((0,Yy._)`${n} ${Wy[e].fail} ${r} || isNaN(${n})`)}};W0.default=ALe});var one=T(K0=>{"use strict";Object.defineProperty(K0,"__esModule",{value:!0});var J_=Oe(),RLe={message:({schemaCode:t})=>(0,J_.str)`must be multiple of ${t}`,params:({schemaCode:t})=>(0,J_._)`{multipleOf: ${t}}`},yLe={keyword:"multipleOf",type:"number",schemaType:"number",$data:!0,error:RLe,code(t){let{gen:e,data:n,schemaCode:r,it:o}=t,s=o.opts.multipleOfPrecision,i=e.let("res"),a=s?(0,J_._)`Math.abs(Math.round(${i}) - ${i}) > 1e-${s}`:(0,J_._)`${i} !== parseInt(${i})`;t.fail$data((0,J_._)`(${r} === 0 || (${i} = ${n}/${r}, ${a}))`)}};K0.default=yLe});var ine=T(Z0=>{"use strict";Object.defineProperty(Z0,"__esModule",{value:!0});function sne(t){let e=t.length,n=0,r=0,o;for(;r<e;)n++,o=t.charCodeAt(r++),o>=55296&&o<=56319&&r<e&&(o=t.charCodeAt(r),(o&64512)===56320&&r++);return n}Z0.default=sne;sne.code='require("ajv/dist/runtime/ucs2length").default'});var ane=T(J0=>{"use strict";Object.defineProperty(J0,"__esModule",{value:!0});var ju=Oe(),bLe=Fe(),NLe=ine(),OLe={message({keyword:t,schemaCode:e}){let n=t==="maxLength"?"more":"fewer";return(0,ju.str)`must NOT have ${n} than ${e} characters`},params:({schemaCode:t})=>(0,ju._)`{limit: ${t}}`},ILe={keyword:["maxLength","minLength"],type:"string",schemaType:"number",$data:!0,error:OLe,code(t){let{keyword:e,data:n,schemaCode:r,it:o}=t,s=e==="maxLength"?ju.operators.GT:ju.operators.LT,i=o.opts.unicode===!1?(0,ju._)`${n}.length`:(0,ju._)`${(0,bLe.useFunc)(t.gen,NLe.default)}(${n})`;t.fail$data((0,ju._)`${i} ${s} ${r}`)}};J0.default=ILe});var cne=T(Q0=>{"use strict";Object.defineProperty(Q0,"__esModule",{value:!0});var vLe=Go(),Ky=Oe(),xLe={message:({schemaCode:t})=>(0,Ky.str)`must match pattern "${t}"`,params:({schemaCode:t})=>(0,Ky._)`{pattern: ${t}}`},PLe={keyword:"pattern",type:"string",schemaType:"string",$data:!0,error:xLe,code(t){let{data:e,$data:n,schema:r,schemaCode:o,it:s}=t,i=s.opts.unicodeRegExp?"u":"",a=n?(0,Ky._)`(new RegExp(${o}, ${i}))`:(0,vLe.usePattern)(t,r);t.fail$data((0,Ky._)`!${a}.test(${e})`)}};Q0.default=PLe});var une=T(X0=>{"use strict";Object.defineProperty(X0,"__esModule",{value:!0});var Q_=Oe(),CLe={message({keyword:t,schemaCode:e}){let n=t==="maxProperties"?"more":"fewer";return(0,Q_.str)`must NOT have ${n} than ${e} properties`},params:({schemaCode:t})=>(0,Q_._)`{limit: ${t}}`},MLe={keyword:["maxProperties","minProperties"],type:"object",schemaType:"number",$data:!0,error:CLe,code(t){let{keyword:e,data:n,schemaCode:r}=t,o=e==="maxProperties"?Q_.operators.GT:Q_.operators.LT;t.fail$data((0,Q_._)`Object.keys(${n}).length ${o} ${r}`)}};X0.default=MLe});var pne=T(eL=>{"use strict";Object.defineProperty(eL,"__esModule",{value:!0});var X_=Go(),eh=Oe(),wLe=Fe(),LLe={message:({params:{missingProperty:t}})=>(0,eh.str)`must have required property '${t}'`,params:({params:{missingProperty:t}})=>(0,eh._)`{missingProperty: ${t}}`},DLe={keyword:"required",type:"object",schemaType:"array",$data:!0,error:LLe,code(t){let{gen:e,schema:n,schemaCode:r,data:o,$data:s,it:i}=t,{opts:a}=i;if(!s&&n.length===0)return;let c=n.length>=a.loopRequired;if(i.allErrors?u():p(),a.strictRequired){let f=t.parentSchema.properties,{definedProperties:m}=t.it;for(let h of n)if(f?.[h]===void 0&&!m.has(h)){let E=i.schemaEnv.baseId+i.errSchemaPath,A=`required property "${h}" is not defined at "${E}" (strictRequired)`;(0,wLe.checkStrictMode)(i,A,i.opts.strictRequired)}}function u(){if(c||s)t.block$data(eh.nil,l);else for(let f of n)(0,X_.checkReportMissingProp)(t,f)}function p(){let f=e.let("missing");if(c||s){let m=e.let("valid",!0);t.block$data(m,()=>d(f,m)),t.ok(m)}else e.if((0,X_.checkMissingProp)(t,n,f)),(0,X_.reportMissingProp)(t,f),e.else()}function l(){e.forOf("prop",r,f=>{t.setParams({missingProperty:f}),e.if((0,X_.noPropertyInData)(e,o,f,a.ownProperties),()=>t.error())})}function d(f,m){t.setParams({missingProperty:f}),e.forOf(f,r,()=>{e.assign(m,(0,X_.propertyInData)(e,o,f,a.ownProperties)),e.if((0,eh.not)(m),()=>{t.error(),e.break()})},eh.nil)}}};eL.default=DLe});var lne=T(tL=>{"use strict";Object.defineProperty(tL,"__esModule",{value:!0});var th=Oe(),kLe={message({keyword:t,schemaCode:e}){let n=t==="maxItems"?"more":"fewer";return(0,th.str)`must NOT have ${n} than ${e} items`},params:({schemaCode:t})=>(0,th._)`{limit: ${t}}`},ULe={keyword:["maxItems","minItems"],type:"array",schemaType:"number",$data:!0,error:kLe,code(t){let{keyword:e,data:n,schemaCode:r}=t,o=e==="maxItems"?th.operators.GT:th.operators.LT;t.fail$data((0,th._)`${n}.length ${o} ${r}`)}};tL.default=ULe});var Zy=T(nL=>{"use strict";Object.defineProperty(nL,"__esModule",{value:!0});var dne=O0();dne.code='require("ajv/dist/runtime/equal").default';nL.default=dne});var fne=T(oL=>{"use strict";Object.defineProperty(oL,"__esModule",{value:!0});var rL=B_(),Bn=Oe(),$Le=Fe(),GLe=Zy(),VLe={message:({params:{i:t,j:e}})=>(0,Bn.str)`must NOT have duplicate items (items ## ${e} and ${t} are identical)`,params:({params:{i:t,j:e}})=>(0,Bn._)`{i: ${t}, j: ${e}}`},BLe={keyword:"uniqueItems",type:"array",schemaType:"boolean",$data:!0,error:VLe,code(t){let{gen:e,data:n,$data:r,schema:o,parentSchema:s,schemaCode:i,it:a}=t;if(!r&&!o)return;let c=e.let("valid"),u=s.items?(0,rL.getSchemaTypes)(s.items):[];t.block$data(c,p,(0,Bn._)`${i} === false`),t.ok(c);function p(){let m=e.let("i",(0,Bn._)`${n}.length`),h=e.let("j");t.setParams({i:m,j:h}),e.assign(c,!0),e.if((0,Bn._)`${m} > 1`,()=>(l()?d:f)(m,h))}function l(){return u.length>0&&!u.some(m=>m==="object"||m==="array")}function d(m,h){let E=e.name("item"),A=(0,rL.checkDataTypes)(u,E,a.opts.strictNumbers,rL.DataType.Wrong),R=e.const("indices",(0,Bn._)`{}`);e.for((0,Bn._)`;${m}--;`,()=>{e.let(E,(0,Bn._)`${n}[${m}]`),e.if(A,(0,Bn._)`continue`),u.length>1&&e.if((0,Bn._)`typeof ${E} == "string"`,(0,Bn._)`${E} += "_"`),e.if((0,Bn._)`typeof ${R}[${E}] == "number"`,()=>{e.assign(h,(0,Bn._)`${R}[${E}]`),t.error(),e.assign(c,!1).break()}).code((0,Bn._)`${R}[${E}] = ${m}`)})}function f(m,h){let E=(0,$Le.useFunc)(e,GLe.default),A=e.name("outer");e.label(A).for((0,Bn._)`;${m}--;`,()=>e.for((0,Bn._)`${h} = ${m}; ${h}--;`,()=>e.if((0,Bn._)`${E}(${n}[${m}], ${n}[${h}])`,()=>{t.error(),e.assign(c,!1).break(A)})))}}};oL.default=BLe});var mne=T(iL=>{"use strict";Object.defineProperty(iL,"__esModule",{value:!0});var sL=Oe(),jLe=Fe(),HLe=Zy(),FLe={message:"must be equal to constant",params:({schemaCode:t})=>(0,sL._)`{allowedValue: ${t}}`},qLe={keyword:"const",$data:!0,error:FLe,code(t){let{gen:e,data:n,$data:r,schemaCode:o,schema:s}=t;r||s&&typeof s=="object"?t.fail$data((0,sL._)`!${(0,jLe.useFunc)(e,HLe.default)}(${n}, ${o})`):t.fail((0,sL._)`${s} !== ${n}`)}};iL.default=qLe});var _ne=T(aL=>{"use strict";Object.defineProperty(aL,"__esModule",{value:!0});var nh=Oe(),zLe=Fe(),YLe=Zy(),WLe={message:"must be equal to one of the allowed values",params:({schemaCode:t})=>(0,nh._)`{allowedValues: ${t}}`},KLe={keyword:"enum",schemaType:"array",$data:!0,error:WLe,code(t){let{gen:e,data:n,$data:r,schema:o,schemaCode:s,it:i}=t;if(!r&&o.length===0)throw new Error("enum must have non-empty array");let a=o.length>=i.opts.loopEnum,c,u=()=>c??(c=(0,zLe.useFunc)(e,YLe.default)),p;if(a||r)p=e.let("valid"),t.block$data(p,l);else{if(!Array.isArray(o))throw new Error("ajv implementation error");let f=e.const("vSchema",s);p=(0,nh.or)(...o.map((m,h)=>d(f,h)))}t.pass(p);function l(){e.assign(p,!1),e.forOf("v",s,f=>e.if((0,nh._)`${u()}(${n}, ${f})`,()=>e.assign(p,!0).break()))}function d(f,m){let h=o[m];return typeof h=="object"&&h!==null?(0,nh._)`${u()}(${n}, ${f}[${m}])`:(0,nh._)`${n} === ${h}`}}};aL.default=KLe});var hne=T(cL=>{"use strict";Object.defineProperty(cL,"__esModule",{value:!0});var ZLe=rne(),JLe=one(),QLe=ane(),XLe=cne(),eDe=une(),tDe=pne(),nDe=lne(),rDe=fne(),oDe=mne(),sDe=_ne(),iDe=[ZLe.default,JLe.default,QLe.default,XLe.default,eDe.default,tDe.default,nDe.default,rDe.default,{keyword:"type",schemaType:["string","array"]},{keyword:"nullable",schemaType:"boolean"},oDe.default,sDe.default];cL.default=iDe});var pL=T(rh=>{"use strict";Object.defineProperty(rh,"__esModule",{value:!0});rh.validateAdditionalItems=void 0;var Hu=Oe(),uL=Fe(),aDe={message:({params:{len:t}})=>(0,Hu.str)`must NOT have more than ${t} items`,params:({params:{len:t}})=>(0,Hu._)`{limit: ${t}}`},cDe={keyword:"additionalItems",type:"array",schemaType:["boolean","object"],before:"uniqueItems",error:aDe,code(t){let{parentSchema:e,it:n}=t,{items:r}=e;if(!Array.isArray(r)){(0,uL.checkStrictMode)(n,'"additionalItems" is ignored when "items" is not an array of schemas');return}Ene(t,r)}};function Ene(t,e){let{gen:n,schema:r,data:o,keyword:s,it:i}=t;i.items=!0;let a=n.const("len",(0,Hu._)`${o}.length`);if(r===!1)t.setParams({len:e.length}),t.pass((0,Hu._)`${a} <= ${e.length}`);else if(typeof r=="object"&&!(0,uL.alwaysValidSchema)(i,r)){let u=n.var("valid",(0,Hu._)`${a} <= ${e.length}`);n.if((0,Hu.not)(u),()=>c(u)),t.ok(u)}function c(u){n.forRange("i",e.length,a,p=>{t.subschema({keyword:s,dataProp:p,dataPropType:uL.Type.Num},u),i.allErrors||n.if((0,Hu.not)(u),()=>n.break())})}}rh.validateAdditionalItems=Ene;rh.default=cDe});var lL=T(oh=>{"use strict";Object.defineProperty(oh,"__esModule",{value:!0});oh.validateTuple=void 0;var Tne=Oe(),Jy=Fe(),uDe=Go(),pDe={keyword:"items",type:"array",schemaType:["object","array","boolean"],before:"uniqueItems",code(t){let{schema:e,it:n}=t;if(Array.isArray(e))return gne(t,"additionalItems",e);n.items=!0,!(0,Jy.alwaysValidSchema)(n,e)&&t.ok((0,uDe.validateArray)(t))}};function gne(t,e,n=t.schema){let{gen:r,parentSchema:o,data:s,keyword:i,it:a}=t;p(o),a.opts.unevaluated&&n.length&&a.items!==!0&&(a.items=Jy.mergeEvaluated.items(r,n.length,a.items));let c=r.name("valid"),u=r.const("len",(0,Tne._)`${s}.length`);n.forEach((l,d)=>{(0,Jy.alwaysValidSchema)(a,l)||(r.if((0,Tne._)`${u} > ${d}`,()=>t.subschema({keyword:i,schemaProp:d,dataProp:d},c)),t.ok(c))});function p(l){let{opts:d,errSchemaPath:f}=a,m=n.length,h=m===l.minItems&&(m===l.maxItems||l[e]===!1);if(d.strictTuples&&!h){let E=`"${i}" is ${m}-tuple, but minItems or maxItems/${e} are not specified or different at path "${f}"`;(0,Jy.checkStrictMode)(a,E,d.strictTuples)}}}oh.validateTuple=gne;oh.default=pDe});var Sne=T(dL=>{"use strict";Object.defineProperty(dL,"__esModule",{value:!0});var lDe=lL(),dDe={keyword:"prefixItems",type:"array",schemaType:["array"],before:"uniqueItems",code:t=>(0,lDe.validateTuple)(t,"items")};dL.default=dDe});var Rne=T(fL=>{"use strict";Object.defineProperty(fL,"__esModule",{value:!0});var Ane=Oe(),fDe=Fe(),mDe=Go(),_De=pL(),hDe={message:({params:{len:t}})=>(0,Ane.str)`must NOT have more than ${t} items`,params:({params:{len:t}})=>(0,Ane._)`{limit: ${t}}`},EDe={keyword:"items",type:"array",schemaType:["object","boolean"],before:"uniqueItems",error:hDe,code(t){let{schema:e,parentSchema:n,it:r}=t,{prefixItems:o}=n;r.items=!0,!(0,fDe.alwaysValidSchema)(r,e)&&(o?(0,_De.validateAdditionalItems)(t,o):t.ok((0,mDe.validateArray)(t)))}};fL.default=EDe});var yne=T(mL=>{"use strict";Object.defineProperty(mL,"__esModule",{value:!0});var Bo=Oe(),Qy=Fe(),TDe={message:({params:{min:t,max:e}})=>e===void 0?(0,Bo.str)`must contain at least ${t} valid item(s)`:(0,Bo.str)`must contain at least ${t} and no more than ${e} valid item(s)`,params:({params:{min:t,max:e}})=>e===void 0?(0,Bo._)`{minContains: ${t}}`:(0,Bo._)`{minContains: ${t}, maxContains: ${e}}`},gDe={keyword:"contains",type:"array",schemaType:["object","boolean"],before:"uniqueItems",trackErrors:!0,error:TDe,code(t){let{gen:e,schema:n,parentSchema:r,data:o,it:s}=t,i,a,{minContains:c,maxContains:u}=r;s.opts.next?(i=c===void 0?1:c,a=u):i=1;let p=e.const("len",(0,Bo._)`${o}.length`);if(t.setParams({min:i,max:a}),a===void 0&&i===0){(0,Qy.checkStrictMode)(s,'"minContains" == 0 without "maxContains": "contains" keyword ignored');return}if(a!==void 0&&i>a){(0,Qy.checkStrictMode)(s,'"minContains" > "maxContains" is always invalid'),t.fail();return}if((0,Qy.alwaysValidSchema)(s,n)){let h=(0,Bo._)`${p} >= ${i}`;a!==void 0&&(h=(0,Bo._)`${h} && ${p} <= ${a}`),t.pass(h);return}s.items=!0;let l=e.name("valid");a===void 0&&i===1?f(l,()=>e.if(l,()=>e.break())):i===0?(e.let(l,!0),a!==void 0&&e.if((0,Bo._)`${o}.length > 0`,d)):(e.let(l,!1),d()),t.result(l,()=>t.reset());function d(){let h=e.name("_valid"),E=e.let("count",0);f(h,()=>e.if(h,()=>m(E)))}function f(h,E){e.forRange("i",0,p,A=>{t.subschema({keyword:"contains",dataProp:A,dataPropType:Qy.Type.Num,compositeRule:!0},h),E()})}function m(h){e.code((0,Bo._)`${h}++`),a===void 0?e.if((0,Bo._)`${h} >= ${i}`,()=>e.assign(l,!0).break()):(e.if((0,Bo._)`${h} > ${a}`,()=>e.assign(l,!1).break()),i===1?e.assign(l,!0):e.if((0,Bo._)`${h} >= ${i}`,()=>e.assign(l,!0)))}}};mL.default=gDe});var One=T(Xs=>{"use strict";Object.defineProperty(Xs,"__esModule",{value:!0});Xs.validateSchemaDeps=Xs.validatePropertyDeps=Xs.error=void 0;var _L=Oe(),SDe=Fe(),sh=Go();Xs.error={message:({params:{property:t,depsCount:e,deps:n}})=>{let r=e===1?"property":"properties";return(0,_L.str)`must have ${r} ${n} when property ${t} is present`},params:({params:{property:t,depsCount:e,deps:n,missingProperty:r}})=>(0,_L._)`{property: ${t},
    missingProperty: ${r},
    depsCount: ${e},
    deps: ${n}}`};var ADe={keyword:"dependencies",type:"object",schemaType:"object",error:Xs.error,code(t){let[e,n]=RDe(t);bne(t,e),Nne(t,n)}};function RDe({schema:t}){let e={},n={};for(let r in t){if(r==="__proto__")continue;let o=Array.isArray(t[r])?e:n;o[r]=t[r]}return[e,n]}function bne(t,e=t.schema){let{gen:n,data:r,it:o}=t;if(Object.keys(e).length===0)return;let s=n.let("missing");for(let i in e){let a=e[i];if(a.length===0)continue;let c=(0,sh.propertyInData)(n,r,i,o.opts.ownProperties);t.setParams({property:i,depsCount:a.length,deps:a.join(", ")}),o.allErrors?n.if(c,()=>{for(let u of a)(0,sh.checkReportMissingProp)(t,u)}):(n.if((0,_L._)`${c} && (${(0,sh.checkMissingProp)(t,a,s)})`),(0,sh.reportMissingProp)(t,s),n.else())}}Xs.validatePropertyDeps=bne;function Nne(t,e=t.schema){let{gen:n,data:r,keyword:o,it:s}=t,i=n.name("valid");for(let a in e)(0,SDe.alwaysValidSchema)(s,e[a])||(n.if((0,sh.propertyInData)(n,r,a,s.opts.ownProperties),()=>{let c=t.subschema({keyword:o,schemaProp:a},i);t.mergeValidEvaluated(c,i)},()=>n.var(i,!0)),t.ok(i))}Xs.validateSchemaDeps=Nne;Xs.default=ADe});var vne=T(hL=>{"use strict";Object.defineProperty(hL,"__esModule",{value:!0});var Ine=Oe(),yDe=Fe(),bDe={message:"property name must be valid",params:({params:t})=>(0,Ine._)`{propertyName: ${t.propertyName}}`},NDe={keyword:"propertyNames",type:"object",schemaType:["object","boolean"],error:bDe,code(t){let{gen:e,schema:n,data:r,it:o}=t;if((0,yDe.alwaysValidSchema)(o,n))return;let s=e.name("valid");e.forIn("key",r,i=>{t.setParams({propertyName:i}),t.subschema({keyword:"propertyNames",data:i,dataTypes:["string"],propertyName:i,compositeRule:!0},s),e.if((0,Ine.not)(s),()=>{t.error(!0),o.allErrors||e.break()})}),t.ok(s)}};hL.default=NDe});var TL=T(EL=>{"use strict";Object.defineProperty(EL,"__esModule",{value:!0});var Xy=Go(),ms=Oe(),ODe=Gi(),eb=Fe(),IDe={message:"must NOT have additional properties",params:({params:t})=>(0,ms._)`{additionalProperty: ${t.additionalProperty}}`},vDe={keyword:"additionalProperties",type:["object"],schemaType:["boolean","object"],allowUndefined:!0,trackErrors:!0,error:IDe,code(t){let{gen:e,schema:n,parentSchema:r,data:o,errsCount:s,it:i}=t;if(!s)throw new Error("ajv implementation error");let{allErrors:a,opts:c}=i;if(i.props=!0,c.removeAdditional!=="all"&&(0,eb.alwaysValidSchema)(i,n))return;let u=(0,Xy.allSchemaProperties)(r.properties),p=(0,Xy.allSchemaProperties)(r.patternProperties);l(),t.ok((0,ms._)`${s} === ${ODe.default.errors}`);function l(){e.forIn("key",o,E=>{!u.length&&!p.length?m(E):e.if(d(E),()=>m(E))})}function d(E){let A;if(u.length>8){let R=(0,eb.schemaRefOrVal)(i,r.properties,"properties");A=(0,Xy.isOwnProperty)(e,R,E)}else u.length?A=(0,ms.or)(...u.map(R=>(0,ms._)`${E} === ${R}`)):A=ms.nil;return p.length&&(A=(0,ms.or)(A,...p.map(R=>(0,ms._)`${(0,Xy.usePattern)(t,R)}.test(${E})`))),(0,ms.not)(A)}function f(E){e.code((0,ms._)`delete ${o}[${E}]`)}function m(E){if(c.removeAdditional==="all"||c.removeAdditional&&n===!1){f(E);return}if(n===!1){t.setParams({additionalProperty:E}),t.error(),a||e.break();return}if(typeof n=="object"&&!(0,eb.alwaysValidSchema)(i,n)){let A=e.name("valid");c.removeAdditional==="failing"?(h(E,A,!1),e.if((0,ms.not)(A),()=>{t.reset(),f(E)})):(h(E,A),a||e.if((0,ms.not)(A),()=>e.break()))}}function h(E,A,R){let y={keyword:"additionalProperties",dataProp:E,dataPropType:eb.Type.Str};R===!1&&Object.assign(y,{compositeRule:!0,createErrors:!1,allErrors:!1}),t.subschema(y,A)}}};EL.default=vDe});var Cne=T(SL=>{"use strict";Object.defineProperty(SL,"__esModule",{value:!0});var xDe=q_(),xne=Go(),gL=Fe(),Pne=TL(),PDe={keyword:"properties",type:"object",schemaType:"object",code(t){let{gen:e,schema:n,parentSchema:r,data:o,it:s}=t;s.opts.removeAdditional==="all"&&r.additionalProperties===void 0&&Pne.default.code(new xDe.KeywordCxt(s,Pne.default,"additionalProperties"));let i=(0,xne.allSchemaProperties)(n);for(let l of i)s.definedProperties.add(l);s.opts.unevaluated&&i.length&&s.props!==!0&&(s.props=gL.mergeEvaluated.props(e,(0,gL.toHash)(i),s.props));let a=i.filter(l=>!(0,gL.alwaysValidSchema)(s,n[l]));if(a.length===0)return;let c=e.name("valid");for(let l of a)u(l)?p(l):(e.if((0,xne.propertyInData)(e,o,l,s.opts.ownProperties)),p(l),s.allErrors||e.else().var(c,!0),e.endIf()),t.it.definedProperties.add(l),t.ok(c);function u(l){return s.opts.useDefaults&&!s.compositeRule&&n[l].default!==void 0}function p(l){t.subschema({keyword:"properties",schemaProp:l,dataProp:l},c)}}};SL.default=PDe});var Dne=T(AL=>{"use strict";Object.defineProperty(AL,"__esModule",{value:!0});var Mne=Go(),tb=Oe(),wne=Fe(),Lne=Fe(),CDe={keyword:"patternProperties",type:"object",schemaType:"object",code(t){let{gen:e,schema:n,data:r,parentSchema:o,it:s}=t,{opts:i}=s,a=(0,Mne.allSchemaProperties)(n),c=a.filter(h=>(0,wne.alwaysValidSchema)(s,n[h]));if(a.length===0||c.length===a.length&&(!s.opts.unevaluated||s.props===!0))return;let u=i.strictSchema&&!i.allowMatchingProperties&&o.properties,p=e.name("valid");s.props!==!0&&!(s.props instanceof tb.Name)&&(s.props=(0,Lne.evaluatedPropsToName)(e,s.props));let{props:l}=s;d();function d(){for(let h of a)u&&f(h),s.allErrors?m(h):(e.var(p,!0),m(h),e.if(p))}function f(h){for(let E in u)new RegExp(h).test(E)&&(0,wne.checkStrictMode)(s,`property ${E} matches pattern ${h} (use allowMatchingProperties)`)}function m(h){e.forIn("key",r,E=>{e.if((0,tb._)`${(0,Mne.usePattern)(t,h)}.test(${E})`,()=>{let A=c.includes(h);A||t.subschema({keyword:"patternProperties",schemaProp:h,dataProp:E,dataPropType:Lne.Type.Str},p),s.opts.unevaluated&&l!==!0?e.assign((0,tb._)`${l}[${E}]`,!0):!A&&!s.allErrors&&e.if((0,tb.not)(p),()=>e.break())})})}}};AL.default=CDe});var kne=T(RL=>{"use strict";Object.defineProperty(RL,"__esModule",{value:!0});var MDe=Fe(),wDe={keyword:"not",schemaType:["object","boolean"],trackErrors:!0,code(t){let{gen:e,schema:n,it:r}=t;if((0,MDe.alwaysValidSchema)(r,n)){t.fail();return}let o=e.name("valid");t.subschema({keyword:"not",compositeRule:!0,createErrors:!1,allErrors:!1},o),t.failResult(o,()=>t.reset(),()=>t.error())},error:{message:"must NOT be valid"}};RL.default=wDe});var Une=T(yL=>{"use strict";Object.defineProperty(yL,"__esModule",{value:!0});var LDe=Go(),DDe={keyword:"anyOf",schemaType:"array",trackErrors:!0,code:LDe.validateUnion,error:{message:"must match a schema in anyOf"}};yL.default=DDe});var $ne=T(bL=>{"use strict";Object.defineProperty(bL,"__esModule",{value:!0});var nb=Oe(),kDe=Fe(),UDe={message:"must match exactly one schema in oneOf",params:({params:t})=>(0,nb._)`{passingSchemas: ${t.passing}}`},$De={keyword:"oneOf",schemaType:"array",trackErrors:!0,error:UDe,code(t){let{gen:e,schema:n,parentSchema:r,it:o}=t;if(!Array.isArray(n))throw new Error("ajv implementation error");if(o.opts.discriminator&&r.discriminator)return;let s=n,i=e.let("valid",!1),a=e.let("passing",null),c=e.name("_valid");t.setParams({passing:a}),e.block(u),t.result(i,()=>t.reset(),()=>t.error(!0));function u(){s.forEach((p,l)=>{let d;(0,kDe.alwaysValidSchema)(o,p)?e.var(c,!0):d=t.subschema({keyword:"oneOf",schemaProp:l,compositeRule:!0},c),l>0&&e.if((0,nb._)`${c} && ${i}`).assign(i,!1).assign(a,(0,nb._)`[${a}, ${l}]`).else(),e.if(c,()=>{e.assign(i,!0),e.assign(a,l),d&&t.mergeEvaluated(d,nb.Name)})})}}};bL.default=$De});var Gne=T(NL=>{"use strict";Object.defineProperty(NL,"__esModule",{value:!0});var GDe=Fe(),VDe={keyword:"allOf",schemaType:"array",code(t){let{gen:e,schema:n,it:r}=t;if(!Array.isArray(n))throw new Error("ajv implementation error");let o=e.name("valid");n.forEach((s,i)=>{if((0,GDe.alwaysValidSchema)(r,s))return;let a=t.subschema({keyword:"allOf",schemaProp:i},o);t.ok(o),t.mergeEvaluated(a)})}};NL.default=VDe});var jne=T(OL=>{"use strict";Object.defineProperty(OL,"__esModule",{value:!0});var rb=Oe(),Bne=Fe(),BDe={message:({params:t})=>(0,rb.str)`must match "${t.ifClause}" schema`,params:({params:t})=>(0,rb._)`{failingKeyword: ${t.ifClause}}`},jDe={keyword:"if",schemaType:["object","boolean"],trackErrors:!0,error:BDe,code(t){let{gen:e,parentSchema:n,it:r}=t;n.then===void 0&&n.else===void 0&&(0,Bne.checkStrictMode)(r,'"if" without "then" and "else" is ignored');let o=Vne(r,"then"),s=Vne(r,"else");if(!o&&!s)return;let i=e.let("valid",!0),a=e.name("_valid");if(c(),t.reset(),o&&s){let p=e.let("ifClause");t.setParams({ifClause:p}),e.if(a,u("then",p),u("else",p))}else o?e.if(a,u("then")):e.if((0,rb.not)(a),u("else"));t.pass(i,()=>t.error(!0));function c(){let p=t.subschema({keyword:"if",compositeRule:!0,createErrors:!1,allErrors:!1},a);t.mergeEvaluated(p)}function u(p,l){return()=>{let d=t.subschema({keyword:p},a);e.assign(i,a),t.mergeValidEvaluated(d,i),l?e.assign(l,(0,rb._)`${p}`):t.setParams({ifClause:p})}}}};function Vne(t,e){let n=t.schema[e];return n!==void 0&&!(0,Bne.alwaysValidSchema)(t,n)}OL.default=jDe});var Hne=T(IL=>{"use strict";Object.defineProperty(IL,"__esModule",{value:!0});var HDe=Fe(),FDe={keyword:["then","else"],schemaType:["object","boolean"],code({keyword:t,parentSchema:e,it:n}){e.if===void 0&&(0,HDe.checkStrictMode)(n,`"${t}" without "if" is ignored`)}};IL.default=FDe});var Fne=T(vL=>{"use strict";Object.defineProperty(vL,"__esModule",{value:!0});var qDe=pL(),zDe=Sne(),YDe=lL(),WDe=Rne(),KDe=yne(),ZDe=One(),JDe=vne(),QDe=TL(),XDe=Cne(),eke=Dne(),tke=kne(),nke=Une(),rke=$ne(),oke=Gne(),ske=jne(),ike=Hne();function ake(t=!1){let e=[tke.default,nke.default,rke.default,oke.default,ske.default,ike.default,JDe.default,QDe.default,ZDe.default,XDe.default,eke.default];return t?e.push(zDe.default,WDe.default):e.push(qDe.default,YDe.default),e.push(KDe.default),e}vL.default=ake});var qne=T(xL=>{"use strict";Object.defineProperty(xL,"__esModule",{value:!0});var en=Oe(),cke={message:({schemaCode:t})=>(0,en.str)`must match format "${t}"`,params:({schemaCode:t})=>(0,en._)`{format: ${t}}`},uke={keyword:"format",type:["number","string"],schemaType:"string",$data:!0,error:cke,code(t,e){let{gen:n,data:r,$data:o,schema:s,schemaCode:i,it:a}=t,{opts:c,errSchemaPath:u,schemaEnv:p,self:l}=a;if(!c.validateFormats)return;o?d():f();function d(){let m=n.scopeValue("formats",{ref:l.formats,code:c.code.formats}),h=n.const("fDef",(0,en._)`${m}[${i}]`),E=n.let("fType"),A=n.let("format");n.if((0,en._)`typeof ${h} == "object" && !(${h} instanceof RegExp)`,()=>n.assign(E,(0,en._)`${h}.type || "string"`).assign(A,(0,en._)`${h}.validate`),()=>n.assign(E,(0,en._)`"string"`).assign(A,h)),t.fail$data((0,en.or)(R(),y()));function R(){return c.strictSchema===!1?en.nil:(0,en._)`${i} && !${A}`}function y(){let O=p.$async?(0,en._)`(${h}.async ? await ${A}(${r}) : ${A}(${r}))`:(0,en._)`${A}(${r})`,P=(0,en._)`(typeof ${A} == "function" ? ${O} : ${A}.test(${r}))`;return(0,en._)`${A} && ${A} !== true && ${E} === ${e} && !${P}`}}function f(){let m=l.formats[s];if(!m){R();return}if(m===!0)return;let[h,E,A]=y(m);h===e&&t.pass(O());function R(){if(c.strictSchema===!1){l.logger.warn(P());return}throw new Error(P());function P(){return`unknown format "${s}" ignored in schema at path "${u}"`}}function y(P){let M=P instanceof RegExp?(0,en.regexpCode)(P):c.code.formats?(0,en._)`${c.code.formats}${(0,en.getProperty)(s)}`:void 0,j=n.scopeValue("formats",{key:s,ref:P,code:M});return typeof P=="object"&&!(P instanceof RegExp)?[P.type||"string",P.validate,(0,en._)`${j}.validate`]:["string",P,j]}function O(){if(typeof m=="object"&&!(m instanceof RegExp)&&m.async){if(!p.$async)throw new Error("async format in sync schema");return(0,en._)`await ${A}(${r})`}return typeof E=="function"?(0,en._)`${A}(${r})`:(0,en._)`${A}.test(${r})`}}}};xL.default=uke});var zne=T(PL=>{"use strict";Object.defineProperty(PL,"__esModule",{value:!0});var pke=qne(),lke=[pke.default];PL.default=lke});var Yne=T(Nd=>{"use strict";Object.defineProperty(Nd,"__esModule",{value:!0});Nd.contentVocabulary=Nd.metadataVocabulary=void 0;Nd.metadataVocabulary=["title","description","default","deprecated","readOnly","writeOnly","examples"];Nd.contentVocabulary=["contentMediaType","contentEncoding","contentSchema"]});var Kne=T(CL=>{"use strict";Object.defineProperty(CL,"__esModule",{value:!0});var dke=nne(),fke=hne(),mke=Fne(),_ke=zne(),Wne=Yne(),hke=[dke.default,fke.default,(0,mke.default)(),_ke.default,Wne.metadataVocabulary,Wne.contentVocabulary];CL.default=hke});var Jne=T(ob=>{"use strict";Object.defineProperty(ob,"__esModule",{value:!0});ob.DiscrError=void 0;var Zne;(function(t){t.Tag="tag",t.Mapping="mapping"})(Zne||(ob.DiscrError=Zne={}))});var Xne=T(wL=>{"use strict";Object.defineProperty(wL,"__esModule",{value:!0});var Od=Oe(),ML=Jne(),Qne=Gy(),Eke=z_(),Tke=Fe(),gke={message:({params:{discrError:t,tagName:e}})=>t===ML.DiscrError.Tag?`tag "${e}" must be string`:`value of tag "${e}" must be in oneOf`,params:({params:{discrError:t,tag:e,tagName:n}})=>(0,Od._)`{error: ${t}, tag: ${n}, tagValue: ${e}}`},Ske={keyword:"discriminator",type:"object",schemaType:"object",error:gke,code(t){let{gen:e,data:n,schema:r,parentSchema:o,it:s}=t,{oneOf:i}=o;if(!s.opts.discriminator)throw new Error("discriminator: requires discriminator option");let a=r.propertyName;if(typeof a!="string")throw new Error("discriminator: requires propertyName");if(r.mapping)throw new Error("discriminator: mapping is not supported");if(!i)throw new Error("discriminator: requires oneOf keyword");let c=e.let("valid",!1),u=e.const("tag",(0,Od._)`${n}${(0,Od.getProperty)(a)}`);e.if((0,Od._)`typeof ${u} == "string"`,()=>p(),()=>t.error(!1,{discrError:ML.DiscrError.Tag,tag:u,tagName:a})),t.ok(c);function p(){let f=d();e.if(!1);for(let m in f)e.elseIf((0,Od._)`${u} === ${m}`),e.assign(c,l(f[m]));e.else(),t.error(!1,{discrError:ML.DiscrError.Mapping,tag:u,tagName:a}),e.endIf()}function l(f){let m=e.name("valid"),h=t.subschema({keyword:"oneOf",schemaProp:f},m);return t.mergeEvaluated(h,Od.Name),m}function d(){var f;let m={},h=A(o),E=!0;for(let O=0;O<i.length;O++){let P=i[O];if(P?.$ref&&!(0,Tke.schemaHasRulesButRef)(P,s.self.RULES)){let j=P.$ref;if(P=Qne.resolveRef.call(s.self,s.schemaEnv.root,s.baseId,j),P instanceof Qne.SchemaEnv&&(P=P.schema),P===void 0)throw new Eke.default(s.opts.uriResolver,s.baseId,j)}let M=(f=P?.properties)===null||f===void 0?void 0:f[a];if(typeof M!="object")throw new Error(`discriminator: oneOf subschemas (or referenced schemas) must have "properties/${a}"`);E=E&&(h||A(P)),R(M,O)}if(!E)throw new Error(`discriminator: "${a}" must be required`);return m;function A({required:O}){return Array.isArray(O)&&O.includes(a)}function R(O,P){if(O.const)y(O.const,P);else if(O.enum)for(let M of O.enum)y(M,P);else throw new Error(`discriminator: "properties/${a}" must have "const" or "enum"`)}function y(O,P){if(typeof O!="string"||O in m)throw new Error(`discriminator: "${a}" values must be unique strings`);m[O]=P}}}};wL.default=Ske});var ere=T((gct,Ake)=>{Ake.exports={$schema:"http://json-schema.org/draft-07/schema#",$id:"http://json-schema.org/draft-07/schema#",title:"Core schema meta-schema",definitions:{schemaArray:{type:"array",minItems:1,items:{$ref:"#"}},nonNegativeInteger:{type:"integer",minimum:0},nonNegativeIntegerDefault0:{allOf:[{$ref:"#/definitions/nonNegativeInteger"},{default:0}]},simpleTypes:{enum:["array","boolean","integer","null","number","object","string"]},stringArray:{type:"array",items:{type:"string"},uniqueItems:!0,default:[]}},type:["object","boolean"],properties:{$id:{type:"string",format:"uri-reference"},$schema:{type:"string",format:"uri"},$ref:{type:"string",format:"uri-reference"},$comment:{type:"string"},title:{type:"string"},description:{type:"string"},default:!0,readOnly:{type:"boolean",default:!1},examples:{type:"array",items:!0},multipleOf:{type:"number",exclusiveMinimum:0},maximum:{type:"number"},exclusiveMaximum:{type:"number"},minimum:{type:"number"},exclusiveMinimum:{type:"number"},maxLength:{$ref:"#/definitions/nonNegativeInteger"},minLength:{$ref:"#/definitions/nonNegativeIntegerDefault0"},pattern:{type:"string",format:"regex"},additionalItems:{$ref:"#"},items:{anyOf:[{$ref:"#"},{$ref:"#/definitions/schemaArray"}],default:!0},maxItems:{$ref:"#/definitions/nonNegativeInteger"},minItems:{$ref:"#/definitions/nonNegativeIntegerDefault0"},uniqueItems:{type:"boolean",default:!1},contains:{$ref:"#"},maxProperties:{$ref:"#/definitions/nonNegativeInteger"},minProperties:{$ref:"#/definitions/nonNegativeIntegerDefault0"},required:{$ref:"#/definitions/stringArray"},additionalProperties:{$ref:"#"},definitions:{type:"object",additionalProperties:{$ref:"#"},default:{}},properties:{type:"object",additionalProperties:{$ref:"#"},default:{}},patternProperties:{type:"object",additionalProperties:{$ref:"#"},propertyNames:{format:"regex"},default:{}},dependencies:{type:"object",additionalProperties:{anyOf:[{$ref:"#"},{$ref:"#/definitions/stringArray"}]}},propertyNames:{$ref:"#"},const:!0,enum:{type:"array",items:!0,minItems:1,uniqueItems:!0},type:{anyOf:[{$ref:"#/definitions/simpleTypes"},{type:"array",items:{$ref:"#/definitions/simpleTypes"},minItems:1,uniqueItems:!0}]},format:{type:"string"},contentMediaType:{type:"string"},contentEncoding:{type:"string"},if:{$ref:"#"},then:{$ref:"#"},else:{$ref:"#"},allOf:{$ref:"#/definitions/schemaArray"},anyOf:{$ref:"#/definitions/schemaArray"},oneOf:{$ref:"#/definitions/schemaArray"},not:{$ref:"#"}},default:!0}});var DL=T((ht,LL)=>{"use strict";Object.defineProperty(ht,"__esModule",{value:!0});ht.MissingRefError=ht.ValidationError=ht.CodeGen=ht.Name=ht.nil=ht.stringify=ht.str=ht._=ht.KeywordCxt=ht.Ajv=void 0;var Rke=Zte(),yke=Kne(),bke=Xne(),tre=ere(),Nke=["/properties"],sb="http://json-schema.org/draft-07/schema",Id=class extends Rke.default{_addVocabularies(){super._addVocabularies(),yke.default.forEach(e=>this.addVocabulary(e)),this.opts.discriminator&&this.addKeyword(bke.default)}_addDefaultMetaSchema(){if(super._addDefaultMetaSchema(),!this.opts.meta)return;let e=this.opts.$data?this.$dataMetaSchema(tre,Nke):tre;this.addMetaSchema(e,sb,!1),this.refs["http://json-schema.org/schema"]=sb}defaultMeta(){return this.opts.defaultMeta=super.defaultMeta()||(this.getSchema(sb)?sb:void 0)}};ht.Ajv=Id;LL.exports=ht=Id;LL.exports.Ajv=Id;Object.defineProperty(ht,"__esModule",{value:!0});ht.default=Id;var Oke=q_();Object.defineProperty(ht,"KeywordCxt",{enumerable:!0,get:function(){return Oke.KeywordCxt}});var vd=Oe();Object.defineProperty(ht,"_",{enumerable:!0,get:function(){return vd._}});Object.defineProperty(ht,"str",{enumerable:!0,get:function(){return vd.str}});Object.defineProperty(ht,"stringify",{enumerable:!0,get:function(){return vd.stringify}});Object.defineProperty(ht,"nil",{enumerable:!0,get:function(){return vd.nil}});Object.defineProperty(ht,"Name",{enumerable:!0,get:function(){return vd.Name}});Object.defineProperty(ht,"CodeGen",{enumerable:!0,get:function(){return vd.CodeGen}});var Ike=Uy();Object.defineProperty(ht,"ValidationError",{enumerable:!0,get:function(){return Ike.default}});var vke=z_();Object.defineProperty(ht,"MissingRefError",{enumerable:!0,get:function(){return vke.default}})});var ure=T(ti=>{"use strict";Object.defineProperty(ti,"__esModule",{value:!0});ti.formatNames=ti.fastFormats=ti.fullFormats=void 0;function ei(t,e){return{validate:t,compare:e}}ti.fullFormats={date:ei(sre,GL),time:ei(UL(!0),VL),"date-time":ei(nre(!0),are),"iso-time":ei(UL(),ire),"iso-date-time":ei(nre(),cre),duration:/^P(?!$)((\d+Y)?(\d+M)?(\d+D)?(T(?=\d)(\d+H)?(\d+M)?(\d+S)?)?|(\d+W)?)$/,uri:Lke,"uri-reference":/^(?:[a-z][a-z0-9+\-.]*:)?(?:\/?\/(?:(?:[a-z0-9\-._~!$&'()*+,;=:]|%[0-9a-f]{2})*@)?(?:\[(?:(?:(?:(?:[0-9a-f]{1,4}:){6}|::(?:[0-9a-f]{1,4}:){5}|(?:[0-9a-f]{1,4})?::(?:[0-9a-f]{1,4}:){4}|(?:(?:[0-9a-f]{1,4}:){0,1}[0-9a-f]{1,4})?::(?:[0-9a-f]{1,4}:){3}|(?:(?:[0-9a-f]{1,4}:){0,2}[0-9a-f]{1,4})?::(?:[0-9a-f]{1,4}:){2}|(?:(?:[0-9a-f]{1,4}:){0,3}[0-9a-f]{1,4})?::[0-9a-f]{1,4}:|(?:(?:[0-9a-f]{1,4}:){0,4}[0-9a-f]{1,4})?::)(?:[0-9a-f]{1,4}:[0-9a-f]{1,4}|(?:(?:25[0-5]|2[0-4]\d|[01]?\d\d?)\.){3}(?:25[0-5]|2[0-4]\d|[01]?\d\d?))|(?:(?:[0-9a-f]{1,4}:){0,5}[0-9a-f]{1,4})?::[0-9a-f]{1,4}|(?:(?:[0-9a-f]{1,4}:){0,6}[0-9a-f]{1,4})?::)|[Vv][0-9a-f]+\.[a-z0-9\-._~!$&'()*+,;=:]+)\]|(?:(?:25[0-5]|2[0-4]\d|[01]?\d\d?)\.){3}(?:25[0-5]|2[0-4]\d|[01]?\d\d?)|(?:[a-z0-9\-._~!$&'"()*+,;=]|%[0-9a-f]{2})*)(?::\d*)?(?:\/(?:[a-z0-9\-._~!$&'"()*+,;=:@]|%[0-9a-f]{2})*)*|\/(?:(?:[a-z0-9\-._~!$&'"()*+,;=:@]|%[0-9a-f]{2})+(?:\/(?:[a-z0-9\-._~!$&'"()*+,;=:@]|%[0-9a-f]{2})*)*)?|(?:[a-z0-9\-._~!$&'"()*+,;=:@]|%[0-9a-f]{2})+(?:\/(?:[a-z0-9\-._~!$&'"()*+,;=:@]|%[0-9a-f]{2})*)*)?(?:\?(?:[a-z0-9\-._~!$&'"()*+,;=:@/?]|%[0-9a-f]{2})*)?(?:#(?:[a-z0-9\-._~!$&'"()*+,;=:@/?]|%[0-9a-f]{2})*)?$/i,"uri-template":/^(?:(?:[^\x00-\x20"'<>%\\^`{|}]|%[0-9a-f]{2})|\{[+#./;?&=,!@|]?(?:[a-z0-9_]|%[0-9a-f]{2})+(?::[1-9][0-9]{0,3}|\*)?(?:,(?:[a-z0-9_]|%[0-9a-f]{2})+(?::[1-9][0-9]{0,3}|\*)?)*\})*$/i,url:/^(?:https?|ftp):\/\/(?:\S+(?::\S*)?@)?(?:(?!(?:10|127)(?:\.\d{1,3}){3})(?!(?:169\.254|192\.168)(?:\.\d{1,3}){2})(?!172\.(?:1[6-9]|2\d|3[0-1])(?:\.\d{1,3}){2})(?:[1-9]\d?|1\d\d|2[01]\d|22[0-3])(?:\.(?:1?\d{1,2}|2[0-4]\d|25[0-5])){2}(?:\.(?:[1-9]\d?|1\d\d|2[0-4]\d|25[0-4]))|(?:(?:[a-z0-9\u{00a1}-\u{ffff}]+-)*[a-z0-9\u{00a1}-\u{ffff}]+)(?:\.(?:[a-z0-9\u{00a1}-\u{ffff}]+-)*[a-z0-9\u{00a1}-\u{ffff}]+)*(?:\.(?:[a-z\u{00a1}-\u{ffff}]{2,})))(?::\d{2,5})?(?:\/[^\s]*)?$/iu,email:/^[a-z0-9!#$%&'*+/=?^_`{|}~-]+(?:\.[a-z0-9!#$%&'*+/=?^_`{|}~-]+)*@(?:[a-z0-9](?:[a-z0-9-]*[a-z0-9])?\.)+[a-z0-9](?:[a-z0-9-]*[a-z0-9])?$/i,hostname:/^(?=.{1,253}\.?$)[a-z0-9](?:[a-z0-9-]{0,61}[a-z0-9])?(?:\.[a-z0-9](?:[-0-9a-z]{0,61}[0-9a-z])?)*\.?$/i,ipv4:/^(?:(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)\.){3}(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)$/,ipv6:/^((([0-9a-f]{1,4}:){7}([0-9a-f]{1,4}|:))|(([0-9a-f]{1,4}:){6}(:[0-9a-f]{1,4}|((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3})|:))|(([0-9a-f]{1,4}:){5}(((:[0-9a-f]{1,4}){1,2})|:((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3})|:))|(([0-9a-f]{1,4}:){4}(((:[0-9a-f]{1,4}){1,3})|((:[0-9a-f]{1,4})?:((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:))|(([0-9a-f]{1,4}:){3}(((:[0-9a-f]{1,4}){1,4})|((:[0-9a-f]{1,4}){0,2}:((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:))|(([0-9a-f]{1,4}:){2}(((:[0-9a-f]{1,4}){1,5})|((:[0-9a-f]{1,4}){0,3}:((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:))|(([0-9a-f]{1,4}:){1}(((:[0-9a-f]{1,4}){1,6})|((:[0-9a-f]{1,4}){0,4}:((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:))|(:(((:[0-9a-f]{1,4}){1,7})|((:[0-9a-f]{1,4}){0,5}:((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:)))$/i,regex:Bke,uuid:/^(?:urn:uuid:)?[0-9a-f]{8}-(?:[0-9a-f]{4}-){3}[0-9a-f]{12}$/i,"json-pointer":/^(?:\/(?:[^~/]|~0|~1)*)*$/,"json-pointer-uri-fragment":/^#(?:\/(?:[a-z0-9_\-.!$&'()*+,;:=@]|%[0-9a-f]{2}|~0|~1)*)*$/i,"relative-json-pointer":/^(?:0|[1-9][0-9]*)(?:#|(?:\/(?:[^~/]|~0|~1)*)*)$/,byte:Dke,int32:{type:"number",validate:$ke},int64:{type:"number",validate:Gke},float:{type:"number",validate:ore},double:{type:"number",validate:ore},password:!0,binary:!0};ti.fastFormats={...ti.fullFormats,date:ei(/^\d\d\d\d-[0-1]\d-[0-3]\d$/,GL),time:ei(/^(?:[0-2]\d:[0-5]\d:[0-5]\d|23:59:60)(?:\.\d+)?(?:z|[+-]\d\d(?::?\d\d)?)$/i,VL),"date-time":ei(/^\d\d\d\d-[0-1]\d-[0-3]\dt(?:[0-2]\d:[0-5]\d:[0-5]\d|23:59:60)(?:\.\d+)?(?:z|[+-]\d\d(?::?\d\d)?)$/i,are),"iso-time":ei(/^(?:[0-2]\d:[0-5]\d:[0-5]\d|23:59:60)(?:\.\d+)?(?:z|[+-]\d\d(?::?\d\d)?)?$/i,ire),"iso-date-time":ei(/^\d\d\d\d-[0-1]\d-[0-3]\d[t\s](?:[0-2]\d:[0-5]\d:[0-5]\d|23:59:60)(?:\.\d+)?(?:z|[+-]\d\d(?::?\d\d)?)?$/i,cre),uri:/^(?:[a-z][a-z0-9+\-.]*:)(?:\/?\/)?[^\s]*$/i,"uri-reference":/^(?:(?:[a-z][a-z0-9+\-.]*:)?\/?\/)?(?:[^\\\s#][^\s#]*)?(?:#[^\\\s]*)?$/i,email:/^[a-z0-9.!#$%&'*+/=?^_`{|}~-]+@[a-z0-9](?:[a-z0-9-]{0,61}[a-z0-9])?(?:\.[a-z0-9](?:[a-z0-9-]{0,61}[a-z0-9])?)*$/i};ti.formatNames=Object.keys(ti.fullFormats);function xke(t){return t%4===0&&(t%100!==0||t%400===0)}var Pke=/^(\d\d\d\d)-(\d\d)-(\d\d)$/,Cke=[0,31,28,31,30,31,30,31,31,30,31,30,31];function sre(t){let e=Pke.exec(t);if(!e)return!1;let n=+e[1],r=+e[2],o=+e[3];return r>=1&&r<=12&&o>=1&&o<=(r===2&&xke(n)?29:Cke[r])}function GL(t,e){if(t&&e)return t>e?1:t<e?-1:0}var kL=/^(\d\d):(\d\d):(\d\d(?:\.\d+)?)(z|([+-])(\d\d)(?::?(\d\d))?)?$/i;function UL(t){return function(n){let r=kL.exec(n);if(!r)return!1;let o=+r[1],s=+r[2],i=+r[3],a=r[4],c=r[5]==="-"?-1:1,u=+(r[6]||0),p=+(r[7]||0);if(u>23||p>59||t&&!a)return!1;if(o<=23&&s<=59&&i<60)return!0;let l=s-p*c,d=o-u*c-(l<0?1:0);return(d===23||d===-1)&&(l===59||l===-1)&&i<61}}function VL(t,e){if(!(t&&e))return;let n=new Date("2020-01-01T"+t).valueOf(),r=new Date("2020-01-01T"+e).valueOf();if(n&&r)return n-r}function ire(t,e){if(!(t&&e))return;let n=kL.exec(t),r=kL.exec(e);if(n&&r)return t=n[1]+n[2]+n[3],e=r[1]+r[2]+r[3],t>e?1:t<e?-1:0}var $L=/t|\s/i;function nre(t){let e=UL(t);return function(r){let o=r.split($L);return o.length===2&&sre(o[0])&&e(o[1])}}function are(t,e){if(!(t&&e))return;let n=new Date(t).valueOf(),r=new Date(e).valueOf();if(n&&r)return n-r}function cre(t,e){if(!(t&&e))return;let[n,r]=t.split($L),[o,s]=e.split($L),i=GL(n,o);if(i!==void 0)return i||VL(r,s)}var Mke=/\/|:/,wke=/^(?:[a-z][a-z0-9+\-.]*:)(?:\/?\/(?:(?:[a-z0-9\-._~!$&'()*+,;=:]|%[0-9a-f]{2})*@)?(?:\[(?:(?:(?:(?:[0-9a-f]{1,4}:){6}|::(?:[0-9a-f]{1,4}:){5}|(?:[0-9a-f]{1,4})?::(?:[0-9a-f]{1,4}:){4}|(?:(?:[0-9a-f]{1,4}:){0,1}[0-9a-f]{1,4})?::(?:[0-9a-f]{1,4}:){3}|(?:(?:[0-9a-f]{1,4}:){0,2}[0-9a-f]{1,4})?::(?:[0-9a-f]{1,4}:){2}|(?:(?:[0-9a-f]{1,4}:){0,3}[0-9a-f]{1,4})?::[0-9a-f]{1,4}:|(?:(?:[0-9a-f]{1,4}:){0,4}[0-9a-f]{1,4})?::)(?:[0-9a-f]{1,4}:[0-9a-f]{1,4}|(?:(?:25[0-5]|2[0-4]\d|[01]?\d\d?)\.){3}(?:25[0-5]|2[0-4]\d|[01]?\d\d?))|(?:(?:[0-9a-f]{1,4}:){0,5}[0-9a-f]{1,4})?::[0-9a-f]{1,4}|(?:(?:[0-9a-f]{1,4}:){0,6}[0-9a-f]{1,4})?::)|[Vv][0-9a-f]+\.[a-z0-9\-._~!$&'()*+,;=:]+)\]|(?:(?:25[0-5]|2[0-4]\d|[01]?\d\d?)\.){3}(?:25[0-5]|2[0-4]\d|[01]?\d\d?)|(?:[a-z0-9\-._~!$&'()*+,;=]|%[0-9a-f]{2})*)(?::\d*)?(?:\/(?:[a-z0-9\-._~!$&'()*+,;=:@]|%[0-9a-f]{2})*)*|\/(?:(?:[a-z0-9\-._~!$&'()*+,;=:@]|%[0-9a-f]{2})+(?:\/(?:[a-z0-9\-._~!$&'()*+,;=:@]|%[0-9a-f]{2})*)*)?|(?:[a-z0-9\-._~!$&'()*+,;=:@]|%[0-9a-f]{2})+(?:\/(?:[a-z0-9\-._~!$&'()*+,;=:@]|%[0-9a-f]{2})*)*)(?:\?(?:[a-z0-9\-._~!$&'()*+,;=:@/?]|%[0-9a-f]{2})*)?(?:#(?:[a-z0-9\-._~!$&'()*+,;=:@/?]|%[0-9a-f]{2})*)?$/i;function Lke(t){return Mke.test(t)&&wke.test(t)}var rre=/^(?:[A-Za-z0-9+/]{4})*(?:[A-Za-z0-9+/]{2}==|[A-Za-z0-9+/]{3}=)?$/gm;function Dke(t){return rre.lastIndex=0,rre.test(t)}var kke=-(2**31),Uke=2**31-1;function $ke(t){return Number.isInteger(t)&&t<=Uke&&t>=kke}function Gke(t){return Number.isInteger(t)}function ore(){return!0}var Vke=/[^\\]\\Z/;function Bke(t){if(Vke.test(t))return!1;try{return new RegExp(t),!0}catch{return!1}}});var pre=T(xd=>{"use strict";Object.defineProperty(xd,"__esModule",{value:!0});xd.formatLimitDefinition=void 0;var jke=DL(),_s=Oe(),lc=_s.operators,ib={formatMaximum:{okStr:"<=",ok:lc.LTE,fail:lc.GT},formatMinimum:{okStr:">=",ok:lc.GTE,fail:lc.LT},formatExclusiveMaximum:{okStr:"<",ok:lc.LT,fail:lc.GTE},formatExclusiveMinimum:{okStr:">",ok:lc.GT,fail:lc.LTE}},Hke={message:({keyword:t,schemaCode:e})=>(0,_s.str)`should be ${ib[t].okStr} ${e}`,params:({keyword:t,schemaCode:e})=>(0,_s._)`{comparison: ${ib[t].okStr}, limit: ${e}}`};xd.formatLimitDefinition={keyword:Object.keys(ib),type:"string",schemaType:"string",$data:!0,error:Hke,code(t){let{gen:e,data:n,schemaCode:r,keyword:o,it:s}=t,{opts:i,self:a}=s;if(!i.validateFormats)return;let c=new jke.KeywordCxt(s,a.RULES.all.format.definition,"format");c.$data?u():p();function u(){let d=e.scopeValue("formats",{ref:a.formats,code:i.code.formats}),f=e.const("fmt",(0,_s._)`${d}[${c.schemaCode}]`);t.fail$data((0,_s.or)((0,_s._)`typeof ${f} != "object"`,(0,_s._)`${f} instanceof RegExp`,(0,_s._)`typeof ${f}.compare != "function"`,l(f)))}function p(){let d=c.schema,f=a.formats[d];if(!f||f===!0)return;if(typeof f!="object"||f instanceof RegExp||typeof f.compare!="function")throw new Error(`"${o}": format "${d}" does not define "compare" function`);let m=e.scopeValue("formats",{key:d,ref:f,code:i.code.formats?(0,_s._)`${i.code.formats}${(0,_s.getProperty)(d)}`:void 0});t.fail$data(l(m))}function l(d){return(0,_s._)`${d}.compare(${n}, ${r}) ${ib[o].fail} 0`}},dependencies:["format"]};var Fke=t=>(t.addKeyword(xd.formatLimitDefinition),t);xd.default=Fke});var mre=T((ih,fre)=>{"use strict";Object.defineProperty(ih,"__esModule",{value:!0});var Pd=ure(),qke=pre(),BL=Oe(),lre=new BL.Name("fullFormats"),zke=new BL.Name("fastFormats"),jL=(t,e={keywords:!0})=>{if(Array.isArray(e))return dre(t,e,Pd.fullFormats,lre),t;let[n,r]=e.mode==="fast"?[Pd.fastFormats,zke]:[Pd.fullFormats,lre],o=e.formats||Pd.formatNames;return dre(t,o,n,r),e.keywords&&(0,qke.default)(t),t};jL.get=(t,e="full")=>{let r=(e==="fast"?Pd.fastFormats:Pd.fullFormats)[t];if(!r)throw new Error(`Unknown format "${t}"`);return r};function dre(t,e,n,r){var o,s;(o=(s=t.opts.code).formats)!==null&&o!==void 0||(s.formats=(0,BL._)`require("ajv-formats/dist/formats").${r}`);for(let i of e)t.addFormat(i,n[i])}fre.exports=ih=jL;Object.defineProperty(ih,"__esModule",{value:!0});ih.default=jL});var Gre=T((sut,$re)=>{var Ure=q("stream").Stream,VUe=q("util");$re.exports=Es;function Es(){this.source=null,this.dataSize=0,this.maxDataSize=1024*1024,this.pauseStream=!0,this._maxDataSizeExceeded=!1,this._released=!1,this._bufferedEvents=[]}VUe.inherits(Es,Ure);Es.create=function(t,e){var n=new this;e=e||{};for(var r in e)n[r]=e[r];n.source=t;var o=t.emit;return t.emit=function(){return n._handleEmit(arguments),o.apply(t,arguments)},t.on("error",function(){}),n.pauseStream&&t.pause(),n};Object.defineProperty(Es.prototype,"readable",{configurable:!0,enumerable:!0,get:function(){return this.source.readable}});Es.prototype.setEncoding=function(){return this.source.setEncoding.apply(this.source,arguments)};Es.prototype.resume=function(){this._released||this.release(),this.source.resume()};Es.prototype.pause=function(){this.source.pause()};Es.prototype.release=function(){this._released=!0,this._bufferedEvents.forEach(function(t){this.emit.apply(this,t)}.bind(this)),this._bufferedEvents=[]};Es.prototype.pipe=function(){var t=Ure.prototype.pipe.apply(this,arguments);return this.resume(),t};Es.prototype._handleEmit=function(t){if(this._released){this.emit.apply(this,t);return}t[0]==="data"&&(this.dataSize+=t[1].length,this._checkIfMaxDataSizeExceeded()),this._bufferedEvents.push(t)};Es.prototype._checkIfMaxDataSizeExceeded=function(){if(!this._maxDataSizeExceeded&&!(this.dataSize<=this.maxDataSize)){this._maxDataSizeExceeded=!0;var t="DelayedStream#maxDataSize of "+this.maxDataSize+" bytes exceeded.";this.emit("error",new Error(t))}}});var Hre=T((iut,jre)=>{var BUe=q("util"),Bre=q("stream").Stream,Vre=Gre();jre.exports=Ht;function Ht(){this.writable=!1,this.readable=!0,this.dataSize=0,this.maxDataSize=2*1024*1024,this.pauseStreams=!0,this._released=!1,this._streams=[],this._currentStream=null,this._insideLoop=!1,this._pendingNext=!1}BUe.inherits(Ht,Bre);Ht.create=function(t){var e=new this;t=t||{};for(var n in t)e[n]=t[n];return e};Ht.isStreamLike=function(t){return typeof t!="function"&&typeof t!="string"&&typeof t!="boolean"&&typeof t!="number"&&!Buffer.isBuffer(t)};Ht.prototype.append=function(t){var e=Ht.isStreamLike(t);if(e){if(!(t instanceof Vre)){var n=Vre.create(t,{maxDataSize:1/0,pauseStream:this.pauseStreams});t.on("data",this._checkDataSize.bind(this)),t=n}this._handleErrors(t),this.pauseStreams&&t.pause()}return this._streams.push(t),this};Ht.prototype.pipe=function(t,e){return Bre.prototype.pipe.call(this,t,e),this.resume(),t};Ht.prototype._getNext=function(){if(this._currentStream=null,this._insideLoop){this._pendingNext=!0;return}this._insideLoop=!0;try{do this._pendingNext=!1,this._realGetNext();while(this._pendingNext)}finally{this._insideLoop=!1}};Ht.prototype._realGetNext=function(){var t=this._streams.shift();if(typeof t>"u"){this.end();return}if(typeof t!="function"){this._pipeNext(t);return}var e=t;e(function(n){var r=Ht.isStreamLike(n);r&&(n.on("data",this._checkDataSize.bind(this)),this._handleErrors(n)),this._pipeNext(n)}.bind(this))};Ht.prototype._pipeNext=function(t){this._currentStream=t;var e=Ht.isStreamLike(t);if(e){t.on("end",this._getNext.bind(this)),t.pipe(this,{end:!1});return}var n=t;this.write(n),this._getNext()};Ht.prototype._handleErrors=function(t){var e=this;t.on("error",function(n){e._emitError(n)})};Ht.prototype.write=function(t){this.emit("data",t)};Ht.prototype.pause=function(){this.pauseStreams&&(this.pauseStreams&&this._currentStream&&typeof this._currentStream.pause=="function"&&this._currentStream.pause(),this.emit("pause"))};Ht.prototype.resume=function(){this._released||(this._released=!0,this.writable=!0,this._getNext()),this.pauseStreams&&this._currentStream&&typeof this._currentStream.resume=="function"&&this._currentStream.resume(),this.emit("resume")};Ht.prototype.end=function(){this._reset(),this.emit("end")};Ht.prototype.destroy=function(){this._reset(),this.emit("close")};Ht.prototype._reset=function(){this.writable=!1,this._streams=[],this._currentStream=null};Ht.prototype._checkDataSize=function(){if(this._updateDataSize(),!(this.dataSize<=this.maxDataSize)){var t="DelayedStream#maxDataSize of "+this.maxDataSize+" bytes exceeded.";this._emitError(new Error(t))}};Ht.prototype._updateDataSize=function(){this.dataSize=0;var t=this;this._streams.forEach(function(e){e.dataSize&&(t.dataSize+=e.dataSize)}),this._currentStream&&this._currentStream.dataSize&&(this.dataSize+=this._currentStream.dataSize)};Ht.prototype._emitError=function(t){this._reset(),this.emit("error",t)}});var Fre=T((aut,jUe)=>{jUe.exports={"application/1d-interleaved-parityfec":{source:"iana"},"application/3gpdash-qoe-report+xml":{source:"iana",charset:"UTF-8",compressible:!0},"application/3gpp-ims+xml":{source:"iana",compressible:!0},"application/3gpphal+json":{source:"iana",compressible:!0},"application/3gpphalforms+json":{source:"iana",compressible:!0},"application/a2l":{source:"iana"},"application/ace+cbor":{source:"iana"},"application/activemessage":{source:"iana"},"application/activity+json":{source:"iana",compressible:!0},"application/alto-costmap+json":{source:"iana",compressible:!0},"application/alto-costmapfilter+json":{source:"iana",compressible:!0},"application/alto-directory+json":{source:"iana",compressible:!0},"application/alto-endpointcost+json":{source:"iana",compressible:!0},"application/alto-endpointcostparams+json":{source:"iana",compressible:!0},"application/alto-endpointprop+json":{source:"iana",compressible:!0},"application/alto-endpointpropparams+json":{source:"iana",compressible:!0},"application/alto-error+json":{source:"iana",compressible:!0},"application/alto-networkmap+json":{source:"iana",compressible:!0},"application/alto-networkmapfilter+json":{source:"iana",compressible:!0},"application/alto-updatestreamcontrol+json":{source:"iana",compressible:!0},"application/alto-updatestreamparams+json":{source:"iana",compressible:!0},"application/aml":{source:"iana"},"application/andrew-inset":{source:"iana",extensions:["ez"]},"application/applefile":{source:"iana"},"application/applixware":{source:"apache",extensions:["aw"]},"application/at+jwt":{source:"iana"},"application/atf":{source:"iana"},"application/atfx":{source:"iana"},"application/atom+xml":{source:"iana",compressible:!0,extensions:["atom"]},"application/atomcat+xml":{source:"iana",compressible:!0,extensions:["atomcat"]},"application/atomdeleted+xml":{source:"iana",compressible:!0,extensions:["atomdeleted"]},"application/atomicmail":{source:"iana"},"application/atomsvc+xml":{source:"iana",compressible:!0,extensions:["atomsvc"]},"application/atsc-dwd+xml":{source:"iana",compressible:!0,extensions:["dwd"]},"application/atsc-dynamic-event-message":{source:"iana"},"application/atsc-held+xml":{source:"iana",compressible:!0,extensions:["held"]},"application/atsc-rdt+json":{source:"iana",compressible:!0},"application/atsc-rsat+xml":{source:"iana",compressible:!0,extensions:["rsat"]},"application/atxml":{source:"iana"},"application/auth-policy+xml":{source:"iana",compressible:!0},"application/bacnet-xdd+zip":{source:"iana",compressible:!1},"application/batch-smtp":{source:"iana"},"application/bdoc":{compressible:!1,extensions:["bdoc"]},"application/beep+xml":{source:"iana",charset:"UTF-8",compressible:!0},"application/calendar+json":{source:"iana",compressible:!0},"application/calendar+xml":{source:"iana",compressible:!0,extensions:["xcs"]},"application/call-completion":{source:"iana"},"application/cals-1840":{source:"iana"},"application/captive+json":{source:"iana",compressible:!0},"application/cbor":{source:"iana"},"application/cbor-seq":{source:"iana"},"application/cccex":{source:"iana"},"application/ccmp+xml":{source:"iana",compressible:!0},"application/ccxml+xml":{source:"iana",compressible:!0,extensions:["ccxml"]},"application/cdfx+xml":{source:"iana",compressible:!0,extensions:["cdfx"]},"application/cdmi-capability":{source:"iana",extensions:["cdmia"]},"application/cdmi-container":{source:"iana",extensions:["cdmic"]},"application/cdmi-domain":{source:"iana",extensions:["cdmid"]},"application/cdmi-object":{source:"iana",extensions:["cdmio"]},"application/cdmi-queue":{source:"iana",extensions:["cdmiq"]},"application/cdni":{source:"iana"},"application/cea":{source:"iana"},"application/cea-2018+xml":{source:"iana",compressible:!0},"application/cellml+xml":{source:"iana",compressible:!0},"application/cfw":{source:"iana"},"application/city+json":{source:"iana",compressible:!0},"application/clr":{source:"iana"},"application/clue+xml":{source:"iana",compressible:!0},"application/clue_info+xml":{source:"iana",compressible:!0},"application/cms":{source:"iana"},"application/cnrp+xml":{source:"iana",compressible:!0},"application/coap-group+json":{source:"iana",compressible:!0},"application/coap-payload":{source:"iana"},"application/commonground":{source:"iana"},"application/conference-info+xml":{source:"iana",compressible:!0},"application/cose":{source:"iana"},"application/cose-key":{source:"iana"},"application/cose-key-set":{source:"iana"},"application/cpl+xml":{source:"iana",compressible:!0,extensions:["cpl"]},"application/csrattrs":{source:"iana"},"application/csta+xml":{source:"iana",compressible:!0},"application/cstadata+xml":{source:"iana",compressible:!0},"application/csvm+json":{source:"iana",compressible:!0},"application/cu-seeme":{source:"apache",extensions:["cu"]},"application/cwt":{source:"iana"},"application/cybercash":{source:"iana"},"application/dart":{compressible:!0},"application/dash+xml":{source:"iana",compressible:!0,extensions:["mpd"]},"application/dash-patch+xml":{source:"iana",compressible:!0,extensions:["mpp"]},"application/dashdelta":{source:"iana"},"application/davmount+xml":{source:"iana",compressible:!0,extensions:["davmount"]},"application/dca-rft":{source:"iana"},"application/dcd":{source:"iana"},"application/dec-dx":{source:"iana"},"application/dialog-info+xml":{source:"iana",compressible:!0},"application/dicom":{source:"iana"},"application/dicom+json":{source:"iana",compressible:!0},"application/dicom+xml":{source:"iana",compressible:!0},"application/dii":{source:"iana"},"application/dit":{source:"iana"},"application/dns":{source:"iana"},"application/dns+json":{source:"iana",compressible:!0},"application/dns-message":{source:"iana"},"application/docbook+xml":{source:"apache",compressible:!0,extensions:["dbk"]},"application/dots+cbor":{source:"iana"},"application/dskpp+xml":{source:"iana",compressible:!0},"application/dssc+der":{source:"iana",extensions:["dssc"]},"application/dssc+xml":{source:"iana",compressible:!0,extensions:["xdssc"]},"application/dvcs":{source:"iana"},"application/ecmascript":{source:"iana",compressible:!0,extensions:["es","ecma"]},"application/edi-consent":{source:"iana"},"application/edi-x12":{source:"iana",compressible:!1},"application/edifact":{source:"iana",compressible:!1},"application/efi":{source:"iana"},"application/elm+json":{source:"iana",charset:"UTF-8",compressible:!0},"application/elm+xml":{source:"iana",compressible:!0},"application/emergencycalldata.cap+xml":{source:"iana",charset:"UTF-8",compressible:!0},"application/emergencycalldata.comment+xml":{source:"iana",compressible:!0},"application/emergencycalldata.control+xml":{source:"iana",compressible:!0},"application/emergencycalldata.deviceinfo+xml":{source:"iana",compressible:!0},"application/emergencycalldata.ecall.msd":{source:"iana"},"application/emergencycalldata.providerinfo+xml":{source:"iana",compressible:!0},"application/emergencycalldata.serviceinfo+xml":{source:"iana",compressible:!0},"application/emergencycalldata.subscriberinfo+xml":{source:"iana",compressible:!0},"application/emergencycalldata.veds+xml":{source:"iana",compressible:!0},"application/emma+xml":{source:"iana",compressible:!0,extensions:["emma"]},"application/emotionml+xml":{source:"iana",compressible:!0,extensions:["emotionml"]},"application/encaprtp":{source:"iana"},"application/epp+xml":{source:"iana",compressible:!0},"application/epub+zip":{source:"iana",compressible:!1,extensions:["epub"]},"application/eshop":{source:"iana"},"application/exi":{source:"iana",extensions:["exi"]},"application/expect-ct-report+json":{source:"iana",compressible:!0},"application/express":{source:"iana",extensions:["exp"]},"application/fastinfoset":{source:"iana"},"application/fastsoap":{source:"iana"},"application/fdt+xml":{source:"iana",compressible:!0,extensions:["fdt"]},"application/fhir+json":{source:"iana",charset:"UTF-8",compressible:!0},"application/fhir+xml":{source:"iana",charset:"UTF-8",compressible:!0},"application/fido.trusted-apps+json":{compressible:!0},"application/fits":{source:"iana"},"application/flexfec":{source:"iana"},"application/font-sfnt":{source:"iana"},"application/font-tdpfr":{source:"iana",extensions:["pfr"]},"application/font-woff":{source:"iana",compressible:!1},"application/framework-attributes+xml":{source:"iana",compressible:!0},"application/geo+json":{source:"iana",compressible:!0,extensions:["geojson"]},"application/geo+json-seq":{source:"iana"},"application/geopackage+sqlite3":{source:"iana"},"application/geoxacml+xml":{source:"iana",compressible:!0},"application/gltf-buffer":{source:"iana"},"application/gml+xml":{source:"iana",compressible:!0,extensions:["gml"]},"application/gpx+xml":{source:"apache",compressible:!0,extensions:["gpx"]},"application/gxf":{source:"apache",extensions:["gxf"]},"application/gzip":{source:"iana",compressible:!1,extensions:["gz"]},"application/h224":{source:"iana"},"application/held+xml":{source:"iana",compressible:!0},"application/hjson":{extensions:["hjson"]},"application/http":{source:"iana"},"application/hyperstudio":{source:"iana",extensions:["stk"]},"application/ibe-key-request+xml":{source:"iana",compressible:!0},"application/ibe-pkg-reply+xml":{source:"iana",compressible:!0},"application/ibe-pp-data":{source:"iana"},"application/iges":{source:"iana"},"application/im-iscomposing+xml":{source:"iana",charset:"UTF-8",compressible:!0},"application/index":{source:"iana"},"application/index.cmd":{source:"iana"},"application/index.obj":{source:"iana"},"application/index.response":{source:"iana"},"application/index.vnd":{source:"iana"},"application/inkml+xml":{source:"iana",compressible:!0,extensions:["ink","inkml"]},"application/iotp":{source:"iana"},"application/ipfix":{source:"iana",extensions:["ipfix"]},"application/ipp":{source:"iana"},"application/isup":{source:"iana"},"application/its+xml":{source:"iana",compressible:!0,extensions:["its"]},"application/java-archive":{source:"apache",compressible:!1,extensions:["jar","war","ear"]},"application/java-serialized-object":{source:"apache",compressible:!1,extensions:["ser"]},"application/java-vm":{source:"apache",compressible:!1,extensions:["class"]},"application/javascript":{source:"iana",charset:"UTF-8",compressible:!0,extensions:["js","mjs"]},"application/jf2feed+json":{source:"iana",compressible:!0},"application/jose":{source:"iana"},"application/jose+json":{source:"iana",compressible:!0},"application/jrd+json":{source:"iana",compressible:!0},"application/jscalendar+json":{source:"iana",compressible:!0},"application/json":{source:"iana",charset:"UTF-8",compressible:!0,extensions:["json","map"]},"application/json-patch+json":{source:"iana",compressible:!0},"application/json-seq":{source:"iana"},"application/json5":{extensions:["json5"]},"application/jsonml+json":{source:"apache",compressible:!0,extensions:["jsonml"]},"application/jwk+json":{source:"iana",compressible:!0},"application/jwk-set+json":{source:"iana",compressible:!0},"application/jwt":{source:"iana"},"application/kpml-request+xml":{source:"iana",compressible:!0},"application/kpml-response+xml":{source:"iana",compressible:!0},"application/ld+json":{source:"iana",compressible:!0,extensions:["jsonld"]},"application/lgr+xml":{source:"iana",compressible:!0,extensions:["lgr"]},"application/link-format":{source:"iana"},"application/load-control+xml":{source:"iana",compressible:!0},"application/lost+xml":{source:"iana",compressible:!0,extensions:["lostxml"]},"application/lostsync+xml":{source:"iana",compressible:!0},"application/lpf+zip":{source:"iana",compressible:!1},"application/lxf":{source:"iana"},"application/mac-binhex40":{source:"iana",extensions:["hqx"]},"application/mac-compactpro":{source:"apache",extensions:["cpt"]},"application/macwriteii":{source:"iana"},"application/mads+xml":{source:"iana",compressible:!0,extensions:["mads"]},"application/manifest+json":{source:"iana",charset:"UTF-8",compressible:!0,extensions:["webmanifest"]},"application/marc":{source:"iana",extensions:["mrc"]},"application/marcxml+xml":{source:"iana",compressible:!0,extensions:["mrcx"]},"application/mathematica":{source:"iana",extensions:["ma","nb","mb"]},"application/mathml+xml":{source:"iana",compressible:!0,extensions:["mathml"]},"application/mathml-content+xml":{source:"iana",compressible:!0},"application/mathml-presentation+xml":{source:"iana",compressible:!0},"application/mbms-associated-procedure-description+xml":{source:"iana",compressible:!0},"application/mbms-deregister+xml":{source:"iana",compressible:!0},"application/mbms-envelope+xml":{source:"iana",compressible:!0},"application/mbms-msk+xml":{source:"iana",compressible:!0},"application/mbms-msk-response+xml":{source:"iana",compressible:!0},"application/mbms-protection-description+xml":{source:"iana",compressible:!0},"application/mbms-reception-report+xml":{source:"iana",compressible:!0},"application/mbms-register+xml":{source:"iana",compressible:!0},"application/mbms-register-response+xml":{source:"iana",compressible:!0},"application/mbms-schedule+xml":{source:"iana",compressible:!0},"application/mbms-user-service-description+xml":{source:"iana",compressible:!0},"application/mbox":{source:"iana",extensions:["mbox"]},"application/media-policy-dataset+xml":{source:"iana",compressible:!0,extensions:["mpf"]},"application/media_control+xml":{source:"iana",compressible:!0},"application/mediaservercontrol+xml":{source:"iana",compressible:!0,extensions:["mscml"]},"application/merge-patch+json":{source:"iana",compressible:!0},"application/metalink+xml":{source:"apache",compressible:!0,extensions:["metalink"]},"application/metalink4+xml":{source:"iana",compressible:!0,extensions:["meta4"]},"application/mets+xml":{source:"iana",compressible:!0,extensions:["mets"]},"application/mf4":{source:"iana"},"application/mikey":{source:"iana"},"application/mipc":{source:"iana"},"application/missing-blocks+cbor-seq":{source:"iana"},"application/mmt-aei+xml":{source:"iana",compressible:!0,extensions:["maei"]},"application/mmt-usd+xml":{source:"iana",compressible:!0,extensions:["musd"]},"application/mods+xml":{source:"iana",compressible:!0,extensions:["mods"]},"application/moss-keys":{source:"iana"},"application/moss-signature":{source:"iana"},"application/mosskey-data":{source:"iana"},"application/mosskey-request":{source:"iana"},"application/mp21":{source:"iana",extensions:["m21","mp21"]},"application/mp4":{source:"iana",extensions:["mp4s","m4p"]},"application/mpeg4-generic":{source:"iana"},"application/mpeg4-iod":{source:"iana"},"application/mpeg4-iod-xmt":{source:"iana"},"application/mrb-consumer+xml":{source:"iana",compressible:!0},"application/mrb-publish+xml":{source:"iana",compressible:!0},"application/msc-ivr+xml":{source:"iana",charset:"UTF-8",compressible:!0},"application/msc-mixer+xml":{source:"iana",charset:"UTF-8",compressible:!0},"application/msword":{source:"iana",compressible:!1,extensions:["doc","dot"]},"application/mud+json":{source:"iana",compressible:!0},"application/multipart-core":{source:"iana"},"application/mxf":{source:"iana",extensions:["mxf"]},"application/n-quads":{source:"iana",extensions:["nq"]},"application/n-triples":{source:"iana",extensions:["nt"]},"application/nasdata":{source:"iana"},"application/news-checkgroups":{source:"iana",charset:"US-ASCII"},"application/news-groupinfo":{source:"iana",charset:"US-ASCII"},"application/news-transmission":{source:"iana"},"application/nlsml+xml":{source:"iana",compressible:!0},"application/node":{source:"iana",extensions:["cjs"]},"application/nss":{source:"iana"},"application/oauth-authz-req+jwt":{source:"iana"},"application/oblivious-dns-message":{source:"iana"},"application/ocsp-request":{source:"iana"},"application/ocsp-response":{source:"iana"},"application/octet-stream":{source:"iana",compressible:!1,extensions:["bin","dms","lrf","mar","so","dist","distz","pkg","bpk","dump","elc","deploy","exe","dll","deb","dmg","iso","img","msi","msp","msm","buffer"]},"application/oda":{source:"iana",extensions:["oda"]},"application/odm+xml":{source:"iana",compressible:!0},"application/odx":{source:"iana"},"application/oebps-package+xml":{source:"iana",compressible:!0,extensions:["opf"]},"application/ogg":{source:"iana",compressible:!1,extensions:["ogx"]},"application/omdoc+xml":{source:"apache",compressible:!0,extensions:["omdoc"]},"application/onenote":{source:"apache",extensions:["onetoc","onetoc2","onetmp","onepkg"]},"application/opc-nodeset+xml":{source:"iana",compressible:!0},"application/oscore":{source:"iana"},"application/oxps":{source:"iana",extensions:["oxps"]},"application/p21":{source:"iana"},"application/p21+zip":{source:"iana",compressible:!1},"application/p2p-overlay+xml":{source:"iana",compressible:!0,extensions:["relo"]},"application/parityfec":{source:"iana"},"application/passport":{source:"iana"},"application/patch-ops-error+xml":{source:"iana",compressible:!0,extensions:["xer"]},"application/pdf":{source:"iana",compressible:!1,extensions:["pdf"]},"application/pdx":{source:"iana"},"application/pem-certificate-chain":{source:"iana"},"application/pgp-encrypted":{source:"iana",compressible:!1,extensions:["pgp"]},"application/pgp-keys":{source:"iana",extensions:["asc"]},"application/pgp-signature":{source:"iana",extensions:["asc","sig"]},"application/pics-rules":{source:"apache",extensions:["prf"]},"application/pidf+xml":{source:"iana",charset:"UTF-8",compressible:!0},"application/pidf-diff+xml":{source:"iana",charset:"UTF-8",compressible:!0},"application/pkcs10":{source:"iana",extensions:["p10"]},"application/pkcs12":{source:"iana"},"application/pkcs7-mime":{source:"iana",extensions:["p7m","p7c"]},"application/pkcs7-signature":{source:"iana",extensions:["p7s"]},"application/pkcs8":{source:"iana",extensions:["p8"]},"application/pkcs8-encrypted":{source:"iana"},"application/pkix-attr-cert":{source:"iana",extensions:["ac"]},"application/pkix-cert":{source:"iana",extensions:["cer"]},"application/pkix-crl":{source:"iana",extensions:["crl"]},"application/pkix-pkipath":{source:"iana",extensions:["pkipath"]},"application/pkixcmp":{source:"iana",extensions:["pki"]},"application/pls+xml":{source:"iana",compressible:!0,extensions:["pls"]},"application/poc-settings+xml":{source:"iana",charset:"UTF-8",compressible:!0},"application/postscript":{source:"iana",compressible:!0,extensions:["ai","eps","ps"]},"application/ppsp-tracker+json":{source:"iana",compressible:!0},"application/problem+json":{source:"iana",compressible:!0},"application/problem+xml":{source:"iana",compressible:!0},"application/provenance+xml":{source:"iana",compressible:!0,extensions:["provx"]},"application/prs.alvestrand.titrax-sheet":{source:"iana"},"application/prs.cww":{source:"iana",extensions:["cww"]},"application/prs.cyn":{source:"iana",charset:"7-BIT"},"application/prs.hpub+zip":{source:"iana",compressible:!1},"application/prs.nprend":{source:"iana"},"application/prs.plucker":{source:"iana"},"application/prs.rdf-xml-crypt":{source:"iana"},"application/prs.xsf+xml":{source:"iana",compressible:!0},"application/pskc+xml":{source:"iana",compressible:!0,extensions:["pskcxml"]},"application/pvd+json":{source:"iana",compressible:!0},"application/qsig":{source:"iana"},"application/raml+yaml":{compressible:!0,extensions:["raml"]},"application/raptorfec":{source:"iana"},"application/rdap+json":{source:"iana",compressible:!0},"application/rdf+xml":{source:"iana",compressible:!0,extensions:["rdf","owl"]},"application/reginfo+xml":{source:"iana",compressible:!0,extensions:["rif"]},"application/relax-ng-compact-syntax":{source:"iana",extensions:["rnc"]},"application/remote-printing":{source:"iana"},"application/reputon+json":{source:"iana",compressible:!0},"application/resource-lists+xml":{source:"iana",compressible:!0,extensions:["rl"]},"application/resource-lists-diff+xml":{source:"iana",compressible:!0,extensions:["rld"]},"application/rfc+xml":{source:"iana",compressible:!0},"application/riscos":{source:"iana"},"application/rlmi+xml":{source:"iana",compressible:!0},"application/rls-services+xml":{source:"iana",compressible:!0,extensions:["rs"]},"application/route-apd+xml":{source:"iana",compressible:!0,extensions:["rapd"]},"application/route-s-tsid+xml":{source:"iana",compressible:!0,extensions:["sls"]},"application/route-usd+xml":{source:"iana",compressible:!0,extensions:["rusd"]},"application/rpki-ghostbusters":{source:"iana",extensions:["gbr"]},"application/rpki-manifest":{source:"iana",extensions:["mft"]},"application/rpki-publication":{source:"iana"},"application/rpki-roa":{source:"iana",extensions:["roa"]},"application/rpki-updown":{source:"iana"},"application/rsd+xml":{source:"apache",compressible:!0,extensions:["rsd"]},"application/rss+xml":{source:"apache",compressible:!0,extensions:["rss"]},"application/rtf":{source:"iana",compressible:!0,extensions:["rtf"]},"application/rtploopback":{source:"iana"},"application/rtx":{source:"iana"},"application/samlassertion+xml":{source:"iana",compressible:!0},"application/samlmetadata+xml":{source:"iana",compressible:!0},"application/sarif+json":{source:"iana",compressible:!0},"application/sarif-external-properties+json":{source:"iana",compressible:!0},"application/sbe":{source:"iana"},"application/sbml+xml":{source:"iana",compressible:!0,extensions:["sbml"]},"application/scaip+xml":{source:"iana",compressible:!0},"application/scim+json":{source:"iana",compressible:!0},"application/scvp-cv-request":{source:"iana",extensions:["scq"]},"application/scvp-cv-response":{source:"iana",extensions:["scs"]},"application/scvp-vp-request":{source:"iana",extensions:["spq"]},"application/scvp-vp-response":{source:"iana",extensions:["spp"]},"application/sdp":{source:"iana",extensions:["sdp"]},"application/secevent+jwt":{source:"iana"},"application/senml+cbor":{source:"iana"},"application/senml+json":{source:"iana",compressible:!0},"application/senml+xml":{source:"iana",compressible:!0,extensions:["senmlx"]},"application/senml-etch+cbor":{source:"iana"},"application/senml-etch+json":{source:"iana",compressible:!0},"application/senml-exi":{source:"iana"},"application/sensml+cbor":{source:"iana"},"application/sensml+json":{source:"iana",compressible:!0},"application/sensml+xml":{source:"iana",compressible:!0,extensions:["sensmlx"]},"application/sensml-exi":{source:"iana"},"application/sep+xml":{source:"iana",compressible:!0},"application/sep-exi":{source:"iana"},"application/session-info":{source:"iana"},"application/set-payment":{source:"iana"},"application/set-payment-initiation":{source:"iana",extensions:["setpay"]},"application/set-registration":{source:"iana"},"application/set-registration-initiation":{source:"iana",extensions:["setreg"]},"application/sgml":{source:"iana"},"application/sgml-open-catalog":{source:"iana"},"application/shf+xml":{source:"iana",compressible:!0,extensions:["shf"]},"application/sieve":{source:"iana",extensions:["siv","sieve"]},"application/simple-filter+xml":{source:"iana",compressible:!0},"application/simple-message-summary":{source:"iana"},"application/simplesymbolcontainer":{source:"iana"},"application/sipc":{source:"iana"},"application/slate":{source:"iana"},"application/smil":{source:"iana"},"application/smil+xml":{source:"iana",compressible:!0,extensions:["smi","smil"]},"application/smpte336m":{source:"iana"},"application/soap+fastinfoset":{source:"iana"},"application/soap+xml":{source:"iana",compressible:!0},"application/sparql-query":{source:"iana",extensions:["rq"]},"application/sparql-results+xml":{source:"iana",compressible:!0,extensions:["srx"]},"application/spdx+json":{source:"iana",compressible:!0},"application/spirits-event+xml":{source:"iana",compressible:!0},"application/sql":{source:"iana"},"application/srgs":{source:"iana",extensions:["gram"]},"application/srgs+xml":{source:"iana",compressible:!0,extensions:["grxml"]},"application/sru+xml":{source:"iana",compressible:!0,extensions:["sru"]},"application/ssdl+xml":{source:"apache",compressible:!0,extensions:["ssdl"]},"application/ssml+xml":{source:"iana",compressible:!0,extensions:["ssml"]},"application/stix+json":{source:"iana",compressible:!0},"application/swid+xml":{source:"iana",compressible:!0,extensions:["swidtag"]},"application/tamp-apex-update":{source:"iana"},"application/tamp-apex-update-confirm":{source:"iana"},"application/tamp-community-update":{source:"iana"},"application/tamp-community-update-confirm":{source:"iana"},"application/tamp-error":{source:"iana"},"application/tamp-sequence-adjust":{source:"iana"},"application/tamp-sequence-adjust-confirm":{source:"iana"},"application/tamp-status-query":{source:"iana"},"application/tamp-status-response":{source:"iana"},"application/tamp-update":{source:"iana"},"application/tamp-update-confirm":{source:"iana"},"application/tar":{compressible:!0},"application/taxii+json":{source:"iana",compressible:!0},"application/td+json":{source:"iana",compressible:!0},"application/tei+xml":{source:"iana",compressible:!0,extensions:["tei","teicorpus"]},"application/tetra_isi":{source:"iana"},"application/thraud+xml":{source:"iana",compressible:!0,extensions:["tfi"]},"application/timestamp-query":{source:"iana"},"application/timestamp-reply":{source:"iana"},"application/timestamped-data":{source:"iana",extensions:["tsd"]},"application/tlsrpt+gzip":{source:"iana"},"application/tlsrpt+json":{source:"iana",compressible:!0},"application/tnauthlist":{source:"iana"},"application/token-introspection+jwt":{source:"iana"},"application/toml":{compressible:!0,extensions:["toml"]},"application/trickle-ice-sdpfrag":{source:"iana"},"application/trig":{source:"iana",extensions:["trig"]},"application/ttml+xml":{source:"iana",compressible:!0,extensions:["ttml"]},"application/tve-trigger":{source:"iana"},"application/tzif":{source:"iana"},"application/tzif-leap":{source:"iana"},"application/ubjson":{compressible:!1,extensions:["ubj"]},"application/ulpfec":{source:"iana"},"application/urc-grpsheet+xml":{source:"iana",compressible:!0},"application/urc-ressheet+xml":{source:"iana",compressible:!0,extensions:["rsheet"]},"application/urc-targetdesc+xml":{source:"iana",compressible:!0,extensions:["td"]},"application/urc-uisocketdesc+xml":{source:"iana",compressible:!0},"application/vcard+json":{source:"iana",compressible:!0},"application/vcard+xml":{source:"iana",compressible:!0},"application/vemmi":{source:"iana"},"application/vividence.scriptfile":{source:"apache"},"application/vnd.1000minds.decision-model+xml":{source:"iana",compressible:!0,extensions:["1km"]},"application/vnd.3gpp-prose+xml":{source:"iana",compressible:!0},"application/vnd.3gpp-prose-pc3ch+xml":{source:"iana",compressible:!0},"application/vnd.3gpp-v2x-local-service-information":{source:"iana"},"application/vnd.3gpp.5gnas":{source:"iana"},"application/vnd.3gpp.access-transfer-events+xml":{source:"iana",compressible:!0},"application/vnd.3gpp.bsf+xml":{source:"iana",compressible:!0},"application/vnd.3gpp.gmop+xml":{source:"iana",compressible:!0},"application/vnd.3gpp.gtpc":{source:"iana"},"application/vnd.3gpp.interworking-data":{source:"iana"},"application/vnd.3gpp.lpp":{source:"iana"},"application/vnd.3gpp.mc-signalling-ear":{source:"iana"},"application/vnd.3gpp.mcdata-affiliation-command+xml":{source:"iana",compressible:!0},"application/vnd.3gpp.mcdata-info+xml":{source:"iana",compressible:!0},"application/vnd.3gpp.mcdata-payload":{source:"iana"},"application/vnd.3gpp.mcdata-service-config+xml":{source:"iana",compressible:!0},"application/vnd.3gpp.mcdata-signalling":{source:"iana"},"application/vnd.3gpp.mcdata-ue-config+xml":{source:"iana",compressible:!0},"application/vnd.3gpp.mcdata-user-profile+xml":{source:"iana",compressible:!0},"application/vnd.3gpp.mcptt-affiliation-command+xml":{source:"iana",compressible:!0},"application/vnd.3gpp.mcptt-floor-request+xml":{source:"iana",compressible:!0},"application/vnd.3gpp.mcptt-info+xml":{source:"iana",compressible:!0},"application/vnd.3gpp.mcptt-location-info+xml":{source:"iana",compressible:!0},"application/vnd.3gpp.mcptt-mbms-usage-info+xml":{source:"iana",compressible:!0},"application/vnd.3gpp.mcptt-service-config+xml":{source:"iana",compressible:!0},"application/vnd.3gpp.mcptt-signed+xml":{source:"iana",compressible:!0},"application/vnd.3gpp.mcptt-ue-config+xml":{source:"iana",compressible:!0},"application/vnd.3gpp.mcptt-ue-init-config+xml":{source:"iana",compressible:!0},"application/vnd.3gpp.mcptt-user-profile+xml":{source:"iana",compressible:!0},"application/vnd.3gpp.mcvideo-affiliation-command+xml":{source:"iana",compressible:!0},"application/vnd.3gpp.mcvideo-affiliation-info+xml":{source:"iana",compressible:!0},"application/vnd.3gpp.mcvideo-info+xml":{source:"iana",compressible:!0},"application/vnd.3gpp.mcvideo-location-info+xml":{source:"iana",compressible:!0},"application/vnd.3gpp.mcvideo-mbms-usage-info+xml":{source:"iana",compressible:!0},"application/vnd.3gpp.mcvideo-service-config+xml":{source:"iana",compressible:!0},"application/vnd.3gpp.mcvideo-transmission-request+xml":{source:"iana",compressible:!0},"application/vnd.3gpp.mcvideo-ue-config+xml":{source:"iana",compressible:!0},"application/vnd.3gpp.mcvideo-user-profile+xml":{source:"iana",compressible:!0},"application/vnd.3gpp.mid-call+xml":{source:"iana",compressible:!0},"application/vnd.3gpp.ngap":{source:"iana"},"application/vnd.3gpp.pfcp":{source:"iana"},"application/vnd.3gpp.pic-bw-large":{source:"iana",extensions:["plb"]},"application/vnd.3gpp.pic-bw-small":{source:"iana",extensions:["psb"]},"application/vnd.3gpp.pic-bw-var":{source:"iana",extensions:["pvb"]},"application/vnd.3gpp.s1ap":{source:"iana"},"application/vnd.3gpp.sms":{source:"iana"},"application/vnd.3gpp.sms+xml":{source:"iana",compressible:!0},"application/vnd.3gpp.srvcc-ext+xml":{source:"iana",compressible:!0},"application/vnd.3gpp.srvcc-info+xml":{source:"iana",compressible:!0},"application/vnd.3gpp.state-and-event-info+xml":{source:"iana",compressible:!0},"application/vnd.3gpp.ussd+xml":{source:"iana",compressible:!0},"application/vnd.3gpp2.bcmcsinfo+xml":{source:"iana",compressible:!0},"application/vnd.3gpp2.sms":{source:"iana"},"application/vnd.3gpp2.tcap":{source:"iana",extensions:["tcap"]},"application/vnd.3lightssoftware.imagescal":{source:"iana"},"application/vnd.3m.post-it-notes":{source:"iana",extensions:["pwn"]},"application/vnd.accpac.simply.aso":{source:"iana",extensions:["aso"]},"application/vnd.accpac.simply.imp":{source:"iana",extensions:["imp"]},"application/vnd.acucobol":{source:"iana",extensions:["acu"]},"application/vnd.acucorp":{source:"iana",extensions:["atc","acutc"]},"application/vnd.adobe.air-application-installer-package+zip":{source:"apache",compressible:!1,extensions:["air"]},"application/vnd.adobe.flash.movie":{source:"iana"},"application/vnd.adobe.formscentral.fcdt":{source:"iana",extensions:["fcdt"]},"application/vnd.adobe.fxp":{source:"iana",extensions:["fxp","fxpl"]},"application/vnd.adobe.partial-upload":{source:"iana"},"application/vnd.adobe.xdp+xml":{source:"iana",compressible:!0,extensions:["xdp"]},"application/vnd.adobe.xfdf":{source:"iana",extensions:["xfdf"]},"application/vnd.aether.imp":{source:"iana"},"application/vnd.afpc.afplinedata":{source:"iana"},"application/vnd.afpc.afplinedata-pagedef":{source:"iana"},"application/vnd.afpc.cmoca-cmresource":{source:"iana"},"application/vnd.afpc.foca-charset":{source:"iana"},"application/vnd.afpc.foca-codedfont":{source:"iana"},"application/vnd.afpc.foca-codepage":{source:"iana"},"application/vnd.afpc.modca":{source:"iana"},"application/vnd.afpc.modca-cmtable":{source:"iana"},"application/vnd.afpc.modca-formdef":{source:"iana"},"application/vnd.afpc.modca-mediummap":{source:"iana"},"application/vnd.afpc.modca-objectcontainer":{source:"iana"},"application/vnd.afpc.modca-overlay":{source:"iana"},"application/vnd.afpc.modca-pagesegment":{source:"iana"},"application/vnd.age":{source:"iana",extensions:["age"]},"application/vnd.ah-barcode":{source:"iana"},"application/vnd.ahead.space":{source:"iana",extensions:["ahead"]},"application/vnd.airzip.filesecure.azf":{source:"iana",extensions:["azf"]},"application/vnd.airzip.filesecure.azs":{source:"iana",extensions:["azs"]},"application/vnd.amadeus+json":{source:"iana",compressible:!0},"application/vnd.amazon.ebook":{source:"apache",extensions:["azw"]},"application/vnd.amazon.mobi8-ebook":{source:"iana"},"application/vnd.americandynamics.acc":{source:"iana",extensions:["acc"]},"application/vnd.amiga.ami":{source:"iana",extensions:["ami"]},"application/vnd.amundsen.maze+xml":{source:"iana",compressible:!0},"application/vnd.android.ota":{source:"iana"},"application/vnd.android.package-archive":{source:"apache",compressible:!1,extensions:["apk"]},"application/vnd.anki":{source:"iana"},"application/vnd.anser-web-certificate-issue-initiation":{source:"iana",extensions:["cii"]},"application/vnd.anser-web-funds-transfer-initiation":{source:"apache",extensions:["fti"]},"application/vnd.antix.game-component":{source:"iana",extensions:["atx"]},"application/vnd.apache.arrow.file":{source:"iana"},"application/vnd.apache.arrow.stream":{source:"iana"},"application/vnd.apache.thrift.binary":{source:"iana"},"application/vnd.apache.thrift.compact":{source:"iana"},"application/vnd.apache.thrift.json":{source:"iana"},"application/vnd.api+json":{source:"iana",compressible:!0},"application/vnd.aplextor.warrp+json":{source:"iana",compressible:!0},"application/vnd.apothekende.reservation+json":{source:"iana",compressible:!0},"application/vnd.apple.installer+xml":{source:"iana",compressible:!0,extensions:["mpkg"]},"application/vnd.apple.keynote":{source:"iana",extensions:["key"]},"application/vnd.apple.mpegurl":{source:"iana",extensions:["m3u8"]},"application/vnd.apple.numbers":{source:"iana",extensions:["numbers"]},"application/vnd.apple.pages":{source:"iana",extensions:["pages"]},"application/vnd.apple.pkpass":{compressible:!1,extensions:["pkpass"]},"application/vnd.arastra.swi":{source:"iana"},"application/vnd.aristanetworks.swi":{source:"iana",extensions:["swi"]},"application/vnd.artisan+json":{source:"iana",compressible:!0},"application/vnd.artsquare":{source:"iana"},"application/vnd.astraea-software.iota":{source:"iana",extensions:["iota"]},"application/vnd.audiograph":{source:"iana",extensions:["aep"]},"application/vnd.autopackage":{source:"iana"},"application/vnd.avalon+json":{source:"iana",compressible:!0},"application/vnd.avistar+xml":{source:"iana",compressible:!0},"application/vnd.balsamiq.bmml+xml":{source:"iana",compressible:!0,extensions:["bmml"]},"application/vnd.balsamiq.bmpr":{source:"iana"},"application/vnd.banana-accounting":{source:"iana"},"application/vnd.bbf.usp.error":{source:"iana"},"application/vnd.bbf.usp.msg":{source:"iana"},"application/vnd.bbf.usp.msg+json":{source:"iana",compressible:!0},"application/vnd.bekitzur-stech+json":{source:"iana",compressible:!0},"application/vnd.bint.med-content":{source:"iana"},"application/vnd.biopax.rdf+xml":{source:"iana",compressible:!0},"application/vnd.blink-idb-value-wrapper":{source:"iana"},"application/vnd.blueice.multipass":{source:"iana",extensions:["mpm"]},"application/vnd.bluetooth.ep.oob":{source:"iana"},"application/vnd.bluetooth.le.oob":{source:"iana"},"application/vnd.bmi":{source:"iana",extensions:["bmi"]},"application/vnd.bpf":{source:"iana"},"application/vnd.bpf3":{source:"iana"},"application/vnd.businessobjects":{source:"iana",extensions:["rep"]},"application/vnd.byu.uapi+json":{source:"iana",compressible:!0},"application/vnd.cab-jscript":{source:"iana"},"application/vnd.canon-cpdl":{source:"iana"},"application/vnd.canon-lips":{source:"iana"},"application/vnd.capasystems-pg+json":{source:"iana",compressible:!0},"application/vnd.cendio.thinlinc.clientconf":{source:"iana"},"application/vnd.century-systems.tcp_stream":{source:"iana"},"application/vnd.chemdraw+xml":{source:"iana",compressible:!0,extensions:["cdxml"]},"application/vnd.chess-pgn":{source:"iana"},"application/vnd.chipnuts.karaoke-mmd":{source:"iana",extensions:["mmd"]},"application/vnd.ciedi":{source:"iana"},"application/vnd.cinderella":{source:"iana",extensions:["cdy"]},"application/vnd.cirpack.isdn-ext":{source:"iana"},"application/vnd.citationstyles.style+xml":{source:"iana",compressible:!0,extensions:["csl"]},"application/vnd.claymore":{source:"iana",extensions:["cla"]},"application/vnd.cloanto.rp9":{source:"iana",extensions:["rp9"]},"application/vnd.clonk.c4group":{source:"iana",extensions:["c4g","c4d","c4f","c4p","c4u"]},"application/vnd.cluetrust.cartomobile-config":{source:"iana",extensions:["c11amc"]},"application/vnd.cluetrust.cartomobile-config-pkg":{source:"iana",extensions:["c11amz"]},"application/vnd.coffeescript":{source:"iana"},"application/vnd.collabio.xodocuments.document":{source:"iana"},"application/vnd.collabio.xodocuments.document-template":{source:"iana"},"application/vnd.collabio.xodocuments.presentation":{source:"iana"},"application/vnd.collabio.xodocuments.presentation-template":{source:"iana"},"application/vnd.collabio.xodocuments.spreadsheet":{source:"iana"},"application/vnd.collabio.xodocuments.spreadsheet-template":{source:"iana"},"application/vnd.collection+json":{source:"iana",compressible:!0},"application/vnd.collection.doc+json":{source:"iana",compressible:!0},"application/vnd.collection.next+json":{source:"iana",compressible:!0},"application/vnd.comicbook+zip":{source:"iana",compressible:!1},"application/vnd.comicbook-rar":{source:"iana"},"application/vnd.commerce-battelle":{source:"iana"},"application/vnd.commonspace":{source:"iana",extensions:["csp"]},"application/vnd.contact.cmsg":{source:"iana",extensions:["cdbcmsg"]},"application/vnd.coreos.ignition+json":{source:"iana",compressible:!0},"application/vnd.cosmocaller":{source:"iana",extensions:["cmc"]},"application/vnd.crick.clicker":{source:"iana",extensions:["clkx"]},"application/vnd.crick.clicker.keyboard":{source:"iana",extensions:["clkk"]},"application/vnd.crick.clicker.palette":{source:"iana",extensions:["clkp"]},"application/vnd.crick.clicker.template":{source:"iana",extensions:["clkt"]},"application/vnd.crick.clicker.wordbank":{source:"iana",extensions:["clkw"]},"application/vnd.criticaltools.wbs+xml":{source:"iana",compressible:!0,extensions:["wbs"]},"application/vnd.cryptii.pipe+json":{source:"iana",compressible:!0},"application/vnd.crypto-shade-file":{source:"iana"},"application/vnd.cryptomator.encrypted":{source:"iana"},"application/vnd.cryptomator.vault":{source:"iana"},"application/vnd.ctc-posml":{source:"iana",extensions:["pml"]},"application/vnd.ctct.ws+xml":{source:"iana",compressible:!0},"application/vnd.cups-pdf":{source:"iana"},"application/vnd.cups-postscript":{source:"iana"},"application/vnd.cups-ppd":{source:"iana",extensions:["ppd"]},"application/vnd.cups-raster":{source:"iana"},"application/vnd.cups-raw":{source:"iana"},"application/vnd.curl":{source:"iana"},"application/vnd.curl.car":{source:"apache",extensions:["car"]},"application/vnd.curl.pcurl":{source:"apache",extensions:["pcurl"]},"application/vnd.cyan.dean.root+xml":{source:"iana",compressible:!0},"application/vnd.cybank":{source:"iana"},"application/vnd.cyclonedx+json":{source:"iana",compressible:!0},"application/vnd.cyclonedx+xml":{source:"iana",compressible:!0},"application/vnd.d2l.coursepackage1p0+zip":{source:"iana",compressible:!1},"application/vnd.d3m-dataset":{source:"iana"},"application/vnd.d3m-problem":{source:"iana"},"application/vnd.dart":{source:"iana",compressible:!0,extensions:["dart"]},"application/vnd.data-vision.rdz":{source:"iana",extensions:["rdz"]},"application/vnd.datapackage+json":{source:"iana",compressible:!0},"application/vnd.dataresource+json":{source:"iana",compressible:!0},"application/vnd.dbf":{source:"iana",extensions:["dbf"]},"application/vnd.debian.binary-package":{source:"iana"},"application/vnd.dece.data":{source:"iana",extensions:["uvf","uvvf","uvd","uvvd"]},"application/vnd.dece.ttml+xml":{source:"iana",compressible:!0,extensions:["uvt","uvvt"]},"application/vnd.dece.unspecified":{source:"iana",extensions:["uvx","uvvx"]},"application/vnd.dece.zip":{source:"iana",extensions:["uvz","uvvz"]},"application/vnd.denovo.fcselayout-link":{source:"iana",extensions:["fe_launch"]},"application/vnd.desmume.movie":{source:"iana"},"application/vnd.dir-bi.plate-dl-nosuffix":{source:"iana"},"application/vnd.dm.delegation+xml":{source:"iana",compressible:!0},"application/vnd.dna":{source:"iana",extensions:["dna"]},"application/vnd.document+json":{source:"iana",compressible:!0},"application/vnd.dolby.mlp":{source:"apache",extensions:["mlp"]},"application/vnd.dolby.mobile.1":{source:"iana"},"application/vnd.dolby.mobile.2":{source:"iana"},"application/vnd.doremir.scorecloud-binary-document":{source:"iana"},"application/vnd.dpgraph":{source:"iana",extensions:["dpg"]},"application/vnd.dreamfactory":{source:"iana",extensions:["dfac"]},"application/vnd.drive+json":{source:"iana",compressible:!0},"application/vnd.ds-keypoint":{source:"apache",extensions:["kpxx"]},"application/vnd.dtg.local":{source:"iana"},"application/vnd.dtg.local.flash":{source:"iana"},"application/vnd.dtg.local.html":{source:"iana"},"application/vnd.dvb.ait":{source:"iana",extensions:["ait"]},"application/vnd.dvb.dvbisl+xml":{source:"iana",compressible:!0},"application/vnd.dvb.dvbj":{source:"iana"},"application/vnd.dvb.esgcontainer":{source:"iana"},"application/vnd.dvb.ipdcdftnotifaccess":{source:"iana"},"application/vnd.dvb.ipdcesgaccess":{source:"iana"},"application/vnd.dvb.ipdcesgaccess2":{source:"iana"},"application/vnd.dvb.ipdcesgpdd":{source:"iana"},"application/vnd.dvb.ipdcroaming":{source:"iana"},"application/vnd.dvb.iptv.alfec-base":{source:"iana"},"application/vnd.dvb.iptv.alfec-enhancement":{source:"iana"},"application/vnd.dvb.notif-aggregate-root+xml":{source:"iana",compressible:!0},"application/vnd.dvb.notif-container+xml":{source:"iana",compressible:!0},"application/vnd.dvb.notif-generic+xml":{source:"iana",compressible:!0},"application/vnd.dvb.notif-ia-msglist+xml":{source:"iana",compressible:!0},"application/vnd.dvb.notif-ia-registration-request+xml":{source:"iana",compressible:!0},"application/vnd.dvb.notif-ia-registration-response+xml":{source:"iana",compressible:!0},"application/vnd.dvb.notif-init+xml":{source:"iana",compressible:!0},"application/vnd.dvb.pfr":{source:"iana"},"application/vnd.dvb.service":{source:"iana",extensions:["svc"]},"application/vnd.dxr":{source:"iana"},"application/vnd.dynageo":{source:"iana",extensions:["geo"]},"application/vnd.dzr":{source:"iana"},"application/vnd.easykaraoke.cdgdownload":{source:"iana"},"application/vnd.ecdis-update":{source:"iana"},"application/vnd.ecip.rlp":{source:"iana"},"application/vnd.eclipse.ditto+json":{source:"iana",compressible:!0},"application/vnd.ecowin.chart":{source:"iana",extensions:["mag"]},"application/vnd.ecowin.filerequest":{source:"iana"},"application/vnd.ecowin.fileupdate":{source:"iana"},"application/vnd.ecowin.series":{source:"iana"},"application/vnd.ecowin.seriesrequest":{source:"iana"},"application/vnd.ecowin.seriesupdate":{source:"iana"},"application/vnd.efi.img":{source:"iana"},"application/vnd.efi.iso":{source:"iana"},"application/vnd.emclient.accessrequest+xml":{source:"iana",compressible:!0},"application/vnd.enliven":{source:"iana",extensions:["nml"]},"application/vnd.enphase.envoy":{source:"iana"},"application/vnd.eprints.data+xml":{source:"iana",compressible:!0},"application/vnd.epson.esf":{source:"iana",extensions:["esf"]},"application/vnd.epson.msf":{source:"iana",extensions:["msf"]},"application/vnd.epson.quickanime":{source:"iana",extensions:["qam"]},"application/vnd.epson.salt":{source:"iana",extensions:["slt"]},"application/vnd.epson.ssf":{source:"iana",extensions:["ssf"]},"application/vnd.ericsson.quickcall":{source:"iana"},"application/vnd.espass-espass+zip":{source:"iana",compressible:!1},"application/vnd.eszigno3+xml":{source:"iana",compressible:!0,extensions:["es3","et3"]},"application/vnd.etsi.aoc+xml":{source:"iana",compressible:!0},"application/vnd.etsi.asic-e+zip":{source:"iana",compressible:!1},"application/vnd.etsi.asic-s+zip":{source:"iana",compressible:!1},"application/vnd.etsi.cug+xml":{source:"iana",compressible:!0},"application/vnd.etsi.iptvcommand+xml":{source:"iana",compressible:!0},"application/vnd.etsi.iptvdiscovery+xml":{source:"iana",compressible:!0},"application/vnd.etsi.iptvprofile+xml":{source:"iana",compressible:!0},"application/vnd.etsi.iptvsad-bc+xml":{source:"iana",compressible:!0},"application/vnd.etsi.iptvsad-cod+xml":{source:"iana",compressible:!0},"application/vnd.etsi.iptvsad-npvr+xml":{source:"iana",compressible:!0},"application/vnd.etsi.iptvservice+xml":{source:"iana",compressible:!0},"application/vnd.etsi.iptvsync+xml":{source:"iana",compressible:!0},"application/vnd.etsi.iptvueprofile+xml":{source:"iana",compressible:!0},"application/vnd.etsi.mcid+xml":{source:"iana",compressible:!0},"application/vnd.etsi.mheg5":{source:"iana"},"application/vnd.etsi.overload-control-policy-dataset+xml":{source:"iana",compressible:!0},"application/vnd.etsi.pstn+xml":{source:"iana",compressible:!0},"application/vnd.etsi.sci+xml":{source:"iana",compressible:!0},"application/vnd.etsi.simservs+xml":{source:"iana",compressible:!0},"application/vnd.etsi.timestamp-token":{source:"iana"},"application/vnd.etsi.tsl+xml":{source:"iana",compressible:!0},"application/vnd.etsi.tsl.der":{source:"iana"},"application/vnd.eu.kasparian.car+json":{source:"iana",compressible:!0},"application/vnd.eudora.data":{source:"iana"},"application/vnd.evolv.ecig.profile":{source:"iana"},"application/vnd.evolv.ecig.settings":{source:"iana"},"application/vnd.evolv.ecig.theme":{source:"iana"},"application/vnd.exstream-empower+zip":{source:"iana",compressible:!1},"application/vnd.exstream-package":{source:"iana"},"application/vnd.ezpix-album":{source:"iana",extensions:["ez2"]},"application/vnd.ezpix-package":{source:"iana",extensions:["ez3"]},"application/vnd.f-secure.mobile":{source:"iana"},"application/vnd.familysearch.gedcom+zip":{source:"iana",compressible:!1},"application/vnd.fastcopy-disk-image":{source:"iana"},"application/vnd.fdf":{source:"iana",extensions:["fdf"]},"application/vnd.fdsn.mseed":{source:"iana",extensions:["mseed"]},"application/vnd.fdsn.seed":{source:"iana",extensions:["seed","dataless"]},"application/vnd.ffsns":{source:"iana"},"application/vnd.ficlab.flb+zip":{source:"iana",compressible:!1},"application/vnd.filmit.zfc":{source:"iana"},"application/vnd.fints":{source:"iana"},"application/vnd.firemonkeys.cloudcell":{source:"iana"},"application/vnd.flographit":{source:"iana",extensions:["gph"]},"application/vnd.fluxtime.clip":{source:"iana",extensions:["ftc"]},"application/vnd.font-fontforge-sfd":{source:"iana"},"application/vnd.framemaker":{source:"iana",extensions:["fm","frame","maker","book"]},"application/vnd.frogans.fnc":{source:"iana",extensions:["fnc"]},"application/vnd.frogans.ltf":{source:"iana",extensions:["ltf"]},"application/vnd.fsc.weblaunch":{source:"iana",extensions:["fsc"]},"application/vnd.fujifilm.fb.docuworks":{source:"iana"},"application/vnd.fujifilm.fb.docuworks.binder":{source:"iana"},"application/vnd.fujifilm.fb.docuworks.container":{source:"iana"},"application/vnd.fujifilm.fb.jfi+xml":{source:"iana",compressible:!0},"application/vnd.fujitsu.oasys":{source:"iana",extensions:["oas"]},"application/vnd.fujitsu.oasys2":{source:"iana",extensions:["oa2"]},"application/vnd.fujitsu.oasys3":{source:"iana",extensions:["oa3"]},"application/vnd.fujitsu.oasysgp":{source:"iana",extensions:["fg5"]},"application/vnd.fujitsu.oasysprs":{source:"iana",extensions:["bh2"]},"application/vnd.fujixerox.art-ex":{source:"iana"},"application/vnd.fujixerox.art4":{source:"iana"},"application/vnd.fujixerox.ddd":{source:"iana",extensions:["ddd"]},"application/vnd.fujixerox.docuworks":{source:"iana",extensions:["xdw"]},"application/vnd.fujixerox.docuworks.binder":{source:"iana",extensions:["xbd"]},"application/vnd.fujixerox.docuworks.container":{source:"iana"},"application/vnd.fujixerox.hbpl":{source:"iana"},"application/vnd.fut-misnet":{source:"iana"},"application/vnd.futoin+cbor":{source:"iana"},"application/vnd.futoin+json":{source:"iana",compressible:!0},"application/vnd.fuzzysheet":{source:"iana",extensions:["fzs"]},"application/vnd.genomatix.tuxedo":{source:"iana",extensions:["txd"]},"application/vnd.gentics.grd+json":{source:"iana",compressible:!0},"application/vnd.geo+json":{source:"iana",compressible:!0},"application/vnd.geocube+xml":{source:"iana",compressible:!0},"application/vnd.geogebra.file":{source:"iana",extensions:["ggb"]},"application/vnd.geogebra.slides":{source:"iana"},"application/vnd.geogebra.tool":{source:"iana",extensions:["ggt"]},"application/vnd.geometry-explorer":{source:"iana",extensions:["gex","gre"]},"application/vnd.geonext":{source:"iana",extensions:["gxt"]},"application/vnd.geoplan":{source:"iana",extensions:["g2w"]},"application/vnd.geospace":{source:"iana",extensions:["g3w"]},"application/vnd.gerber":{source:"iana"},"application/vnd.globalplatform.card-content-mgt":{source:"iana"},"application/vnd.globalplatform.card-content-mgt-response":{source:"iana"},"application/vnd.gmx":{source:"iana",extensions:["gmx"]},"application/vnd.google-apps.document":{compressible:!1,extensions:["gdoc"]},"application/vnd.google-apps.presentation":{compressible:!1,extensions:["gslides"]},"application/vnd.google-apps.spreadsheet":{compressible:!1,extensions:["gsheet"]},"application/vnd.google-earth.kml+xml":{source:"iana",compressible:!0,extensions:["kml"]},"application/vnd.google-earth.kmz":{source:"iana",compressible:!1,extensions:["kmz"]},"application/vnd.gov.sk.e-form+xml":{source:"iana",compressible:!0},"application/vnd.gov.sk.e-form+zip":{source:"iana",compressible:!1},"application/vnd.gov.sk.xmldatacontainer+xml":{source:"iana",compressible:!0},"application/vnd.grafeq":{source:"iana",extensions:["gqf","gqs"]},"application/vnd.gridmp":{source:"iana"},"application/vnd.groove-account":{source:"iana",extensions:["gac"]},"application/vnd.groove-help":{source:"iana",extensions:["ghf"]},"application/vnd.groove-identity-message":{source:"iana",extensions:["gim"]},"application/vnd.groove-injector":{source:"iana",extensions:["grv"]},"application/vnd.groove-tool-message":{source:"iana",extensions:["gtm"]},"application/vnd.groove-tool-template":{source:"iana",extensions:["tpl"]},"application/vnd.groove-vcard":{source:"iana",extensions:["vcg"]},"application/vnd.hal+json":{source:"iana",compressible:!0},"application/vnd.hal+xml":{source:"iana",compressible:!0,extensions:["hal"]},"application/vnd.handheld-entertainment+xml":{source:"iana",compressible:!0,extensions:["zmm"]},"application/vnd.hbci":{source:"iana",extensions:["hbci"]},"application/vnd.hc+json":{source:"iana",compressible:!0},"application/vnd.hcl-bireports":{source:"iana"},"application/vnd.hdt":{source:"iana"},"application/vnd.heroku+json":{source:"iana",compressible:!0},"application/vnd.hhe.lesson-player":{source:"iana",extensions:["les"]},"application/vnd.hl7cda+xml":{source:"iana",charset:"UTF-8",compressible:!0},"application/vnd.hl7v2+xml":{source:"iana",charset:"UTF-8",compressible:!0},"application/vnd.hp-hpgl":{source:"iana",extensions:["hpgl"]},"application/vnd.hp-hpid":{source:"iana",extensions:["hpid"]},"application/vnd.hp-hps":{source:"iana",extensions:["hps"]},"application/vnd.hp-jlyt":{source:"iana",extensions:["jlt"]},"application/vnd.hp-pcl":{source:"iana",extensions:["pcl"]},"application/vnd.hp-pclxl":{source:"iana",extensions:["pclxl"]},"application/vnd.httphone":{source:"iana"},"application/vnd.hydrostatix.sof-data":{source:"iana",extensions:["sfd-hdstx"]},"application/vnd.hyper+json":{source:"iana",compressible:!0},"application/vnd.hyper-item+json":{source:"iana",compressible:!0},"application/vnd.hyperdrive+json":{source:"iana",compressible:!0},"application/vnd.hzn-3d-crossword":{source:"iana"},"application/vnd.ibm.afplinedata":{source:"iana"},"application/vnd.ibm.electronic-media":{source:"iana"},"application/vnd.ibm.minipay":{source:"iana",extensions:["mpy"]},"application/vnd.ibm.modcap":{source:"iana",extensions:["afp","listafp","list3820"]},"application/vnd.ibm.rights-management":{source:"iana",extensions:["irm"]},"application/vnd.ibm.secure-container":{source:"iana",extensions:["sc"]},"application/vnd.iccprofile":{source:"iana",extensions:["icc","icm"]},"application/vnd.ieee.1905":{source:"iana"},"application/vnd.igloader":{source:"iana",extensions:["igl"]},"application/vnd.imagemeter.folder+zip":{source:"iana",compressible:!1},"application/vnd.imagemeter.image+zip":{source:"iana",compressible:!1},"application/vnd.immervision-ivp":{source:"iana",extensions:["ivp"]},"application/vnd.immervision-ivu":{source:"iana",extensions:["ivu"]},"application/vnd.ims.imsccv1p1":{source:"iana"},"application/vnd.ims.imsccv1p2":{source:"iana"},"application/vnd.ims.imsccv1p3":{source:"iana"},"application/vnd.ims.lis.v2.result+json":{source:"iana",compressible:!0},"application/vnd.ims.lti.v2.toolconsumerprofile+json":{source:"iana",compressible:!0},"application/vnd.ims.lti.v2.toolproxy+json":{source:"iana",compressible:!0},"application/vnd.ims.lti.v2.toolproxy.id+json":{source:"iana",compressible:!0},"application/vnd.ims.lti.v2.toolsettings+json":{source:"iana",compressible:!0},"application/vnd.ims.lti.v2.toolsettings.simple+json":{source:"iana",compressible:!0},"application/vnd.informedcontrol.rms+xml":{source:"iana",compressible:!0},"application/vnd.informix-visionary":{source:"iana"},"application/vnd.infotech.project":{source:"iana"},"application/vnd.infotech.project+xml":{source:"iana",compressible:!0},"application/vnd.innopath.wamp.notification":{source:"iana"},"application/vnd.insors.igm":{source:"iana",extensions:["igm"]},"application/vnd.intercon.formnet":{source:"iana",extensions:["xpw","xpx"]},"application/vnd.intergeo":{source:"iana",extensions:["i2g"]},"application/vnd.intertrust.digibox":{source:"iana"},"application/vnd.intertrust.nncp":{source:"iana"},"application/vnd.intu.qbo":{source:"iana",extensions:["qbo"]},"application/vnd.intu.qfx":{source:"iana",extensions:["qfx"]},"application/vnd.iptc.g2.catalogitem+xml":{source:"iana",compressible:!0},"application/vnd.iptc.g2.conceptitem+xml":{source:"iana",compressible:!0},"application/vnd.iptc.g2.knowledgeitem+xml":{source:"iana",compressible:!0},"application/vnd.iptc.g2.newsitem+xml":{source:"iana",compressible:!0},"application/vnd.iptc.g2.newsmessage+xml":{source:"iana",compressible:!0},"application/vnd.iptc.g2.packageitem+xml":{source:"iana",compressible:!0},"application/vnd.iptc.g2.planningitem+xml":{source:"iana",compressible:!0},"application/vnd.ipunplugged.rcprofile":{source:"iana",extensions:["rcprofile"]},"application/vnd.irepository.package+xml":{source:"iana",compressible:!0,extensions:["irp"]},"application/vnd.is-xpr":{source:"iana",extensions:["xpr"]},"application/vnd.isac.fcs":{source:"iana",extensions:["fcs"]},"application/vnd.iso11783-10+zip":{source:"iana",compressible:!1},"application/vnd.jam":{source:"iana",extensions:["jam"]},"application/vnd.japannet-directory-service":{source:"iana"},"application/vnd.japannet-jpnstore-wakeup":{source:"iana"},"application/vnd.japannet-payment-wakeup":{source:"iana"},"application/vnd.japannet-registration":{source:"iana"},"application/vnd.japannet-registration-wakeup":{source:"iana"},"application/vnd.japannet-setstore-wakeup":{source:"iana"},"application/vnd.japannet-verification":{source:"iana"},"application/vnd.japannet-verification-wakeup":{source:"iana"},"application/vnd.jcp.javame.midlet-rms":{source:"iana",extensions:["rms"]},"application/vnd.jisp":{source:"iana",extensions:["jisp"]},"application/vnd.joost.joda-archive":{source:"iana",extensions:["joda"]},"application/vnd.jsk.isdn-ngn":{source:"iana"},"application/vnd.kahootz":{source:"iana",extensions:["ktz","ktr"]},"application/vnd.kde.karbon":{source:"iana",extensions:["karbon"]},"application/vnd.kde.kchart":{source:"iana",extensions:["chrt"]},"application/vnd.kde.kformula":{source:"iana",extensions:["kfo"]},"application/vnd.kde.kivio":{source:"iana",extensions:["flw"]},"application/vnd.kde.kontour":{source:"iana",extensions:["kon"]},"application/vnd.kde.kpresenter":{source:"iana",extensions:["kpr","kpt"]},"application/vnd.kde.kspread":{source:"iana",extensions:["ksp"]},"application/vnd.kde.kword":{source:"iana",extensions:["kwd","kwt"]},"application/vnd.kenameaapp":{source:"iana",extensions:["htke"]},"application/vnd.kidspiration":{source:"iana",extensions:["kia"]},"application/vnd.kinar":{source:"iana",extensions:["kne","knp"]},"application/vnd.koan":{source:"iana",extensions:["skp","skd","skt","skm"]},"application/vnd.kodak-descriptor":{source:"iana",extensions:["sse"]},"application/vnd.las":{source:"iana"},"application/vnd.las.las+json":{source:"iana",compressible:!0},"application/vnd.las.las+xml":{source:"iana",compressible:!0,extensions:["lasxml"]},"application/vnd.laszip":{source:"iana"},"application/vnd.leap+json":{source:"iana",compressible:!0},"application/vnd.liberty-request+xml":{source:"iana",compressible:!0},"application/vnd.llamagraphics.life-balance.desktop":{source:"iana",extensions:["lbd"]},"application/vnd.llamagraphics.life-balance.exchange+xml":{source:"iana",compressible:!0,extensions:["lbe"]},"application/vnd.logipipe.circuit+zip":{source:"iana",compressible:!1},"application/vnd.loom":{source:"iana"},"application/vnd.lotus-1-2-3":{source:"iana",extensions:["123"]},"application/vnd.lotus-approach":{source:"iana",extensions:["apr"]},"application/vnd.lotus-freelance":{source:"iana",extensions:["pre"]},"application/vnd.lotus-notes":{source:"iana",extensions:["nsf"]},"application/vnd.lotus-organizer":{source:"iana",extensions:["org"]},"application/vnd.lotus-screencam":{source:"iana",extensions:["scm"]},"application/vnd.lotus-wordpro":{source:"iana",extensions:["lwp"]},"application/vnd.macports.portpkg":{source:"iana",extensions:["portpkg"]},"application/vnd.mapbox-vector-tile":{source:"iana",extensions:["mvt"]},"application/vnd.marlin.drm.actiontoken+xml":{source:"iana",compressible:!0},"application/vnd.marlin.drm.conftoken+xml":{source:"iana",compressible:!0},"application/vnd.marlin.drm.license+xml":{source:"iana",compressible:!0},"application/vnd.marlin.drm.mdcf":{source:"iana"},"application/vnd.mason+json":{source:"iana",compressible:!0},"application/vnd.maxar.archive.3tz+zip":{source:"iana",compressible:!1},"application/vnd.maxmind.maxmind-db":{source:"iana"},"application/vnd.mcd":{source:"iana",extensions:["mcd"]},"application/vnd.medcalcdata":{source:"iana",extensions:["mc1"]},"application/vnd.mediastation.cdkey":{source:"iana",extensions:["cdkey"]},"application/vnd.meridian-slingshot":{source:"iana"},"application/vnd.mfer":{source:"iana",extensions:["mwf"]},"application/vnd.mfmp":{source:"iana",extensions:["mfm"]},"application/vnd.micro+json":{source:"iana",compressible:!0},"application/vnd.micrografx.flo":{source:"iana",extensions:["flo"]},"application/vnd.micrografx.igx":{source:"iana",extensions:["igx"]},"application/vnd.microsoft.portable-executable":{source:"iana"},"application/vnd.microsoft.windows.thumbnail-cache":{source:"iana"},"application/vnd.miele+json":{source:"iana",compressible:!0},"application/vnd.mif":{source:"iana",extensions:["mif"]},"application/vnd.minisoft-hp3000-save":{source:"iana"},"application/vnd.mitsubishi.misty-guard.trustweb":{source:"iana"},"application/vnd.mobius.daf":{source:"iana",extensions:["daf"]},"application/vnd.mobius.dis":{source:"iana",extensions:["dis"]},"application/vnd.mobius.mbk":{source:"iana",extensions:["mbk"]},"application/vnd.mobius.mqy":{source:"iana",extensions:["mqy"]},"application/vnd.mobius.msl":{source:"iana",extensions:["msl"]},"application/vnd.mobius.plc":{source:"iana",extensions:["plc"]},"application/vnd.mobius.txf":{source:"iana",extensions:["txf"]},"application/vnd.mophun.application":{source:"iana",extensions:["mpn"]},"application/vnd.mophun.certificate":{source:"iana",extensions:["mpc"]},"application/vnd.motorola.flexsuite":{source:"iana"},"application/vnd.motorola.flexsuite.adsi":{source:"iana"},"application/vnd.motorola.flexsuite.fis":{source:"iana"},"application/vnd.motorola.flexsuite.gotap":{source:"iana"},"application/vnd.motorola.flexsuite.kmr":{source:"iana"},"application/vnd.motorola.flexsuite.ttc":{source:"iana"},"application/vnd.motorola.flexsuite.wem":{source:"iana"},"application/vnd.motorola.iprm":{source:"iana"},"application/vnd.mozilla.xul+xml":{source:"iana",compressible:!0,extensions:["xul"]},"application/vnd.ms-3mfdocument":{source:"iana"},"application/vnd.ms-artgalry":{source:"iana",extensions:["cil"]},"application/vnd.ms-asf":{source:"iana"},"application/vnd.ms-cab-compressed":{source:"iana",extensions:["cab"]},"application/vnd.ms-color.iccprofile":{source:"apache"},"application/vnd.ms-excel":{source:"iana",compressible:!1,extensions:["xls","xlm","xla","xlc","xlt","xlw"]},"application/vnd.ms-excel.addin.macroenabled.12":{source:"iana",extensions:["xlam"]},"application/vnd.ms-excel.sheet.binary.macroenabled.12":{source:"iana",extensions:["xlsb"]},"application/vnd.ms-excel.sheet.macroenabled.12":{source:"iana",extensions:["xlsm"]},"application/vnd.ms-excel.template.macroenabled.12":{source:"iana",extensions:["xltm"]},"application/vnd.ms-fontobject":{source:"iana",compressible:!0,extensions:["eot"]},"application/vnd.ms-htmlhelp":{source:"iana",extensions:["chm"]},"application/vnd.ms-ims":{source:"iana",extensions:["ims"]},"application/vnd.ms-lrm":{source:"iana",extensions:["lrm"]},"application/vnd.ms-office.activex+xml":{source:"iana",compressible:!0},"application/vnd.ms-officetheme":{source:"iana",extensions:["thmx"]},"application/vnd.ms-opentype":{source:"apache",compressible:!0},"application/vnd.ms-outlook":{compressible:!1,extensions:["msg"]},"application/vnd.ms-package.obfuscated-opentype":{source:"apache"},"application/vnd.ms-pki.seccat":{source:"apache",extensions:["cat"]},"application/vnd.ms-pki.stl":{source:"apache",extensions:["stl"]},"application/vnd.ms-playready.initiator+xml":{source:"iana",compressible:!0},"application/vnd.ms-powerpoint":{source:"iana",compressible:!1,extensions:["ppt","pps","pot"]},"application/vnd.ms-powerpoint.addin.macroenabled.12":{source:"iana",extensions:["ppam"]},"application/vnd.ms-powerpoint.presentation.macroenabled.12":{source:"iana",extensions:["pptm"]},"application/vnd.ms-powerpoint.slide.macroenabled.12":{source:"iana",extensions:["sldm"]},"application/vnd.ms-powerpoint.slideshow.macroenabled.12":{source:"iana",extensions:["ppsm"]},"application/vnd.ms-powerpoint.template.macroenabled.12":{source:"iana",extensions:["potm"]},"application/vnd.ms-printdevicecapabilities+xml":{source:"iana",compressible:!0},"application/vnd.ms-printing.printticket+xml":{source:"apache",compressible:!0},"application/vnd.ms-printschematicket+xml":{source:"iana",compressible:!0},"application/vnd.ms-project":{source:"iana",extensions:["mpp","mpt"]},"application/vnd.ms-tnef":{source:"iana"},"application/vnd.ms-windows.devicepairing":{source:"iana"},"application/vnd.ms-windows.nwprinting.oob":{source:"iana"},"application/vnd.ms-windows.printerpairing":{source:"iana"},"application/vnd.ms-windows.wsd.oob":{source:"iana"},"application/vnd.ms-wmdrm.lic-chlg-req":{source:"iana"},"application/vnd.ms-wmdrm.lic-resp":{source:"iana"},"application/vnd.ms-wmdrm.meter-chlg-req":{source:"iana"},"application/vnd.ms-wmdrm.meter-resp":{source:"iana"},"application/vnd.ms-word.document.macroenabled.12":{source:"iana",extensions:["docm"]},"application/vnd.ms-word.template.macroenabled.12":{source:"iana",extensions:["dotm"]},"application/vnd.ms-works":{source:"iana",extensions:["wps","wks","wcm","wdb"]},"application/vnd.ms-wpl":{source:"iana",extensions:["wpl"]},"application/vnd.ms-xpsdocument":{source:"iana",compressible:!1,extensions:["xps"]},"application/vnd.msa-disk-image":{source:"iana"},"application/vnd.mseq":{source:"iana",extensions:["mseq"]},"application/vnd.msign":{source:"iana"},"application/vnd.multiad.creator":{source:"iana"},"application/vnd.multiad.creator.cif":{source:"iana"},"application/vnd.music-niff":{source:"iana"},"application/vnd.musician":{source:"iana",extensions:["mus"]},"application/vnd.muvee.style":{source:"iana",extensions:["msty"]},"application/vnd.mynfc":{source:"iana",extensions:["taglet"]},"application/vnd.nacamar.ybrid+json":{source:"iana",compressible:!0},"application/vnd.ncd.control":{source:"iana"},"application/vnd.ncd.reference":{source:"iana"},"application/vnd.nearst.inv+json":{source:"iana",compressible:!0},"application/vnd.nebumind.line":{source:"iana"},"application/vnd.nervana":{source:"iana"},"application/vnd.netfpx":{source:"iana"},"application/vnd.neurolanguage.nlu":{source:"iana",extensions:["nlu"]},"application/vnd.nimn":{source:"iana"},"application/vnd.nintendo.nitro.rom":{source:"iana"},"application/vnd.nintendo.snes.rom":{source:"iana"},"application/vnd.nitf":{source:"iana",extensions:["ntf","nitf"]},"application/vnd.noblenet-directory":{source:"iana",extensions:["nnd"]},"application/vnd.noblenet-sealer":{source:"iana",extensions:["nns"]},"application/vnd.noblenet-web":{source:"iana",extensions:["nnw"]},"application/vnd.nokia.catalogs":{source:"iana"},"application/vnd.nokia.conml+wbxml":{source:"iana"},"application/vnd.nokia.conml+xml":{source:"iana",compressible:!0},"application/vnd.nokia.iptv.config+xml":{source:"iana",compressible:!0},"application/vnd.nokia.isds-radio-presets":{source:"iana"},"application/vnd.nokia.landmark+wbxml":{source:"iana"},"application/vnd.nokia.landmark+xml":{source:"iana",compressible:!0},"application/vnd.nokia.landmarkcollection+xml":{source:"iana",compressible:!0},"application/vnd.nokia.n-gage.ac+xml":{source:"iana",compressible:!0,extensions:["ac"]},"application/vnd.nokia.n-gage.data":{source:"iana",extensions:["ngdat"]},"application/vnd.nokia.n-gage.symbian.install":{source:"iana",extensions:["n-gage"]},"application/vnd.nokia.ncd":{source:"iana"},"application/vnd.nokia.pcd+wbxml":{source:"iana"},"application/vnd.nokia.pcd+xml":{source:"iana",compressible:!0},"application/vnd.nokia.radio-preset":{source:"iana",extensions:["rpst"]},"application/vnd.nokia.radio-presets":{source:"iana",extensions:["rpss"]},"application/vnd.novadigm.edm":{source:"iana",extensions:["edm"]},"application/vnd.novadigm.edx":{source:"iana",extensions:["edx"]},"application/vnd.novadigm.ext":{source:"iana",extensions:["ext"]},"application/vnd.ntt-local.content-share":{source:"iana"},"application/vnd.ntt-local.file-transfer":{source:"iana"},"application/vnd.ntt-local.ogw_remote-access":{source:"iana"},"application/vnd.ntt-local.sip-ta_remote":{source:"iana"},"application/vnd.ntt-local.sip-ta_tcp_stream":{source:"iana"},"application/vnd.oasis.opendocument.chart":{source:"iana",extensions:["odc"]},"application/vnd.oasis.opendocument.chart-template":{source:"iana",extensions:["otc"]},"application/vnd.oasis.opendocument.database":{source:"iana",extensions:["odb"]},"application/vnd.oasis.opendocument.formula":{source:"iana",extensions:["odf"]},"application/vnd.oasis.opendocument.formula-template":{source:"iana",extensions:["odft"]},"application/vnd.oasis.opendocument.graphics":{source:"iana",compressible:!1,extensions:["odg"]},"application/vnd.oasis.opendocument.graphics-template":{source:"iana",extensions:["otg"]},"application/vnd.oasis.opendocument.image":{source:"iana",extensions:["odi"]},"application/vnd.oasis.opendocument.image-template":{source:"iana",extensions:["oti"]},"application/vnd.oasis.opendocument.presentation":{source:"iana",compressible:!1,extensions:["odp"]},"application/vnd.oasis.opendocument.presentation-template":{source:"iana",extensions:["otp"]},"application/vnd.oasis.opendocument.spreadsheet":{source:"iana",compressible:!1,extensions:["ods"]},"application/vnd.oasis.opendocument.spreadsheet-template":{source:"iana",extensions:["ots"]},"application/vnd.oasis.opendocument.text":{source:"iana",compressible:!1,extensions:["odt"]},"application/vnd.oasis.opendocument.text-master":{source:"iana",extensions:["odm"]},"application/vnd.oasis.opendocument.text-template":{source:"iana",extensions:["ott"]},"application/vnd.oasis.opendocument.text-web":{source:"iana",extensions:["oth"]},"application/vnd.obn":{source:"iana"},"application/vnd.ocf+cbor":{source:"iana"},"application/vnd.oci.image.manifest.v1+json":{source:"iana",compressible:!0},"application/vnd.oftn.l10n+json":{source:"iana",compressible:!0},"application/vnd.oipf.contentaccessdownload+xml":{source:"iana",compressible:!0},"application/vnd.oipf.contentaccessstreaming+xml":{source:"iana",compressible:!0},"application/vnd.oipf.cspg-hexbinary":{source:"iana"},"application/vnd.oipf.dae.svg+xml":{source:"iana",compressible:!0},"application/vnd.oipf.dae.xhtml+xml":{source:"iana",compressible:!0},"application/vnd.oipf.mippvcontrolmessage+xml":{source:"iana",compressible:!0},"application/vnd.oipf.pae.gem":{source:"iana"},"application/vnd.oipf.spdiscovery+xml":{source:"iana",compressible:!0},"application/vnd.oipf.spdlist+xml":{source:"iana",compressible:!0},"application/vnd.oipf.ueprofile+xml":{source:"iana",compressible:!0},"application/vnd.oipf.userprofile+xml":{source:"iana",compressible:!0},"application/vnd.olpc-sugar":{source:"iana",extensions:["xo"]},"application/vnd.oma-scws-config":{source:"iana"},"application/vnd.oma-scws-http-request":{source:"iana"},"application/vnd.oma-scws-http-response":{source:"iana"},"application/vnd.oma.bcast.associated-procedure-parameter+xml":{source:"iana",compressible:!0},"application/vnd.oma.bcast.drm-trigger+xml":{source:"iana",compressible:!0},"application/vnd.oma.bcast.imd+xml":{source:"iana",compressible:!0},"application/vnd.oma.bcast.ltkm":{source:"iana"},"application/vnd.oma.bcast.notification+xml":{source:"iana",compressible:!0},"application/vnd.oma.bcast.provisioningtrigger":{source:"iana"},"application/vnd.oma.bcast.sgboot":{source:"iana"},"application/vnd.oma.bcast.sgdd+xml":{source:"iana",compressible:!0},"application/vnd.oma.bcast.sgdu":{source:"iana"},"application/vnd.oma.bcast.simple-symbol-container":{source:"iana"},"application/vnd.oma.bcast.smartcard-trigger+xml":{source:"iana",compressible:!0},"application/vnd.oma.bcast.sprov+xml":{source:"iana",compressible:!0},"application/vnd.oma.bcast.stkm":{source:"iana"},"application/vnd.oma.cab-address-book+xml":{source:"iana",compressible:!0},"application/vnd.oma.cab-feature-handler+xml":{source:"iana",compressible:!0},"application/vnd.oma.cab-pcc+xml":{source:"iana",compressible:!0},"application/vnd.oma.cab-subs-invite+xml":{source:"iana",compressible:!0},"application/vnd.oma.cab-user-prefs+xml":{source:"iana",compressible:!0},"application/vnd.oma.dcd":{source:"iana"},"application/vnd.oma.dcdc":{source:"iana"},"application/vnd.oma.dd2+xml":{source:"iana",compressible:!0,extensions:["dd2"]},"application/vnd.oma.drm.risd+xml":{source:"iana",compressible:!0},"application/vnd.oma.group-usage-list+xml":{source:"iana",compressible:!0},"application/vnd.oma.lwm2m+cbor":{source:"iana"},"application/vnd.oma.lwm2m+json":{source:"iana",compressible:!0},"application/vnd.oma.lwm2m+tlv":{source:"iana"},"application/vnd.oma.pal+xml":{source:"iana",compressible:!0},"application/vnd.oma.poc.detailed-progress-report+xml":{source:"iana",compressible:!0},"application/vnd.oma.poc.final-report+xml":{source:"iana",compressible:!0},"application/vnd.oma.poc.groups+xml":{source:"iana",compressible:!0},"application/vnd.oma.poc.invocation-descriptor+xml":{source:"iana",compressible:!0},"application/vnd.oma.poc.optimized-progress-report+xml":{source:"iana",compressible:!0},"application/vnd.oma.push":{source:"iana"},"application/vnd.oma.scidm.messages+xml":{source:"iana",compressible:!0},"application/vnd.oma.xcap-directory+xml":{source:"iana",compressible:!0},"application/vnd.omads-email+xml":{source:"iana",charset:"UTF-8",compressible:!0},"application/vnd.omads-file+xml":{source:"iana",charset:"UTF-8",compressible:!0},"application/vnd.omads-folder+xml":{source:"iana",charset:"UTF-8",compressible:!0},"application/vnd.omaloc-supl-init":{source:"iana"},"application/vnd.onepager":{source:"iana"},"application/vnd.onepagertamp":{source:"iana"},"application/vnd.onepagertamx":{source:"iana"},"application/vnd.onepagertat":{source:"iana"},"application/vnd.onepagertatp":{source:"iana"},"application/vnd.onepagertatx":{source:"iana"},"application/vnd.openblox.game+xml":{source:"iana",compressible:!0,extensions:["obgx"]},"application/vnd.openblox.game-binary":{source:"iana"},"application/vnd.openeye.oeb":{source:"iana"},"application/vnd.openofficeorg.extension":{source:"apache",extensions:["oxt"]},"application/vnd.openstreetmap.data+xml":{source:"iana",compressible:!0,extensions:["osm"]},"application/vnd.opentimestamps.ots":{source:"iana"},"application/vnd.openxmlformats-officedocument.custom-properties+xml":{source:"iana",compressible:!0},"application/vnd.openxmlformats-officedocument.customxmlproperties+xml":{source:"iana",compressible:!0},"application/vnd.openxmlformats-officedocument.drawing+xml":{source:"iana",compressible:!0},"application/vnd.openxmlformats-officedocument.drawingml.chart+xml":{source:"iana",compressible:!0},"application/vnd.openxmlformats-officedocument.drawingml.chartshapes+xml":{source:"iana",compressible:!0},"application/vnd.openxmlformats-officedocument.drawingml.diagramcolors+xml":{source:"iana",compressible:!0},"application/vnd.openxmlformats-officedocument.drawingml.diagramdata+xml":{source:"iana",compressible:!0},"application/vnd.openxmlformats-officedocument.drawingml.diagramlayout+xml":{source:"iana",compressible:!0},"application/vnd.openxmlformats-officedocument.drawingml.diagramstyle+xml":{source:"iana",compressible:!0},"application/vnd.openxmlformats-officedocument.extended-properties+xml":{source:"iana",compressible:!0},"application/vnd.openxmlformats-officedocument.presentationml.commentauthors+xml":{source:"iana",compressible:!0},"application/vnd.openxmlformats-officedocument.presentationml.comments+xml":{source:"iana",compressible:!0},"application/vnd.openxmlformats-officedocument.presentationml.handoutmaster+xml":{source:"iana",compressible:!0},"application/vnd.openxmlformats-officedocument.presentationml.notesmaster+xml":{source:"iana",compressible:!0},"application/vnd.openxmlformats-officedocument.presentationml.notesslide+xml":{source:"iana",compressible:!0},"application/vnd.openxmlformats-officedocument.presentationml.presentation":{source:"iana",compressible:!1,extensions:["pptx"]},"application/vnd.openxmlformats-officedocument.presentationml.presentation.main+xml":{source:"iana",compressible:!0},"application/vnd.openxmlformats-officedocument.presentationml.presprops+xml":{source:"iana",compressible:!0},"application/vnd.openxmlformats-officedocument.presentationml.slide":{source:"iana",extensions:["sldx"]},"application/vnd.openxmlformats-officedocument.presentationml.slide+xml":{source:"iana",compressible:!0},"application/vnd.openxmlformats-officedocument.presentationml.slidelayout+xml":{source:"iana",compressible:!0},"application/vnd.openxmlformats-officedocument.presentationml.slidemaster+xml":{source:"iana",compressible:!0},"application/vnd.openxmlformats-officedocument.presentationml.slideshow":{source:"iana",extensions:["ppsx"]},"application/vnd.openxmlformats-officedocument.presentationml.slideshow.main+xml":{source:"iana",compressible:!0},"application/vnd.openxmlformats-officedocument.presentationml.slideupdateinfo+xml":{source:"iana",compressible:!0},"application/vnd.openxmlformats-officedocument.presentationml.tablestyles+xml":{source:"iana",compressible:!0},"application/vnd.openxmlformats-officedocument.presentationml.tags+xml":{source:"iana",compressible:!0},"application/vnd.openxmlformats-officedocument.presentationml.template":{source:"iana",extensions:["potx"]},"application/vnd.openxmlformats-officedocument.presentationml.template.main+xml":{source:"iana",compressible:!0},"application/vnd.openxmlformats-officedocument.presentationml.viewprops+xml":{source:"iana",compressible:!0},"application/vnd.openxmlformats-officedocument.spreadsheetml.calcchain+xml":{source:"iana",compressible:!0},"application/vnd.openxmlformats-officedocument.spreadsheetml.chartsheet+xml":{source:"iana",compressible:!0},"application/vnd.openxmlformats-officedocument.spreadsheetml.comments+xml":{source:"iana",compressible:!0},"application/vnd.openxmlformats-officedocument.spreadsheetml.connections+xml":{source:"iana",compressible:!0},"application/vnd.openxmlformats-officedocument.spreadsheetml.dialogsheet+xml":{source:"iana",compressible:!0},"application/vnd.openxmlformats-officedocument.spreadsheetml.externallink+xml":{source:"iana",compressible:!0},"application/vnd.openxmlformats-officedocument.spreadsheetml.pivotcachedefinition+xml":{source:"iana",compressible:!0},"application/vnd.openxmlformats-officedocument.spreadsheetml.pivotcacherecords+xml":{source:"iana",compressible:!0},"application/vnd.openxmlformats-officedocument.spreadsheetml.pivottable+xml":{source:"iana",compressible:!0},"application/vnd.openxmlformats-officedocument.spreadsheetml.querytable+xml":{source:"iana",compressible:!0},"application/vnd.openxmlformats-officedocument.spreadsheetml.revisionheaders+xml":{source:"iana",compressible:!0},"application/vnd.openxmlformats-officedocument.spreadsheetml.revisionlog+xml":{source:"iana",compressible:!0},"application/vnd.openxmlformats-officedocument.spreadsheetml.sharedstrings+xml":{source:"iana",compressible:!0},"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet":{source:"iana",compressible:!1,extensions:["xlsx"]},"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet.main+xml":{source:"iana",compressible:!0},"application/vnd.openxmlformats-officedocument.spreadsheetml.sheetmetadata+xml":{source:"iana",compressible:!0},"application/vnd.openxmlformats-officedocument.spreadsheetml.styles+xml":{source:"iana",compressible:!0},"application/vnd.openxmlformats-officedocument.spreadsheetml.table+xml":{source:"iana",compressible:!0},"application/vnd.openxmlformats-officedocument.spreadsheetml.tablesinglecells+xml":{source:"iana",compressible:!0},"application/vnd.openxmlformats-officedocument.spreadsheetml.template":{source:"iana",extensions:["xltx"]},"application/vnd.openxmlformats-officedocument.spreadsheetml.template.main+xml":{source:"iana",compressible:!0},"application/vnd.openxmlformats-officedocument.spreadsheetml.usernames+xml":{source:"iana",compressible:!0},"application/vnd.openxmlformats-officedocument.spreadsheetml.volatiledependencies+xml":{source:"iana",compressible:!0},"application/vnd.openxmlformats-officedocument.spreadsheetml.worksheet+xml":{source:"iana",compressible:!0},"application/vnd.openxmlformats-officedocument.theme+xml":{source:"iana",compressible:!0},"application/vnd.openxmlformats-officedocument.themeoverride+xml":{source:"iana",compressible:!0},"application/vnd.openxmlformats-officedocument.vmldrawing":{source:"iana"},"application/vnd.openxmlformats-officedocument.wordprocessingml.comments+xml":{source:"iana",compressible:!0},"application/vnd.openxmlformats-officedocument.wordprocessingml.document":{source:"iana",compressible:!1,extensions:["docx"]},"application/vnd.openxmlformats-officedocument.wordprocessingml.document.glossary+xml":{source:"iana",compressible:!0},"application/vnd.openxmlformats-officedocument.wordprocessingml.document.main+xml":{source:"iana",compressible:!0},"application/vnd.openxmlformats-officedocument.wordprocessingml.endnotes+xml":{source:"iana",compressible:!0},"application/vnd.openxmlformats-officedocument.wordprocessingml.fonttable+xml":{source:"iana",compressible:!0},"application/vnd.openxmlformats-officedocument.wordprocessingml.footer+xml":{source:"iana",compressible:!0},"application/vnd.openxmlformats-officedocument.wordprocessingml.footnotes+xml":{source:"iana",compressible:!0},"application/vnd.openxmlformats-officedocument.wordprocessingml.numbering+xml":{source:"iana",compressible:!0},"application/vnd.openxmlformats-officedocument.wordprocessingml.settings+xml":{source:"iana",compressible:!0},"application/vnd.openxmlformats-officedocument.wordprocessingml.styles+xml":{source:"iana",compressible:!0},"application/vnd.openxmlformats-officedocument.wordprocessingml.template":{source:"iana",extensions:["dotx"]},"application/vnd.openxmlformats-officedocument.wordprocessingml.template.main+xml":{source:"iana",compressible:!0},"application/vnd.openxmlformats-officedocument.wordprocessingml.websettings+xml":{source:"iana",compressible:!0},"application/vnd.openxmlformats-package.core-properties+xml":{source:"iana",compressible:!0},"application/vnd.openxmlformats-package.digital-signature-xmlsignature+xml":{source:"iana",compressible:!0},"application/vnd.openxmlformats-package.relationships+xml":{source:"iana",compressible:!0},"application/vnd.oracle.resource+json":{source:"iana",compressible:!0},"application/vnd.orange.indata":{source:"iana"},"application/vnd.osa.netdeploy":{source:"iana"},"application/vnd.osgeo.mapguide.package":{source:"iana",extensions:["mgp"]},"application/vnd.osgi.bundle":{source:"iana"},"application/vnd.osgi.dp":{source:"iana",extensions:["dp"]},"application/vnd.osgi.subsystem":{source:"iana",extensions:["esa"]},"application/vnd.otps.ct-kip+xml":{source:"iana",compressible:!0},"application/vnd.oxli.countgraph":{source:"iana"},"application/vnd.pagerduty+json":{source:"iana",compressible:!0},"application/vnd.palm":{source:"iana",extensions:["pdb","pqa","oprc"]},"application/vnd.panoply":{source:"iana"},"application/vnd.paos.xml":{source:"iana"},"application/vnd.patentdive":{source:"iana"},"application/vnd.patientecommsdoc":{source:"iana"},"application/vnd.pawaafile":{source:"iana",extensions:["paw"]},"application/vnd.pcos":{source:"iana"},"application/vnd.pg.format":{source:"iana",extensions:["str"]},"application/vnd.pg.osasli":{source:"iana",extensions:["ei6"]},"application/vnd.piaccess.application-licence":{source:"iana"},"application/vnd.picsel":{source:"iana",extensions:["efif"]},"application/vnd.pmi.widget":{source:"iana",extensions:["wg"]},"application/vnd.poc.group-advertisement+xml":{source:"iana",compressible:!0},"application/vnd.pocketlearn":{source:"iana",extensions:["plf"]},"application/vnd.powerbuilder6":{source:"iana",extensions:["pbd"]},"application/vnd.powerbuilder6-s":{source:"iana"},"application/vnd.powerbuilder7":{source:"iana"},"application/vnd.powerbuilder7-s":{source:"iana"},"application/vnd.powerbuilder75":{source:"iana"},"application/vnd.powerbuilder75-s":{source:"iana"},"application/vnd.preminet":{source:"iana"},"application/vnd.previewsystems.box":{source:"iana",extensions:["box"]},"application/vnd.proteus.magazine":{source:"iana",extensions:["mgz"]},"application/vnd.psfs":{source:"iana"},"application/vnd.publishare-delta-tree":{source:"iana",extensions:["qps"]},"application/vnd.pvi.ptid1":{source:"iana",extensions:["ptid"]},"application/vnd.pwg-multiplexed":{source:"iana"},"application/vnd.pwg-xhtml-print+xml":{source:"iana",compressible:!0},"application/vnd.qualcomm.brew-app-res":{source:"iana"},"application/vnd.quarantainenet":{source:"iana"},"application/vnd.quark.quarkxpress":{source:"iana",extensions:["qxd","qxt","qwd","qwt","qxl","qxb"]},"application/vnd.quobject-quoxdocument":{source:"iana"},"application/vnd.radisys.moml+xml":{source:"iana",compressible:!0},"application/vnd.radisys.msml+xml":{source:"iana",compressible:!0},"application/vnd.radisys.msml-audit+xml":{source:"iana",compressible:!0},"application/vnd.radisys.msml-audit-conf+xml":{source:"iana",compressible:!0},"application/vnd.radisys.msml-audit-conn+xml":{source:"iana",compressible:!0},"application/vnd.radisys.msml-audit-dialog+xml":{source:"iana",compressible:!0},"application/vnd.radisys.msml-audit-stream+xml":{source:"iana",compressible:!0},"application/vnd.radisys.msml-conf+xml":{source:"iana",compressible:!0},"application/vnd.radisys.msml-dialog+xml":{source:"iana",compressible:!0},"application/vnd.radisys.msml-dialog-base+xml":{source:"iana",compressible:!0},"application/vnd.radisys.msml-dialog-fax-detect+xml":{source:"iana",compressible:!0},"application/vnd.radisys.msml-dialog-fax-sendrecv+xml":{source:"iana",compressible:!0},"application/vnd.radisys.msml-dialog-group+xml":{source:"iana",compressible:!0},"application/vnd.radisys.msml-dialog-speech+xml":{source:"iana",compressible:!0},"application/vnd.radisys.msml-dialog-transform+xml":{source:"iana",compressible:!0},"application/vnd.rainstor.data":{source:"iana"},"application/vnd.rapid":{source:"iana"},"application/vnd.rar":{source:"iana",extensions:["rar"]},"application/vnd.realvnc.bed":{source:"iana",extensions:["bed"]},"application/vnd.recordare.musicxml":{source:"iana",extensions:["mxl"]},"application/vnd.recordare.musicxml+xml":{source:"iana",compressible:!0,extensions:["musicxml"]},"application/vnd.renlearn.rlprint":{source:"iana"},"application/vnd.resilient.logic":{source:"iana"},"application/vnd.restful+json":{source:"iana",compressible:!0},"application/vnd.rig.cryptonote":{source:"iana",extensions:["cryptonote"]},"application/vnd.rim.cod":{source:"apache",extensions:["cod"]},"application/vnd.rn-realmedia":{source:"apache",extensions:["rm"]},"application/vnd.rn-realmedia-vbr":{source:"apache",extensions:["rmvb"]},"application/vnd.route66.link66+xml":{source:"iana",compressible:!0,extensions:["link66"]},"application/vnd.rs-274x":{source:"iana"},"application/vnd.ruckus.download":{source:"iana"},"application/vnd.s3sms":{source:"iana"},"application/vnd.sailingtracker.track":{source:"iana",extensions:["st"]},"application/vnd.sar":{source:"iana"},"application/vnd.sbm.cid":{source:"iana"},"application/vnd.sbm.mid2":{source:"iana"},"application/vnd.scribus":{source:"iana"},"application/vnd.sealed.3df":{source:"iana"},"application/vnd.sealed.csf":{source:"iana"},"application/vnd.sealed.doc":{source:"iana"},"application/vnd.sealed.eml":{source:"iana"},"application/vnd.sealed.mht":{source:"iana"},"application/vnd.sealed.net":{source:"iana"},"application/vnd.sealed.ppt":{source:"iana"},"application/vnd.sealed.tiff":{source:"iana"},"application/vnd.sealed.xls":{source:"iana"},"application/vnd.sealedmedia.softseal.html":{source:"iana"},"application/vnd.sealedmedia.softseal.pdf":{source:"iana"},"application/vnd.seemail":{source:"iana",extensions:["see"]},"application/vnd.seis+json":{source:"iana",compressible:!0},"application/vnd.sema":{source:"iana",extensions:["sema"]},"application/vnd.semd":{source:"iana",extensions:["semd"]},"application/vnd.semf":{source:"iana",extensions:["semf"]},"application/vnd.shade-save-file":{source:"iana"},"application/vnd.shana.informed.formdata":{source:"iana",extensions:["ifm"]},"application/vnd.shana.informed.formtemplate":{source:"iana",extensions:["itp"]},"application/vnd.shana.informed.interchange":{source:"iana",extensions:["iif"]},"application/vnd.shana.informed.package":{source:"iana",extensions:["ipk"]},"application/vnd.shootproof+json":{source:"iana",compressible:!0},"application/vnd.shopkick+json":{source:"iana",compressible:!0},"application/vnd.shp":{source:"iana"},"application/vnd.shx":{source:"iana"},"application/vnd.sigrok.session":{source:"iana"},"application/vnd.simtech-mindmapper":{source:"iana",extensions:["twd","twds"]},"application/vnd.siren+json":{source:"iana",compressible:!0},"application/vnd.smaf":{source:"iana",extensions:["mmf"]},"application/vnd.smart.notebook":{source:"iana"},"application/vnd.smart.teacher":{source:"iana",extensions:["teacher"]},"application/vnd.snesdev-page-table":{source:"iana"},"application/vnd.software602.filler.form+xml":{source:"iana",compressible:!0,extensions:["fo"]},"application/vnd.software602.filler.form-xml-zip":{source:"iana"},"application/vnd.solent.sdkm+xml":{source:"iana",compressible:!0,extensions:["sdkm","sdkd"]},"application/vnd.spotfire.dxp":{source:"iana",extensions:["dxp"]},"application/vnd.spotfire.sfs":{source:"iana",extensions:["sfs"]},"application/vnd.sqlite3":{source:"iana"},"application/vnd.sss-cod":{source:"iana"},"application/vnd.sss-dtf":{source:"iana"},"application/vnd.sss-ntf":{source:"iana"},"application/vnd.stardivision.calc":{source:"apache",extensions:["sdc"]},"application/vnd.stardivision.draw":{source:"apache",extensions:["sda"]},"application/vnd.stardivision.impress":{source:"apache",extensions:["sdd"]},"application/vnd.stardivision.math":{source:"apache",extensions:["smf"]},"application/vnd.stardivision.writer":{source:"apache",extensions:["sdw","vor"]},"application/vnd.stardivision.writer-global":{source:"apache",extensions:["sgl"]},"application/vnd.stepmania.package":{source:"iana",extensions:["smzip"]},"application/vnd.stepmania.stepchart":{source:"iana",extensions:["sm"]},"application/vnd.street-stream":{source:"iana"},"application/vnd.sun.wadl+xml":{source:"iana",compressible:!0,extensions:["wadl"]},"application/vnd.sun.xml.calc":{source:"apache",extensions:["sxc"]},"application/vnd.sun.xml.calc.template":{source:"apache",extensions:["stc"]},"application/vnd.sun.xml.draw":{source:"apache",extensions:["sxd"]},"application/vnd.sun.xml.draw.template":{source:"apache",extensions:["std"]},"application/vnd.sun.xml.impress":{source:"apache",extensions:["sxi"]},"application/vnd.sun.xml.impress.template":{source:"apache",extensions:["sti"]},"application/vnd.sun.xml.math":{source:"apache",extensions:["sxm"]},"application/vnd.sun.xml.writer":{source:"apache",extensions:["sxw"]},"application/vnd.sun.xml.writer.global":{source:"apache",extensions:["sxg"]},"application/vnd.sun.xml.writer.template":{source:"apache",extensions:["stw"]},"application/vnd.sus-calendar":{source:"iana",extensions:["sus","susp"]},"application/vnd.svd":{source:"iana",extensions:["svd"]},"application/vnd.swiftview-ics":{source:"iana"},"application/vnd.sycle+xml":{source:"iana",compressible:!0},"application/vnd.syft+json":{source:"iana",compressible:!0},"application/vnd.symbian.install":{source:"apache",extensions:["sis","sisx"]},"application/vnd.syncml+xml":{source:"iana",charset:"UTF-8",compressible:!0,extensions:["xsm"]},"application/vnd.syncml.dm+wbxml":{source:"iana",charset:"UTF-8",extensions:["bdm"]},"application/vnd.syncml.dm+xml":{source:"iana",charset:"UTF-8",compressible:!0,extensions:["xdm"]},"application/vnd.syncml.dm.notification":{source:"iana"},"application/vnd.syncml.dmddf+wbxml":{source:"iana"},"application/vnd.syncml.dmddf+xml":{source:"iana",charset:"UTF-8",compressible:!0,extensions:["ddf"]},"application/vnd.syncml.dmtnds+wbxml":{source:"iana"},"application/vnd.syncml.dmtnds+xml":{source:"iana",charset:"UTF-8",compressible:!0},"application/vnd.syncml.ds.notification":{source:"iana"},"application/vnd.tableschema+json":{source:"iana",compressible:!0},"application/vnd.tao.intent-module-archive":{source:"iana",extensions:["tao"]},"application/vnd.tcpdump.pcap":{source:"iana",extensions:["pcap","cap","dmp"]},"application/vnd.think-cell.ppttc+json":{source:"iana",compressible:!0},"application/vnd.tmd.mediaflex.api+xml":{source:"iana",compressible:!0},"application/vnd.tml":{source:"iana"},"application/vnd.tmobile-livetv":{source:"iana",extensions:["tmo"]},"application/vnd.tri.onesource":{source:"iana"},"application/vnd.trid.tpt":{source:"iana",extensions:["tpt"]},"application/vnd.triscape.mxs":{source:"iana",extensions:["mxs"]},"application/vnd.trueapp":{source:"iana",extensions:["tra"]},"application/vnd.truedoc":{source:"iana"},"application/vnd.ubisoft.webplayer":{source:"iana"},"application/vnd.ufdl":{source:"iana",extensions:["ufd","ufdl"]},"application/vnd.uiq.theme":{source:"iana",extensions:["utz"]},"application/vnd.umajin":{source:"iana",extensions:["umj"]},"application/vnd.unity":{source:"iana",extensions:["unityweb"]},"application/vnd.uoml+xml":{source:"iana",compressible:!0,extensions:["uoml"]},"application/vnd.uplanet.alert":{source:"iana"},"application/vnd.uplanet.alert-wbxml":{source:"iana"},"application/vnd.uplanet.bearer-choice":{source:"iana"},"application/vnd.uplanet.bearer-choice-wbxml":{source:"iana"},"application/vnd.uplanet.cacheop":{source:"iana"},"application/vnd.uplanet.cacheop-wbxml":{source:"iana"},"application/vnd.uplanet.channel":{source:"iana"},"application/vnd.uplanet.channel-wbxml":{source:"iana"},"application/vnd.uplanet.list":{source:"iana"},"application/vnd.uplanet.list-wbxml":{source:"iana"},"application/vnd.uplanet.listcmd":{source:"iana"},"application/vnd.uplanet.listcmd-wbxml":{source:"iana"},"application/vnd.uplanet.signal":{source:"iana"},"application/vnd.uri-map":{source:"iana"},"application/vnd.valve.source.material":{source:"iana"},"application/vnd.vcx":{source:"iana",extensions:["vcx"]},"application/vnd.vd-study":{source:"iana"},"application/vnd.vectorworks":{source:"iana"},"application/vnd.vel+json":{source:"iana",compressible:!0},"application/vnd.verimatrix.vcas":{source:"iana"},"application/vnd.veritone.aion+json":{source:"iana",compressible:!0},"application/vnd.veryant.thin":{source:"iana"},"application/vnd.ves.encrypted":{source:"iana"},"application/vnd.vidsoft.vidconference":{source:"iana"},"application/vnd.visio":{source:"iana",extensions:["vsd","vst","vss","vsw"]},"application/vnd.visionary":{source:"iana",extensions:["vis"]},"application/vnd.vividence.scriptfile":{source:"iana"},"application/vnd.vsf":{source:"iana",extensions:["vsf"]},"application/vnd.wap.sic":{source:"iana"},"application/vnd.wap.slc":{source:"iana"},"application/vnd.wap.wbxml":{source:"iana",charset:"UTF-8",extensions:["wbxml"]},"application/vnd.wap.wmlc":{source:"iana",extensions:["wmlc"]},"application/vnd.wap.wmlscriptc":{source:"iana",extensions:["wmlsc"]},"application/vnd.webturbo":{source:"iana",extensions:["wtb"]},"application/vnd.wfa.dpp":{source:"iana"},"application/vnd.wfa.p2p":{source:"iana"},"application/vnd.wfa.wsc":{source:"iana"},"application/vnd.windows.devicepairing":{source:"iana"},"application/vnd.wmc":{source:"iana"},"application/vnd.wmf.bootstrap":{source:"iana"},"application/vnd.wolfram.mathematica":{source:"iana"},"application/vnd.wolfram.mathematica.package":{source:"iana"},"application/vnd.wolfram.player":{source:"iana",extensions:["nbp"]},"application/vnd.wordperfect":{source:"iana",extensions:["wpd"]},"application/vnd.wqd":{source:"iana",extensions:["wqd"]},"application/vnd.wrq-hp3000-labelled":{source:"iana"},"application/vnd.wt.stf":{source:"iana",extensions:["stf"]},"application/vnd.wv.csp+wbxml":{source:"iana"},"application/vnd.wv.csp+xml":{source:"iana",compressible:!0},"application/vnd.wv.ssp+xml":{source:"iana",compressible:!0},"application/vnd.xacml+json":{source:"iana",compressible:!0},"application/vnd.xara":{source:"iana",extensions:["xar"]},"application/vnd.xfdl":{source:"iana",extensions:["xfdl"]},"application/vnd.xfdl.webform":{source:"iana"},"application/vnd.xmi+xml":{source:"iana",compressible:!0},"application/vnd.xmpie.cpkg":{source:"iana"},"application/vnd.xmpie.dpkg":{source:"iana"},"application/vnd.xmpie.plan":{source:"iana"},"application/vnd.xmpie.ppkg":{source:"iana"},"application/vnd.xmpie.xlim":{source:"iana"},"application/vnd.yamaha.hv-dic":{source:"iana",extensions:["hvd"]},"application/vnd.yamaha.hv-script":{source:"iana",extensions:["hvs"]},"application/vnd.yamaha.hv-voice":{source:"iana",extensions:["hvp"]},"application/vnd.yamaha.openscoreformat":{source:"iana",extensions:["osf"]},"application/vnd.yamaha.openscoreformat.osfpvg+xml":{source:"iana",compressible:!0,extensions:["osfpvg"]},"application/vnd.yamaha.remote-setup":{source:"iana"},"application/vnd.yamaha.smaf-audio":{source:"iana",extensions:["saf"]},"application/vnd.yamaha.smaf-phrase":{source:"iana",extensions:["spf"]},"application/vnd.yamaha.through-ngn":{source:"iana"},"application/vnd.yamaha.tunnel-udpencap":{source:"iana"},"application/vnd.yaoweme":{source:"iana"},"application/vnd.yellowriver-custom-menu":{source:"iana",extensions:["cmp"]},"application/vnd.youtube.yt":{source:"iana"},"application/vnd.zul":{source:"iana",extensions:["zir","zirz"]},"application/vnd.zzazz.deck+xml":{source:"iana",compressible:!0,extensions:["zaz"]},"application/voicexml+xml":{source:"iana",compressible:!0,extensions:["vxml"]},"application/voucher-cms+json":{source:"iana",compressible:!0},"application/vq-rtcpxr":{source:"iana"},"application/wasm":{source:"iana",compressible:!0,extensions:["wasm"]},"application/watcherinfo+xml":{source:"iana",compressible:!0,extensions:["wif"]},"application/webpush-options+json":{source:"iana",compressible:!0},"application/whoispp-query":{source:"iana"},"application/whoispp-response":{source:"iana"},"application/widget":{source:"iana",extensions:["wgt"]},"application/winhlp":{source:"apache",extensions:["hlp"]},"application/wita":{source:"iana"},"application/wordperfect5.1":{source:"iana"},"application/wsdl+xml":{source:"iana",compressible:!0,extensions:["wsdl"]},"application/wspolicy+xml":{source:"iana",compressible:!0,extensions:["wspolicy"]},"application/x-7z-compressed":{source:"apache",compressible:!1,extensions:["7z"]},"application/x-abiword":{source:"apache",extensions:["abw"]},"application/x-ace-compressed":{source:"apache",extensions:["ace"]},"application/x-amf":{source:"apache"},"application/x-apple-diskimage":{source:"apache",extensions:["dmg"]},"application/x-arj":{compressible:!1,extensions:["arj"]},"application/x-authorware-bin":{source:"apache",extensions:["aab","x32","u32","vox"]},"application/x-authorware-map":{source:"apache",extensions:["aam"]},"application/x-authorware-seg":{source:"apache",extensions:["aas"]},"application/x-bcpio":{source:"apache",extensions:["bcpio"]},"application/x-bdoc":{compressible:!1,extensions:["bdoc"]},"application/x-bittorrent":{source:"apache",extensions:["torrent"]},"application/x-blorb":{source:"apache",extensions:["blb","blorb"]},"application/x-bzip":{source:"apache",compressible:!1,extensions:["bz"]},"application/x-bzip2":{source:"apache",compressible:!1,extensions:["bz2","boz"]},"application/x-cbr":{source:"apache",extensions:["cbr","cba","cbt","cbz","cb7"]},"application/x-cdlink":{source:"apache",extensions:["vcd"]},"application/x-cfs-compressed":{source:"apache",extensions:["cfs"]},"application/x-chat":{source:"apache",extensions:["chat"]},"application/x-chess-pgn":{source:"apache",extensions:["pgn"]},"application/x-chrome-extension":{extensions:["crx"]},"application/x-cocoa":{source:"nginx",extensions:["cco"]},"application/x-compress":{source:"apache"},"application/x-conference":{source:"apache",extensions:["nsc"]},"application/x-cpio":{source:"apache",extensions:["cpio"]},"application/x-csh":{source:"apache",extensions:["csh"]},"application/x-deb":{compressible:!1},"application/x-debian-package":{source:"apache",extensions:["deb","udeb"]},"application/x-dgc-compressed":{source:"apache",extensions:["dgc"]},"application/x-director":{source:"apache",extensions:["dir","dcr","dxr","cst","cct","cxt","w3d","fgd","swa"]},"application/x-doom":{source:"apache",extensions:["wad"]},"application/x-dtbncx+xml":{source:"apache",compressible:!0,extensions:["ncx"]},"application/x-dtbook+xml":{source:"apache",compressible:!0,extensions:["dtb"]},"application/x-dtbresource+xml":{source:"apache",compressible:!0,extensions:["res"]},"application/x-dvi":{source:"apache",compressible:!1,extensions:["dvi"]},"application/x-envoy":{source:"apache",extensions:["evy"]},"application/x-eva":{source:"apache",extensions:["eva"]},"application/x-font-bdf":{source:"apache",extensions:["bdf"]},"application/x-font-dos":{source:"apache"},"application/x-font-framemaker":{source:"apache"},"application/x-font-ghostscript":{source:"apache",extensions:["gsf"]},"application/x-font-libgrx":{source:"apache"},"application/x-font-linux-psf":{source:"apache",extensions:["psf"]},"application/x-font-pcf":{source:"apache",extensions:["pcf"]},"application/x-font-snf":{source:"apache",extensions:["snf"]},"application/x-font-speedo":{source:"apache"},"application/x-font-sunos-news":{source:"apache"},"application/x-font-type1":{source:"apache",extensions:["pfa","pfb","pfm","afm"]},"application/x-font-vfont":{source:"apache"},"application/x-freearc":{source:"apache",extensions:["arc"]},"application/x-futuresplash":{source:"apache",extensions:["spl"]},"application/x-gca-compressed":{source:"apache",extensions:["gca"]},"application/x-glulx":{source:"apache",extensions:["ulx"]},"application/x-gnumeric":{source:"apache",extensions:["gnumeric"]},"application/x-gramps-xml":{source:"apache",extensions:["gramps"]},"application/x-gtar":{source:"apache",extensions:["gtar"]},"application/x-gzip":{source:"apache"},"application/x-hdf":{source:"apache",extensions:["hdf"]},"application/x-httpd-php":{compressible:!0,extensions:["php"]},"application/x-install-instructions":{source:"apache",extensions:["install"]},"application/x-iso9660-image":{source:"apache",extensions:["iso"]},"application/x-iwork-keynote-sffkey":{extensions:["key"]},"application/x-iwork-numbers-sffnumbers":{extensions:["numbers"]},"application/x-iwork-pages-sffpages":{extensions:["pages"]},"application/x-java-archive-diff":{source:"nginx",extensions:["jardiff"]},"application/x-java-jnlp-file":{source:"apache",compressible:!1,extensions:["jnlp"]},"application/x-javascript":{compressible:!0},"application/x-keepass2":{extensions:["kdbx"]},"application/x-latex":{source:"apache",compressible:!1,extensions:["latex"]},"application/x-lua-bytecode":{extensions:["luac"]},"application/x-lzh-compressed":{source:"apache",extensions:["lzh","lha"]},"application/x-makeself":{source:"nginx",extensions:["run"]},"application/x-mie":{source:"apache",extensions:["mie"]},"application/x-mobipocket-ebook":{source:"apache",extensions:["prc","mobi"]},"application/x-mpegurl":{compressible:!1},"application/x-ms-application":{source:"apache",extensions:["application"]},"application/x-ms-shortcut":{source:"apache",extensions:["lnk"]},"application/x-ms-wmd":{source:"apache",extensions:["wmd"]},"application/x-ms-wmz":{source:"apache",extensions:["wmz"]},"application/x-ms-xbap":{source:"apache",extensions:["xbap"]},"application/x-msaccess":{source:"apache",extensions:["mdb"]},"application/x-msbinder":{source:"apache",extensions:["obd"]},"application/x-mscardfile":{source:"apache",extensions:["crd"]},"application/x-msclip":{source:"apache",extensions:["clp"]},"application/x-msdos-program":{extensions:["exe"]},"application/x-msdownload":{source:"apache",extensions:["exe","dll","com","bat","msi"]},"application/x-msmediaview":{source:"apache",extensions:["mvb","m13","m14"]},"application/x-msmetafile":{source:"apache",extensions:["wmf","wmz","emf","emz"]},"application/x-msmoney":{source:"apache",extensions:["mny"]},"application/x-mspublisher":{source:"apache",extensions:["pub"]},"application/x-msschedule":{source:"apache",extensions:["scd"]},"application/x-msterminal":{source:"apache",extensions:["trm"]},"application/x-mswrite":{source:"apache",extensions:["wri"]},"application/x-netcdf":{source:"apache",extensions:["nc","cdf"]},"application/x-ns-proxy-autoconfig":{compressible:!0,extensions:["pac"]},"application/x-nzb":{source:"apache",extensions:["nzb"]},"application/x-perl":{source:"nginx",extensions:["pl","pm"]},"application/x-pilot":{source:"nginx",extensions:["prc","pdb"]},"application/x-pkcs12":{source:"apache",compressible:!1,extensions:["p12","pfx"]},"application/x-pkcs7-certificates":{source:"apache",extensions:["p7b","spc"]},"application/x-pkcs7-certreqresp":{source:"apache",extensions:["p7r"]},"application/x-pki-message":{source:"iana"},"application/x-rar-compressed":{source:"apache",compressible:!1,extensions:["rar"]},"application/x-redhat-package-manager":{source:"nginx",extensions:["rpm"]},"application/x-research-info-systems":{source:"apache",extensions:["ris"]},"application/x-sea":{source:"nginx",extensions:["sea"]},"application/x-sh":{source:"apache",compressible:!0,extensions:["sh"]},"application/x-shar":{source:"apache",extensions:["shar"]},"application/x-shockwave-flash":{source:"apache",compressible:!1,extensions:["swf"]},"application/x-silverlight-app":{source:"apache",extensions:["xap"]},"application/x-sql":{source:"apache",extensions:["sql"]},"application/x-stuffit":{source:"apache",compressible:!1,extensions:["sit"]},"application/x-stuffitx":{source:"apache",extensions:["sitx"]},"application/x-subrip":{source:"apache",extensions:["srt"]},"application/x-sv4cpio":{source:"apache",extensions:["sv4cpio"]},"application/x-sv4crc":{source:"apache",extensions:["sv4crc"]},"application/x-t3vm-image":{source:"apache",extensions:["t3"]},"application/x-tads":{source:"apache",extensions:["gam"]},"application/x-tar":{source:"apache",compressible:!0,extensions:["tar"]},"application/x-tcl":{source:"apache",extensions:["tcl","tk"]},"application/x-tex":{source:"apache",extensions:["tex"]},"application/x-tex-tfm":{source:"apache",extensions:["tfm"]},"application/x-texinfo":{source:"apache",extensions:["texinfo","texi"]},"application/x-tgif":{source:"apache",extensions:["obj"]},"application/x-ustar":{source:"apache",extensions:["ustar"]},"application/x-virtualbox-hdd":{compressible:!0,extensions:["hdd"]},"application/x-virtualbox-ova":{compressible:!0,extensions:["ova"]},"application/x-virtualbox-ovf":{compressible:!0,extensions:["ovf"]},"application/x-virtualbox-vbox":{compressible:!0,extensions:["vbox"]},"application/x-virtualbox-vbox-extpack":{compressible:!1,extensions:["vbox-extpack"]},"application/x-virtualbox-vdi":{compressible:!0,extensions:["vdi"]},"application/x-virtualbox-vhd":{compressible:!0,extensions:["vhd"]},"application/x-virtualbox-vmdk":{compressible:!0,extensions:["vmdk"]},"application/x-wais-source":{source:"apache",extensions:["src"]},"application/x-web-app-manifest+json":{compressible:!0,extensions:["webapp"]},"application/x-www-form-urlencoded":{source:"iana",compressible:!0},"application/x-x509-ca-cert":{source:"iana",extensions:["der","crt","pem"]},"application/x-x509-ca-ra-cert":{source:"iana"},"application/x-x509-next-ca-cert":{source:"iana"},"application/x-xfig":{source:"apache",extensions:["fig"]},"application/x-xliff+xml":{source:"apache",compressible:!0,extensions:["xlf"]},"application/x-xpinstall":{source:"apache",compressible:!1,extensions:["xpi"]},"application/x-xz":{source:"apache",extensions:["xz"]},"application/x-zmachine":{source:"apache",extensions:["z1","z2","z3","z4","z5","z6","z7","z8"]},"application/x400-bp":{source:"iana"},"application/xacml+xml":{source:"iana",compressible:!0},"application/xaml+xml":{source:"apache",compressible:!0,extensions:["xaml"]},"application/xcap-att+xml":{source:"iana",compressible:!0,extensions:["xav"]},"application/xcap-caps+xml":{source:"iana",compressible:!0,extensions:["xca"]},"application/xcap-diff+xml":{source:"iana",compressible:!0,extensions:["xdf"]},"application/xcap-el+xml":{source:"iana",compressible:!0,extensions:["xel"]},"application/xcap-error+xml":{source:"iana",compressible:!0},"application/xcap-ns+xml":{source:"iana",compressible:!0,extensions:["xns"]},"application/xcon-conference-info+xml":{source:"iana",compressible:!0},"application/xcon-conference-info-diff+xml":{source:"iana",compressible:!0},"application/xenc+xml":{source:"iana",compressible:!0,extensions:["xenc"]},"application/xhtml+xml":{source:"iana",compressible:!0,extensions:["xhtml","xht"]},"application/xhtml-voice+xml":{source:"apache",compressible:!0},"application/xliff+xml":{source:"iana",compressible:!0,extensions:["xlf"]},"application/xml":{source:"iana",compressible:!0,extensions:["xml","xsl","xsd","rng"]},"application/xml-dtd":{source:"iana",compressible:!0,extensions:["dtd"]},"application/xml-external-parsed-entity":{source:"iana"},"application/xml-patch+xml":{source:"iana",compressible:!0},"application/xmpp+xml":{source:"iana",compressible:!0},"application/xop+xml":{source:"iana",compressible:!0,extensions:["xop"]},"application/xproc+xml":{source:"apache",compressible:!0,extensions:["xpl"]},"application/xslt+xml":{source:"iana",compressible:!0,extensions:["xsl","xslt"]},"application/xspf+xml":{source:"apache",compressible:!0,extensions:["xspf"]},"application/xv+xml":{source:"iana",compressible:!0,extensions:["mxml","xhvml","xvml","xvm"]},"application/yang":{source:"iana",extensions:["yang"]},"application/yang-data+json":{source:"iana",compressible:!0},"application/yang-data+xml":{source:"iana",compressible:!0},"application/yang-patch+json":{source:"iana",compressible:!0},"application/yang-patch+xml":{source:"iana",compressible:!0},"application/yin+xml":{source:"iana",compressible:!0,extensions:["yin"]},"application/zip":{source:"iana",compressible:!1,extensions:["zip"]},"application/zlib":{source:"iana"},"application/zstd":{source:"iana"},"audio/1d-interleaved-parityfec":{source:"iana"},"audio/32kadpcm":{source:"iana"},"audio/3gpp":{source:"iana",compressible:!1,extensions:["3gpp"]},"audio/3gpp2":{source:"iana"},"audio/aac":{source:"iana"},"audio/ac3":{source:"iana"},"audio/adpcm":{source:"apache",extensions:["adp"]},"audio/amr":{source:"iana",extensions:["amr"]},"audio/amr-wb":{source:"iana"},"audio/amr-wb+":{source:"iana"},"audio/aptx":{source:"iana"},"audio/asc":{source:"iana"},"audio/atrac-advanced-lossless":{source:"iana"},"audio/atrac-x":{source:"iana"},"audio/atrac3":{source:"iana"},"audio/basic":{source:"iana",compressible:!1,extensions:["au","snd"]},"audio/bv16":{source:"iana"},"audio/bv32":{source:"iana"},"audio/clearmode":{source:"iana"},"audio/cn":{source:"iana"},"audio/dat12":{source:"iana"},"audio/dls":{source:"iana"},"audio/dsr-es201108":{source:"iana"},"audio/dsr-es202050":{source:"iana"},"audio/dsr-es202211":{source:"iana"},"audio/dsr-es202212":{source:"iana"},"audio/dv":{source:"iana"},"audio/dvi4":{source:"iana"},"audio/eac3":{source:"iana"},"audio/encaprtp":{source:"iana"},"audio/evrc":{source:"iana"},"audio/evrc-qcp":{source:"iana"},"audio/evrc0":{source:"iana"},"audio/evrc1":{source:"iana"},"audio/evrcb":{source:"iana"},"audio/evrcb0":{source:"iana"},"audio/evrcb1":{source:"iana"},"audio/evrcnw":{source:"iana"},"audio/evrcnw0":{source:"iana"},"audio/evrcnw1":{source:"iana"},"audio/evrcwb":{source:"iana"},"audio/evrcwb0":{source:"iana"},"audio/evrcwb1":{source:"iana"},"audio/evs":{source:"iana"},"audio/flexfec":{source:"iana"},"audio/fwdred":{source:"iana"},"audio/g711-0":{source:"iana"},"audio/g719":{source:"iana"},"audio/g722":{source:"iana"},"audio/g7221":{source:"iana"},"audio/g723":{source:"iana"},"audio/g726-16":{source:"iana"},"audio/g726-24":{source:"iana"},"audio/g726-32":{source:"iana"},"audio/g726-40":{source:"iana"},"audio/g728":{source:"iana"},"audio/g729":{source:"iana"},"audio/g7291":{source:"iana"},"audio/g729d":{source:"iana"},"audio/g729e":{source:"iana"},"audio/gsm":{source:"iana"},"audio/gsm-efr":{source:"iana"},"audio/gsm-hr-08":{source:"iana"},"audio/ilbc":{source:"iana"},"audio/ip-mr_v2.5":{source:"iana"},"audio/isac":{source:"apache"},"audio/l16":{source:"iana"},"audio/l20":{source:"iana"},"audio/l24":{source:"iana",compressible:!1},"audio/l8":{source:"iana"},"audio/lpc":{source:"iana"},"audio/melp":{source:"iana"},"audio/melp1200":{source:"iana"},"audio/melp2400":{source:"iana"},"audio/melp600":{source:"iana"},"audio/mhas":{source:"iana"},"audio/midi":{source:"apache",extensions:["mid","midi","kar","rmi"]},"audio/mobile-xmf":{source:"iana",extensions:["mxmf"]},"audio/mp3":{compressible:!1,extensions:["mp3"]},"audio/mp4":{source:"iana",compressible:!1,extensions:["m4a","mp4a"]},"audio/mp4a-latm":{source:"iana"},"audio/mpa":{source:"iana"},"audio/mpa-robust":{source:"iana"},"audio/mpeg":{source:"iana",compressible:!1,extensions:["mpga","mp2","mp2a","mp3","m2a","m3a"]},"audio/mpeg4-generic":{source:"iana"},"audio/musepack":{source:"apache"},"audio/ogg":{source:"iana",compressible:!1,extensions:["oga","ogg","spx","opus"]},"audio/opus":{source:"iana"},"audio/parityfec":{source:"iana"},"audio/pcma":{source:"iana"},"audio/pcma-wb":{source:"iana"},"audio/pcmu":{source:"iana"},"audio/pcmu-wb":{source:"iana"},"audio/prs.sid":{source:"iana"},"audio/qcelp":{source:"iana"},"audio/raptorfec":{source:"iana"},"audio/red":{source:"iana"},"audio/rtp-enc-aescm128":{source:"iana"},"audio/rtp-midi":{source:"iana"},"audio/rtploopback":{source:"iana"},"audio/rtx":{source:"iana"},"audio/s3m":{source:"apache",extensions:["s3m"]},"audio/scip":{source:"iana"},"audio/silk":{source:"apache",extensions:["sil"]},"audio/smv":{source:"iana"},"audio/smv-qcp":{source:"iana"},"audio/smv0":{source:"iana"},"audio/sofa":{source:"iana"},"audio/sp-midi":{source:"iana"},"audio/speex":{source:"iana"},"audio/t140c":{source:"iana"},"audio/t38":{source:"iana"},"audio/telephone-event":{source:"iana"},"audio/tetra_acelp":{source:"iana"},"audio/tetra_acelp_bb":{source:"iana"},"audio/tone":{source:"iana"},"audio/tsvcis":{source:"iana"},"audio/uemclip":{source:"iana"},"audio/ulpfec":{source:"iana"},"audio/usac":{source:"iana"},"audio/vdvi":{source:"iana"},"audio/vmr-wb":{source:"iana"},"audio/vnd.3gpp.iufp":{source:"iana"},"audio/vnd.4sb":{source:"iana"},"audio/vnd.audiokoz":{source:"iana"},"audio/vnd.celp":{source:"iana"},"audio/vnd.cisco.nse":{source:"iana"},"audio/vnd.cmles.radio-events":{source:"iana"},"audio/vnd.cns.anp1":{source:"iana"},"audio/vnd.cns.inf1":{source:"iana"},"audio/vnd.dece.audio":{source:"iana",extensions:["uva","uvva"]},"audio/vnd.digital-winds":{source:"iana",extensions:["eol"]},"audio/vnd.dlna.adts":{source:"iana"},"audio/vnd.dolby.heaac.1":{source:"iana"},"audio/vnd.dolby.heaac.2":{source:"iana"},"audio/vnd.dolby.mlp":{source:"iana"},"audio/vnd.dolby.mps":{source:"iana"},"audio/vnd.dolby.pl2":{source:"iana"},"audio/vnd.dolby.pl2x":{source:"iana"},"audio/vnd.dolby.pl2z":{source:"iana"},"audio/vnd.dolby.pulse.1":{source:"iana"},"audio/vnd.dra":{source:"iana",extensions:["dra"]},"audio/vnd.dts":{source:"iana",extensions:["dts"]},"audio/vnd.dts.hd":{source:"iana",extensions:["dtshd"]},"audio/vnd.dts.uhd":{source:"iana"},"audio/vnd.dvb.file":{source:"iana"},"audio/vnd.everad.plj":{source:"iana"},"audio/vnd.hns.audio":{source:"iana"},"audio/vnd.lucent.voice":{source:"iana",extensions:["lvp"]},"audio/vnd.ms-playready.media.pya":{source:"iana",extensions:["pya"]},"audio/vnd.nokia.mobile-xmf":{source:"iana"},"audio/vnd.nortel.vbk":{source:"iana"},"audio/vnd.nuera.ecelp4800":{source:"iana",extensions:["ecelp4800"]},"audio/vnd.nuera.ecelp7470":{source:"iana",extensions:["ecelp7470"]},"audio/vnd.nuera.ecelp9600":{source:"iana",extensions:["ecelp9600"]},"audio/vnd.octel.sbc":{source:"iana"},"audio/vnd.presonus.multitrack":{source:"iana"},"audio/vnd.qcelp":{source:"iana"},"audio/vnd.rhetorex.32kadpcm":{source:"iana"},"audio/vnd.rip":{source:"iana",extensions:["rip"]},"audio/vnd.rn-realaudio":{compressible:!1},"audio/vnd.sealedmedia.softseal.mpeg":{source:"iana"},"audio/vnd.vmx.cvsd":{source:"iana"},"audio/vnd.wave":{compressible:!1},"audio/vorbis":{source:"iana",compressible:!1},"audio/vorbis-config":{source:"iana"},"audio/wav":{compressible:!1,extensions:["wav"]},"audio/wave":{compressible:!1,extensions:["wav"]},"audio/webm":{source:"apache",compressible:!1,extensions:["weba"]},"audio/x-aac":{source:"apache",compressible:!1,extensions:["aac"]},"audio/x-aiff":{source:"apache",extensions:["aif","aiff","aifc"]},"audio/x-caf":{source:"apache",compressible:!1,extensions:["caf"]},"audio/x-flac":{source:"apache",extensions:["flac"]},"audio/x-m4a":{source:"nginx",extensions:["m4a"]},"audio/x-matroska":{source:"apache",extensions:["mka"]},"audio/x-mpegurl":{source:"apache",extensions:["m3u"]},"audio/x-ms-wax":{source:"apache",extensions:["wax"]},"audio/x-ms-wma":{source:"apache",extensions:["wma"]},"audio/x-pn-realaudio":{source:"apache",extensions:["ram","ra"]},"audio/x-pn-realaudio-plugin":{source:"apache",extensions:["rmp"]},"audio/x-realaudio":{source:"nginx",extensions:["ra"]},"audio/x-tta":{source:"apache"},"audio/x-wav":{source:"apache",extensions:["wav"]},"audio/xm":{source:"apache",extensions:["xm"]},"chemical/x-cdx":{source:"apache",extensions:["cdx"]},"chemical/x-cif":{source:"apache",extensions:["cif"]},"chemical/x-cmdf":{source:"apache",extensions:["cmdf"]},"chemical/x-cml":{source:"apache",extensions:["cml"]},"chemical/x-csml":{source:"apache",extensions:["csml"]},"chemical/x-pdb":{source:"apache"},"chemical/x-xyz":{source:"apache",extensions:["xyz"]},"font/collection":{source:"iana",extensions:["ttc"]},"font/otf":{source:"iana",compressible:!0,extensions:["otf"]},"font/sfnt":{source:"iana"},"font/ttf":{source:"iana",compressible:!0,extensions:["ttf"]},"font/woff":{source:"iana",extensions:["woff"]},"font/woff2":{source:"iana",extensions:["woff2"]},"image/aces":{source:"iana",extensions:["exr"]},"image/apng":{compressible:!1,extensions:["apng"]},"image/avci":{source:"iana",extensions:["avci"]},"image/avcs":{source:"iana",extensions:["avcs"]},"image/avif":{source:"iana",compressible:!1,extensions:["avif"]},"image/bmp":{source:"iana",compressible:!0,extensions:["bmp"]},"image/cgm":{source:"iana",extensions:["cgm"]},"image/dicom-rle":{source:"iana",extensions:["drle"]},"image/emf":{source:"iana",extensions:["emf"]},"image/fits":{source:"iana",extensions:["fits"]},"image/g3fax":{source:"iana",extensions:["g3"]},"image/gif":{source:"iana",compressible:!1,extensions:["gif"]},"image/heic":{source:"iana",extensions:["heic"]},"image/heic-sequence":{source:"iana",extensions:["heics"]},"image/heif":{source:"iana",extensions:["heif"]},"image/heif-sequence":{source:"iana",extensions:["heifs"]},"image/hej2k":{source:"iana",extensions:["hej2"]},"image/hsj2":{source:"iana",extensions:["hsj2"]},"image/ief":{source:"iana",extensions:["ief"]},"image/jls":{source:"iana",extensions:["jls"]},"image/jp2":{source:"iana",compressible:!1,extensions:["jp2","jpg2"]},"image/jpeg":{source:"iana",compressible:!1,extensions:["jpeg","jpg","jpe"]},"image/jph":{source:"iana",extensions:["jph"]},"image/jphc":{source:"iana",extensions:["jhc"]},"image/jpm":{source:"iana",compressible:!1,extensions:["jpm"]},"image/jpx":{source:"iana",compressible:!1,extensions:["jpx","jpf"]},"image/jxr":{source:"iana",extensions:["jxr"]},"image/jxra":{source:"iana",extensions:["jxra"]},"image/jxrs":{source:"iana",extensions:["jxrs"]},"image/jxs":{source:"iana",extensions:["jxs"]},"image/jxsc":{source:"iana",extensions:["jxsc"]},"image/jxsi":{source:"iana",extensions:["jxsi"]},"image/jxss":{source:"iana",extensions:["jxss"]},"image/ktx":{source:"iana",extensions:["ktx"]},"image/ktx2":{source:"iana",extensions:["ktx2"]},"image/naplps":{source:"iana"},"image/pjpeg":{compressible:!1},"image/png":{source:"iana",compressible:!1,extensions:["png"]},"image/prs.btif":{source:"iana",extensions:["btif"]},"image/prs.pti":{source:"iana",extensions:["pti"]},"image/pwg-raster":{source:"iana"},"image/sgi":{source:"apache",extensions:["sgi"]},"image/svg+xml":{source:"iana",compressible:!0,extensions:["svg","svgz"]},"image/t38":{source:"iana",extensions:["t38"]},"image/tiff":{source:"iana",compressible:!1,extensions:["tif","tiff"]},"image/tiff-fx":{source:"iana",extensions:["tfx"]},"image/vnd.adobe.photoshop":{source:"iana",compressible:!0,extensions:["psd"]},"image/vnd.airzip.accelerator.azv":{source:"iana",extensions:["azv"]},"image/vnd.cns.inf2":{source:"iana"},"image/vnd.dece.graphic":{source:"iana",extensions:["uvi","uvvi","uvg","uvvg"]},"image/vnd.djvu":{source:"iana",extensions:["djvu","djv"]},"image/vnd.dvb.subtitle":{source:"iana",extensions:["sub"]},"image/vnd.dwg":{source:"iana",extensions:["dwg"]},"image/vnd.dxf":{source:"iana",extensions:["dxf"]},"image/vnd.fastbidsheet":{source:"iana",extensions:["fbs"]},"image/vnd.fpx":{source:"iana",extensions:["fpx"]},"image/vnd.fst":{source:"iana",extensions:["fst"]},"image/vnd.fujixerox.edmics-mmr":{source:"iana",extensions:["mmr"]},"image/vnd.fujixerox.edmics-rlc":{source:"iana",extensions:["rlc"]},"image/vnd.globalgraphics.pgb":{source:"iana"},"image/vnd.microsoft.icon":{source:"iana",compressible:!0,extensions:["ico"]},"image/vnd.mix":{source:"iana"},"image/vnd.mozilla.apng":{source:"iana"},"image/vnd.ms-dds":{compressible:!0,extensions:["dds"]},"image/vnd.ms-modi":{source:"iana",extensions:["mdi"]},"image/vnd.ms-photo":{source:"apache",extensions:["wdp"]},"image/vnd.net-fpx":{source:"iana",extensions:["npx"]},"image/vnd.pco.b16":{source:"iana",extensions:["b16"]},"image/vnd.radiance":{source:"iana"},"image/vnd.sealed.png":{source:"iana"},"image/vnd.sealedmedia.softseal.gif":{source:"iana"},"image/vnd.sealedmedia.softseal.jpg":{source:"iana"},"image/vnd.svf":{source:"iana"},"image/vnd.tencent.tap":{source:"iana",extensions:["tap"]},"image/vnd.valve.source.texture":{source:"iana",extensions:["vtf"]},"image/vnd.wap.wbmp":{source:"iana",extensions:["wbmp"]},"image/vnd.xiff":{source:"iana",extensions:["xif"]},"image/vnd.zbrush.pcx":{source:"iana",extensions:["pcx"]},"image/webp":{source:"apache",extensions:["webp"]},"image/wmf":{source:"iana",extensions:["wmf"]},"image/x-3ds":{source:"apache",extensions:["3ds"]},"image/x-cmu-raster":{source:"apache",extensions:["ras"]},"image/x-cmx":{source:"apache",extensions:["cmx"]},"image/x-freehand":{source:"apache",extensions:["fh","fhc","fh4","fh5","fh7"]},"image/x-icon":{source:"apache",compressible:!0,extensions:["ico"]},"image/x-jng":{source:"nginx",extensions:["jng"]},"image/x-mrsid-image":{source:"apache",extensions:["sid"]},"image/x-ms-bmp":{source:"nginx",compressible:!0,extensions:["bmp"]},"image/x-pcx":{source:"apache",extensions:["pcx"]},"image/x-pict":{source:"apache",extensions:["pic","pct"]},"image/x-portable-anymap":{source:"apache",extensions:["pnm"]},"image/x-portable-bitmap":{source:"apache",extensions:["pbm"]},"image/x-portable-graymap":{source:"apache",extensions:["pgm"]},"image/x-portable-pixmap":{source:"apache",extensions:["ppm"]},"image/x-rgb":{source:"apache",extensions:["rgb"]},"image/x-tga":{source:"apache",extensions:["tga"]},"image/x-xbitmap":{source:"apache",extensions:["xbm"]},"image/x-xcf":{compressible:!1},"image/x-xpixmap":{source:"apache",extensions:["xpm"]},"image/x-xwindowdump":{source:"apache",extensions:["xwd"]},"message/cpim":{source:"iana"},"message/delivery-status":{source:"iana"},"message/disposition-notification":{source:"iana",extensions:["disposition-notification"]},"message/external-body":{source:"iana"},"message/feedback-report":{source:"iana"},"message/global":{source:"iana",extensions:["u8msg"]},"message/global-delivery-status":{source:"iana",extensions:["u8dsn"]},"message/global-disposition-notification":{source:"iana",extensions:["u8mdn"]},"message/global-headers":{source:"iana",extensions:["u8hdr"]},"message/http":{source:"iana",compressible:!1},"message/imdn+xml":{source:"iana",compressible:!0},"message/news":{source:"iana"},"message/partial":{source:"iana",compressible:!1},"message/rfc822":{source:"iana",compressible:!0,extensions:["eml","mime"]},"message/s-http":{source:"iana"},"message/sip":{source:"iana"},"message/sipfrag":{source:"iana"},"message/tracking-status":{source:"iana"},"message/vnd.si.simp":{source:"iana"},"message/vnd.wfa.wsc":{source:"iana",extensions:["wsc"]},"model/3mf":{source:"iana",extensions:["3mf"]},"model/e57":{source:"iana"},"model/gltf+json":{source:"iana",compressible:!0,extensions:["gltf"]},"model/gltf-binary":{source:"iana",compressible:!0,extensions:["glb"]},"model/iges":{source:"iana",compressible:!1,extensions:["igs","iges"]},"model/mesh":{source:"iana",compressible:!1,extensions:["msh","mesh","silo"]},"model/mtl":{source:"iana",extensions:["mtl"]},"model/obj":{source:"iana",extensions:["obj"]},"model/step":{source:"iana"},"model/step+xml":{source:"iana",compressible:!0,extensions:["stpx"]},"model/step+zip":{source:"iana",compressible:!1,extensions:["stpz"]},"model/step-xml+zip":{source:"iana",compressible:!1,extensions:["stpxz"]},"model/stl":{source:"iana",extensions:["stl"]},"model/vnd.collada+xml":{source:"iana",compressible:!0,extensions:["dae"]},"model/vnd.dwf":{source:"iana",extensions:["dwf"]},"model/vnd.flatland.3dml":{source:"iana"},"model/vnd.gdl":{source:"iana",extensions:["gdl"]},"model/vnd.gs-gdl":{source:"apache"},"model/vnd.gs.gdl":{source:"iana"},"model/vnd.gtw":{source:"iana",extensions:["gtw"]},"model/vnd.moml+xml":{source:"iana",compressible:!0},"model/vnd.mts":{source:"iana",extensions:["mts"]},"model/vnd.opengex":{source:"iana",extensions:["ogex"]},"model/vnd.parasolid.transmit.binary":{source:"iana",extensions:["x_b"]},"model/vnd.parasolid.transmit.text":{source:"iana",extensions:["x_t"]},"model/vnd.pytha.pyox":{source:"iana"},"model/vnd.rosette.annotated-data-model":{source:"iana"},"model/vnd.sap.vds":{source:"iana",extensions:["vds"]},"model/vnd.usdz+zip":{source:"iana",compressible:!1,extensions:["usdz"]},"model/vnd.valve.source.compiled-map":{source:"iana",extensions:["bsp"]},"model/vnd.vtu":{source:"iana",extensions:["vtu"]},"model/vrml":{source:"iana",compressible:!1,extensions:["wrl","vrml"]},"model/x3d+binary":{source:"apache",compressible:!1,extensions:["x3db","x3dbz"]},"model/x3d+fastinfoset":{source:"iana",extensions:["x3db"]},"model/x3d+vrml":{source:"apache",compressible:!1,extensions:["x3dv","x3dvz"]},"model/x3d+xml":{source:"iana",compressible:!0,extensions:["x3d","x3dz"]},"model/x3d-vrml":{source:"iana",extensions:["x3dv"]},"multipart/alternative":{source:"iana",compressible:!1},"multipart/appledouble":{source:"iana"},"multipart/byteranges":{source:"iana"},"multipart/digest":{source:"iana"},"multipart/encrypted":{source:"iana",compressible:!1},"multipart/form-data":{source:"iana",compressible:!1},"multipart/header-set":{source:"iana"},"multipart/mixed":{source:"iana"},"multipart/multilingual":{source:"iana"},"multipart/parallel":{source:"iana"},"multipart/related":{source:"iana",compressible:!1},"multipart/report":{source:"iana"},"multipart/signed":{source:"iana",compressible:!1},"multipart/vnd.bint.med-plus":{source:"iana"},"multipart/voice-message":{source:"iana"},"multipart/x-mixed-replace":{source:"iana"},"text/1d-interleaved-parityfec":{source:"iana"},"text/cache-manifest":{source:"iana",compressible:!0,extensions:["appcache","manifest"]},"text/calendar":{source:"iana",extensions:["ics","ifb"]},"text/calender":{compressible:!0},"text/cmd":{compressible:!0},"text/coffeescript":{extensions:["coffee","litcoffee"]},"text/cql":{source:"iana"},"text/cql-expression":{source:"iana"},"text/cql-identifier":{source:"iana"},"text/css":{source:"iana",charset:"UTF-8",compressible:!0,extensions:["css"]},"text/csv":{source:"iana",compressible:!0,extensions:["csv"]},"text/csv-schema":{source:"iana"},"text/directory":{source:"iana"},"text/dns":{source:"iana"},"text/ecmascript":{source:"iana"},"text/encaprtp":{source:"iana"},"text/enriched":{source:"iana"},"text/fhirpath":{source:"iana"},"text/flexfec":{source:"iana"},"text/fwdred":{source:"iana"},"text/gff3":{source:"iana"},"text/grammar-ref-list":{source:"iana"},"text/html":{source:"iana",compressible:!0,extensions:["html","htm","shtml"]},"text/jade":{extensions:["jade"]},"text/javascript":{source:"iana",compressible:!0},"text/jcr-cnd":{source:"iana"},"text/jsx":{compressible:!0,extensions:["jsx"]},"text/less":{compressible:!0,extensions:["less"]},"text/markdown":{source:"iana",compressible:!0,extensions:["markdown","md"]},"text/mathml":{source:"nginx",extensions:["mml"]},"text/mdx":{compressible:!0,extensions:["mdx"]},"text/mizar":{source:"iana"},"text/n3":{source:"iana",charset:"UTF-8",compressible:!0,extensions:["n3"]},"text/parameters":{source:"iana",charset:"UTF-8"},"text/parityfec":{source:"iana"},"text/plain":{source:"iana",compressible:!0,extensions:["txt","text","conf","def","list","log","in","ini"]},"text/provenance-notation":{source:"iana",charset:"UTF-8"},"text/prs.fallenstein.rst":{source:"iana"},"text/prs.lines.tag":{source:"iana",extensions:["dsc"]},"text/prs.prop.logic":{source:"iana"},"text/raptorfec":{source:"iana"},"text/red":{source:"iana"},"text/rfc822-headers":{source:"iana"},"text/richtext":{source:"iana",compressible:!0,extensions:["rtx"]},"text/rtf":{source:"iana",compressible:!0,extensions:["rtf"]},"text/rtp-enc-aescm128":{source:"iana"},"text/rtploopback":{source:"iana"},"text/rtx":{source:"iana"},"text/sgml":{source:"iana",extensions:["sgml","sgm"]},"text/shaclc":{source:"iana"},"text/shex":{source:"iana",extensions:["shex"]},"text/slim":{extensions:["slim","slm"]},"text/spdx":{source:"iana",extensions:["spdx"]},"text/strings":{source:"iana"},"text/stylus":{extensions:["stylus","styl"]},"text/t140":{source:"iana"},"text/tab-separated-values":{source:"iana",compressible:!0,extensions:["tsv"]},"text/troff":{source:"iana",extensions:["t","tr","roff","man","me","ms"]},"text/turtle":{source:"iana",charset:"UTF-8",extensions:["ttl"]},"text/ulpfec":{source:"iana"},"text/uri-list":{source:"iana",compressible:!0,extensions:["uri","uris","urls"]},"text/vcard":{source:"iana",compressible:!0,extensions:["vcard"]},"text/vnd.a":{source:"iana"},"text/vnd.abc":{source:"iana"},"text/vnd.ascii-art":{source:"iana"},"text/vnd.curl":{source:"iana",extensions:["curl"]},"text/vnd.curl.dcurl":{source:"apache",extensions:["dcurl"]},"text/vnd.curl.mcurl":{source:"apache",extensions:["mcurl"]},"text/vnd.curl.scurl":{source:"apache",extensions:["scurl"]},"text/vnd.debian.copyright":{source:"iana",charset:"UTF-8"},"text/vnd.dmclientscript":{source:"iana"},"text/vnd.dvb.subtitle":{source:"iana",extensions:["sub"]},"text/vnd.esmertec.theme-descriptor":{source:"iana",charset:"UTF-8"},"text/vnd.familysearch.gedcom":{source:"iana",extensions:["ged"]},"text/vnd.ficlab.flt":{source:"iana"},"text/vnd.fly":{source:"iana",extensions:["fly"]},"text/vnd.fmi.flexstor":{source:"iana",extensions:["flx"]},"text/vnd.gml":{source:"iana"},"text/vnd.graphviz":{source:"iana",extensions:["gv"]},"text/vnd.hans":{source:"iana"},"text/vnd.hgl":{source:"iana"},"text/vnd.in3d.3dml":{source:"iana",extensions:["3dml"]},"text/vnd.in3d.spot":{source:"iana",extensions:["spot"]},"text/vnd.iptc.newsml":{source:"iana"},"text/vnd.iptc.nitf":{source:"iana"},"text/vnd.latex-z":{source:"iana"},"text/vnd.motorola.reflex":{source:"iana"},"text/vnd.ms-mediapackage":{source:"iana"},"text/vnd.net2phone.commcenter.command":{source:"iana"},"text/vnd.radisys.msml-basic-layout":{source:"iana"},"text/vnd.senx.warpscript":{source:"iana"},"text/vnd.si.uricatalogue":{source:"iana"},"text/vnd.sosi":{source:"iana"},"text/vnd.sun.j2me.app-descriptor":{source:"iana",charset:"UTF-8",extensions:["jad"]},"text/vnd.trolltech.linguist":{source:"iana",charset:"UTF-8"},"text/vnd.wap.si":{source:"iana"},"text/vnd.wap.sl":{source:"iana"},"text/vnd.wap.wml":{source:"iana",extensions:["wml"]},"text/vnd.wap.wmlscript":{source:"iana",extensions:["wmls"]},"text/vtt":{source:"iana",charset:"UTF-8",compressible:!0,extensions:["vtt"]},"text/x-asm":{source:"apache",extensions:["s","asm"]},"text/x-c":{source:"apache",extensions:["c","cc","cxx","cpp","h","hh","dic"]},"text/x-component":{source:"nginx",extensions:["htc"]},"text/x-fortran":{source:"apache",extensions:["f","for","f77","f90"]},"text/x-gwt-rpc":{compressible:!0},"text/x-handlebars-template":{extensions:["hbs"]},"text/x-java-source":{source:"apache",extensions:["java"]},"text/x-jquery-tmpl":{compressible:!0},"text/x-lua":{extensions:["lua"]},"text/x-markdown":{compressible:!0,extensions:["mkd"]},"text/x-nfo":{source:"apache",extensions:["nfo"]},"text/x-opml":{source:"apache",extensions:["opml"]},"text/x-org":{compressible:!0,extensions:["org"]},"text/x-pascal":{source:"apache",extensions:["p","pas"]},"text/x-processing":{compressible:!0,extensions:["pde"]},"text/x-sass":{extensions:["sass"]},"text/x-scss":{extensions:["scss"]},"text/x-setext":{source:"apache",extensions:["etx"]},"text/x-sfv":{source:"apache",extensions:["sfv"]},"text/x-suse-ymp":{compressible:!0,extensions:["ymp"]},"text/x-uuencode":{source:"apache",extensions:["uu"]},"text/x-vcalendar":{source:"apache",extensions:["vcs"]},"text/x-vcard":{source:"apache",extensions:["vcf"]},"text/xml":{source:"iana",compressible:!0,extensions:["xml"]},"text/xml-external-parsed-entity":{source:"iana"},"text/yaml":{compressible:!0,extensions:["yaml","yml"]},"video/1d-interleaved-parityfec":{source:"iana"},"video/3gpp":{source:"iana",extensions:["3gp","3gpp"]},"video/3gpp-tt":{source:"iana"},"video/3gpp2":{source:"iana",extensions:["3g2"]},"video/av1":{source:"iana"},"video/bmpeg":{source:"iana"},"video/bt656":{source:"iana"},"video/celb":{source:"iana"},"video/dv":{source:"iana"},"video/encaprtp":{source:"iana"},"video/ffv1":{source:"iana"},"video/flexfec":{source:"iana"},"video/h261":{source:"iana",extensions:["h261"]},"video/h263":{source:"iana",extensions:["h263"]},"video/h263-1998":{source:"iana"},"video/h263-2000":{source:"iana"},"video/h264":{source:"iana",extensions:["h264"]},"video/h264-rcdo":{source:"iana"},"video/h264-svc":{source:"iana"},"video/h265":{source:"iana"},"video/iso.segment":{source:"iana",extensions:["m4s"]},"video/jpeg":{source:"iana",extensions:["jpgv"]},"video/jpeg2000":{source:"iana"},"video/jpm":{source:"apache",extensions:["jpm","jpgm"]},"video/jxsv":{source:"iana"},"video/mj2":{source:"iana",extensions:["mj2","mjp2"]},"video/mp1s":{source:"iana"},"video/mp2p":{source:"iana"},"video/mp2t":{source:"iana",extensions:["ts"]},"video/mp4":{source:"iana",compressible:!1,extensions:["mp4","mp4v","mpg4"]},"video/mp4v-es":{source:"iana"},"video/mpeg":{source:"iana",compressible:!1,extensions:["mpeg","mpg","mpe","m1v","m2v"]},"video/mpeg4-generic":{source:"iana"},"video/mpv":{source:"iana"},"video/nv":{source:"iana"},"video/ogg":{source:"iana",compressible:!1,extensions:["ogv"]},"video/parityfec":{source:"iana"},"video/pointer":{source:"iana"},"video/quicktime":{source:"iana",compressible:!1,extensions:["qt","mov"]},"video/raptorfec":{source:"iana"},"video/raw":{source:"iana"},"video/rtp-enc-aescm128":{source:"iana"},"video/rtploopback":{source:"iana"},"video/rtx":{source:"iana"},"video/scip":{source:"iana"},"video/smpte291":{source:"iana"},"video/smpte292m":{source:"iana"},"video/ulpfec":{source:"iana"},"video/vc1":{source:"iana"},"video/vc2":{source:"iana"},"video/vnd.cctv":{source:"iana"},"video/vnd.dece.hd":{source:"iana",extensions:["uvh","uvvh"]},"video/vnd.dece.mobile":{source:"iana",extensions:["uvm","uvvm"]},"video/vnd.dece.mp4":{source:"iana"},"video/vnd.dece.pd":{source:"iana",extensions:["uvp","uvvp"]},"video/vnd.dece.sd":{source:"iana",extensions:["uvs","uvvs"]},"video/vnd.dece.video":{source:"iana",extensions:["uvv","uvvv"]},"video/vnd.directv.mpeg":{source:"iana"},"video/vnd.directv.mpeg-tts":{source:"iana"},"video/vnd.dlna.mpeg-tts":{source:"iana"},"video/vnd.dvb.file":{source:"iana",extensions:["dvb"]},"video/vnd.fvt":{source:"iana",extensions:["fvt"]},"video/vnd.hns.video":{source:"iana"},"video/vnd.iptvforum.1dparityfec-1010":{source:"iana"},"video/vnd.iptvforum.1dparityfec-2005":{source:"iana"},"video/vnd.iptvforum.2dparityfec-1010":{source:"iana"},"video/vnd.iptvforum.2dparityfec-2005":{source:"iana"},"video/vnd.iptvforum.ttsavc":{source:"iana"},"video/vnd.iptvforum.ttsmpeg2":{source:"iana"},"video/vnd.motorola.video":{source:"iana"},"video/vnd.motorola.videop":{source:"iana"},"video/vnd.mpegurl":{source:"iana",extensions:["mxu","m4u"]},"video/vnd.ms-playready.media.pyv":{source:"iana",extensions:["pyv"]},"video/vnd.nokia.interleaved-multimedia":{source:"iana"},"video/vnd.nokia.mp4vr":{source:"iana"},"video/vnd.nokia.videovoip":{source:"iana"},"video/vnd.objectvideo":{source:"iana"},"video/vnd.radgamettools.bink":{source:"iana"},"video/vnd.radgamettools.smacker":{source:"iana"},"video/vnd.sealed.mpeg1":{source:"iana"},"video/vnd.sealed.mpeg4":{source:"iana"},"video/vnd.sealed.swf":{source:"iana"},"video/vnd.sealedmedia.softseal.mov":{source:"iana"},"video/vnd.uvvu.mp4":{source:"iana",extensions:["uvu","uvvu"]},"video/vnd.vivo":{source:"iana",extensions:["viv"]},"video/vnd.youtube.yt":{source:"iana"},"video/vp8":{source:"iana"},"video/vp9":{source:"iana"},"video/webm":{source:"apache",compressible:!1,extensions:["webm"]},"video/x-f4v":{source:"apache",extensions:["f4v"]},"video/x-fli":{source:"apache",extensions:["fli"]},"video/x-flv":{source:"apache",compressible:!1,extensions:["flv"]},"video/x-m4v":{source:"apache",extensions:["m4v"]},"video/x-matroska":{source:"apache",compressible:!1,extensions:["mkv","mk3d","mks"]},"video/x-mng":{source:"apache",extensions:["mng"]},"video/x-ms-asf":{source:"apache",extensions:["asf","asx"]},"video/x-ms-vob":{source:"apache",extensions:["vob"]},"video/x-ms-wm":{source:"apache",extensions:["wm"]},"video/x-ms-wmv":{source:"apache",compressible:!1,extensions:["wmv"]},"video/x-ms-wmx":{source:"apache",extensions:["wmx"]},"video/x-ms-wvx":{source:"apache",extensions:["wvx"]},"video/x-msvideo":{source:"apache",extensions:["avi"]},"video/x-sgi-movie":{source:"apache",extensions:["movie"]},"video/x-smv":{source:"apache",extensions:["smv"]},"x-conference/x-cooltalk":{source:"apache",extensions:["ice"]},"x-shader/x-fragment":{compressible:!0},"x-shader/x-vertex":{compressible:!0}}});var zre=T((cut,qre)=>{qre.exports=Fre()});var Kre=T(Br=>{"use strict";var Tb=zre(),HUe=q("path").extname,Yre=/^\s*([^;\s]*)(?:;|\s|$)/,FUe=/^text\//i;Br.charset=Wre;Br.charsets={lookup:Wre};Br.contentType=qUe;Br.extension=zUe;Br.extensions=Object.create(null);Br.lookup=YUe;Br.types=Object.create(null);WUe(Br.extensions,Br.types);function Wre(t){if(!t||typeof t!="string")return!1;var e=Yre.exec(t),n=e&&Tb[e[1].toLowerCase()];return n&&n.charset?n.charset:e&&FUe.test(e[1])?"UTF-8":!1}function qUe(t){if(!t||typeof t!="string")return!1;var e=t.indexOf("/")===-1?Br.lookup(t):t;if(!e)return!1;if(e.indexOf("charset")===-1){var n=Br.charset(e);n&&(e+="; charset="+n.toLowerCase())}return e}function zUe(t){if(!t||typeof t!="string")return!1;var e=Yre.exec(t),n=e&&Br.extensions[e[1].toLowerCase()];return!n||!n.length?!1:n[0]}function YUe(t){if(!t||typeof t!="string")return!1;var e=HUe("x."+t).toLowerCase().substr(1);return e&&Br.types[e]||!1}function WUe(t,e){var n=["nginx","apache",void 0,"iana"];Object.keys(Tb).forEach(function(o){var s=Tb[o],i=s.extensions;if(!(!i||!i.length)){t[o]=i;for(var a=0;a<i.length;a++){var c=i[a];if(e[c]){var u=n.indexOf(Tb[e[c]].source),p=n.indexOf(s.source);if(e[c]!=="application/octet-stream"&&(u>p||u===p&&e[c].substr(0,12)==="application/"))continue}e[c]=o}}})}});var Jre=T((put,Zre)=>{Zre.exports=KUe;function KUe(t){var e=typeof setImmediate=="function"?setImmediate:typeof process=="object"&&typeof process.nextTick=="function"?process.nextTick:null;e?e(t):setTimeout(t,0)}});var WL=T((lut,Xre)=>{var Qre=Jre();Xre.exports=ZUe;function ZUe(t){var e=!1;return Qre(function(){e=!0}),function(r,o){e?t(r,o):Qre(function(){t(r,o)})}}});var KL=T((dut,eoe)=>{eoe.exports=JUe;function JUe(t){Object.keys(t.jobs).forEach(QUe.bind(t)),t.jobs={}}function QUe(t){typeof this.jobs[t]=="function"&&this.jobs[t]()}});var ZL=T((fut,noe)=>{var toe=WL(),XUe=KL();noe.exports=e1e;function e1e(t,e,n,r){var o=n.keyedList?n.keyedList[n.index]:n.index;n.jobs[o]=t1e(e,o,t[o],function(s,i){o in n.jobs&&(delete n.jobs[o],s?XUe(n):n.results[o]=i,r(s,n.results))})}function t1e(t,e,n,r){var o;return t.length==2?o=t(n,toe(r)):o=t(n,e,toe(r)),o}});var JL=T((mut,roe)=>{roe.exports=n1e;function n1e(t,e){var n=!Array.isArray(t),r={index:0,keyedList:n||e?Object.keys(t):null,jobs:{},results:n?{}:[],size:n?Object.keys(t).length:t.length};return e&&r.keyedList.sort(n?e:function(o,s){return e(t[o],t[s])}),r}});var QL=T((_ut,ooe)=>{var r1e=KL(),o1e=WL();ooe.exports=s1e;function s1e(t){Object.keys(this.jobs).length&&(this.index=this.size,r1e(this),o1e(t)(null,this.results))}});var ioe=T((hut,soe)=>{var i1e=ZL(),a1e=JL(),c1e=QL();soe.exports=u1e;function u1e(t,e,n){for(var r=a1e(t);r.index<(r.keyedList||t).length;)i1e(t,e,r,function(o,s){if(o){n(o,s);return}if(Object.keys(r.jobs).length===0){n(null,r.results);return}}),r.index++;return c1e.bind(r,n)}});var XL=T((Eut,gb)=>{var aoe=ZL(),p1e=JL(),l1e=QL();gb.exports=d1e;gb.exports.ascending=coe;gb.exports.descending=f1e;function d1e(t,e,n,r){var o=p1e(t,n);return aoe(t,e,o,function s(i,a){if(i){r(i,a);return}if(o.index++,o.index<(o.keyedList||t).length){aoe(t,e,o,s);return}r(null,o.results)}),l1e.bind(o,r)}function coe(t,e){return t<e?-1:t>e?1:0}function f1e(t,e){return-1*coe(t,e)}});var poe=T((Tut,uoe)=>{var m1e=XL();uoe.exports=_1e;function _1e(t,e,n){return m1e(t,e,null,n)}});var doe=T((gut,loe)=>{loe.exports={parallel:ioe(),serial:poe(),serialOrdered:XL()}});var eD=T((Sut,foe)=>{"use strict";foe.exports=Object});var _oe=T((Aut,moe)=>{"use strict";moe.exports=Error});var Eoe=T((Rut,hoe)=>{"use strict";hoe.exports=EvalError});var goe=T((yut,Toe)=>{"use strict";Toe.exports=RangeError});var Aoe=T((but,Soe)=>{"use strict";Soe.exports=ReferenceError});var yoe=T((Nut,Roe)=>{"use strict";Roe.exports=SyntaxError});var Sb=T((Out,boe)=>{"use strict";boe.exports=TypeError});var Ooe=T((Iut,Noe)=>{"use strict";Noe.exports=URIError});var voe=T((vut,Ioe)=>{"use strict";Ioe.exports=Math.abs});var Poe=T((xut,xoe)=>{"use strict";xoe.exports=Math.floor});var Moe=T((Put,Coe)=>{"use strict";Coe.exports=Math.max});var Loe=T((Cut,woe)=>{"use strict";woe.exports=Math.min});var koe=T((Mut,Doe)=>{"use strict";Doe.exports=Math.pow});var $oe=T((wut,Uoe)=>{"use strict";Uoe.exports=Math.round});var Voe=T((Lut,Goe)=>{"use strict";Goe.exports=Number.isNaN||function(e){return e!==e}});var joe=T((Dut,Boe)=>{"use strict";var h1e=Voe();Boe.exports=function(e){return h1e(e)||e===0?e:e<0?-1:1}});var Foe=T((kut,Hoe)=>{"use strict";Hoe.exports=Object.getOwnPropertyDescriptor});var tD=T((Uut,qoe)=>{"use strict";var Ab=Foe();if(Ab)try{Ab([],"length")}catch{Ab=null}qoe.exports=Ab});var Yoe=T(($ut,zoe)=>{"use strict";var Rb=Object.defineProperty||!1;if(Rb)try{Rb({},"a",{value:1})}catch{Rb=!1}zoe.exports=Rb});var nD=T((Gut,Woe)=>{"use strict";Woe.exports=function(){if(typeof Symbol!="function"||typeof Object.getOwnPropertySymbols!="function")return!1;if(typeof Symbol.iterator=="symbol")return!0;var e={},n=Symbol("test"),r=Object(n);if(typeof n=="string"||Object.prototype.toString.call(n)!=="[object Symbol]"||Object.prototype.toString.call(r)!=="[object Symbol]")return!1;var o=42;e[n]=o;for(var s in e)return!1;if(typeof Object.keys=="function"&&Object.keys(e).length!==0||typeof Object.getOwnPropertyNames=="function"&&Object.getOwnPropertyNames(e).length!==0)return!1;var i=Object.getOwnPropertySymbols(e);if(i.length!==1||i[0]!==n||!Object.prototype.propertyIsEnumerable.call(e,n))return!1;if(typeof Object.getOwnPropertyDescriptor=="function"){var a=Object.getOwnPropertyDescriptor(e,n);if(a.value!==o||a.enumerable!==!0)return!1}return!0}});var Joe=T((Vut,Zoe)=>{"use strict";var Koe=typeof Symbol<"u"&&Symbol,E1e=nD();Zoe.exports=function(){return typeof Koe!="function"||typeof Symbol!="function"||typeof Koe("foo")!="symbol"||typeof Symbol("bar")!="symbol"?!1:E1e()}});var rD=T((But,Qoe)=>{"use strict";Qoe.exports=typeof Reflect<"u"&&Reflect.getPrototypeOf||null});var oD=T((jut,Xoe)=>{"use strict";var T1e=eD();Xoe.exports=T1e.getPrototypeOf||null});var nse=T((Hut,tse)=>{"use strict";var g1e="Function.prototype.bind called on incompatible ",S1e=Object.prototype.toString,A1e=Math.max,R1e="[object Function]",ese=function(e,n){for(var r=[],o=0;o<e.length;o+=1)r[o]=e[o];for(var s=0;s<n.length;s+=1)r[s+e.length]=n[s];return r},y1e=function(e,n){for(var r=[],o=n||0,s=0;o<e.length;o+=1,s+=1)r[s]=e[o];return r},b1e=function(t,e){for(var n="",r=0;r<t.length;r+=1)n+=t[r],r+1<t.length&&(n+=e);return n};tse.exports=function(e){var n=this;if(typeof n!="function"||S1e.apply(n)!==R1e)throw new TypeError(g1e+n);for(var r=y1e(arguments,1),o,s=function(){if(this instanceof o){var p=n.apply(this,ese(r,arguments));return Object(p)===p?p:this}return n.apply(e,ese(r,arguments))},i=A1e(0,n.length-r.length),a=[],c=0;c<i;c++)a[c]="$"+c;if(o=Function("binder","return function ("+b1e(a,",")+"){ return binder.apply(this,arguments); }")(s),n.prototype){var u=function(){};u.prototype=n.prototype,o.prototype=new u,u.prototype=null}return o}});var dh=T((Fut,rse)=>{"use strict";var N1e=nse();rse.exports=Function.prototype.bind||N1e});var yb=T((qut,ose)=>{"use strict";ose.exports=Function.prototype.call});var sD=T((zut,sse)=>{"use strict";sse.exports=Function.prototype.apply});var ase=T((Yut,ise)=>{"use strict";ise.exports=typeof Reflect<"u"&&Reflect&&Reflect.apply});var use=T((Wut,cse)=>{"use strict";var O1e=dh(),I1e=sD(),v1e=yb(),x1e=ase();cse.exports=x1e||O1e.call(v1e,I1e)});var lse=T((Kut,pse)=>{"use strict";var P1e=dh(),C1e=Sb(),M1e=yb(),w1e=use();pse.exports=function(e){if(e.length<1||typeof e[0]!="function")throw new C1e("a function is required");return w1e(P1e,M1e,e)}});var Ese=T((Zut,hse)=>{"use strict";var L1e=lse(),dse=tD(),mse;try{mse=[].__proto__===Array.prototype}catch(t){if(!t||typeof t!="object"||!("code"in t)||t.code!=="ERR_PROTO_ACCESS")throw t}var iD=!!mse&&dse&&dse(Object.prototype,"__proto__"),_se=Object,fse=_se.getPrototypeOf;hse.exports=iD&&typeof iD.get=="function"?L1e([iD.get]):typeof fse=="function"?function(e){return fse(e==null?e:_se(e))}:!1});var Rse=T((Jut,Ase)=>{"use strict";var Tse=rD(),gse=oD(),Sse=Ese();Ase.exports=Tse?function(e){return Tse(e)}:gse?function(e){if(!e||typeof e!="object"&&typeof e!="function")throw new TypeError("getProto: not an object");return gse(e)}:Sse?function(e){return Sse(e)}:null});var bb=T((Qut,yse)=>{"use strict";var D1e=Function.prototype.call,k1e=Object.prototype.hasOwnProperty,U1e=dh();yse.exports=U1e.call(D1e,k1e)});var Pse=T((Xut,xse)=>{"use strict";var Me,$1e=eD(),G1e=_oe(),V1e=Eoe(),B1e=goe(),j1e=Aoe(),Ud=yoe(),kd=Sb(),H1e=Ooe(),F1e=voe(),q1e=Poe(),z1e=Moe(),Y1e=Loe(),W1e=koe(),K1e=$oe(),Z1e=joe(),Ise=Function,aD=function(t){try{return Ise('"use strict"; return ('+t+").constructor;")()}catch{}},fh=tD(),J1e=Yoe(),cD=function(){throw new kd},Q1e=fh?(function(){try{return arguments.callee,cD}catch{try{return fh(arguments,"callee").get}catch{return cD}}})():cD,Ld=Joe()(),vn=Rse(),X1e=oD(),e$e=rD(),vse=sD(),mh=yb(),Dd={},t$e=typeof Uint8Array>"u"||!vn?Me:vn(Uint8Array),qu={__proto__:null,"%AggregateError%":typeof AggregateError>"u"?Me:AggregateError,"%Array%":Array,"%ArrayBuffer%":typeof ArrayBuffer>"u"?Me:ArrayBuffer,"%ArrayIteratorPrototype%":Ld&&vn?vn([][Symbol.iterator]()):Me,"%AsyncFromSyncIteratorPrototype%":Me,"%AsyncFunction%":Dd,"%AsyncGenerator%":Dd,"%AsyncGeneratorFunction%":Dd,"%AsyncIteratorPrototype%":Dd,"%Atomics%":typeof Atomics>"u"?Me:Atomics,"%BigInt%":typeof BigInt>"u"?Me:BigInt,"%BigInt64Array%":typeof BigInt64Array>"u"?Me:BigInt64Array,"%BigUint64Array%":typeof BigUint64Array>"u"?Me:BigUint64Array,"%Boolean%":Boolean,"%DataView%":typeof DataView>"u"?Me:DataView,"%Date%":Date,"%decodeURI%":decodeURI,"%decodeURIComponent%":decodeURIComponent,"%encodeURI%":encodeURI,"%encodeURIComponent%":encodeURIComponent,"%Error%":G1e,"%eval%":eval,"%EvalError%":V1e,"%Float16Array%":typeof Float16Array>"u"?Me:Float16Array,"%Float32Array%":typeof Float32Array>"u"?Me:Float32Array,"%Float64Array%":typeof Float64Array>"u"?Me:Float64Array,"%FinalizationRegistry%":typeof FinalizationRegistry>"u"?Me:FinalizationRegistry,"%Function%":Ise,"%GeneratorFunction%":Dd,"%Int8Array%":typeof Int8Array>"u"?Me:Int8Array,"%Int16Array%":typeof Int16Array>"u"?Me:Int16Array,"%Int32Array%":typeof Int32Array>"u"?Me:Int32Array,"%isFinite%":isFinite,"%isNaN%":isNaN,"%IteratorPrototype%":Ld&&vn?vn(vn([][Symbol.iterator]())):Me,"%JSON%":typeof JSON=="object"?JSON:Me,"%Map%":typeof Map>"u"?Me:Map,"%MapIteratorPrototype%":typeof Map>"u"||!Ld||!vn?Me:vn(new Map()[Symbol.iterator]()),"%Math%":Math,"%Number%":Number,"%Object%":$1e,"%Object.getOwnPropertyDescriptor%":fh,"%parseFloat%":parseFloat,"%parseInt%":parseInt,"%Promise%":typeof Promise>"u"?Me:Promise,"%Proxy%":typeof Proxy>"u"?Me:Proxy,"%RangeError%":B1e,"%ReferenceError%":j1e,"%Reflect%":typeof Reflect>"u"?Me:Reflect,"%RegExp%":RegExp,"%Set%":typeof Set>"u"?Me:Set,"%SetIteratorPrototype%":typeof Set>"u"||!Ld||!vn?Me:vn(new Set()[Symbol.iterator]()),"%SharedArrayBuffer%":typeof SharedArrayBuffer>"u"?Me:SharedArrayBuffer,"%String%":String,"%StringIteratorPrototype%":Ld&&vn?vn(""[Symbol.iterator]()):Me,"%Symbol%":Ld?Symbol:Me,"%SyntaxError%":Ud,"%ThrowTypeError%":Q1e,"%TypedArray%":t$e,"%TypeError%":kd,"%Uint8Array%":typeof Uint8Array>"u"?Me:Uint8Array,"%Uint8ClampedArray%":typeof Uint8ClampedArray>"u"?Me:Uint8ClampedArray,"%Uint16Array%":typeof Uint16Array>"u"?Me:Uint16Array,"%Uint32Array%":typeof Uint32Array>"u"?Me:Uint32Array,"%URIError%":H1e,"%WeakMap%":typeof WeakMap>"u"?Me:WeakMap,"%WeakRef%":typeof WeakRef>"u"?Me:WeakRef,"%WeakSet%":typeof WeakSet>"u"?Me:WeakSet,"%Function.prototype.call%":mh,"%Function.prototype.apply%":vse,"%Object.defineProperty%":J1e,"%Object.getPrototypeOf%":X1e,"%Math.abs%":F1e,"%Math.floor%":q1e,"%Math.max%":z1e,"%Math.min%":Y1e,"%Math.pow%":W1e,"%Math.round%":K1e,"%Math.sign%":Z1e,"%Reflect.getPrototypeOf%":e$e};if(vn)try{null.error}catch(t){bse=vn(vn(t)),qu["%Error.prototype%"]=bse}var bse,n$e=function t(e){var n;if(e==="%AsyncFunction%")n=aD("async function () {}");else if(e==="%GeneratorFunction%")n=aD("function* () {}");else if(e==="%AsyncGeneratorFunction%")n=aD("async function* () {}");else if(e==="%AsyncGenerator%"){var r=t("%AsyncGeneratorFunction%");r&&(n=r.prototype)}else if(e==="%AsyncIteratorPrototype%"){var o=t("%AsyncGenerator%");o&&vn&&(n=vn(o.prototype))}return qu[e]=n,n},Nse={__proto__:null,"%ArrayBufferPrototype%":["ArrayBuffer","prototype"],"%ArrayPrototype%":["Array","prototype"],"%ArrayProto_entries%":["Array","prototype","entries"],"%ArrayProto_forEach%":["Array","prototype","forEach"],"%ArrayProto_keys%":["Array","prototype","keys"],"%ArrayProto_values%":["Array","prototype","values"],"%AsyncFunctionPrototype%":["AsyncFunction","prototype"],"%AsyncGenerator%":["AsyncGeneratorFunction","prototype"],"%AsyncGeneratorPrototype%":["AsyncGeneratorFunction","prototype","prototype"],"%BooleanPrototype%":["Boolean","prototype"],"%DataViewPrototype%":["DataView","prototype"],"%DatePrototype%":["Date","prototype"],"%ErrorPrototype%":["Error","prototype"],"%EvalErrorPrototype%":["EvalError","prototype"],"%Float32ArrayPrototype%":["Float32Array","prototype"],"%Float64ArrayPrototype%":["Float64Array","prototype"],"%FunctionPrototype%":["Function","prototype"],"%Generator%":["GeneratorFunction","prototype"],"%GeneratorPrototype%":["GeneratorFunction","prototype","prototype"],"%Int8ArrayPrototype%":["Int8Array","prototype"],"%Int16ArrayPrototype%":["Int16Array","prototype"],"%Int32ArrayPrototype%":["Int32Array","prototype"],"%JSONParse%":["JSON","parse"],"%JSONStringify%":["JSON","stringify"],"%MapPrototype%":["Map","prototype"],"%NumberPrototype%":["Number","prototype"],"%ObjectPrototype%":["Object","prototype"],"%ObjProto_toString%":["Object","prototype","toString"],"%ObjProto_valueOf%":["Object","prototype","valueOf"],"%PromisePrototype%":["Promise","prototype"],"%PromiseProto_then%":["Promise","prototype","then"],"%Promise_all%":["Promise","all"],"%Promise_reject%":["Promise","reject"],"%Promise_resolve%":["Promise","resolve"],"%RangeErrorPrototype%":["RangeError","prototype"],"%ReferenceErrorPrototype%":["ReferenceError","prototype"],"%RegExpPrototype%":["RegExp","prototype"],"%SetPrototype%":["Set","prototype"],"%SharedArrayBufferPrototype%":["SharedArrayBuffer","prototype"],"%StringPrototype%":["String","prototype"],"%SymbolPrototype%":["Symbol","prototype"],"%SyntaxErrorPrototype%":["SyntaxError","prototype"],"%TypedArrayPrototype%":["TypedArray","prototype"],"%TypeErrorPrototype%":["TypeError","prototype"],"%Uint8ArrayPrototype%":["Uint8Array","prototype"],"%Uint8ClampedArrayPrototype%":["Uint8ClampedArray","prototype"],"%Uint16ArrayPrototype%":["Uint16Array","prototype"],"%Uint32ArrayPrototype%":["Uint32Array","prototype"],"%URIErrorPrototype%":["URIError","prototype"],"%WeakMapPrototype%":["WeakMap","prototype"],"%WeakSetPrototype%":["WeakSet","prototype"]},_h=dh(),Nb=bb(),r$e=_h.call(mh,Array.prototype.concat),o$e=_h.call(vse,Array.prototype.splice),Ose=_h.call(mh,String.prototype.replace),Ob=_h.call(mh,String.prototype.slice),s$e=_h.call(mh,RegExp.prototype.exec),i$e=/[^%.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|%$))/g,a$e=/\\(\\)?/g,c$e=function(e){var n=Ob(e,0,1),r=Ob(e,-1);if(n==="%"&&r!=="%")throw new Ud("invalid intrinsic syntax, expected closing `%`");if(r==="%"&&n!=="%")throw new Ud("invalid intrinsic syntax, expected opening `%`");var o=[];return Ose(e,i$e,function(s,i,a,c){o[o.length]=a?Ose(c,a$e,"$1"):i||s}),o},u$e=function(e,n){var r=e,o;if(Nb(Nse,r)&&(o=Nse[r],r="%"+o[0]+"%"),Nb(qu,r)){var s=qu[r];if(s===Dd&&(s=n$e(r)),typeof s>"u"&&!n)throw new kd("intrinsic "+e+" exists, but is not available. Please file an issue!");return{alias:o,name:r,value:s}}throw new Ud("intrinsic "+e+" does not exist!")};xse.exports=function(e,n){if(typeof e!="string"||e.length===0)throw new kd("intrinsic name must be a non-empty string");if(arguments.length>1&&typeof n!="boolean")throw new kd('"allowMissing" argument must be a boolean');if(s$e(/^%?[^%]*%?$/,e)===null)throw new Ud("`%` may not be present anywhere but at the beginning and end of the intrinsic name");var r=c$e(e),o=r.length>0?r[0]:"",s=u$e("%"+o+"%",n),i=s.name,a=s.value,c=!1,u=s.alias;u&&(o=u[0],o$e(r,r$e([0,1],u)));for(var p=1,l=!0;p<r.length;p+=1){var d=r[p],f=Ob(d,0,1),m=Ob(d,-1);if((f==='"'||f==="'"||f==="`"||m==='"'||m==="'"||m==="`")&&f!==m)throw new Ud("property names with quotes must have matching quotes");if((d==="constructor"||!l)&&(c=!0),o+="."+d,i="%"+o+"%",Nb(qu,i))a=qu[i];else if(a!=null){if(!(d in a)){if(!n)throw new kd("base intrinsic for "+e+" exists, but the property is not available.");return}if(fh&&p+1>=r.length){var h=fh(a,d);l=!!h,l&&"get"in h&&!("originalValue"in h.get)?a=h.get:a=a[d]}else l=Nb(a,d),a=a[d];l&&!c&&(qu[i]=a)}}return a}});var Mse=T((ept,Cse)=>{"use strict";var p$e=nD();Cse.exports=function(){return p$e()&&!!Symbol.toStringTag}});var Dse=T((tpt,Lse)=>{"use strict";var l$e=Pse(),wse=l$e("%Object.defineProperty%",!0),d$e=Mse()(),f$e=bb(),m$e=Sb(),Ib=d$e?Symbol.toStringTag:null;Lse.exports=function(e,n){var r=arguments.length>2&&!!arguments[2]&&arguments[2].force,o=arguments.length>2&&!!arguments[2]&&arguments[2].nonConfigurable;if(typeof r<"u"&&typeof r!="boolean"||typeof o<"u"&&typeof o!="boolean")throw new m$e("if provided, the `overrideIfSet` and `nonConfigurable` options must be booleans");Ib&&(r||!f$e(e,Ib))&&(wse?wse(e,Ib,{configurable:!o,enumerable:!1,value:n,writable:!1}):e[Ib]=n)}});var Use=T((npt,kse)=>{"use strict";kse.exports=function(t,e){return Object.keys(e).forEach(function(n){t[n]=t[n]||e[n]}),t}});var Gse=T((rpt,$se)=>{"use strict";var dD=Hre(),_$e=q("util"),uD=q("path"),h$e=q("http"),E$e=q("https"),T$e=q("url").parse,g$e=q("fs"),S$e=q("stream").Stream,A$e=q("crypto"),pD=Kre(),R$e=doe(),y$e=Dse(),fc=bb(),lD=Use();function Be(t){if(!(this instanceof Be))return new Be(t);this._overheadLength=0,this._valueLength=0,this._valuesToMeasure=[],dD.call(this),t=t||{};for(var e in t)this[e]=t[e]}_$e.inherits(Be,dD);Be.LINE_BREAK=`\r
`;Be.DEFAULT_CONTENT_TYPE="application/octet-stream";Be.prototype.append=function(t,e,n){n=n||{},typeof n=="string"&&(n={filename:n});var r=dD.prototype.append.bind(this);if((typeof e=="number"||e==null)&&(e=String(e)),Array.isArray(e)){this._error(new Error("Arrays are not supported."));return}var o=this._multiPartHeader(t,e,n),s=this._multiPartFooter();r(o),r(e),r(s),this._trackLength(o,e,n)};Be.prototype._trackLength=function(t,e,n){var r=0;n.knownLength!=null?r+=Number(n.knownLength):Buffer.isBuffer(e)?r=e.length:typeof e=="string"&&(r=Buffer.byteLength(e)),this._valueLength+=r,this._overheadLength+=Buffer.byteLength(t)+Be.LINE_BREAK.length,!(!e||!e.path&&!(e.readable&&fc(e,"httpVersion"))&&!(e instanceof S$e))&&(n.knownLength||this._valuesToMeasure.push(e))};Be.prototype._lengthRetriever=function(t,e){fc(t,"fd")?t.end!=null&&t.end!=1/0&&t.start!=null?e(null,t.end+1-(t.start?t.start:0)):g$e.stat(t.path,function(n,r){if(n){e(n);return}var o=r.size-(t.start?t.start:0);e(null,o)}):fc(t,"httpVersion")?e(null,Number(t.headers["content-length"])):fc(t,"httpModule")?(t.on("response",function(n){t.pause(),e(null,Number(n.headers["content-length"]))}),t.resume()):e("Unknown stream")};Be.prototype._multiPartHeader=function(t,e,n){if(typeof n.header=="string")return n.header;var r=this._getContentDisposition(e,n),o=this._getContentType(e,n),s="",i={"Content-Disposition":["form-data",'name="'+t+'"'].concat(r||[]),"Content-Type":[].concat(o||[])};typeof n.header=="object"&&lD(i,n.header);var a;for(var c in i)if(fc(i,c)){if(a=i[c],a==null)continue;Array.isArray(a)||(a=[a]),a.length&&(s+=c+": "+a.join("; ")+Be.LINE_BREAK)}return"--"+this.getBoundary()+Be.LINE_BREAK+s+Be.LINE_BREAK};Be.prototype._getContentDisposition=function(t,e){var n;if(typeof e.filepath=="string"?n=uD.normalize(e.filepath).replace(/\\/g,"/"):e.filename||t&&(t.name||t.path)?n=uD.basename(e.filename||t&&(t.name||t.path)):t&&t.readable&&fc(t,"httpVersion")&&(n=uD.basename(t.client._httpMessage.path||"")),n)return'filename="'+n+'"'};Be.prototype._getContentType=function(t,e){var n=e.contentType;return!n&&t&&t.name&&(n=pD.lookup(t.name)),!n&&t&&t.path&&(n=pD.lookup(t.path)),!n&&t&&t.readable&&fc(t,"httpVersion")&&(n=t.headers["content-type"]),!n&&(e.filepath||e.filename)&&(n=pD.lookup(e.filepath||e.filename)),!n&&t&&typeof t=="object"&&(n=Be.DEFAULT_CONTENT_TYPE),n};Be.prototype._multiPartFooter=function(){return function(t){var e=Be.LINE_BREAK,n=this._streams.length===0;n&&(e+=this._lastBoundary()),t(e)}.bind(this)};Be.prototype._lastBoundary=function(){return"--"+this.getBoundary()+"--"+Be.LINE_BREAK};Be.prototype.getHeaders=function(t){var e,n={"content-type":"multipart/form-data; boundary="+this.getBoundary()};for(e in t)fc(t,e)&&(n[e.toLowerCase()]=t[e]);return n};Be.prototype.setBoundary=function(t){if(typeof t!="string")throw new TypeError("FormData boundary must be a string");this._boundary=t};Be.prototype.getBoundary=function(){return this._boundary||this._generateBoundary(),this._boundary};Be.prototype.getBuffer=function(){for(var t=new Buffer.alloc(0),e=this.getBoundary(),n=0,r=this._streams.length;n<r;n++)typeof this._streams[n]!="function"&&(Buffer.isBuffer(this._streams[n])?t=Buffer.concat([t,this._streams[n]]):t=Buffer.concat([t,Buffer.from(this._streams[n])]),(typeof this._streams[n]!="string"||this._streams[n].substring(2,e.length+2)!==e)&&(t=Buffer.concat([t,Buffer.from(Be.LINE_BREAK)])));return Buffer.concat([t,Buffer.from(this._lastBoundary())])};Be.prototype._generateBoundary=function(){this._boundary="--------------------------"+A$e.randomBytes(12).toString("hex")};Be.prototype.getLengthSync=function(){var t=this._overheadLength+this._valueLength;return this._streams.length&&(t+=this._lastBoundary().length),this.hasKnownLength()||this._error(new Error("Cannot calculate proper length in synchronous way.")),t};Be.prototype.hasKnownLength=function(){var t=!0;return this._valuesToMeasure.length&&(t=!1),t};Be.prototype.getLength=function(t){var e=this._overheadLength+this._valueLength;if(this._streams.length&&(e+=this._lastBoundary().length),!this._valuesToMeasure.length){process.nextTick(t.bind(this,null,e));return}R$e.parallel(this._valuesToMeasure,this._lengthRetriever,function(n,r){if(n){t(n);return}r.forEach(function(o){e+=o}),t(null,e)})};Be.prototype.submit=function(t,e){var n,r,o={method:"post"};return typeof t=="string"?(t=T$e(t),r=lD({port:t.port,path:t.pathname,host:t.hostname,protocol:t.protocol},o)):(r=lD(t,o),r.port||(r.port=r.protocol==="https:"?443:80)),r.headers=this.getHeaders(t.headers),r.protocol==="https:"?n=E$e.request(r):n=h$e.request(r),this.getLength(function(s,i){if(s&&s!=="Unknown stream"){this._error(s);return}if(i&&n.setHeader("Content-Length",i),this.pipe(n),e){var a,c=function(u,p){return n.removeListener("error",c),n.removeListener("response",a),e.call(this,u,p)};a=c.bind(this,null),n.on("error",c),n.on("response",a)}}.bind(this)),n};Be.prototype._error=function(t){this.error||(this.error=t,this.pause(),this.emit("error",t))};Be.prototype.toString=function(){return"[object FormData]"};y$e(Be.prototype,"FormData");$se.exports=Be});var tie=T(eie=>{"use strict";var H$e=q("url").parse,F$e={ftp:21,gopher:70,http:80,https:443,ws:80,wss:443},q$e=String.prototype.endsWith||function(t){return t.length<=this.length&&this.indexOf(t,this.length-t.length)!==-1};function z$e(t){var e=typeof t=="string"?H$e(t):t||{},n=e.protocol,r=e.host,o=e.port;if(typeof r!="string"||!r||typeof n!="string"||(n=n.split(":",1)[0],r=r.replace(/:\d*$/,""),o=parseInt(o)||F$e[n]||0,!Y$e(r,o)))return"";var s=Bd("npm_config_"+n+"_proxy")||Bd(n+"_proxy")||Bd("npm_config_proxy")||Bd("all_proxy");return s&&s.indexOf("://")===-1&&(s=n+"://"+s),s}function Y$e(t,e){var n=(Bd("npm_config_no_proxy")||Bd("no_proxy")).toLowerCase();return n?n==="*"?!1:n.split(/[,\s]/).every(function(r){if(!r)return!0;var o=r.match(/^(.+):(\d+)$/),s=o?o[1]:r,i=o?parseInt(o[2]):0;return i&&i!==e?!0:/^[.*]/.test(s)?(s.charAt(0)==="*"&&(s=s.slice(1)),!q$e.call(t,s)):t!==s}):!0}function Bd(t){return process.env[t.toLowerCase()]||process.env[t.toUpperCase()]||""}eie.getProxyForUrl=z$e});var rie=T((ilt,nie)=>{var gh;nie.exports=function(){if(!gh){try{gh=hO()("follow-redirects")}catch{}typeof gh!="function"&&(gh=function(){})}gh.apply(null,arguments)}});var cie=T((alt,kD)=>{var Ah=q("url"),Sh=Ah.URL,W$e=q("http"),K$e=q("https"),xD=q("stream").Writable,PD=q("assert"),oie=rie();(function(){var e=typeof process<"u",n=typeof window<"u"&&typeof document<"u",r=Ku(Error.captureStackTrace);!e&&(n||!r)&&console.warn("The follow-redirects package should be excluded from browser builds.")})();var CD=!1;try{PD(new Sh(""))}catch(t){CD=t.code==="ERR_INVALID_URL"}var Z$e=["auth","host","hostname","href","path","pathname","port","protocol","query","search","hash"],MD=["abort","aborted","connect","error","socket","timeout"],wD=Object.create(null);MD.forEach(function(t){wD[t]=function(e,n,r){this._redirectable.emit(t,e,n,r)}});var OD=Rh("ERR_INVALID_URL","Invalid URL",TypeError),ID=Rh("ERR_FR_REDIRECTION_FAILURE","Redirected request failed"),J$e=Rh("ERR_FR_TOO_MANY_REDIRECTS","Maximum number of redirects exceeded",ID),Q$e=Rh("ERR_FR_MAX_BODY_LENGTH_EXCEEDED","Request body larger than maxBodyLength limit"),X$e=Rh("ERR_STREAM_WRITE_AFTER_END","write after end"),eGe=xD.prototype.destroy||iie;function jr(t,e){xD.call(this),this._sanitizeOptions(t),this._options=t,this._ended=!1,this._ending=!1,this._redirectCount=0,this._redirects=[],this._requestBodyLength=0,this._requestBodyBuffers=[],e&&this.on("response",e);var n=this;this._onNativeResponse=function(r){try{n._processResponse(r)}catch(o){n.emit("error",o instanceof ID?o:new ID({cause:o}))}},this._performRequest()}jr.prototype=Object.create(xD.prototype);jr.prototype.abort=function(){DD(this._currentRequest),this._currentRequest.abort(),this.emit("abort")};jr.prototype.destroy=function(t){return DD(this._currentRequest,t),eGe.call(this,t),this};jr.prototype.write=function(t,e,n){if(this._ending)throw new X$e;if(!Wu(t)&&!rGe(t))throw new TypeError("data should be a string, Buffer or Uint8Array");if(Ku(e)&&(n=e,e=null),t.length===0){n&&n();return}this._requestBodyLength+t.length<=this._options.maxBodyLength?(this._requestBodyLength+=t.length,this._requestBodyBuffers.push({data:t,encoding:e}),this._currentRequest.write(t,e,n)):(this.emit("error",new Q$e),this.abort())};jr.prototype.end=function(t,e,n){if(Ku(t)?(n=t,t=e=null):Ku(e)&&(n=e,e=null),!t)this._ended=this._ending=!0,this._currentRequest.end(null,null,n);else{var r=this,o=this._currentRequest;this.write(t,e,function(){r._ended=!0,o.end(null,null,n)}),this._ending=!0}};jr.prototype.setHeader=function(t,e){this._options.headers[t]=e,this._currentRequest.setHeader(t,e)};jr.prototype.removeHeader=function(t){delete this._options.headers[t],this._currentRequest.removeHeader(t)};jr.prototype.setTimeout=function(t,e){var n=this;function r(i){i.setTimeout(t),i.removeListener("timeout",i.destroy),i.addListener("timeout",i.destroy)}function o(i){n._timeout&&clearTimeout(n._timeout),n._timeout=setTimeout(function(){n.emit("timeout"),s()},t),r(i)}function s(){n._timeout&&(clearTimeout(n._timeout),n._timeout=null),n.removeListener("abort",s),n.removeListener("error",s),n.removeListener("response",s),n.removeListener("close",s),e&&n.removeListener("timeout",e),n.socket||n._currentRequest.removeListener("socket",o)}return e&&this.on("timeout",e),this.socket?o(this.socket):this._currentRequest.once("socket",o),this.on("socket",r),this.on("abort",s),this.on("error",s),this.on("response",s),this.on("close",s),this};["flushHeaders","getHeader","setNoDelay","setSocketKeepAlive"].forEach(function(t){jr.prototype[t]=function(e,n){return this._currentRequest[t](e,n)}});["aborted","connection","socket"].forEach(function(t){Object.defineProperty(jr.prototype,t,{get:function(){return this._currentRequest[t]}})});jr.prototype._sanitizeOptions=function(t){if(t.headers||(t.headers={}),t.host&&(t.hostname||(t.hostname=t.host),delete t.host),!t.pathname&&t.path){var e=t.path.indexOf("?");e<0?t.pathname=t.path:(t.pathname=t.path.substring(0,e),t.search=t.path.substring(e))}};jr.prototype._performRequest=function(){var t=this._options.protocol,e=this._options.nativeProtocols[t];if(!e)throw new TypeError("Unsupported protocol "+t);if(this._options.agents){var n=t.slice(0,-1);this._options.agent=this._options.agents[n]}var r=this._currentRequest=e.request(this._options,this._onNativeResponse);r._redirectable=this;for(var o of MD)r.on(o,wD[o]);if(this._currentUrl=/^\//.test(this._options.path)?Ah.format(this._options):this._options.path,this._isRedirect){var s=0,i=this,a=this._requestBodyBuffers;(function c(u){if(r===i._currentRequest)if(u)i.emit("error",u);else if(s<a.length){var p=a[s++];r.finished||r.write(p.data,p.encoding,c)}else i._ended&&r.end()})()}};jr.prototype._processResponse=function(t){var e=t.statusCode;this._options.trackRedirects&&this._redirects.push({url:this._currentUrl,headers:t.headers,statusCode:e});var n=t.headers.location;if(!n||this._options.followRedirects===!1||e<300||e>=400){t.responseUrl=this._currentUrl,t.redirects=this._redirects,this.emit("response",t),this._requestBodyBuffers=[];return}if(DD(this._currentRequest),t.destroy(),++this._redirectCount>this._options.maxRedirects)throw new J$e;var r,o=this._options.beforeRedirect;o&&(r=Object.assign({Host:t.req.getHeader("host")},this._options.headers));var s=this._options.method;((e===301||e===302)&&this._options.method==="POST"||e===303&&!/^(?:GET|HEAD)$/.test(this._options.method))&&(this._options.method="GET",this._requestBodyBuffers=[],ND(/^content-/i,this._options.headers));var i=ND(/^host$/i,this._options.headers),a=LD(this._currentUrl),c=i||a.host,u=/^\w+:/.test(n)?this._currentUrl:Ah.format(Object.assign(a,{host:c})),p=tGe(n,u);if(oie("redirecting to",p.href),this._isRedirect=!0,vD(p,this._options),(p.protocol!==a.protocol&&p.protocol!=="https:"||p.host!==c&&!nGe(p.host,c))&&ND(/^(?:(?:proxy-)?authorization|cookie)$/i,this._options.headers),Ku(o)){var l={headers:t.headers,statusCode:e},d={url:u,method:s,headers:r};o(this._options,l,d),this._sanitizeOptions(this._options)}this._performRequest()};function sie(t){var e={maxRedirects:21,maxBodyLength:10485760},n={};return Object.keys(t).forEach(function(r){var o=r+":",s=n[o]=t[r],i=e[r]=Object.create(s);function a(u,p,l){return oGe(u)?u=vD(u):Wu(u)?u=vD(LD(u)):(l=p,p=aie(u),u={protocol:o}),Ku(p)&&(l=p,p=null),p=Object.assign({maxRedirects:e.maxRedirects,maxBodyLength:e.maxBodyLength},u,p),p.nativeProtocols=n,!Wu(p.host)&&!Wu(p.hostname)&&(p.hostname="::1"),PD.equal(p.protocol,o,"protocol mismatch"),oie("options",p),new jr(p,l)}function c(u,p,l){var d=i.request(u,p,l);return d.end(),d}Object.defineProperties(i,{request:{value:a,configurable:!0,enumerable:!0,writable:!0},get:{value:c,configurable:!0,enumerable:!0,writable:!0}})}),e}function iie(){}function LD(t){var e;if(CD)e=new Sh(t);else if(e=aie(Ah.parse(t)),!Wu(e.protocol))throw new OD({input:t});return e}function tGe(t,e){return CD?new Sh(t,e):LD(Ah.resolve(e,t))}function aie(t){if(/^\[/.test(t.hostname)&&!/^\[[:0-9a-f]+\]$/i.test(t.hostname))throw new OD({input:t.href||t});if(/^\[/.test(t.host)&&!/^\[[:0-9a-f]+\](:\d+)?$/i.test(t.host))throw new OD({input:t.href||t});return t}function vD(t,e){var n=e||{};for(var r of Z$e)n[r]=t[r];return n.hostname.startsWith("[")&&(n.hostname=n.hostname.slice(1,-1)),n.port!==""&&(n.port=Number(n.port)),n.path=n.search?n.pathname+n.search:n.pathname,n}function ND(t,e){var n;for(var r in e)t.test(r)&&(n=e[r],delete e[r]);return n===null||typeof n>"u"?void 0:String(n).trim()}function Rh(t,e,n){function r(o){Ku(Error.captureStackTrace)&&Error.captureStackTrace(this,this.constructor),Object.assign(this,o||{}),this.code=t,this.message=this.cause?e+": "+this.cause.message:e}return r.prototype=new(n||Error),Object.defineProperties(r.prototype,{constructor:{value:r,enumerable:!1},name:{value:"Error ["+t+"]",enumerable:!1}}),r}function DD(t,e){for(var n of MD)t.removeListener(n,wD[n]);t.on("error",iie),t.destroy(e)}function nGe(t,e){PD(Wu(t)&&Wu(e));var n=t.length-e.length-1;return n>0&&t[n]==="."&&t.endsWith(e)}function Wu(t){return typeof t=="string"||t instanceof String}function Ku(t){return typeof t=="function"}function rGe(t){return typeof t=="object"&&"length"in t}function oGe(t){return Sh&&t instanceof Sh}kD.exports=sie({http:W$e,https:K$e});kD.exports.wrap=sie});var S9=k(U(),1),A9=k(gz(),1);var G=typeof __SENTRY_DEBUG__>"u"||__SENTRY_DEBUG__;var de=globalThis;var Pe="10.32.1";function ir(){return Qi(de),de}function Qi(t){let e=t.__SENTRY__=t.__SENTRY__||{};return e.version=e.version||Pe,e[Pe]=e[Pe]||{}}function zo(t,e,n=de){let r=n.__SENTRY__=n.__SENTRY__||{},o=r[Pe]=r[Pe]||{};return o[t]||(o[t]=e())}var Sf=["debug","info","warn","error","log","assert","trace"],bfe="Sentry Logger ",Rp={};function Yt(t){if(!("console"in de))return t();let e=de.console,n={},r=Object.keys(Rp);r.forEach(o=>{let s=Rp[o];n[o]=e[o],e[o]=s});try{return t()}finally{r.forEach(o=>{e[o]=n[o]})}}function Nfe(){HO().enabled=!0}function Ofe(){HO().enabled=!1}function Sz(){return HO().enabled}function Ife(...t){jO("log",...t)}function vfe(...t){jO("warn",...t)}function xfe(...t){jO("error",...t)}function jO(t,...e){G&&Sz()&&Yt(()=>{de.console[t](`${bfe}[${t}]:`,...e)})}function HO(){return G?zo("loggerSettings",()=>({enabled:!1})):{enabled:!1}}var N={enable:Nfe,disable:Ofe,isEnabled:Sz,log:Ife,warn:vfe,error:xfe};var Az=/\(error: (.*)\)/,Rz=/captureMessage|captureException/;function bT(...t){let e=t.sort((n,r)=>n[0]-r[0]).map(n=>n[1]);return(n,r=0,o=0)=>{let s=[],i=n.split(`
`);for(let a=r;a<i.length;a++){let c=i[a];c.length>1024&&(c=c.slice(0,1024));let u=Az.test(c)?c.replace(Az,"$1"):c;if(!u.match(/\S*Error: /)){for(let p of e){let l=p(u);if(l){s.push(l);break}}if(s.length>=50+o)break}}return yz(s.slice(o))}}function qO(t){return Array.isArray(t)?bT(...t):t}function yz(t){if(!t.length)return[];let e=Array.from(t);return/sentryWrapped/.test(yT(e).function||"")&&e.pop(),e.reverse(),Rz.test(yT(e).function||"")&&(e.pop(),Rz.test(yT(e).function||"")&&e.pop()),e.slice(0,50).map(n=>({...n,filename:n.filename||yT(e).filename,function:n.function||"?"}))}function yT(t){return t[t.length-1]||{}}var FO="<anonymous>";function Af(t){try{return!t||typeof t!="function"?FO:t.name||FO}catch{return FO}}function NT(t){return"__v_isVNode"in t&&t.__v_isVNode?"[VueVNode]":"[VueViewModel]"}var OT={},bz={};function yp(t,e){OT[t]=OT[t]||[],OT[t].push(e)}function bp(t,e){if(!bz[t]){bz[t]=!0;try{e()}catch(n){G&&N.error(`Error while instrumenting ${t}`,n)}}}function Np(t,e){let n=t&&OT[t];if(n)for(let r of n)try{r(e)}catch(o){G&&N.error(`Error while triggering instrumentation handler.
Type: ${t}
Name: ${Af(r)}
Error:`,o)}}var zO=null;function Nz(t){let e="error";yp(e,t),bp(e,Pfe)}function Pfe(){zO=de.onerror,de.onerror=function(t,e,n,r,o){return Np("error",{column:r,error:o,line:n,msg:t,url:e}),zO?zO.apply(this,arguments):!1},de.onerror.__SENTRY_INSTRUMENTED__=!0}var YO=null;function Oz(t){let e="unhandledrejection";yp(e,t),bp(e,Cfe)}function Cfe(){YO=de.onunhandledrejection,de.onunhandledrejection=function(t){return Np("unhandledrejection",t),YO?YO.apply(this,arguments):!0},de.onunhandledrejection.__SENTRY_INSTRUMENTED__=!0}var Iz=Object.prototype.toString;function ai(t){switch(Iz.call(t)){case"[object Error]":case"[object Exception]":case"[object DOMException]":case"[object WebAssembly.Exception]":return!0;default:return Is(t,Error)}}function IT(t,e){return Iz.call(t)===`[object ${e}]`}function WO(t){return IT(t,"ErrorEvent")}function Xi(t){return IT(t,"String")}function Op(t){return typeof t=="object"&&t!==null&&"__sentry_template_string__"in t&&"__sentry_template_values__"in t}function Rf(t){return t===null||Op(t)||typeof t!="object"&&typeof t!="function"}function ci(t){return IT(t,"Object")}function KO(t){return typeof Event<"u"&&Is(t,Event)}function ZO(t){return typeof Element<"u"&&Is(t,Element)}function JO(t){return IT(t,"RegExp")}function ar(t){return!!(t?.then&&typeof t.then=="function")}function QO(t){return ci(t)&&"nativeEvent"in t&&"preventDefault"in t&&"stopPropagation"in t}function Is(t,e){try{return t instanceof e}catch{return!1}}function yf(t){return!!(typeof t=="object"&&t!==null&&(t.__isVue||t._isVue||t.__v_isVNode))}var Mfe=de,wfe=80;function vz(t,e={}){if(!t)return"<unknown>";try{let n=t,r=5,o=[],s=0,i=0,a=" > ",c=a.length,u,p=Array.isArray(e)?e:e.keyAttrs,l=!Array.isArray(e)&&e.maxStringLength||wfe;for(;n&&s++<r&&(u=Lfe(n,p),!(u==="html"||s>1&&i+o.length*c+u.length>=l));)o.push(u),i+=u.length,n=n.parentNode;return o.reverse().join(a)}catch{return"<unknown>"}}function Lfe(t,e){let n=t,r=[];if(!n?.tagName)return"";if(Mfe.HTMLElement&&n instanceof HTMLElement&&n.dataset){if(n.dataset.sentryComponent)return n.dataset.sentryComponent;if(n.dataset.sentryElement)return n.dataset.sentryElement}r.push(n.tagName.toLowerCase());let o=e?.length?e.filter(i=>n.getAttribute(i)).map(i=>[i,n.getAttribute(i)]):null;if(o?.length)o.forEach(i=>{r.push(`[${i[0]}="${i[1]}"]`)});else{n.id&&r.push(`#${n.id}`);let i=n.className;if(i&&Xi(i)){let a=i.split(/\s+/);for(let c of a)r.push(`.${c}`)}}let s=["aria-label","type","name","title","alt"];for(let i of s){let a=n.getAttribute(i);a&&r.push(`[${i}="${a}"]`)}return r.join("")}function _o(t,e,n){if(!(e in t))return;let r=t[e];if(typeof r!="function")return;let o=n(r);typeof o=="function"&&Cz(o,r);try{t[e]=o}catch{G&&N.log(`Failed to replace method "${e}" in object`,t)}}function nn(t,e,n){try{Object.defineProperty(t,e,{value:n,writable:!0,configurable:!0})}catch{G&&N.log(`Failed to add non-enumerable property "${e}" to object`,t)}}function Cz(t,e){try{let n=e.prototype||{};t.prototype=e.prototype=n,nn(t,"__sentry_original__",e)}catch{}}function XO(t){return t.__sentry_original__}function vT(t){if(ai(t))return{message:t.message,name:t.name,stack:t.stack,...Pz(t)};if(KO(t)){let e={type:t.type,target:xz(t.target),currentTarget:xz(t.currentTarget),...Pz(t)};return typeof CustomEvent<"u"&&Is(t,CustomEvent)&&(e.detail=t.detail),e}else return t}function xz(t){try{return ZO(t)?vz(t):Object.prototype.toString.call(t)}catch{return"<unknown>"}}function Pz(t){if(typeof t=="object"&&t!==null){let e={};for(let n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n]);return e}else return{}}function eI(t){let e=Object.keys(vT(t));return e.sort(),e[0]?e.join(", "):"[object has no keys]"}function ea(t,e=0){return typeof t!="string"||e===0||t.length<=e?t:`${t.slice(0,e)}...`}function tI(t,e){let n=t,r=n.length;if(r<=150)return n;e>r&&(e=r);let o=Math.max(e-60,0);o<5&&(o=0);let s=Math.min(o+140,r);return s>r-5&&(s=r),s===r&&(o=Math.max(s-140,0)),n=n.slice(o,s),o>0&&(n=`'{snip} ${n}`),s<r&&(n+=" {snip}"),n}function nI(t,e){if(!Array.isArray(t))return"";let n=[];for(let r=0;r<t.length;r++){let o=t[r];try{yf(o)?n.push(NT(o)):n.push(String(o))}catch{n.push("[value cannot be serialized]")}}return n.join(e)}function ui(t,e,n=!1){return Xi(t)?JO(e)?e.test(t):Xi(e)?n?t===e:t.includes(e):!1:!1}function ta(t,e=[],n=!1){return e.some(r=>ui(t,r,n))}function Dfe(){let t=de;return t.crypto||t.msCrypto}var rI;function kfe(){return Math.random()*16}function mn(t=Dfe()){try{if(t?.randomUUID)return t.randomUUID().replace(/-/g,"")}catch{}return rI||(rI="10000000100040008000"+1e11),rI.replace(/[018]/g,e=>(e^(kfe()&15)>>e/4).toString(16))}function Mz(t){return t.exception?.values?.[0]}function na(t){let{message:e,event_id:n}=t;if(e)return e;let r=Mz(t);return r?r.type&&r.value?`${r.type}: ${r.value}`:r.type||r.value||n||"<unknown>":n||"<unknown>"}function sI(t,e,n){let r=t.exception=t.exception||{},o=r.values=r.values||[],s=o[0]=o[0]||{};s.value||(s.value=e||""),s.type||(s.type=n||"Error")}function Ip(t,e){let n=Mz(t);if(!n)return;let r={type:"generic",handled:!0},o=n.mechanism;if(n.mechanism={...r,...o,...e},e&&"data"in e){let s={...o?.data,...e.data};n.mechanism.data=s}}var Ufe=/^(0|[1-9]\d*)\.(0|[1-9]\d*)\.(0|[1-9]\d*)(?:-((?:0|[1-9]\d*|\d*[a-zA-Z-][0-9a-zA-Z-]*)(?:\.(?:0|[1-9]\d*|\d*[a-zA-Z-][0-9a-zA-Z-]*))*))?(?:\+([0-9a-zA-Z-]+(?:\.[0-9a-zA-Z-]+)*))?$/;function oI(t){return parseInt(t||"",10)}function iI(t){let e=t.match(Ufe)||[],n=oI(e[1]),r=oI(e[2]),o=oI(e[3]);return{buildmetadata:e[5],major:isNaN(n)?void 0:n,minor:isNaN(r)?void 0:r,patch:isNaN(o)?void 0:o,prerelease:e[4]}}function xT(t){if($fe(t))return!0;try{nn(t,"__sentry_captured__",!0)}catch{}return!1}function $fe(t){try{return t.__sentry_captured__}catch{}}var Lz=1e3;function pi(){return Date.now()/Lz}function Gfe(){let{performance:t}=de;if(!t?.now||!t.timeOrigin)return pi;let e=t.timeOrigin;return()=>(e+t.now())/Lz}var wz;function ra(){return(wz??(wz=Gfe()))()}function Dz(t){let e=ra(),n={sid:mn(),init:!0,timestamp:e,started:e,duration:0,status:"ok",errors:0,ignoreDuration:!1,toJSON:()=>Vfe(n)};return t&&li(n,t),n}function li(t,e={}){if(e.user&&(!t.ipAddress&&e.user.ip_address&&(t.ipAddress=e.user.ip_address),!t.did&&!e.did&&(t.did=e.user.id||e.user.email||e.user.username)),t.timestamp=e.timestamp||ra(),e.abnormal_mechanism&&(t.abnormal_mechanism=e.abnormal_mechanism),e.ignoreDuration&&(t.ignoreDuration=e.ignoreDuration),e.sid&&(t.sid=e.sid.length===32?e.sid:mn()),e.init!==void 0&&(t.init=e.init),!t.did&&e.did&&(t.did=`${e.did}`),typeof e.started=="number"&&(t.started=e.started),t.ignoreDuration)t.duration=void 0;else if(typeof e.duration=="number")t.duration=e.duration;else{let n=t.timestamp-t.started;t.duration=n>=0?n:0}e.release&&(t.release=e.release),e.environment&&(t.environment=e.environment),!t.ipAddress&&e.ipAddress&&(t.ipAddress=e.ipAddress),!t.userAgent&&e.userAgent&&(t.userAgent=e.userAgent),typeof e.errors=="number"&&(t.errors=e.errors),e.status&&(t.status=e.status)}function kz(t,e){let n={};e?n={status:e}:t.status==="ok"&&(n={status:"exited"}),li(t,n)}function Vfe(t){return{sid:`${t.sid}`,init:t.init,started:new Date(t.started*1e3).toISOString(),timestamp:new Date(t.timestamp*1e3).toISOString(),status:t.status,errors:t.errors,did:typeof t.did=="number"||typeof t.did=="string"?`${t.did}`:void 0,duration:t.duration,abnormal_mechanism:t.abnormal_mechanism,attrs:{release:t.release,environment:t.environment,ip_address:t.ipAddress,user_agent:t.userAgent}}}function oa(t,e,n=2){if(!e||typeof e!="object"||n<=0)return e;if(t&&Object.keys(e).length===0)return t;let r={...t};for(let o in e)Object.prototype.hasOwnProperty.call(e,o)&&(r[o]=oa(r[o],e[o],n-1));return r}function ho(){return mn()}function Ar(){return mn().substring(16)}var aI="_sentrySpan";function wc(t,e){e?nn(t,aI,e):delete t[aI]}function Lc(t){return t[aI]}var Bfe=100,Rr=class t{constructor(){this._notifyingListeners=!1,this._scopeListeners=[],this._eventProcessors=[],this._breadcrumbs=[],this._attachments=[],this._user={},this._tags={},this._attributes={},this._extra={},this._contexts={},this._sdkProcessingMetadata={},this._propagationContext={traceId:ho(),sampleRand:Math.random()}}clone(){let e=new t;return e._breadcrumbs=[...this._breadcrumbs],e._tags={...this._tags},e._attributes={...this._attributes},e._extra={...this._extra},e._contexts={...this._contexts},this._contexts.flags&&(e._contexts.flags={values:[...this._contexts.flags.values]}),e._user=this._user,e._level=this._level,e._session=this._session,e._transactionName=this._transactionName,e._fingerprint=this._fingerprint,e._eventProcessors=[...this._eventProcessors],e._attachments=[...this._attachments],e._sdkProcessingMetadata={...this._sdkProcessingMetadata},e._propagationContext={...this._propagationContext},e._client=this._client,e._lastEventId=this._lastEventId,wc(e,Lc(this)),e}setClient(e){this._client=e}setLastEventId(e){this._lastEventId=e}getClient(){return this._client}lastEventId(){return this._lastEventId}addScopeListener(e){this._scopeListeners.push(e)}addEventProcessor(e){return this._eventProcessors.push(e),this}setUser(e){return this._user=e||{email:void 0,id:void 0,ip_address:void 0,username:void 0},this._session&&li(this._session,{user:e}),this._notifyScopeListeners(),this}getUser(){return this._user}setTags(e){return this._tags={...this._tags,...e},this._notifyScopeListeners(),this}setTag(e,n){return this.setTags({[e]:n})}setAttributes(e){return this._attributes={...this._attributes,...e},this._notifyScopeListeners(),this}setAttribute(e,n){return this.setAttributes({[e]:n})}removeAttribute(e){return e in this._attributes&&(delete this._attributes[e],this._notifyScopeListeners()),this}setExtras(e){return this._extra={...this._extra,...e},this._notifyScopeListeners(),this}setExtra(e,n){return this._extra={...this._extra,[e]:n},this._notifyScopeListeners(),this}setFingerprint(e){return this._fingerprint=e,this._notifyScopeListeners(),this}setLevel(e){return this._level=e,this._notifyScopeListeners(),this}setTransactionName(e){return this._transactionName=e,this._notifyScopeListeners(),this}setContext(e,n){return n===null?delete this._contexts[e]:this._contexts[e]=n,this._notifyScopeListeners(),this}setSession(e){return e?this._session=e:delete this._session,this._notifyScopeListeners(),this}getSession(){return this._session}update(e){if(!e)return this;let n=typeof e=="function"?e(this):e,r=n instanceof t?n.getScopeData():ci(n)?e:void 0,{tags:o,attributes:s,extra:i,user:a,contexts:c,level:u,fingerprint:p=[],propagationContext:l}=r||{};return this._tags={...this._tags,...o},this._attributes={...this._attributes,...s},this._extra={...this._extra,...i},this._contexts={...this._contexts,...c},a&&Object.keys(a).length&&(this._user=a),u&&(this._level=u),p.length&&(this._fingerprint=p),l&&(this._propagationContext=l),this}clear(){return this._breadcrumbs=[],this._tags={},this._attributes={},this._extra={},this._user={},this._contexts={},this._level=void 0,this._transactionName=void 0,this._fingerprint=void 0,this._session=void 0,wc(this,void 0),this._attachments=[],this.setPropagationContext({traceId:ho(),sampleRand:Math.random()}),this._notifyScopeListeners(),this}addBreadcrumb(e,n){let r=typeof n=="number"?n:Bfe;if(r<=0)return this;let o={timestamp:pi(),...e,message:e.message?ea(e.message,2048):e.message};return this._breadcrumbs.push(o),this._breadcrumbs.length>r&&(this._breadcrumbs=this._breadcrumbs.slice(-r),this._client?.recordDroppedEvent("buffer_overflow","log_item")),this._notifyScopeListeners(),this}getLastBreadcrumb(){return this._breadcrumbs[this._breadcrumbs.length-1]}clearBreadcrumbs(){return this._breadcrumbs=[],this._notifyScopeListeners(),this}addAttachment(e){return this._attachments.push(e),this}clearAttachments(){return this._attachments=[],this}getScopeData(){return{breadcrumbs:this._breadcrumbs,attachments:this._attachments,contexts:this._contexts,tags:this._tags,attributes:this._attributes,extra:this._extra,user:this._user,level:this._level,fingerprint:this._fingerprint||[],eventProcessors:this._eventProcessors,propagationContext:this._propagationContext,sdkProcessingMetadata:this._sdkProcessingMetadata,transactionName:this._transactionName,span:Lc(this)}}setSDKProcessingMetadata(e){return this._sdkProcessingMetadata=oa(this._sdkProcessingMetadata,e,2),this}setPropagationContext(e){return this._propagationContext=e,this}getPropagationContext(){return this._propagationContext}captureException(e,n){let r=n?.event_id||mn();if(!this._client)return G&&N.warn("No client configured on scope - will not capture exception!"),r;let o=new Error("Sentry syntheticException");return this._client.captureException(e,{originalException:e,syntheticException:o,...n,event_id:r},this),r}captureMessage(e,n,r){let o=r?.event_id||mn();if(!this._client)return G&&N.warn("No client configured on scope - will not capture message!"),o;let s=r?.syntheticException??new Error(e);return this._client.captureMessage(e,n,{originalException:e,syntheticException:s,...r,event_id:o},this),o}captureEvent(e,n){let r=n?.event_id||mn();return this._client?(this._client.captureEvent(e,{...n,event_id:r},this),r):(G&&N.warn("No client configured on scope - will not capture event!"),r)}_notifyScopeListeners(){this._notifyingListeners||(this._notifyingListeners=!0,this._scopeListeners.forEach(e=>{e(this)}),this._notifyingListeners=!1)}};function vp(){return zo("defaultCurrentScope",()=>new Rr)}function Eo(){return zo("defaultIsolationScope",()=>new Rr)}var cI=class{constructor(e,n){let r;e?r=e:r=new Rr;let o;n?o=n:o=new Rr,this._stack=[{scope:r}],this._isolationScope=o}withScope(e){let n=this._pushScope(),r;try{r=e(n)}catch(o){throw this._popScope(),o}return ar(r)?r.then(o=>(this._popScope(),o),o=>{throw this._popScope(),o}):(this._popScope(),r)}getClient(){return this.getStackTop().client}getScope(){return this.getStackTop().scope}getIsolationScope(){return this._isolationScope}getStackTop(){return this._stack[this._stack.length-1]}_pushScope(){let e=this.getScope().clone();return this._stack.push({client:this.getClient(),scope:e}),e}_popScope(){return this._stack.length<=1?!1:!!this._stack.pop()}};function xp(){let t=ir(),e=Qi(t);return e.stack=e.stack||new cI(vp(),Eo())}function jfe(t){return xp().withScope(t)}function Hfe(t,e){let n=xp();return n.withScope(()=>(n.getStackTop().scope=t,e(t)))}function Uz(t){return xp().withScope(()=>t(xp().getIsolationScope()))}function $z(){return{withIsolationScope:Uz,withScope:jfe,withSetScope:Hfe,withSetIsolationScope:(t,e)=>Uz(e),getCurrentScope:()=>xp().getScope(),getIsolationScope:()=>xp().getIsolationScope()}}function uI(t){let e=ir(),n=Qi(e);n.acs=t}function Yo(t){let e=Qi(t);return e.acs?e.acs:$z()}function Ye(){let t=ir();return Yo(t).getCurrentScope()}function ve(){let t=ir();return Yo(t).getIsolationScope()}function PT(){return zo("globalScope",()=>new Rr)}function qr(...t){let e=ir(),n=Yo(e);if(t.length===2){let[r,o]=t;return r?n.withSetScope(r,o):n.withScope(o)}return n.withScope(t[0])}function Dc(...t){let e=ir(),n=Yo(e);if(t.length===2){let[r,o]=t;return r?n.withSetIsolationScope(r,o):n.withIsolationScope(o)}return n.withIsolationScope(t[0])}function $(){return Ye().getClient()}function kc(t){let e=t.getPropagationContext(),{traceId:n,parentSpanId:r,propagationSpanId:o}=e,s={trace_id:n,span_id:o||Ar()};return r&&(s.parent_span_id=r),s}var Wt="sentry.source",Wo="sentry.sample_rate",pI="sentry.previous_trace_sample_rate",J="sentry.op",le="sentry.origin";var lI="sentry.measurement_unit",dI="sentry.measurement_value",vs="sentry.custom_span_name",Pp="sentry.profile_id",Cp="sentry.exclusive_time",fI="cache.hit",mI="cache.key",_I="cache.item_size";function Uc(t){if(t<400&&t>=100)return{code:1};if(t>=400&&t<500)switch(t){case 401:return{code:2,message:"unauthenticated"};case 403:return{code:2,message:"permission_denied"};case 404:return{code:2,message:"not_found"};case 409:return{code:2,message:"already_exists"};case 413:return{code:2,message:"failed_precondition"};case 429:return{code:2,message:"resource_exhausted"};case 499:return{code:2,message:"cancelled"};default:return{code:2,message:"invalid_argument"}}if(t>=500&&t<600)switch(t){case 501:return{code:2,message:"unimplemented"};case 503:return{code:2,message:"unavailable"};case 504:return{code:2,message:"deadline_exceeded"};default:return{code:2,message:"internal_error"}}return{code:2,message:"internal_error"}}var Gz="_sentryScope",Vz="_sentryIsolationScope";function Ffe(t){try{let e=de.WeakRef;if(typeof e=="function")return new e(t)}catch{}return t}function qfe(t){if(t){if(typeof t=="object"&&"deref"in t&&typeof t.deref=="function")try{return t.deref()}catch{return}return t}}function bf(t,e,n){t&&(nn(t,Vz,Ffe(n)),nn(t,Gz,e))}function Ko(t){let e=t;return{scope:e[Gz],isolationScope:qfe(e[Vz])}}var Nf="sentry-",jz=/^sentry-/,Hz=8192;function di(t){let e=Gc(t);if(!e)return;let n=Object.entries(e).reduce((r,[o,s])=>{if(o.match(jz)){let i=o.slice(Nf.length);r[i]=s}return r},{});if(Object.keys(n).length>0)return n}function $c(t){if(!t)return;let e=Object.entries(t).reduce((n,[r,o])=>(o&&(n[`${Nf}${r}`]=o),n),{});return CT(e)}function Gc(t){if(!(!t||!Xi(t)&&!Array.isArray(t)))return Array.isArray(t)?t.reduce((e,n)=>{let r=Bz(n);return Object.entries(r).forEach(([o,s])=>{e[o]=s}),e},{}):Bz(t)}function Bz(t){return t.split(",").map(e=>{let n=e.indexOf("=");if(n===-1)return[];let r=e.slice(0,n),o=e.slice(n+1);return[r,o].map(s=>{try{return decodeURIComponent(s.trim())}catch{return}})}).reduce((e,[n,r])=>(n&&r&&(e[n]=r),e),{})}function CT(t){if(Object.keys(t).length!==0)return Object.entries(t).reduce((e,[n,r],o)=>{let s=`${encodeURIComponent(n)}=${encodeURIComponent(r)}`,i=o===0?s:`${e},${s}`;return i.length>Hz?(G&&N.warn(`Not adding key: ${n} with val: ${r} to baggage header due to exceeding baggage size limits.`),e):i},"")}var zfe=/^o(\d+)\./,Yfe=/^(?:(\w+):)\/\/(?:(\w+)(?::(\w+)?)?@)([\w.-]+)(?::(\d+))?\/(.+)/;function Wfe(t){return t==="http"||t==="https"}function zr(t,e=!1){let{host:n,path:r,pass:o,port:s,projectId:i,protocol:a,publicKey:c}=t;return`${a}://${c}${e&&o?`:${o}`:""}@${n}${s?`:${s}`:""}/${r&&`${r}/`}${i}`}function Kfe(t){let e=Yfe.exec(t);if(!e){Yt(()=>{console.error(`Invalid Sentry Dsn: ${t}`)});return}let[n,r,o="",s="",i="",a=""]=e.slice(1),c="",u=a,p=u.split("/");if(p.length>1&&(c=p.slice(0,-1).join("/"),u=p.pop()),u){let l=u.match(/^\d+/);l&&(u=l[0])}return Fz({host:s,pass:o,path:c,projectId:u,port:i,protocol:n,publicKey:r})}function Fz(t){return{protocol:t.protocol,publicKey:t.publicKey||"",pass:t.pass||"",host:t.host,port:t.port||"",path:t.path||"",projectId:t.projectId}}function Zfe(t){if(!G)return!0;let{port:e,projectId:n,protocol:r}=t;return["protocol","publicKey","host","projectId"].find(i=>t[i]?!1:(N.error(`Invalid Sentry Dsn: ${i} missing`),!0))?!1:n.match(/^\d+$/)?Wfe(r)?e&&isNaN(parseInt(e,10))?(N.error(`Invalid Sentry Dsn: Invalid port ${e}`),!1):!0:(N.error(`Invalid Sentry Dsn: Invalid protocol ${r}`),!1):(N.error(`Invalid Sentry Dsn: Invalid projectId ${n}`),!1)}function Jfe(t){return t.match(zfe)?.[1]}function MT(t){let e=t.getOptions(),{host:n}=t.getDsn()||{},r;return e.orgId?r=String(e.orgId):n&&(r=Jfe(n)),r}function qz(t){let e=typeof t=="string"?Kfe(t):Fz(t);if(!(!e||!Zfe(e)))return e}function Yr(t){if(typeof t=="boolean")return Number(t);let e=typeof t=="string"?parseFloat(t):t;if(!(typeof e!="number"||isNaN(e)||e<0||e>1))return e}var wT=new RegExp("^[ \\t]*([0-9a-f]{32})?-?([0-9a-f]{16})?-?([01])?[ \\t]*$");function zz(t){if(!t)return;let e=t.match(wT);if(!e)return;let n;return e[3]==="1"?n=!0:e[3]==="0"&&(n=!1),{traceId:e[1],parentSampled:n,parentSpanId:e[2]}}function Of(t,e){let n=zz(t),r=di(e);if(!n?.traceId)return{traceId:ho(),sampleRand:Math.random()};let o=Qfe(n,r);r&&(r.sample_rand=o.toString());let{traceId:s,parentSpanId:i,parentSampled:a}=n;return{traceId:s,parentSpanId:i,sampled:a,dsc:r||{},sampleRand:o}}function sa(t=ho(),e=Ar(),n){let r="";return n!==void 0&&(r=n?"-1":"-0"),`${t}-${e}${r}`}function ia(t=ho(),e=Ar(),n){return`00-${t}-${e}-${n?"01":"00"}`}function Qfe(t,e){let n=Yr(e?.sample_rand);if(n!==void 0)return n;let r=Yr(e?.sample_rate);return r&&t?.parentSampled!==void 0?t.parentSampled?Math.random()*r:r+Math.random()*(1-r):Math.random()}function hI(t,e){let n=MT(t);return e&&n&&e!==n?(N.log(`Won't continue trace because org IDs don't match (incoming baggage: ${e}, SDK options: ${n})`),!1):(t.getOptions().strictTraceContinuation||!1)&&(e&&!n||!e&&n)?(N.log(`Starting a new trace because strict trace continuation is enabled but one org ID is missing (incoming baggage: ${e}, Sentry client: ${n})`),!1):!0}var DT=0,kT=1,Yz=!1;function Kz(t){let{spanId:e,traceId:n}=t.spanContext(),{data:r,op:o,parent_span_id:s,status:i,origin:a,links:c}=ae(t);return{parent_span_id:s,span_id:e,trace_id:n,data:r,op:o,status:i,origin:a,links:c}}function aa(t){let{spanId:e,traceId:n,isRemote:r}=t.spanContext(),o=r?e:ae(t).parent_span_id,s=Ko(t).scope,i=r?s?.getPropagationContext().propagationSpanId||Ar():e;return{parent_span_id:o,span_id:i,trace_id:n}}function UT(t){let{traceId:e,spanId:n}=t.spanContext(),r=Zo(t);return sa(e,n,r)}function Zz(t){let{traceId:e,spanId:n}=t.spanContext(),r=Zo(t);return ia(e,n,r)}function Vc(t){if(t&&t.length>0)return t.map(({context:{spanId:e,traceId:n,traceFlags:r,...o},attributes:s})=>({span_id:e,trace_id:n,sampled:r===kT,attributes:s,...o}))}function yr(t){return typeof t=="number"?Wz(t):Array.isArray(t)?t[0]+t[1]/1e9:t instanceof Date?Wz(t.getTime()):ra()}function Wz(t){return t>9999999999?t/1e3:t}function ae(t){if(tme(t))return t.getSpanJSON();let{spanId:e,traceId:n}=t.spanContext();if(eme(t)){let{attributes:r,startTime:o,name:s,endTime:i,status:a,links:c}=t,u="parentSpanId"in t?t.parentSpanId:"parentSpanContext"in t?t.parentSpanContext?.spanId:void 0;return{span_id:e,trace_id:n,data:r,description:s,parent_span_id:u,start_timestamp:yr(o),timestamp:yr(i)||void 0,status:Bc(a),op:r[J],origin:r[le],links:Vc(c)}}return{span_id:e,trace_id:n,start_timestamp:0,data:{}}}function eme(t){let e=t;return!!e.attributes&&!!e.startTime&&!!e.name&&!!e.endTime&&!!e.status}function tme(t){return typeof t.getSpanJSON=="function"}function Zo(t){let{traceFlags:e}=t.spanContext();return e===kT}function Bc(t){if(!(!t||t.code===0))return t.code===1?"ok":t.message||"internal_error"}var If="_sentryChildSpans",EI="_sentryRootSpan";function Mp(t,e){let n=t[EI]||t;nn(e,EI,n),t[If]?t[If].add(e):nn(t,If,new Set([e]))}function $T(t){let e=new Set;function n(r){if(!e.has(r)&&Zo(r)){e.add(r);let o=r[If]?Array.from(r[If]):[];for(let s of o)n(s)}}return n(t),Array.from(e)}function Dt(t){return t[EI]||t}function To(){let t=ir(),e=Yo(t);return e.getActiveSpan?e.getActiveSpan():Lc(Ye())}function vf(){Yz||(Yt(()=>{console.warn("[Sentry] Returning null from `beforeSendSpan` is disallowed. To drop certain spans, configure the respective integrations directly or use `ignoreSpans`.")}),Yz=!0)}var Jz=!1;function Qz(){if(Jz)return;function t(){let e=To(),n=e&&Dt(e);if(n){let r="internal_error";G&&N.log(`[Tracing] Root span: ${r} -> Global error occurred`),n.setStatus({code:2,message:r})}}t.tag="sentry_tracingErrorCallback",Jz=!0,Nz(t),Oz(t)}function Kt(t){if(typeof __SENTRY_TRACING__=="boolean"&&!__SENTRY_TRACING__)return!1;let e=t||$()?.getOptions();return!!e&&(e.tracesSampleRate!=null||!!e.tracesSampler)}function Xz(t){N.log(`Ignoring span ${t.op} - ${t.description} because it matches \`ignoreSpans\`.`)}function xf(t,e){if(!e?.length||!t.description)return!1;for(let n of e){if(nme(n)){if(ui(t.description,n))return G&&Xz(t),!0;continue}if(!n.name&&!n.op)continue;let r=n.name?ui(t.description,n.name):!0,o=n.op?t.op&&ui(t.op,n.op):!0;if(r&&o)return G&&Xz(t),!0}return!1}function eY(t,e){let n=e.parent_span_id,r=e.span_id;if(n)for(let o of t)o.parent_span_id===r&&(o.parent_span_id=n)}function nme(t){return typeof t=="string"||t instanceof RegExp}var wp="production";var tY="_frozenDsc";function GT(t,e){nn(t,tY,e)}function TI(t,e){let n=e.getOptions(),{publicKey:r}=e.getDsn()||{},o={environment:n.environment||wp,release:n.release,public_key:r,trace_id:t,org_id:MT(e)};return e.emit("createDsc",o),o}function xs(t,e){let n=e.getPropagationContext();return n.dsc||TI(n.traceId,t)}function Zt(t){let e=$();if(!e)return{};let n=Dt(t),r=ae(n),o=r.data,s=n.spanContext().traceState,i=s?.get("sentry.sample_rate")??o[Wo]??o[pI];function a(m){return(typeof i=="number"||typeof i=="string")&&(m.sample_rate=`${i}`),m}let c=n[tY];if(c)return a(c);let u=s?.get("sentry.dsc"),p=u&&di(u);if(p)return a(p);let l=TI(t.spanContext().traceId,e),d=o[Wt],f=r.description;return d!=="url"&&f&&(l.transaction=f),Kt()&&(l.sampled=String(Zo(n)),l.sample_rand=s?.get("sentry.sample_rand")??Ko(n).scope?.getPropagationContext().sampleRand.toString()),a(l),e.emit("createDsc",l,n),l}var ca=class{constructor(e={}){this._traceId=e.traceId||ho(),this._spanId=e.spanId||Ar()}spanContext(){return{spanId:this._spanId,traceId:this._traceId,traceFlags:DT}}end(e){}setAttribute(e,n){return this}setAttributes(e){return this}setStatus(e){return this}updateName(e){return this}isRecording(){return!1}addEvent(e,n,r){return this}addLink(e){return this}addLinks(e){return this}recordException(e,n){}};function Jo(t,e=100,n=1/0){try{return gI("",t,e,n)}catch(r){return{ERROR:`**non-serializable** (${r})`}}}function SI(t,e=3,n=100*1024){let r=Jo(t,e);return ime(r)>n?SI(t,e-1,n):r}function gI(t,e,n=1/0,r=1/0,o=ame()){let[s,i]=o;if(e==null||["boolean","string"].includes(typeof e)||typeof e=="number"&&Number.isFinite(e))return e;let a=rme(t,e);if(!a.startsWith("[object "))return a;if(e.__sentry_skip_normalization__)return e;let c=typeof e.__sentry_override_normalization_depth__=="number"?e.__sentry_override_normalization_depth__:n;if(c===0)return a.replace("object ","");if(s(e))return"[Circular ~]";let u=e;if(u&&typeof u.toJSON=="function")try{let f=u.toJSON();return gI("",f,c-1,r,o)}catch{}let p=Array.isArray(e)?[]:{},l=0,d=vT(e);for(let f in d){if(!Object.prototype.hasOwnProperty.call(d,f))continue;if(l>=r){p[f]="[MaxProperties ~]";break}let m=d[f];p[f]=gI(f,m,c-1,r,o),l++}return i(e),p}function rme(t,e){try{if(t==="domain"&&e&&typeof e=="object"&&e._events)return"[Domain]";if(t==="domainEmitter")return"[DomainEmitter]";if(typeof global<"u"&&e===global)return"[Global]";if(typeof window<"u"&&e===window)return"[Window]";if(typeof document<"u"&&e===document)return"[Document]";if(yf(e))return NT(e);if(QO(e))return"[SyntheticEvent]";if(typeof e=="number"&&!Number.isFinite(e))return`[${e}]`;if(typeof e=="function")return`[Function: ${Af(e)}]`;if(typeof e=="symbol")return`[${String(e)}]`;if(typeof e=="bigint")return`[BigInt: ${String(e)}]`;let n=ome(e);return/^HTML(\w*)Element$/.test(n)?`[HTMLElement: ${n}]`:`[object ${n}]`}catch(n){return`**non-serializable** (${n})`}}function ome(t){let e=Object.getPrototypeOf(t);return e?.constructor?e.constructor.name:"null prototype"}function sme(t){return~-encodeURI(t).split(/%..|./).length}function ime(t){return sme(JSON.stringify(t))}function ame(){let t=new WeakSet;function e(r){return t.has(r)?!0:(t.add(r),!1)}function n(r){t.delete(r)}return[e,n]}function cr(t,e=[]){return[t,e]}function RI(t,e){let[n,r]=t;return[n,[...r,e]]}function VT(t,e){let n=t[1];for(let r of n){let o=r[0].type;if(e(r,o))return!0}return!1}function AI(t){let e=Qi(de);return e.encodePolyfill?e.encodePolyfill(t):new TextEncoder().encode(t)}function Pf(t){let[e,n]=t,r=JSON.stringify(e);function o(s){typeof r=="string"?r=typeof s=="string"?r+s:[AI(r),s]:r.push(typeof s=="string"?AI(s):s)}for(let s of n){let[i,a]=s;if(o(`
${JSON.stringify(i)}
`),typeof a=="string"||a instanceof Uint8Array)o(a);else{let c;try{c=JSON.stringify(a)}catch{c=JSON.stringify(Jo(a))}o(c)}}return typeof r=="string"?r:cme(r)}function cme(t){let e=t.reduce((o,s)=>o+s.length,0),n=new Uint8Array(e),r=0;for(let o of t)n.set(o,r),r+=o.length;return n}function yI(t){return[{type:"span"},t]}function bI(t){let e=typeof t.data=="string"?AI(t.data):t.data;return[{type:"attachment",length:e.length,filename:t.filename,content_type:t.contentType,attachment_type:t.attachmentType},e]}var ume={session:"session",sessions:"session",attachment:"attachment",transaction:"transaction",event:"error",client_report:"internal",user_report:"default",profile:"profile",profile_chunk:"profile",replay_event:"replay",replay_recording:"replay",check_in:"monitor",feedback:"feedback",span:"span",raw_security:"security",log:"log_item",metric:"metric",trace_metric:"metric"};function BT(t){return ume[t]}function jT(t){if(!t?.sdk)return;let{name:e,version:n}=t.sdk;return{name:e,version:n}}function NI(t,e,n,r){let o=t.sdkProcessingMetadata?.dynamicSamplingContext;return{event_id:t.event_id,sent_at:new Date().toISOString(),...e&&{sdk:e},...!!n&&r&&{dsn:zr(r)},...o&&{trace:o}}}function pme(t,e){if(!e)return t;let n=t.sdk||{};return t.sdk={...n,name:n.name||e.name,version:n.version||e.version,integrations:[...t.sdk?.integrations||[],...e.integrations||[]],packages:[...t.sdk?.packages||[],...e.packages||[]],settings:t.sdk?.settings||e.settings?{...t.sdk?.settings,...e.settings}:void 0},t}function nY(t,e,n,r){let o=jT(n),s={sent_at:new Date().toISOString(),...o&&{sdk:o},...!!r&&e&&{dsn:zr(e)}},i="aggregates"in t?[{type:"sessions"},t]:[{type:"session"},t.toJSON()];return cr(s,[i])}function rY(t,e,n,r){let o=jT(n),s=t.type&&t.type!=="replay_event"?t.type:"event";pme(t,n?.sdk);let i=NI(t,o,r,e);return delete t.sdkProcessingMetadata,cr(i,[[{type:s},t]])}function oY(t,e){function n(f){return!!f.trace_id&&!!f.public_key}let r=Zt(t[0]),o=e?.getDsn(),s=e?.getOptions().tunnel,i={sent_at:new Date().toISOString(),...n(r)&&{trace:r},...!!s&&o&&{dsn:zr(o)}},{beforeSendSpan:a,ignoreSpans:c}=e?.getOptions()||{},u=c?.length?t.filter(f=>!xf(ae(f),c)):t,p=t.length-u.length;p&&e?.recordDroppedEvent("before_send","span",p);let l=a?f=>{let m=ae(f),h=a(m);return h||(vf(),m)}:ae,d=[];for(let f of u){let m=l(f);m&&d.push(yI(m))}return cr(i,d)}function Cf(t){if(!G)return;let{description:e="< unknown name >",op:n="< unknown op >",parent_span_id:r}=ae(t),{spanId:o}=t.spanContext(),s=Zo(t),i=Dt(t),a=i===t,c=`[Tracing] Starting ${s?"sampled":"unsampled"} ${a?"root ":""}span`,u=[`op: ${n}`,`name: ${e}`,`ID: ${o}`];if(r&&u.push(`parent ID: ${r}`),!a){let{op:p,description:l}=ae(i);u.push(`root ID: ${i.spanContext().spanId}`),p&&u.push(`root op: ${p}`),l&&u.push(`root description: ${l}`)}N.log(`${c}
  ${u.join(`
  `)}`)}function Mf(t){if(!G)return;let{description:e="< unknown name >",op:n="< unknown op >"}=ae(t),{spanId:r}=t.spanContext(),s=Dt(t)===t,i=`[Tracing] Finishing "${n}" ${s?"root ":""}span "${e}" with ID ${r}`;N.log(i)}function jc(t){if(!t||t.length===0)return;let e={};return t.forEach(n=>{let r=n.attributes||{},o=r[lI],s=r[dI];typeof o=="string"&&typeof s=="number"&&(e[n.name]={value:s,unit:o})}),e}var sY=1e3,Lp=class{constructor(e={}){this._traceId=e.traceId||ho(),this._spanId=e.spanId||Ar(),this._startTime=e.startTimestamp||ra(),this._links=e.links,this._attributes={},this.setAttributes({[le]:"manual",[J]:e.op,...e.attributes}),this._name=e.name,e.parentSpanId&&(this._parentSpanId=e.parentSpanId),"sampled"in e&&(this._sampled=e.sampled),e.endTimestamp&&(this._endTime=e.endTimestamp),this._events=[],this._isStandaloneSpan=e.isStandalone,this._endTime&&this._onSpanEnded()}addLink(e){return this._links?this._links.push(e):this._links=[e],this}addLinks(e){return this._links?this._links.push(...e):this._links=e,this}recordException(e,n){}spanContext(){let{_spanId:e,_traceId:n,_sampled:r}=this;return{spanId:e,traceId:n,traceFlags:r?kT:DT}}setAttribute(e,n){return n===void 0?delete this._attributes[e]:this._attributes[e]=n,this}setAttributes(e){return Object.keys(e).forEach(n=>this.setAttribute(n,e[n])),this}updateStartTime(e){this._startTime=yr(e)}setStatus(e){return this._status=e,this}updateName(e){return this._name=e,this.setAttribute(Wt,"custom"),this}end(e){this._endTime||(this._endTime=yr(e),Mf(this),this._onSpanEnded())}getSpanJSON(){return{data:this._attributes,description:this._name,op:this._attributes[J],parent_span_id:this._parentSpanId,span_id:this._spanId,start_timestamp:this._startTime,status:Bc(this._status),timestamp:this._endTime,trace_id:this._traceId,origin:this._attributes[le],profile_id:this._attributes[Pp],exclusive_time:this._attributes[Cp],measurements:jc(this._events),is_segment:this._isStandaloneSpan&&Dt(this)===this||void 0,segment_id:this._isStandaloneSpan?Dt(this).spanContext().spanId:void 0,links:Vc(this._links)}}isRecording(){return!this._endTime&&!!this._sampled}addEvent(e,n,r){G&&N.log("[Tracing] Adding an event to span:",e);let o=iY(n)?n:r||ra(),s=iY(n)?{}:n||{},i={name:e,time:yr(o),attributes:s};return this._events.push(i),this}isStandaloneSpan(){return!!this._isStandaloneSpan}_onSpanEnded(){let e=$();if(e&&e.emit("spanEnd",this),!(this._isStandaloneSpan||this===Dt(this)))return;if(this._isStandaloneSpan){this._sampled?dme(oY([this],e)):(G&&N.log("[Tracing] Discarding standalone span because its trace was not chosen to be sampled."),e&&e.recordDroppedEvent("sample_rate","span"));return}let r=this._convertSpanToTransaction();r&&(Ko(this).scope||Ye()).captureEvent(r)}_convertSpanToTransaction(){if(!aY(ae(this)))return;this._name||(G&&N.warn("Transaction has no name, falling back to `<unlabeled transaction>`."),this._name="<unlabeled transaction>");let{scope:e,isolationScope:n}=Ko(this),r=e?.getScopeData().sdkProcessingMetadata?.normalizedRequest;if(this._sampled!==!0)return;let s=$T(this).filter(p=>p!==this&&!lme(p)).map(p=>ae(p)).filter(aY),i=this._attributes[Wt];delete this._attributes[vs],s.forEach(p=>{delete p.data[vs]});let a={contexts:{trace:Kz(this)},spans:s.length>sY?s.sort((p,l)=>p.start_timestamp-l.start_timestamp).slice(0,sY):s,start_timestamp:this._startTime,timestamp:this._endTime,transaction:this._name,type:"transaction",sdkProcessingMetadata:{capturedSpanScope:e,capturedSpanIsolationScope:n,dynamicSamplingContext:Zt(this)},request:r,...i&&{transaction_info:{source:i}}},c=jc(this._events);return c&&Object.keys(c).length&&(G&&N.log("[Measurements] Adding measurements to transaction event",JSON.stringify(c,void 0,2)),a.measurements=c),a}};function iY(t){return t&&typeof t=="number"||t instanceof Date||Array.isArray(t)}function aY(t){return!!t.start_timestamp&&!!t.timestamp&&!!t.span_id&&!!t.trace_id}function lme(t){return t instanceof Lp&&t.isStandaloneSpan()}function dme(t){let e=$();if(!e)return;let n=t[1];if(!n||n.length===0){e.recordDroppedEvent("before_send","span");return}e.sendEnvelope(t)}function Wr(t,e,n=()=>{},r=()=>{}){let o;try{o=t()}catch(s){throw e(s),n(),s}return fme(o,e,n,r)}function fme(t,e,n,r){return ar(t)?t.then(o=>(n(),r(o),o),o=>{throw e(o),n(),o}):(n(),r(t),t)}function wf(t,e,n){if(!Kt(t))return[!1];let r,o;typeof t.tracesSampler=="function"?(o=t.tracesSampler({...e,inheritOrSampleWith:a=>typeof e.parentSampleRate=="number"?e.parentSampleRate:typeof e.parentSampled=="boolean"?Number(e.parentSampled):a}),r=!0):e.parentSampled!==void 0?o=e.parentSampled:typeof t.tracesSampleRate<"u"&&(o=t.tracesSampleRate,r=!0);let s=Yr(o);if(s===void 0)return G&&N.warn(`[Tracing] Discarding root span because of invalid sample rate. Sample rate must be a boolean or a number between 0 and 1. Got ${JSON.stringify(o)} of type ${JSON.stringify(typeof o)}.`),[!1];if(!s)return G&&N.log(`[Tracing] Discarding transaction because ${typeof t.tracesSampler=="function"?"tracesSampler returned 0 or false":"a negative sampling decision was inherited or tracesSampleRate is set to 0"}`),[!1,s,r];let i=n<s;return i||G&&N.log(`[Tracing] Discarding transaction because it's not included in the random sample (sampling rate = ${Number(o)})`),[i,s,r]}var HT="__SENTRY_SUPPRESS_TRACING__";function Kr(t,e){let n=Lf();if(n.startSpan)return n.startSpan(t,e);let r=II(t),{forceTransaction:o,parentSpan:s,scope:i}=t,a=i?.clone();return qr(a,()=>uY(s)(()=>{let u=Ye(),p=vI(u,s),d=t.onlyIfParent&&!p?new ca:OI({parentSpan:p,spanArguments:r,forceTransaction:o,scope:u});return wc(u,d),Wr(()=>e(d),()=>{let{status:f}=ae(d);d.isRecording()&&(!f||f==="ok")&&d.setStatus({code:2,message:"internal_error"})},()=>{d.end()})}))}function Cn(t,e){let n=Lf();if(n.startSpanManual)return n.startSpanManual(t,e);let r=II(t),{forceTransaction:o,parentSpan:s,scope:i}=t,a=i?.clone();return qr(a,()=>uY(s)(()=>{let u=Ye(),p=vI(u,s),d=t.onlyIfParent&&!p?new ca:OI({parentSpan:p,spanArguments:r,forceTransaction:o,scope:u});return wc(u,d),Wr(()=>e(d,()=>d.end()),()=>{let{status:f}=ae(d);d.isRecording()&&(!f||f==="ok")&&d.setStatus({code:2,message:"internal_error"})})}))}function FT(t){let e=Lf();if(e.startInactiveSpan)return e.startInactiveSpan(t);let n=II(t),{forceTransaction:r,parentSpan:o}=t;return(t.scope?i=>qr(t.scope,i):o!==void 0?i=>ua(o,i):i=>i())(()=>{let i=Ye(),a=vI(i,o);return t.onlyIfParent&&!a?new ca:OI({parentSpan:a,spanArguments:n,forceTransaction:r,scope:i})})}function ua(t,e){let n=Lf();return n.withActiveSpan?n.withActiveSpan(t,e):qr(r=>(wc(r,t||void 0),e(r)))}function Dp(t){let e=Lf();return e.suppressTracing?e.suppressTracing(t):qr(n=>{n.setSDKProcessingMetadata({[HT]:!0});let r=t();return n.setSDKProcessingMetadata({[HT]:void 0}),r})}function OI({parentSpan:t,spanArguments:e,forceTransaction:n,scope:r}){if(!Kt()){let i=new ca;if(n||!t){let a={sampled:"false",sample_rate:"0",transaction:e.name,...Zt(i)};GT(i,a)}return i}let o=ve(),s;if(t&&!n)s=mme(t,r,e),Mp(t,s);else if(t){let i=Zt(t),{traceId:a,spanId:c}=t.spanContext(),u=Zo(t);s=cY({traceId:a,parentSpanId:c,...e},r,u),GT(s,i)}else{let{traceId:i,dsc:a,parentSpanId:c,sampled:u}={...o.getPropagationContext(),...r.getPropagationContext()};s=cY({traceId:i,parentSpanId:c,...e},r,u),a&&GT(s,a)}return Cf(s),bf(s,r,o),s}function II(t){let n={isStandalone:(t.experimental||{}).standalone,...t};if(t.startTime){let r={...n};return r.startTimestamp=yr(t.startTime),delete r.startTime,r}return n}function Lf(){let t=ir();return Yo(t)}function cY(t,e,n){let r=$(),o=r?.getOptions()||{},{name:s=""}=t,i={spanAttributes:{...t.attributes},spanName:s,parentSampled:n};r?.emit("beforeSampling",i,{decision:!1});let a=i.parentSampled??n,c=i.spanAttributes,u=e.getPropagationContext(),[p,l,d]=e.getScopeData().sdkProcessingMetadata[HT]?[!1]:wf(o,{name:s,parentSampled:a,attributes:c,parentSampleRate:Yr(u.dsc?.sample_rate)},u.sampleRand),f=new Lp({...t,attributes:{[Wt]:"custom",[Wo]:l!==void 0&&d?l:void 0,...c},sampled:p});return!p&&r&&(G&&N.log("[Tracing] Discarding root span because its trace was not chosen to be sampled."),r.recordDroppedEvent("sample_rate","transaction")),r&&r.emit("spanStart",f),f}function mme(t,e,n){let{spanId:r,traceId:o}=t.spanContext(),s=e.getScopeData().sdkProcessingMetadata[HT]?!1:Zo(t),i=s?new Lp({...n,parentSpanId:r,traceId:o,sampled:s}):new ca({traceId:o});Mp(t,i);let a=$();return a&&(a.emit("spanStart",i),n.endTimestamp&&a.emit("spanEnd",i)),i}function vI(t,e){if(e)return e;if(e===null)return;let n=Lc(t);if(!n)return;let r=$();return(r?r.getOptions():{}).parentSpanIsAlwaysRootSpan?Dt(n):n}function uY(t){return t!==void 0?e=>ua(t,e):e=>e()}var xI=0,pY=1,lY=2;function Hc(t){return new qT(e=>{e(t)})}function kp(t){return new qT((e,n)=>{n(t)})}var qT=class t{constructor(e){this._state=xI,this._handlers=[],this._runExecutor(e)}then(e,n){return new t((r,o)=>{this._handlers.push([!1,s=>{if(!e)r(s);else try{r(e(s))}catch(i){o(i)}},s=>{if(!n)o(s);else try{r(n(s))}catch(i){o(i)}}]),this._executeHandlers()})}catch(e){return this.then(n=>n,e)}finally(e){return new t((n,r)=>{let o,s;return this.then(i=>{s=!1,o=i,e&&e()},i=>{s=!0,o=i,e&&e()}).then(()=>{if(s){r(o);return}n(o)})})}_executeHandlers(){if(this._state===xI)return;let e=this._handlers.slice();this._handlers=[],e.forEach(n=>{n[0]||(this._state===pY&&n[1](this._value),this._state===lY&&n[2](this._value),n[0]=!0)})}_runExecutor(e){let n=(s,i)=>{if(this._state===xI){if(ar(i)){i.then(r,o);return}this._state=s,this._value=i,this._executeHandlers()}},r=s=>{n(pY,s)},o=s=>{n(lY,s)};try{e(r,o)}catch(s){o(s)}}};function dY(t,e,n,r=0){try{let o=PI(e,n,t,r);return ar(o)?o:Hc(o)}catch(o){return kp(o)}}function PI(t,e,n,r){let o=n[r];if(!t||!o)return t;let s=o({...t},e);return G&&s===null&&N.log(`Event processor "${o.id||"?"}" dropped event`),ar(s)?s.then(i=>PI(i,e,n,r+1)):PI(s,e,n,r+1)}function fY(t,e){let{fingerprint:n,span:r,breadcrumbs:o,sdkProcessingMetadata:s}=e;_me(t,e),r&&Tme(t,r),gme(t,n),hme(t,o),Eme(t,s)}function CI(t,e){let{extra:n,tags:r,attributes:o,user:s,contexts:i,level:a,sdkProcessingMetadata:c,breadcrumbs:u,fingerprint:p,eventProcessors:l,attachments:d,propagationContext:f,transactionName:m,span:h}=e;Df(t,"extra",n),Df(t,"tags",r),Df(t,"attributes",o),Df(t,"user",s),Df(t,"contexts",i),t.sdkProcessingMetadata=oa(t.sdkProcessingMetadata,c,2),a&&(t.level=a),m&&(t.transactionName=m),h&&(t.span=h),u.length&&(t.breadcrumbs=[...t.breadcrumbs,...u]),p.length&&(t.fingerprint=[...t.fingerprint,...p]),l.length&&(t.eventProcessors=[...t.eventProcessors,...l]),d.length&&(t.attachments=[...t.attachments,...d]),t.propagationContext={...t.propagationContext,...f}}function Df(t,e,n){t[e]=oa(t[e],n,1)}function _me(t,e){let{extra:n,tags:r,user:o,contexts:s,level:i,transactionName:a}=e;Object.keys(n).length&&(t.extra={...n,...t.extra}),Object.keys(r).length&&(t.tags={...r,...t.tags}),Object.keys(o).length&&(t.user={...o,...t.user}),Object.keys(s).length&&(t.contexts={...s,...t.contexts}),i&&(t.level=i),a&&t.type!=="transaction"&&(t.transaction=a)}function hme(t,e){let n=[...t.breadcrumbs||[],...e];t.breadcrumbs=n.length?n:void 0}function Eme(t,e){t.sdkProcessingMetadata={...t.sdkProcessingMetadata,...e}}function Tme(t,e){t.contexts={trace:aa(e),...t.contexts},t.sdkProcessingMetadata={dynamicSamplingContext:Zt(e),...t.sdkProcessingMetadata};let n=Dt(e),r=ae(n).description;r&&!t.transaction&&t.type==="transaction"&&(t.transaction=r)}function gme(t,e){t.fingerprint=t.fingerprint?Array.isArray(t.fingerprint)?t.fingerprint:[t.fingerprint]:[],e&&(t.fingerprint=t.fingerprint.concat(e)),t.fingerprint.length||delete t.fingerprint}var Fc,mY,_Y,pa;function hY(t){let e=de._sentryDebugIds,n=de._debugIds;if(!e&&!n)return{};let r=e?Object.keys(e):[],o=n?Object.keys(n):[];if(pa&&r.length===mY&&o.length===_Y)return pa;mY=r.length,_Y=o.length,pa={},Fc||(Fc={});let s=(i,a)=>{for(let c of i){let u=a[c],p=Fc?.[c];if(p&&pa&&u)pa[p[0]]=u,Fc&&(Fc[c]=[p[0],u]);else if(u){let l=t(c);for(let d=l.length-1;d>=0;d--){let m=l[d]?.filename;if(m&&pa&&Fc){pa[m]=u,Fc[c]=[m,u];break}}}}};return e&&s(r,e),n&&s(o,n),pa}function EY(t,e,n,r,o,s){let{normalizeDepth:i=3,normalizeMaxBreadth:a=1e3}=t,c={...e,event_id:e.event_id||n.event_id||mn(),timestamp:e.timestamp||pi()},u=n.integrations||t.integrations.map(E=>E.name);Sme(c,t),yme(c,u),o&&o.emit("applyFrameMetadata",e),e.type===void 0&&Ame(c,t.stackParser);let p=Nme(r,n.captureContext);n.mechanism&&Ip(c,n.mechanism);let l=o?o.getEventProcessors():[],d=PT().getScopeData();if(s){let E=s.getScopeData();CI(d,E)}if(p){let E=p.getScopeData();CI(d,E)}let f=[...n.attachments||[],...d.attachments];f.length&&(n.attachments=f),fY(c,d);let m=[...l,...d.eventProcessors];return dY(m,c,n).then(E=>(E&&Rme(E),typeof i=="number"&&i>0?bme(E,i,a):E))}function Sme(t,e){let{environment:n,release:r,dist:o,maxValueLength:s}=e;t.environment=t.environment||n||wp,!t.release&&r&&(t.release=r),!t.dist&&o&&(t.dist=o);let i=t.request;i?.url&&s&&(i.url=ea(i.url,s)),s&&t.exception?.values?.forEach(a=>{a.value&&(a.value=ea(a.value,s))})}function Ame(t,e){let n=hY(e);t.exception?.values?.forEach(r=>{r.stacktrace?.frames?.forEach(o=>{o.filename&&(o.debug_id=n[o.filename])})})}function Rme(t){let e={};if(t.exception?.values?.forEach(r=>{r.stacktrace?.frames?.forEach(o=>{o.debug_id&&(o.abs_path?e[o.abs_path]=o.debug_id:o.filename&&(e[o.filename]=o.debug_id),delete o.debug_id)})}),Object.keys(e).length===0)return;t.debug_meta=t.debug_meta||{},t.debug_meta.images=t.debug_meta.images||[];let n=t.debug_meta.images;Object.entries(e).forEach(([r,o])=>{n.push({type:"sourcemap",code_file:r,debug_id:o})})}function yme(t,e){e.length>0&&(t.sdk=t.sdk||{},t.sdk.integrations=[...t.sdk.integrations||[],...e])}function bme(t,e,n){if(!t)return null;let r={...t,...t.breadcrumbs&&{breadcrumbs:t.breadcrumbs.map(o=>({...o,...o.data&&{data:Jo(o.data,e,n)}}))},...t.user&&{user:Jo(t.user,e,n)},...t.contexts&&{contexts:Jo(t.contexts,e,n)},...t.extra&&{extra:Jo(t.extra,e,n)}};return t.contexts?.trace&&r.contexts&&(r.contexts.trace=t.contexts.trace,t.contexts.trace.data&&(r.contexts.trace.data=Jo(t.contexts.trace.data,e,n))),t.spans&&(r.spans=t.spans.map(o=>({...o,...o.data&&{data:Jo(o.data,e,n)}}))),t.contexts?.flags&&r.contexts&&(r.contexts.flags=Jo(t.contexts.flags,3,n)),r}function Nme(t,e){if(!e)return t;let n=t?t.clone():new Rr;return n.update(e),n}function TY(t){if(t)return Ome(t)?{captureContext:t}:vme(t)?{captureContext:t}:t}function Ome(t){return t instanceof Rr||typeof t=="function"}var Ime=["user","level","extra","contexts","tags","fingerprint","propagationContext"];function vme(t){return Object.keys(t).some(e=>Ime.includes(e))}function Ee(t,e){return Ye().captureException(t,TY(e))}function zT(t,e){return Ye().captureEvent(t,e)}async function YT(t){let e=$();return e?e.flush(t):(G&&N.warn("Cannot flush events. No client defined."),Promise.resolve(!1))}function WT(){let t=$();return t?.getOptions().enabled!==!1&&!!t?.getTransport()}function KT(t){let e=ve(),n=Ye(),{userAgent:r}=de.navigator||{},o=Dz({user:n.getUser()||e.getUser(),...r&&{userAgent:r},...t}),s=e.getSession();return s?.status==="ok"&&li(s,{status:"exited"}),kf(),e.setSession(o),o}function kf(){let t=ve(),n=Ye().getSession()||t.getSession();n&&kz(n),xme(),t.setSession()}function xme(){let t=ve(),e=$(),n=t.getSession();n&&e&&e.captureSession(n)}var Pme="7";function Cme(t){let e=t.protocol?`${t.protocol}:`:"",n=t.port?`:${t.port}`:"";return`${e}//${t.host}${n}${t.path?`/${t.path}`:""}/api/`}function Mme(t){return`${Cme(t)}${t.projectId}/envelope/`}function wme(t,e){let n={sentry_version:Pme};return t.publicKey&&(n.sentry_key=t.publicKey),e&&(n.sentry_client=`${e.name}/${e.version}`),new URLSearchParams(n).toString()}function gY(t,e,n){return e||`${Mme(t)}?${wme(t,n)}`}var MI=[];function Lme(t){let e={};return t.forEach(n=>{let{name:r}=n,o=e[r];o&&!o.isDefaultInstance&&n.isDefaultInstance||(e[r]=n)}),Object.values(e)}function wI(t){let e=t.defaultIntegrations||[],n=t.integrations;e.forEach(o=>{o.isDefaultInstance=!0});let r;if(Array.isArray(n))r=[...e,...n];else if(typeof n=="function"){let o=n(e);r=Array.isArray(o)?o:[o]}else r=e;return Lme(r)}function SY(t,e){let n={};return e.forEach(r=>{r&&DI(t,r,n)}),n}function LI(t,e){for(let n of e)n?.afterAllSetup&&n.afterAllSetup(t)}function DI(t,e,n){if(n[e.name]){G&&N.log(`Integration skipped because it was already installed: ${e.name}`);return}if(n[e.name]=e,!MI.includes(e.name)&&typeof e.setupOnce=="function"&&(e.setupOnce(),MI.push(e.name)),e.setup&&typeof e.setup=="function"&&e.setup(t),typeof e.preprocessEvent=="function"){let r=e.preprocessEvent.bind(e);t.on("preprocessEvent",(o,s)=>r(o,s,t))}if(typeof e.processEvent=="function"){let r=e.processEvent.bind(e),o=Object.assign((s,i)=>r(s,i,t),{id:e.name});t.addEventProcessor(o)}G&&N.log(`Integration installed: ${e.name}`)}function AY(t,e){return e?qr(e,()=>{let n=To(),r=n?aa(n):kc(e);return[n?Zt(n):xs(t,e),r]}):[void 0,void 0]}function Dme(t){return[{type:"log",item_count:t.length,content_type:"application/vnd.sentry.items.log+json"},{items:t}]}function RY(t,e,n,r){let o={};return e?.sdk&&(o.sdk={name:e.sdk.name,version:e.sdk.version}),n&&r&&(o.dsn=zr(r)),cr(o,[Dme(t)])}function Uf(t,e){let n=e??kme(t)??[];if(n.length===0)return;let r=t.getOptions(),o=RY(n,r._metadata,r.tunnel,t.getDsn());yY().set(t,[]),t.emit("flushLogs"),t.sendEnvelope(o)}function kme(t){return yY().get(t)}function yY(){return zo("clientToLogBufferMap",()=>new WeakMap)}function Ume(t){return[{type:"trace_metric",item_count:t.length,content_type:"application/vnd.sentry.items.trace-metric+json"},{items:t}]}function bY(t,e,n,r){let o={};return e?.sdk&&(o.sdk={name:e.sdk.name,version:e.sdk.version}),n&&r&&(o.dsn=zr(r)),cr(o,[Ume(t)])}function NY(t,e){let n=e??$me(t)??[];if(n.length===0)return;let r=t.getOptions(),o=bY(n,r._metadata,r.tunnel,t.getDsn());OY().set(t,[]),t.emit("flushMetrics"),t.sendEnvelope(o)}function $me(t){return OY().get(t)}function OY(){return zo("clientToMetricBufferMap",()=>new WeakMap)}var $f=Symbol.for("SentryBufferFullError");function ZT(t=100){let e=new Set;function n(){return e.size<t}function r(i){e.delete(i)}function o(i){if(!n())return kp($f);let a=i();return e.add(a),a.then(()=>r(a),()=>r(a)),a}function s(i){if(!e.size)return Hc(!0);let a=Promise.allSettled(Array.from(e)).then(()=>!0);if(!i)return a;let c=[a,new Promise(u=>setTimeout(()=>u(!1),i))];return Promise.race(c)}return{get $(){return Array.from(e)},add:o,drain:s}}function Gme(t,e=Date.now()){let n=parseInt(`${t}`,10);if(!isNaN(n))return n*1e3;let r=Date.parse(`${t}`);return isNaN(r)?6e4:r-e}function Vme(t,e){return t[e]||t.all||0}function IY(t,e,n=Date.now()){return Vme(t,e)>n}function vY(t,{statusCode:e,headers:n},r=Date.now()){let o={...t},s=n?.["x-sentry-rate-limits"],i=n?.["retry-after"];if(s)for(let a of s.trim().split(",")){let[c,u,,,p]=a.split(":",5),l=parseInt(c,10),d=(isNaN(l)?60:l)*1e3;if(!u)o.all=r+d;else for(let f of u.split(";"))f==="metric_bucket"?(!p||p.split(";").includes("custom"))&&(o[f]=r+d):o[f]=r+d}else i?o.all=r+Gme(i,r):e===429&&(o.all=r+60*1e3);return o}var kI=64;function Gf(t,e,n=ZT(t.bufferSize||kI)){let r={},o=i=>n.drain(i);function s(i){let a=[];if(VT(i,(l,d)=>{let f=BT(d);IY(r,f)?t.recordDroppedEvent("ratelimit_backoff",f):a.push(l)}),a.length===0)return Promise.resolve({});let c=cr(i[0],a),u=l=>{VT(c,(d,f)=>{t.recordDroppedEvent(l,BT(f))})},p=()=>e({body:Pf(c)}).then(l=>(l.statusCode!==void 0&&(l.statusCode<200||l.statusCode>=300)&&G&&N.warn(`Sentry responded with status code ${l.statusCode} to sent event.`),r=vY(r,l),l),l=>{throw u("network_error"),G&&N.error("Encountered error running transport request:",l),l});return n.add(p).then(l=>l,l=>{if(l===$f)return G&&N.error("Skipped sending event because buffer is full."),u("queue_overflow"),Promise.resolve({});throw l})}return{send:s,flush:o}}function xY(t,e,n){let r=[{type:"client_report"},{timestamp:n||pi(),discarded_events:t}];return cr(e?{dsn:e}:{},[r])}function JT(t){let e=[];t.message&&e.push(t.message);try{let n=t.exception.values[t.exception.values.length-1];n?.value&&(e.push(n.value),n.type&&e.push(`${n.type}: ${n.value}`))}catch{}return e}function PY(t){let{trace_id:e,parent_span_id:n,span_id:r,status:o,origin:s,data:i,op:a}=t.contexts?.trace??{};return{data:i??{},description:t.transaction,op:a,parent_span_id:n,span_id:r??"",start_timestamp:t.start_timestamp??0,status:o,timestamp:t.timestamp,trace_id:e??"",origin:s,profile_id:i?.[Pp],exclusive_time:i?.[Cp],measurements:t.measurements,is_segment:!0}}function CY(t){return{type:"transaction",timestamp:t.timestamp,start_timestamp:t.start_timestamp,transaction:t.description,contexts:{trace:{trace_id:t.trace_id,span_id:t.span_id,parent_span_id:t.parent_span_id,op:t.op,status:t.status,origin:t.origin,data:{...t.data,...t.profile_id&&{[Pp]:t.profile_id},...t.exclusive_time&&{[Cp]:t.exclusive_time}}}},measurements:t.measurements}}var MY="Not capturing exception because it's already been captured.",wY="Discarded session because of missing or non-string release",GY=Symbol.for("SentryInternalError"),VY=Symbol.for("SentryDoNotSendEventError"),Bme=5e3;function QT(t){return{message:t,[GY]:!0}}function UI(t){return{message:t,[VY]:!0}}function LY(t){return!!t&&typeof t=="object"&&GY in t}function DY(t){return!!t&&typeof t=="object"&&VY in t}function kY(t,e,n,r,o){let s=0,i,a=!1;t.on(n,()=>{s=0,clearTimeout(i),a=!1}),t.on(e,c=>{s+=r(c),s>=8e5?o(t):a||(a=!0,i=setTimeout(()=>{o(t)},Bme))}),t.on("flush",()=>{o(t)})}var XT=class{constructor(e){if(this._options=e,this._integrations={},this._numProcessing=0,this._outcomes={},this._hooks={},this._eventProcessors=[],this._promiseBuffer=ZT(e.transportOptions?.bufferSize??kI),e.dsn?this._dsn=qz(e.dsn):G&&N.warn("No DSN provided, client will not send events."),this._dsn){let r=gY(this._dsn,e.tunnel,e._metadata?e._metadata.sdk:void 0);this._transport=e.transport({tunnel:this._options.tunnel,recordDroppedEvent:this.recordDroppedEvent.bind(this),...e.transportOptions,url:r})}this._options.enableLogs=this._options.enableLogs??this._options._experiments?.enableLogs,this._options.enableLogs&&kY(this,"afterCaptureLog","flushLogs",qme,Uf),(this._options.enableMetrics??this._options._experiments?.enableMetrics??!0)&&kY(this,"afterCaptureMetric","flushMetrics",Fme,NY)}captureException(e,n,r){let o=mn();if(xT(e))return G&&N.log(MY),o;let s={event_id:o,...n};return this._process(()=>this.eventFromException(e,s).then(i=>this._captureEvent(i,s,r)).then(i=>i),"error"),s.event_id}captureMessage(e,n,r,o){let s={event_id:mn(),...r},i=Op(e)?e:String(e),a=Rf(e),c=a?this.eventFromMessage(i,n,s):this.eventFromException(e,s);return this._process(()=>c.then(u=>this._captureEvent(u,s,o)),a?"unknown":"error"),s.event_id}captureEvent(e,n,r){let o=mn();if(n?.originalException&&xT(n.originalException))return G&&N.log(MY),o;let s={event_id:o,...n},i=e.sdkProcessingMetadata||{},a=i.capturedSpanScope,c=i.capturedSpanIsolationScope,u=UY(e.type);return this._process(()=>this._captureEvent(e,s,a||r,c),u),s.event_id}captureSession(e){this.sendSession(e),li(e,{init:!1})}getDsn(){return this._dsn}getOptions(){return this._options}getSdkMetadata(){return this._options._metadata}getTransport(){return this._transport}async flush(e){let n=this._transport;if(!n)return!0;this.emit("flush");let r=await this._isClientDoneProcessing(e),o=await n.flush(e);return r&&o}async close(e){let n=await this.flush(e);return this.getOptions().enabled=!1,this.emit("close"),n}getEventProcessors(){return this._eventProcessors}addEventProcessor(e){this._eventProcessors.push(e)}init(){(this._isEnabled()||this._options.integrations.some(({name:e})=>e.startsWith("Spotlight")))&&this._setupIntegrations()}getIntegrationByName(e){return this._integrations[e]}addIntegration(e){let n=this._integrations[e.name];DI(this,e,this._integrations),n||LI(this,[e])}sendEvent(e,n={}){this.emit("beforeSendEvent",e,n);let r=rY(e,this._dsn,this._options._metadata,this._options.tunnel);for(let o of n.attachments||[])r=RI(r,bI(o));this.sendEnvelope(r).then(o=>this.emit("afterSendEvent",e,o))}sendSession(e){let{release:n,environment:r=wp}=this._options;if("aggregates"in e){let s=e.attrs||{};if(!s.release&&!n){G&&N.warn(wY);return}s.release=s.release||n,s.environment=s.environment||r,e.attrs=s}else{if(!e.release&&!n){G&&N.warn(wY);return}e.release=e.release||n,e.environment=e.environment||r}this.emit("beforeSendSession",e);let o=nY(e,this._dsn,this._options._metadata,this._options.tunnel);this.sendEnvelope(o)}recordDroppedEvent(e,n,r=1){if(this._options.sendClientReports){let o=`${e}:${n}`;G&&N.log(`Recording outcome: "${o}"${r>1?` (${r} times)`:""}`),this._outcomes[o]=(this._outcomes[o]||0)+r}}on(e,n){let r=this._hooks[e]=this._hooks[e]||new Set,o=(...s)=>n(...s);return r.add(o),()=>{r.delete(o)}}emit(e,...n){let r=this._hooks[e];r&&r.forEach(o=>o(...n))}async sendEnvelope(e){if(this.emit("beforeEnvelope",e),this._isEnabled()&&this._transport)try{return await this._transport.send(e)}catch(n){return G&&N.error("Error while sending envelope:",n),{}}return G&&N.error("Transport disabled"),{}}_setupIntegrations(){let{integrations:e}=this._options;this._integrations=SY(this,e),LI(this,e)}_updateSessionFromEvent(e,n){let r=n.level==="fatal",o=!1,s=n.exception?.values;if(s){o=!0,r=!1;for(let c of s)if(c.mechanism?.handled===!1){r=!0;break}}let i=e.status==="ok";(i&&e.errors===0||i&&r)&&(li(e,{...r&&{status:"crashed"},errors:e.errors||Number(o||r)}),this.captureSession(e))}async _isClientDoneProcessing(e){let n=0;for(;!e||n<e;){if(await new Promise(r=>setTimeout(r,1)),!this._numProcessing)return!0;n++}return!1}_isEnabled(){return this.getOptions().enabled!==!1&&this._transport!==void 0}_prepareEvent(e,n,r,o){let s=this.getOptions(),i=Object.keys(this._integrations);return!n.integrations&&i?.length&&(n.integrations=i),this.emit("preprocessEvent",e,n),e.type||o.setLastEventId(e.event_id||n.event_id),EY(s,e,n,r,this,o).then(a=>{if(a===null)return a;this.emit("postprocessEvent",a,n),a.contexts={trace:kc(r),...a.contexts};let c=xs(this,r);return a.sdkProcessingMetadata={dynamicSamplingContext:c,...a.sdkProcessingMetadata},a})}_captureEvent(e,n={},r=Ye(),o=ve()){return G&&$I(e)&&N.log(`Captured error event \`${JT(e)[0]||"<unknown>"}\``),this._processEvent(e,n,r,o).then(s=>s.event_id,s=>{G&&(DY(s)?N.log(s.message):LY(s)?N.warn(s.message):N.warn(s))})}_processEvent(e,n,r,o){let s=this.getOptions(),{sampleRate:i}=s,a=BY(e),c=$I(e),p=`before send for type \`${e.type||"error"}\``,l=typeof i>"u"?void 0:Yr(i);if(c&&typeof l=="number"&&Math.random()>l)return this.recordDroppedEvent("sample_rate","error"),kp(UI(`Discarding event because it's not included in the random sample (sampling rate = ${i})`));let d=UY(e.type);return this._prepareEvent(e,n,r,o).then(f=>{if(f===null)throw this.recordDroppedEvent("event_processor",d),UI("An event processor returned `null`, will not send event.");if(n.data&&n.data.__sentry__===!0)return f;let h=Hme(this,s,f,n);return jme(h,p)}).then(f=>{if(f===null){if(this.recordDroppedEvent("before_send",d),a){let A=1+(e.spans||[]).length;this.recordDroppedEvent("before_send","span",A)}throw UI(`${p} returned \`null\`, will not send event.`)}let m=r.getSession()||o.getSession();if(c&&m&&this._updateSessionFromEvent(m,f),a){let E=f.sdkProcessingMetadata?.spanCountBeforeProcessing||0,A=f.spans?f.spans.length:0,R=E-A;R>0&&this.recordDroppedEvent("before_send","span",R)}let h=f.transaction_info;if(a&&h&&f.transaction!==e.transaction){let E="custom";f.transaction_info={...h,source:E}}return this.sendEvent(f,n),f}).then(null,f=>{throw DY(f)||LY(f)?f:(this.captureException(f,{mechanism:{handled:!1,type:"internal"},data:{__sentry__:!0},originalException:f}),QT(`Event processing pipeline threw an error, original event will not be sent. Details have been sent as a new event.
Reason: ${f}`))})}_process(e,n){this._numProcessing++,this._promiseBuffer.add(e).then(r=>(this._numProcessing--,r),r=>(this._numProcessing--,r===$f&&this.recordDroppedEvent("queue_overflow",n),r))}_clearOutcomes(){let e=this._outcomes;return this._outcomes={},Object.entries(e).map(([n,r])=>{let[o,s]=n.split(":");return{reason:o,category:s,quantity:r}})}_flushOutcomes(){G&&N.log("Flushing outcomes...");let e=this._clearOutcomes();if(e.length===0){G&&N.log("No outcomes to send");return}if(!this._dsn){G&&N.log("No dsn provided, will not send outcomes");return}G&&N.log("Sending outcomes:",e);let n=xY(e,this._options.tunnel&&zr(this._dsn));this.sendEnvelope(n)}};function UY(t){return t==="replay_event"?"replay":t||"error"}function jme(t,e){let n=`${e} must return \`null\` or a valid event.`;if(ar(t))return t.then(r=>{if(!ci(r)&&r!==null)throw QT(n);return r},r=>{throw QT(`${e} rejected with ${r}`)});if(!ci(t)&&t!==null)throw QT(n);return t}function Hme(t,e,n,r){let{beforeSend:o,beforeSendTransaction:s,beforeSendSpan:i,ignoreSpans:a}=e,c=n;if($I(c)&&o)return o(c,r);if(BY(c)){if(i||a){let u=PY(c);if(a?.length&&xf(u,a))return null;if(i){let p=i(u);p?c=oa(n,CY(p)):vf()}if(c.spans){let p=[],l=c.spans;for(let f of l){if(a?.length&&xf(f,a)){eY(l,f);continue}if(i){let m=i(f);m?p.push(m):(vf(),p.push(f))}else p.push(f)}let d=c.spans.length-p.length;d&&t.recordDroppedEvent("before_send","span",d),c.spans=p}}if(s){if(c.spans){let u=c.spans.length;c.sdkProcessingMetadata={...n.sdkProcessingMetadata,spanCountBeforeProcessing:u}}return s(c,r)}}return c}function $I(t){return t.type===void 0}function BY(t){return t.type==="transaction"}function Fme(t){let e=0;return t.name&&(e+=t.name.length*2),e+=8,e+jY(t.attributes)}function qme(t){let e=0;return t.message&&(e+=t.message.length*2),e+jY(t.attributes)}function jY(t){if(!t)return 0;let e=0;return Object.values(t).forEach(n=>{Array.isArray(n)?e+=n.length*$Y(n[0]):Rf(n)?e+=$Y(n):e+=100}),e}function $Y(t){return typeof t=="string"?t.length*2:typeof t=="number"?8:typeof t=="boolean"?4:0}function HY(t,e,n,r,o){let s={sent_at:new Date().toISOString()};n?.sdk&&(s.sdk={name:n.sdk.name,version:n.sdk.version}),r&&o&&(s.dsn=zr(o)),e&&(s.trace=e);let i=zme(t);return cr(s,[i])}function zme(t){return[{type:"check_in"},t]}function FY(t){let e=t._metadata?.sdk,n=e?.name&&e?.version?`${e?.name}/${e?.version}`:void 0;t.transportOptions={...t.transportOptions,headers:{...n&&{"user-agent":n},...t.transportOptions?.headers}}}function qY(t,e){return t(e.stack||"",1)}function GI(t,e){let n={type:e.name||e.constructor.name,value:e.message},r=qY(t,e);return r.length&&(n.stacktrace={frames:r}),n}function Yme(t){for(let e in t)if(Object.prototype.hasOwnProperty.call(t,e)){let n=t[e];if(n instanceof Error)return n}}function Wme(t){if("name"in t&&typeof t.name=="string"){let r=`'${t.name}' captured as exception`;return"message"in t&&typeof t.message=="string"&&(r+=` with message '${t.message}'`),r}else if("message"in t&&typeof t.message=="string")return t.message;let e=eI(t);if(WO(t))return`Event \`ErrorEvent\` captured as exception with message \`${t.message}\``;let n=Kme(t);return`${n&&n!=="Object"?`'${n}'`:"Object"} captured as exception with keys: ${e}`}function Kme(t){try{let e=Object.getPrototypeOf(t);return e?e.constructor.name:void 0}catch{}}function Zme(t,e,n,r){if(ai(n))return[n,void 0];if(e.synthetic=!0,ci(n)){let s=t?.getOptions().normalizeDepth,i={__serialized__:SI(n,s)},a=Yme(n);if(a)return[a,i];let c=Wme(n),u=r?.syntheticException||new Error(c);return u.message=c,[u,i]}let o=r?.syntheticException||new Error(n);return o.message=`${n}`,[o,void 0]}function zY(t,e,n,r){let s=r?.data&&r.data.mechanism||{handled:!0,type:"generic"},[i,a]=Zme(t,s,n,r),c={exception:{values:[GI(e,i)]}};return a&&(c.extra=a),sI(c,void 0,void 0),Ip(c,s),{...c,event_id:r?.event_id}}function YY(t,e,n="info",r,o){let s={event_id:r?.event_id,level:n};if(o&&r?.syntheticException){let i=qY(t,r.syntheticException);i.length&&(s.exception={values:[{value:e,stacktrace:{frames:i}}]},Ip(s,{synthetic:!0}))}if(Op(e)){let{__sentry_template_string__:i,__sentry_template_values__:a}=e;return s.logentry={message:i,params:a},s}return s.message=e,s}var Vf=class extends XT{constructor(e){Qz(),FY(e),super(e),this._setUpMetricsProcessing()}eventFromException(e,n){let r=zY(this,this._options.stackParser,e,n);return r.level="error",Hc(r)}eventFromMessage(e,n="info",r){return Hc(YY(this._options.stackParser,e,n,r,this._options.attachStacktrace))}captureException(e,n,r){return WY(n),super.captureException(e,n,r)}captureEvent(e,n,r){return!e.type&&e.exception?.values&&e.exception.values.length>0&&WY(n),super.captureEvent(e,n,r)}captureCheckIn(e,n,r){let o="checkInId"in e&&e.checkInId?e.checkInId:mn();if(!this._isEnabled())return G&&N.warn("SDK not enabled, will not capture check-in."),o;let s=this.getOptions(),{release:i,environment:a,tunnel:c}=s,u={check_in_id:o,monitor_slug:e.monitorSlug,status:e.status,release:i,environment:a};"duration"in e&&(u.duration=e.duration),n&&(u.monitor_config={schedule:n.schedule,checkin_margin:n.checkinMargin,max_runtime:n.maxRuntime,timezone:n.timezone,failure_issue_threshold:n.failureIssueThreshold,recovery_threshold:n.recoveryThreshold});let[p,l]=AY(this,r);l&&(u.contexts={trace:l});let d=HY(u,p,this.getSdkMetadata(),c,this.getDsn());return G&&N.log("Sending checkin:",e.monitorSlug,e.status),this.sendEnvelope(d),o}_prepareEvent(e,n,r,o){return this._options.platform&&(e.platform=e.platform||this._options.platform),this._options.runtime&&(e.contexts={...e.contexts,runtime:e.contexts?.runtime||this._options.runtime}),this._options.serverName&&(e.server_name=e.server_name||this._options.serverName),super._prepareEvent(e,n,r,o)}_setUpMetricsProcessing(){this.on("processMetric",e=>{this._options.serverName&&(e.attributes={"server.address":this._options.serverName,...e.attributes})})}};function WY(t){let e=ve().getScopeData().sdkProcessingMetadata.requestSession;if(e){let n=t?.mechanism?.handled??!0;n&&e.status!=="crashed"?e.status="errored":n||(e.status="crashed")}}var VI=new Set;function BI(t){t.forEach(e=>{VI.add(e),G&&N.log(`AI provider "${e}" wrapping will be skipped`)})}function qc(t){return VI.has(t)}function jI(){VI.clear(),G&&N.log("Cleared AI provider skip registrations")}var Jme="thismessage:/";function HI(t){return"isRelative"in t}function Bf(t,e){let n=t.indexOf("://")<=0&&t.indexOf("//")!==0,r=e??(n?Jme:void 0);try{if("canParse"in URL&&!URL.canParse(t,r))return;let o=new URL(t,r);return n?{isRelative:n,pathname:o.pathname,search:o.search,hash:o.hash}:o}catch{}}function la(t){if(!t)return{};let e=t.match(/^(([^:/?#]+):)?(\/\/([^/?#]*))?([^?#]*)(\?([^#]*))?(#(.*))?$/);if(!e)return{};let n=e[6]||"",r=e[8]||"";return{host:e[4],path:e[5],protocol:e[2],search:n,hash:r,relative:e[5]+n+r}}function fi(t){return t.split(/[?#]/,1)[0]}function da(t){let{protocol:e,host:n,path:r}=t,o=n?.replace(/^.*@/,"[filtered]:[filtered]@").replace(/(:80)$/,"").replace(/(:443)$/,"")||"";return`${e?`${e}://`:""}${o}${r}`}function zc(t,e,n=[e],r="npm"){let o=t._metadata||{};o.sdk||(o.sdk={name:`sentry.javascript.${e}`,packages:n.map(s=>({name:`${r}:@sentry/${s}`,version:Pe})),version:Pe}),t._metadata=o}function Up(t={}){let e=t.client||$();if(!WT()||!e)return{};let n=ir(),r=Yo(n);if(r.getTraceData)return r.getTraceData(t);let o=t.scope||Ye(),s=t.span||To(),i=s?UT(s):Qme(o),a=s?Zt(s):xs(e,o),c=$c(a);if(!wT.test(i))return N.warn("Invalid sentry-trace data. Cannot generate trace data"),{};let p={"sentry-trace":i,baggage:c};return t.propagateTraceparent&&(p.traceparent=s?Zz(s):Xme(o)),p}function Qme(t){let{traceId:e,sampled:n,propagationSpanId:r}=t.getPropagationContext();return sa(e,r,n)}function Xme(t){let{traceId:e,sampled:n,propagationSpanId:r}=t.getPropagationContext();return ia(e,r,n)}function FI(t,e,n){let r,o,s,i=n?.maxWait?Math.max(n.maxWait,e):0,a=n?.setTimeoutImpl||setTimeout;function c(){return u(),r=t(),r}function u(){o!==void 0&&clearTimeout(o),s!==void 0&&clearTimeout(s),o=s=void 0}function p(){return o!==void 0||s!==void 0?c():r}function l(){return o&&clearTimeout(o),o=a(c,e),i&&s===void 0&&(s=a(c,i)),r}return l.cancel=u,l.flush=p,l}function JY(t){let e=Object.create(null);try{Object.entries(t).forEach(([n,r])=>{typeof r=="string"&&(e[n]=r)})}catch{}return e}function jf(t){let e=t.headers||{},r=(typeof e["x-forwarded-host"]=="string"?e["x-forwarded-host"]:void 0)||(typeof e.host=="string"?e.host:void 0),s=(typeof e["x-forwarded-proto"]=="string"?e["x-forwarded-proto"]:void 0)||t.protocol||(t.socket?.encrypted?"https":"http"),i=t.url||"",a=e_e({url:i,host:r,protocol:s}),c=t.body||void 0,u=t.cookies;return{url:a,method:t.method,query_string:QY(i),headers:JY(e),cookies:u,data:c}}function e_e({url:t,protocol:e,host:n}){if(t?.startsWith("http"))return t;if(t&&n)return`${e}://${n}${t}`}var KY=["auth","token","secret","session","password","passwd","pwd","key","jwt","bearer","sso","saml","csrf","xsrf","credentials","set-cookie","cookie"],t_e=["x-forwarded-","-user"];function eg(t,e=!1){let n={};try{Object.entries(t).forEach(([r,o])=>{if(o==null)return;let s=r.toLowerCase();if((s==="cookie"||s==="set-cookie")&&typeof o=="string"&&o!==""){let a=s==="set-cookie",c=o.indexOf(";"),u=a&&c!==-1?o.substring(0,c):o,p=a?[u]:u.split("; ");for(let l of p){let d=l.indexOf("="),f=d!==-1?l.substring(0,d):l,m=d!==-1?l.substring(d+1):"",h=f.toLowerCase();ZY(n,s,h,m,e)}}else ZY(n,s,"",o,e)})}catch{}return n}function qI(t){return t.replace(/-/g,"_")}function ZY(t,e,n,r,o){let s=n?`http.request.header.${qI(e)}.${qI(n)}`:`http.request.header.${qI(e)}`,i=n_e(n||e,r,o);i!==void 0&&(t[s]=i)}function n_e(t,e,n){if(n?KY.some(o=>t.includes(o)):[...t_e,...KY].some(o=>t.includes(o)))return"[Filtered]";if(Array.isArray(e))return e.map(o=>o!=null?String(o):o).join(";");if(typeof e=="string")return e}function QY(t){if(t)try{let e=new URL(t,"http://s.io").search.slice(1);return e.length?e:void 0}catch{return}}var r_e=100;function go(t,e){let n=$(),r=ve();if(!n)return;let{beforeBreadcrumb:o=null,maxBreadcrumbs:s=r_e}=n.getOptions();if(s<=0)return;let a={timestamp:pi(),...t},c=o?Yt(()=>o(a,e)):a;c!==null&&(n.emit&&n.emit("beforeAddBreadcrumb",c,e),r.addBreadcrumb(c,s))}var XY,o_e="FunctionToString",eW=new WeakMap,s_e=(()=>({name:o_e,setupOnce(){XY=Function.prototype.toString;try{Function.prototype.toString=function(...t){let e=XO(this),n=eW.has($())&&e!==void 0?e:this;return XY.apply(n,t)}}catch{}},setup(t){eW.set(t,!0)}})),tg=s_e;var i_e=[/^Script error\.?$/,/^Javascript error: Script error\.? on line 0$/,/^ResizeObserver loop completed with undelivered notifications.$/,/^Cannot redefine property: googletag$/,/^Can't find variable: gmo$/,/^undefined is not an object \(evaluating 'a\.[A-Z]'\)$/,`can't redefine non-configurable property "solana"`,"vv().getRestrictions is not a function. (In 'vv().getRestrictions(1,a)', 'vv().getRestrictions' is undefined)","Can't find variable: _AutofillCallbackHandler",/^Non-Error promise rejection captured with value: Object Not Found Matching Id:\d+, MethodName:simulateEvent, ParamCount:\d+$/,/^Java exception was raised during method invocation$/],a_e="EventFilters",zI=(t={})=>{let e;return{name:a_e,setup(n){let r=n.getOptions();e=tW(t,r)},processEvent(n,r,o){if(!e){let s=o.getOptions();e=tW(t,s)}return c_e(n,e)?null:n}}},rg=((t={})=>({...zI(t),name:"InboundFilters"}));function tW(t={},e={}){return{allowUrls:[...t.allowUrls||[],...e.allowUrls||[]],denyUrls:[...t.denyUrls||[],...e.denyUrls||[]],ignoreErrors:[...t.ignoreErrors||[],...e.ignoreErrors||[],...t.disableErrorDefaults?[]:i_e],ignoreTransactions:[...t.ignoreTransactions||[],...e.ignoreTransactions||[]]}}function c_e(t,e){if(t.type){if(t.type==="transaction"&&p_e(t,e.ignoreTransactions))return G&&N.warn(`Event dropped due to being matched by \`ignoreTransactions\` option.
Event: ${na(t)}`),!0}else{if(u_e(t,e.ignoreErrors))return G&&N.warn(`Event dropped due to being matched by \`ignoreErrors\` option.
Event: ${na(t)}`),!0;if(m_e(t))return G&&N.warn(`Event dropped due to not having an error message, error type or stacktrace.
Event: ${na(t)}`),!0;if(l_e(t,e.denyUrls))return G&&N.warn(`Event dropped due to being matched by \`denyUrls\` option.
Event: ${na(t)}.
Url: ${ng(t)}`),!0;if(!d_e(t,e.allowUrls))return G&&N.warn(`Event dropped due to not being matched by \`allowUrls\` option.
Event: ${na(t)}.
Url: ${ng(t)}`),!0}return!1}function u_e(t,e){return e?.length?JT(t).some(n=>ta(n,e)):!1}function p_e(t,e){if(!e?.length)return!1;let n=t.transaction;return n?ta(n,e):!1}function l_e(t,e){if(!e?.length)return!1;let n=ng(t);return n?ta(n,e):!1}function d_e(t,e){if(!e?.length)return!0;let n=ng(t);return n?ta(n,e):!0}function f_e(t=[]){for(let e=t.length-1;e>=0;e--){let n=t[e];if(n&&n.filename!=="<anonymous>"&&n.filename!=="[native code]")return n.filename||null}return null}function ng(t){try{let n=[...t.exception?.values??[]].reverse().find(r=>r.mechanism?.parent_id===void 0&&r.stacktrace?.frames?.length)?.stacktrace?.frames;return n?f_e(n):null}catch{return G&&N.error(`Cannot extract url for event ${na(t)}`),null}}function m_e(t){return t.exception?.values?.length?!t.message&&!t.exception.values.some(e=>e.stacktrace||e.type&&e.type!=="Error"||e.value):!1}function oW(t,e,n,r,o,s){if(!o.exception?.values||!s||!Is(s.originalException,Error))return;let i=o.exception.values.length>0?o.exception.values[o.exception.values.length-1]:void 0;i&&(o.exception.values=YI(t,e,r,s.originalException,n,o.exception.values,i,0))}function YI(t,e,n,r,o,s,i,a){if(s.length>=n+1)return s;let c=[...s];if(Is(r[o],Error)){nW(i,a);let u=t(e,r[o]),p=c.length;rW(u,o,p,a),c=YI(t,e,n,r[o],o,[u,...c],u,p)}return Array.isArray(r.errors)&&r.errors.forEach((u,p)=>{if(Is(u,Error)){nW(i,a);let l=t(e,u),d=c.length;rW(l,`errors[${p}]`,d,a),c=YI(t,e,n,u,o,[l,...c],l,d)}}),c}function nW(t,e){t.mechanism={handled:!0,type:"auto.core.linked_errors",...t.mechanism,...t.type==="AggregateError"&&{is_exception_group:!0},exception_id:e}}function rW(t,e,n,r){t.mechanism={handled:!0,...t.mechanism,type:"chained",source:e,exception_id:n,parent_id:r}}var __e="cause",h_e=5,E_e="LinkedErrors",T_e=((t={})=>{let e=t.limit||h_e,n=t.key||__e;return{name:E_e,preprocessEvent(r,o,s){let i=s.getOptions();oW(GI,i.stackParser,n,e,r,o)}}}),og=T_e;function sW(t){let e={},n=0;for(;n<t.length;){let r=t.indexOf("=",n);if(r===-1)break;let o=t.indexOf(";",n);if(o===-1)o=t.length;else if(o<r){n=t.lastIndexOf(";",r-1)+1;continue}let s=t.slice(n,r).trim();if(e[s]===void 0){let i=t.slice(r+1,o).trim();i.charCodeAt(0)===34&&(i=i.slice(1,-1));try{e[s]=i.indexOf("%")!==-1?decodeURIComponent(i):i}catch{e[s]=i}}n=o+1}return e}var WI=["X-Client-IP","X-Forwarded-For","Fly-Client-IP","CF-Connecting-IP","Fastly-Client-Ip","True-Client-Ip","X-Real-IP","X-Cluster-Client-IP","X-Forwarded","Forwarded-For","Forwarded","X-Vercel-Forwarded-For"];function iW(t){return WI.map(o=>{let s=t[o],i=Array.isArray(s)?s.join(";"):s;return o==="Forwarded"?g_e(i):i?.split(",").map(a=>a.trim())}).reduce((o,s)=>s?o.concat(s):o,[]).find(o=>o!==null&&S_e(o))||null}function g_e(t){if(!t)return null;for(let e of t.split(";"))if(e.startsWith("for="))return e.slice(4);return null}function S_e(t){return/(?:^(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]\d|\d)(?:\.(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]\d|\d)){3}$)|(?:^(?:(?:[a-fA-F\d]{1,4}:){7}(?:[a-fA-F\d]{1,4}|:)|(?:[a-fA-F\d]{1,4}:){6}(?:(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]\d|\d)(?:\\.(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]\d|\d)){3}|:[a-fA-F\d]{1,4}|:)|(?:[a-fA-F\d]{1,4}:){5}(?::(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]\d|\d)(?:\\.(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]\d|\d)){3}|(?::[a-fA-F\d]{1,4}){1,2}|:)|(?:[a-fA-F\d]{1,4}:){4}(?:(?::[a-fA-F\d]{1,4}){0,1}:(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]\d|\d)(?:\\.(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]\d|\d)){3}|(?::[a-fA-F\d]{1,4}){1,3}|:)|(?:[a-fA-F\d]{1,4}:){3}(?:(?::[a-fA-F\d]{1,4}){0,2}:(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]\d|\d)(?:\\.(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]\d|\d)){3}|(?::[a-fA-F\d]{1,4}){1,4}|:)|(?:[a-fA-F\d]{1,4}:){2}(?:(?::[a-fA-F\d]{1,4}){0,3}:(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]\d|\d)(?:\\.(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]\d|\d)){3}|(?::[a-fA-F\d]{1,4}){1,5}|:)|(?:[a-fA-F\d]{1,4}:){1}(?:(?::[a-fA-F\d]{1,4}){0,4}:(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]\d|\d)(?:\\.(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]\d|\d)){3}|(?::[a-fA-F\d]{1,4}){1,6}|:)|(?::(?:(?::[a-fA-F\d]{1,4}){0,5}:(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]\d|\d)(?:\\.(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]\d|\d)){3}|(?::[a-fA-F\d]{1,4}){1,7}|:)))(?:%[0-9a-zA-Z]{1,})?$)/.test(t)}var A_e={cookies:!0,data:!0,headers:!0,query_string:!0,url:!0},R_e="RequestData",y_e=((t={})=>{let e={...A_e,...t.include};return{name:R_e,processEvent(n,r,o){let{sdkProcessingMetadata:s={}}=n,{normalizedRequest:i,ipAddress:a}=s,c={...e,ip:e.ip??o.getOptions().sendDefaultPii};return i&&b_e(n,i,{ipAddress:a},c),n}}}),sg=y_e;function b_e(t,e,n,r){if(t.request={...t.request,...N_e(e,r)},r.ip){let o=e.headers&&iW(e.headers)||n.ipAddress;o&&(t.user={...t.user,ip_address:o})}}function N_e(t,e){let n={},r={...t.headers};if(e.headers&&(n.headers=r,e.cookies||delete r.cookie,e.ip||WI.forEach(o=>{delete r[o]})),n.method=t.method,e.url&&(n.url=t.url),e.cookies){let o=t.cookies||(r?.cookie?sW(r.cookie):void 0);n.cookies=o||{}}return e.query_string&&(n.query_string=t.query_string),e.data&&(n.data=t.data),n}function aW(t){let e="console";yp(e,t),bp(e,O_e)}function O_e(){"console"in de&&Sf.forEach(function(t){t in de.console&&_o(de.console,t,function(e){return Rp[t]=e,function(...n){Np("console",{args:n,level:t}),Rp[t]?.apply(de.console,n)}})})}function cW(t){return t==="warn"?"warning":["fatal","error","warning","log","info","debug"].includes(t)?t:"log"}var I_e=/^(\S+:\\|\/?)([\s\S]*?)((?:\.{1,2}|[^/\\]+?|)(\.[^./\\]*|))(?:[/\\]*)$/;function v_e(t){let e=t.length>1024?`<truncated>${t.slice(-1024)}`:t,n=I_e.exec(e);return n?n.slice(1):[]}function KI(t){let e=v_e(t),n=e[0]||"",r=e[1];return!n&&!r?".":(r&&(r=r.slice(0,r.length-1)),n+r)}var x_e="Console",ig=(t={})=>{let e=new Set(t.levels||Sf);return{name:x_e,setup(n){aW(({args:r,level:o})=>{$()!==n||!e.has(o)||P_e(o,r)})}}};function P_e(t,e){let n={category:"console",data:{arguments:e,logger:"console"},level:cW(t),message:uW(e)};if(t==="assert")if(e[0]===!1){let r=e.slice(1);n.message=r.length>0?`Assertion failed: ${uW(r)}`:"Assertion failed",n.data.arguments=r}else return;go(n,{input:e,level:t})}function uW(t){return"util"in de&&typeof de.util.format=="function"?de.util.format(...t):nI(t," ")}function mi(t,e,n){try{if(!$())return;let o=To();o?.isRecording()&&o.setStatus({code:2,message:"internal_error"}),Ee(t,{mechanism:{type:"auto.ai.mcp_server",handled:!1,data:{error_type:e||"handler_execution",...n}}})}catch{}}function ZI(t,e){_o(t,e,n=>function(r,...o){let s=o[o.length-1];if(typeof s!="function")return n.call(this,r,...o);let i=C_e(s,e,r);return n.call(this,r,...o.slice(0,-1),i)})}function C_e(t,e,n){return function(...r){try{return M_e.call(this,t,e,n,r)}catch(o){return G&&N.warn("MCP handler wrapping failed:",o),t.apply(this,r)}}}function M_e(t,e,n,r){try{let o=t.apply(this,r);return o&&typeof o=="object"&&typeof o.then=="function"?Promise.resolve(o).catch(s=>{throw pW(s,e,n),s}):o}catch(o){throw pW(o,e,n),o}}function pW(t,e,n){try{let r={};e==="tool"?(r.tool_name=n,t.name==="ProtocolValidationError"||t.message.includes("validation")||t.message.includes("protocol")?mi(t,"validation",r):t.name==="ServerTimeoutError"||t.message.includes("timed out")||t.message.includes("timeout")?mi(t,"timeout",r):mi(t,"tool_execution",r)):e==="resource"?(r.resource_uri=n,mi(t,"resource_execution",r)):e==="prompt"&&(r.prompt_name=n,mi(t,"prompt_execution",r))}catch{}}function w_e(t){ZI(t,"tool")}function L_e(t){ZI(t,"resource")}function D_e(t){ZI(t,"prompt")}function lW(t){w_e(t),L_e(t),D_e(t)}var JI="mcp.method.name",dW="mcp.request.id",fW="mcp.session.id",mW="mcp.transport",QI="mcp.server.name",XI="mcp.server.title",ev="mcp.server.version",$p="mcp.protocol.version",_W="mcp.tool.name",fa="mcp.resource.uri",hW="mcp.prompt.name",EW="mcp.tool.result.is_error",TW="mcp.tool.result.content_count",gW="mcp.tool.result.content",SW="mcp.tool.result",ag="mcp.prompt.result.description",AW="mcp.prompt.result.message_count",RW="mcp.prompt.result.message_content",yW="mcp.prompt.result",Gp="mcp.request.argument",bW="mcp.logging.level",NW="mcp.logging.logger",OW="mcp.logging.data_type",Hf="mcp.logging.message",IW="network.transport",vW="network.protocol.version",cg="client.address",ug="client.port",tv="mcp.server",xW="mcp.notification.client_to_server",PW="mcp.notification.server_to_client",CW="auto.function.mcp_server",nv="auto.mcp.notification",MW="route";var k_e=new Set([cg,ug,Hf,ag,RW,fa,gW]);function U_e(t){return!!(k_e.has(t)||t.startsWith(`${Gp}.`)||(t.startsWith(`${SW}.`)||t.startsWith(`${yW}.`))&&!t.endsWith("_count")&&!t.endsWith("_error")&&!t.endsWith(".is_error"))}function Vp(t,e){return e?t:Object.entries(t).reduce((n,[r,o])=>(U_e(r)||(n[r]=o),n),{})}function wW(t){return typeof t=="object"&&t!==null&&"jsonrpc"in t&&t.jsonrpc==="2.0"&&"method"in t&&"id"in t}function rv(t){return typeof t=="object"&&t!==null&&"jsonrpc"in t&&t.jsonrpc==="2.0"&&"method"in t&&!("id"in t)}function LW(t){return typeof t=="object"&&t!==null&&"jsonrpc"in t&&t.jsonrpc==="2.0"&&"id"in t&&("result"in t||"error"in t)}function DW(t){return typeof t=="object"&&t!==null&&"resource"in t&&"tool"in t&&"prompt"in t&&"connect"in t?!0:(G&&N.warn("Did not patch MCP server. Interface is incompatible."),!1)}function Zr(t){return t!=null&&typeof t=="object"}function $_e(t){let e={[TW]:t.length};for(let[n,r]of t.entries()){if(!Zr(r))continue;let o=t.length===1?"mcp.tool.result":`mcp.tool.result.${n}`,s=(a,c)=>{typeof c=="string"&&(e[`${o}.${a}`]=c)};s("content_type",r.type),s("mime_type",r.mimeType),s("uri",r.uri),s("name",r.name),typeof r.text=="string"&&(e[`${o}.content`]=r.text),typeof r.data=="string"&&(e[`${o}.data_size`]=r.data.length);let i=r.resource;Zr(i)&&(s("resource_uri",i.uri),s("resource_mime_type",i.mimeType))}return e}function kW(t){if(!Zr(t))return{};let e=Array.isArray(t.content)?$_e(t.content):{};return typeof t.isError=="boolean"&&(e[EW]=t.isError),e}function UW(t){let e={};if(!Zr(t))return e;if(typeof t.description=="string"&&(e[ag]=t.description),Array.isArray(t.messages)){e[AW]=t.messages.length;let n=t.messages;for(let[r,o]of n.entries()){if(!Zr(o))continue;let s=n.length===1?"mcp.prompt.result":`mcp.prompt.result.${r}`;if(((a,c)=>{if(typeof c=="string"){let u=n.length===1?`${s}.message_${a}`:`${s}.${a}`;e[u]=c}})("role",o.role),Zr(o.content)){let a=o.content;if(typeof a.text=="string"){let c=n.length===1?`${s}.message_content`:`${s}.content`;e[c]=a.text}}}}return e}var Yc=new WeakMap;function $W(t,e){t.sessionId&&Yc.set(t,e)}function GW(t,e){if(t.sessionId){let n=Yc.get(t)||{};Yc.set(t,{...n,...e})}}function VW(t){return Yc.get(t)?.clientInfo}function BW(t){return Yc.get(t)?.protocolVersion}function jW(t){return Yc.get(t)}function HW(t){Yc.delete(t)}function FW(t){let e={};return Zr(t)&&(typeof t.name=="string"&&(e.name=t.name),typeof t.title=="string"&&(e.title=t.title),typeof t.version=="string"&&(e.version=t.version)),e}function qW(t){let e={};return Zr(t.params)&&(typeof t.params.protocolVersion=="string"&&(e.protocolVersion=t.params.protocolVersion),t.params.clientInfo&&(e.clientInfo=FW(t.params.clientInfo))),e}function pg(t){let e={};return Zr(t)&&(typeof t.protocolVersion=="string"&&(e.protocolVersion=t.protocolVersion),t.serverInfo&&(e.serverInfo=FW(t.serverInfo))),e}function G_e(t){let e=VW(t),n={};return e?.name&&(n["mcp.client.name"]=e.name),e?.title&&(n["mcp.client.title"]=e.title),e?.version&&(n["mcp.client.version"]=e.version),n}function zW(t){let e={};return t?.name&&(e["mcp.client.name"]=t.name),t?.title&&(e["mcp.client.title"]=t.title),t?.version&&(e["mcp.client.version"]=t.version),e}function V_e(t){let e=jW(t)?.serverInfo,n={};return e?.name&&(n[QI]=e.name),e?.title&&(n[XI]=e.title),e?.version&&(n[ev]=e.version),n}function YW(t){let e={};return t?.name&&(e[QI]=t.name),t?.title&&(e[XI]=t.title),t?.version&&(e[ev]=t.version),e}function B_e(t){return{address:t?.requestInfo?.remoteAddress||t?.clientAddress||t?.request?.ip||t?.request?.connection?.remoteAddress,port:t?.requestInfo?.remotePort||t?.clientPort||t?.request?.connection?.remotePort}}function j_e(t){if(!t?.constructor)return{mcpTransport:"unknown",networkTransport:"unknown"};let e=typeof t.constructor?.name=="string"?t.constructor.name:"unknown",n="unknown",r=e.toLowerCase();return r.includes("stdio")?n="pipe":(r.includes("http")||r.includes("sse"))&&(n="tcp"),{mcpTransport:e,networkTransport:n}}function ov(t,e){let n=t&&"sessionId"in t?t.sessionId:void 0,r=e?B_e(e):{},{mcpTransport:o,networkTransport:s}=j_e(t),i=G_e(t),a=V_e(t),c=BW(t);return{...n&&{[fW]:n},...r.address&&{[cg]:r.address},...r.port&&{[ug]:r.port},[mW]:o,[IW]:s,[vW]:"2.0",...c&&{[$p]:c},...i,...a}}var sv=new WeakMap;function WW(t){let e=sv.get(t);return e||(e=new Map,sv.set(t,e)),e}function KW(t,e,n,r){WW(t).set(e,{span:n,method:r,startTime:Date.now()})}function ZW(t,e,n){let r=WW(t),o=r.get(e);if(o){let{span:s,method:i}=o;if(i==="initialize"){let a=pg(n),u={...YW(a.serverInfo)};a.protocolVersion&&(u[$p]=a.protocolVersion),s.setAttributes(u)}else if(i==="tools/call"){let a=kW(n),u=!!$()?.getOptions().sendDefaultPii,p=Vp(a,u);s.setAttributes(p)}else if(i==="prompts/get"){let a=UW(n),u=!!$()?.getOptions().sendDefaultPii,p=Vp(a,u);s.setAttributes(p)}s.end(),r.delete(e)}}function JW(t){let e=sv.get(t);if(e){for(let[,n]of e)n.span.setStatus({code:2,message:"cancelled"}),n.span.end();e.clear()}}var QW={"tools/call":{targetField:"name",targetAttribute:_W,captureArguments:!0,argumentsField:"arguments"},"resources/read":{targetField:"uri",targetAttribute:fa,captureUri:!0},"resources/subscribe":{targetField:"uri",targetAttribute:fa},"resources/unsubscribe":{targetField:"uri",targetAttribute:fa},"prompts/get":{targetField:"name",targetAttribute:hW,captureName:!0,captureArguments:!0,argumentsField:"arguments"}};function Ff(t,e){let n=QW[t];if(!n)return{attributes:{}};let r=n.targetField&&typeof e?.[n.targetField]=="string"?e[n.targetField]:void 0;return{target:r,attributes:r&&n.targetAttribute?{[n.targetAttribute]:r}:{}}}function XW(t,e){let n={},r=QW[t];if(!r)return n;if(r.captureArguments&&r.argumentsField&&e?.[r.argumentsField]){let o=e[r.argumentsField];if(typeof o=="object"&&o!==null)for(let[s,i]of Object.entries(o))n[`${Gp}.${s.toLowerCase()}`]=JSON.stringify(i)}return r.captureUri&&e?.uri&&(n[`${Gp}.uri`]=JSON.stringify(e.uri)),r.captureName&&e?.name&&(n[`${Gp}.name`]=JSON.stringify(e.name)),n}function H_e(t,e){let n={};switch(t){case"notifications/cancelled":e?.requestId&&(n["mcp.cancelled.request_id"]=String(e.requestId)),e?.reason&&(n["mcp.cancelled.reason"]=String(e.reason));break;case"notifications/message":e?.level&&(n[bW]=String(e.level)),e?.logger&&(n[NW]=String(e.logger)),e?.data!==void 0&&(n[OW]=typeof e.data,typeof e.data=="string"?n[Hf]=e.data:n[Hf]=JSON.stringify(e.data));break;case"notifications/progress":e?.progressToken&&(n["mcp.progress.token"]=String(e.progressToken)),typeof e?.progress=="number"&&(n["mcp.progress.current"]=e.progress),typeof e?.total=="number"&&(n["mcp.progress.total"]=e.total,typeof e?.progress=="number"&&(n["mcp.progress.percentage"]=e.progress/e.total*100)),e?.message&&(n["mcp.progress.message"]=String(e.message));break;case"notifications/resources/updated":if(e?.uri){n[fa]=String(e.uri);let r=Bf(String(e.uri));r&&!HI(r)&&(n["mcp.resource.protocol"]=r.protocol.replace(":",""))}break;case"notifications/initialized":n["mcp.lifecycle.phase"]="initialization_complete",n["mcp.protocol.ready"]=1;break}return n}function iv(t,e,n){if(t==="request"){let r=e,o=Ff(r.method,n||{});return{...r.id!==void 0&&{[dW]:String(r.id)},...o.attributes,...XW(r.method,n||{})}}return H_e(e.method,n||{})}function e2(t,e){return e?`${t} ${e}`:t}function t2(t){let e,n;switch(t){case"request":e=tv,n=CW;break;case"notification-incoming":e=xW,n=nv;break;case"notification-outgoing":e=PW,n=nv;break}return{[J]:e,[le]:n,[Wt]:MW}}function n2(t){let{type:e,message:n,transport:r,extra:o,callback:s}=t,{method:i}=n,a=n.params,c;if(e==="request"){let f=Ff(i,a||{});c=e2(i,f.target)}else c=i;let u={...ov(r,o),[JI]:i,...iv(e,n,a),...t2(e)},l=!!$()?.getOptions().sendDefaultPii,d=Vp(u,l);return Kr({name:c,forceTransaction:!0,attributes:d},s)}function r2(t,e,n,r){return n2({type:"notification-incoming",message:t,transport:e,extra:n,callback:r})}function o2(t,e,n){return n2({type:"notification-outgoing",message:t,transport:e,callback:n})}function s2(t,e,n){let{method:r}=t,o=t.params,s=Ff(r,o||{}),i=e2(r,s.target),a={...ov(e,n),[JI]:r,...iv("request",t,o),...t2("request")},u=!!$()?.getOptions().sendDefaultPii,p=Vp(a,u);return{name:i,op:tv,forceTransaction:!0,attributes:p}}function i2(t){t.onmessage&&_o(t,"onmessage",e=>function(n,r){if(wW(n)){let o=n.method==="initialize",s;if(o)try{s=qW(n),$W(this,s)}catch{}let i=ve().clone();return Dc(i,()=>{let a=s2(n,this,r),c=FT(a);return o&&s&&c.setAttributes({...zW(s.clientInfo),...s.protocolVersion&&{[$p]:s.protocolVersion}}),KW(this,n.id,c,n.method),ua(c,()=>e.call(this,n,r))})}return rv(n)?r2(n,this,r,()=>e.call(this,n,r)):e.call(this,n,r)})}function a2(t){t.send&&_o(t,"send",e=>async function(...n){let[r]=n;if(rv(r))return o2(r,this,()=>e.call(this,...n));if(LW(r)&&r.id!==null&&r.id!==void 0){if(r.error&&F_e(r.error),Zr(r.result)&&(r.result.protocolVersion||r.result.serverInfo))try{let o=pg(r.result);GW(this,o)}catch{}ZW(this,r.id,r.result)}return e.call(this,...n)})}function c2(t){t.onclose&&_o(t,"onclose",e=>function(...n){return JW(this),HW(this),e.call(this,...n)})}function u2(t){t.onerror&&_o(t,"onerror",e=>function(n){return q_e(n),e.call(this,n)})}function F_e(t){try{if(t&&typeof t=="object"&&"code"in t&&"message"in t){let e=t;if(e.code===-32603||e.code>=-32099&&e.code<=-32e3){let r=new Error(e.message);r.name=`JsonRpcError_${e.code}`,mi(r,"protocol")}}}catch{}}function q_e(t){try{mi(t,"transport")}catch{}}var p2=new WeakSet;function lg(t){if(p2.has(t)||!DW(t))return t;let e=t;return _o(e,"connect",n=>async function(r,...o){let s=await n.call(this,r,...o);return i2(r),a2(r),c2(r),u2(r),s}),lW(e),p2.add(t),t}var l2="gen_ai.prompt",ma="gen_ai.system",Jt="gen_ai.request.model",Bp="gen_ai.request.stream",_a="gen_ai.request.temperature",jp="gen_ai.request.max_tokens",ha="gen_ai.request.frequency_penalty",Hp="gen_ai.request.presence_penalty",Ea="gen_ai.request.top_p",dg="gen_ai.request.top_k",d2="gen_ai.request.encoding_format",f2="gen_ai.request.dimensions",br="gen_ai.response.finish_reasons",_n="gen_ai.response.model",Qo="gen_ai.response.id",m2="gen_ai.response.stop_reason",Nt="gen_ai.usage.input_tokens",rn="gen_ai.usage.output_tokens",Jr="gen_ai.usage.total_tokens",Wn="gen_ai.operation.name",An="gen_ai.request.messages",on="gen_ai.response.text",Ta="gen_ai.request.available_tools",Wc="gen_ai.response.streaming",Rn="gen_ai.response.tool_calls",av="gen_ai.agent.name",_2="gen_ai.pipeline.name",h2="gen_ai.usage.cache_creation_input_tokens",E2="gen_ai.usage.cache_read_input_tokens",cv="gen_ai.usage.input_tokens.cache_write",ga="gen_ai.usage.input_tokens.cached",T2="gen_ai.invoke_agent",g2="openai.response.id",uv="openai.response.model",S2="openai.response.timestamp",A2="openai.usage.completion_tokens",R2="openai.usage.prompt_tokens",fg={CHAT:"chat",RESPONSES:"responses",EMBEDDINGS:"embeddings"},pv="anthropic.response.timestamp";var qf=new Map;var _g=t=>new TextEncoder().encode(t).length,hg=t=>_g(JSON.stringify(t));function dv(t,e){if(_g(t)<=e)return t;let n=0,r=t.length,o="";for(;n<=r;){let s=Math.floor((n+r)/2),i=t.slice(0,s);_g(i)<=e?(o=i,n=s+1):r=s-1}return o}function z_e(t){return typeof t=="string"?t:"text"in t?t.text:""}function y2(t,e){return typeof t=="string"?e:{...t,text:e}}function Y_e(t){return t!==null&&typeof t=="object"&&"content"in t&&typeof t.content=="string"}function W_e(t){return t!==null&&typeof t=="object"&&"content"in t&&Array.isArray(t.content)}function zf(t){return!t||typeof t!="object"?!1:K_e(t)||N2(t)||"media_type"in t&&typeof t.media_type=="string"&&"data"in t||"image_url"in t&&typeof t.image_url=="string"&&t.image_url.startsWith("data:")||"type"in t&&(t.type==="blob"||t.type==="base64")||"b64_json"in t||"type"in t&&"result"in t&&t.type==="image_generation"||"uri"in t&&typeof t.uri=="string"&&t.uri.startsWith("data:")}function K_e(t){return"type"in t&&typeof t.type=="string"&&"source"in t&&zf(t.source)}function N2(t){return"inlineData"in t&&!!t.inlineData&&typeof t.inlineData=="object"&&"data"in t.inlineData&&typeof t.inlineData.data=="string"}function O2(t){return t!==null&&typeof t=="object"&&"parts"in t&&Array.isArray(t.parts)&&t.parts.length>0}function Z_e(t,e){let n={...t,content:""},r=hg(n),o=e-r;if(o<=0)return[];let s=dv(t.content,o);return[{...t,content:s}]}function J_e(t,e){let{parts:n}=t,r=n.map(a=>y2(a,"")),o=hg({...t,parts:r}),s=e-o;if(s<=0)return[];let i=[];for(let a of n){let c=z_e(a),u=_g(c);if(u<=s)i.push(a),s-=u;else if(i.length===0){let p=dv(c,s);p&&i.push(y2(a,p));break}else break}return i.length<=0?[]:[{...t,parts:i}]}function Q_e(t,e){return!t||typeof t!="object"?[]:Y_e(t)?Z_e(t,e):O2(t)?J_e(t,e):[]}var b2="[Filtered]",X_e=["image_url","data","content","b64_json","result","uri"];function mg(t){let e={...t};zf(e.source)&&(e.source=mg(e.source)),N2(t)&&(e.inlineData={...t.inlineData,data:b2});for(let n of X_e)typeof e[n]=="string"&&(e[n]=b2);return e}function lv(t){return t.map(n=>{let r;return n&&typeof n=="object"&&(W_e(n)?r={...n,content:lv(n.content)}:"content"in n&&zf(n.content)&&(r={...n,content:mg(n.content)}),O2(n)&&(r={...r??n,parts:lv(n.parts)}),zf(r)?r=mg(r):zf(n)&&(r=mg(n))),r??n})}function ehe(t,e){if(!Array.isArray(t)||t.length===0)return t;let n=lv(t);if(hg(n)<=e)return n;let o=n.map(hg),s=0,i=n.length;for(let a=n.length-1;a>=0;a--){let c=o[a];if(c&&s+c>e)break;c&&(s+=c),i=a}if(i===n.length){let a=n[n.length-1];return Q_e(a,e)}return n.slice(i)}function Sa(t){return ehe(t,2e4)}function I2(t){return dv(t,2e4)}function Kc(t){return t.includes("messages")?"messages":t.includes("completions")?"completions":t.includes("models")?"models":t.includes("chat")?"chat":t.split(".").pop()||"unknown"}function Fp(t){return`gen_ai.${Kc(t)}`}function Eg(t,e){return t?`${t}.${e}`:e}function Yf(t,e,n,r,o){if(e!==void 0&&t.setAttributes({[Nt]:e}),n!==void 0&&t.setAttributes({[rn]:n}),e!==void 0||n!==void 0||r!==void 0||o!==void 0){let s=(e??0)+(n??0)+(r??0)+(o??0);t.setAttributes({[Jr]:s})}}function _i(t){if(typeof t=="string")return I2(t);if(Array.isArray(t)){let e=Sa(t);return JSON.stringify(e)}return JSON.stringify(t)}var v2="operation.name",Tg="ai.prompt",x2="ai.schema",P2="ai.response.object",C2="ai.response.text",M2="ai.response.toolCalls",gg="ai.prompt.messages",qp="ai.prompt.tools",Xo="ai.model.id",w2="ai.response.providerMetadata",L2="ai.usage.cachedInputTokens",D2="ai.telemetry.functionId",k2="ai.usage.completionTokens",U2="ai.usage.promptTokens",fv="ai.toolCall.name",mv="ai.toolCall.id",$2="ai.toolCall.args",G2="ai.toolCall.result";function V2(t,e){let n=t.parent_span_id;if(!n)return;let r=t.data[Nt],o=t.data[rn];if(typeof r=="number"||typeof o=="number"){let s=e.get(n)||{inputTokens:0,outputTokens:0};typeof r=="number"&&(s.inputTokens+=r),typeof o=="number"&&(s.outputTokens+=o),e.set(n,s)}}function _v(t,e){let n=e.get(t.span_id);!n||!t.data||(n.inputTokens>0&&(t.data[Nt]=n.inputTokens),n.outputTokens>0&&(t.data[rn]=n.outputTokens),(n.inputTokens>0||n.outputTokens>0)&&(t.data["gen_ai.usage.total_tokens"]=n.inputTokens+n.outputTokens))}function hv(t){return qf.get(t)}function Ev(t){qf.delete(t)}function B2(t){let e=t.map(n=>{if(typeof n=="string")try{return JSON.parse(n)}catch{return n}return n});return JSON.stringify(e)}function the(t){try{let e=JSON.parse(t);if(e&&typeof e=="object"){let{prompt:n,system:r}=e;if(typeof n=="string"||typeof r=="string"){let o=[];return typeof r=="string"&&o.push({role:"system",content:r}),typeof n=="string"&&o.push({role:"user",content:n}),o}}}catch{}return[]}function j2(t,e){if(e[Tg]){let r=_i(e[Tg]);t.setAttribute("gen_ai.prompt",r)}let n=e[Tg];if(typeof n=="string"&&!e[An]&&!e[gg]){let r=the(n);r.length&&t.setAttribute(An,_i(r))}}function H2(t,e){t.setAttribute(le,e)}function nhe(t){let{data:e,description:n}=ae(t);if(!n)return;if(e[fv]&&e[mv]&&n==="ai.toolCall"){she(t,e);return}let r=e[Xo];typeof r!="string"||!r||ihe(t,n,e)}function rhe(t){if(t.type==="transaction"&&t.spans){let e=new Map;for(let r of t.spans)ohe(r),V2(r,e);for(let r of t.spans)r.op==="gen_ai.invoke_agent"&&_v(r,e);let n=t.contexts?.trace;n&&n.op==="gen_ai.invoke_agent"&&_v(n,e)}return t}function ohe(t){let{data:e,origin:n}=t;if(n==="auto.vercelai.otel"){Kn(e,k2,rn),Kn(e,U2,Nt),Kn(e,L2,ga),typeof e[Nt]=="number"&&typeof e[ga]=="number"&&(e[Nt]=e[Nt]+e[ga]),typeof e[rn]=="number"&&typeof e[Nt]=="number"&&(e["gen_ai.usage.total_tokens"]=e[rn]+e[Nt]),e[qp]&&Array.isArray(e[qp])&&(e[qp]=B2(e[qp])),Kn(e,v2,Wn),Kn(e,gg,An),Kn(e,C2,"gen_ai.response.text"),Kn(e,M2,"gen_ai.response.tool_calls"),Kn(e,P2,"gen_ai.response.object"),Kn(e,qp,"gen_ai.request.available_tools"),Kn(e,$2,"gen_ai.tool.input"),Kn(e,G2,"gen_ai.tool.output"),Kn(e,x2,"gen_ai.request.schema"),Kn(e,Xo,Jt),ahe(e);for(let r of Object.keys(e))r.startsWith("ai.")&&Kn(e,r,`vercel.${r}`)}}function Kn(t,e,n){t[e]!=null&&(t[n]=t[e],delete t[e])}function she(t,e){H2(t,"auto.vercelai.otel"),t.setAttribute(J,"gen_ai.execute_tool"),Kn(e,fv,"gen_ai.tool.name"),Kn(e,mv,"gen_ai.tool.call.id");let n=e["gen_ai.tool.call.id"];typeof n=="string"&&qf.set(n,t),e["gen_ai.tool.type"]||t.setAttribute("gen_ai.tool.type","function");let r=e["gen_ai.tool.name"];r&&t.updateName(`execute_tool ${r}`)}function ihe(t,e,n){H2(t,"auto.vercelai.otel");let r=e.replace("ai.","");t.setAttribute("ai.pipeline.name",r),t.updateName(r);let o=n[D2];if(o&&typeof o=="string"&&(t.updateName(`${r} ${o}`),t.setAttribute("gen_ai.function_id",o)),j2(t,n),n[Xo]&&!n[_n]&&t.setAttribute(_n,n[Xo]),t.setAttribute("ai.streaming",e.includes("stream")),e==="ai.generateText"){t.setAttribute(J,"gen_ai.invoke_agent");return}if(e==="ai.generateText.doGenerate"){t.setAttribute(J,"gen_ai.generate_text"),t.updateName(`generate_text ${n[Xo]}`);return}if(e==="ai.streamText"){t.setAttribute(J,"gen_ai.invoke_agent");return}if(e==="ai.streamText.doStream"){t.setAttribute(J,"gen_ai.stream_text"),t.updateName(`stream_text ${n[Xo]}`);return}if(e==="ai.generateObject"){t.setAttribute(J,"gen_ai.invoke_agent");return}if(e==="ai.generateObject.doGenerate"){t.setAttribute(J,"gen_ai.generate_object"),t.updateName(`generate_object ${n[Xo]}`);return}if(e==="ai.streamObject"){t.setAttribute(J,"gen_ai.invoke_agent");return}if(e==="ai.streamObject.doStream"){t.setAttribute(J,"gen_ai.stream_object"),t.updateName(`stream_object ${n[Xo]}`);return}if(e==="ai.embed"){t.setAttribute(J,"gen_ai.invoke_agent");return}if(e==="ai.embed.doEmbed"){t.setAttribute(J,"gen_ai.embed"),t.updateName(`embed ${n[Xo]}`);return}if(e==="ai.embedMany"){t.setAttribute(J,"gen_ai.invoke_agent");return}if(e==="ai.embedMany.doEmbed"){t.setAttribute(J,"gen_ai.embed_many"),t.updateName(`embed_many ${n[Xo]}`);return}if(e.startsWith("ai.stream")){t.setAttribute(J,"ai.run");return}}function Sg(t){t.on("spanStart",nhe),t.addEventProcessor(Object.assign(rhe,{id:"VercelAiEventProcessor"}))}function ahe(t){let e=t[w2];if(e)try{let n=JSON.parse(e);if(n.openai&&(es(t,ga,n.openai.cachedPromptTokens),es(t,"gen_ai.usage.output_tokens.reasoning",n.openai.reasoningTokens),es(t,"gen_ai.usage.output_tokens.prediction_accepted",n.openai.acceptedPredictionTokens),es(t,"gen_ai.usage.output_tokens.prediction_rejected",n.openai.rejectedPredictionTokens),es(t,"gen_ai.conversation.id",n.openai.responseId)),n.anthropic){let r=n.anthropic.usage?.cache_read_input_tokens??n.anthropic.cacheReadInputTokens;es(t,ga,r);let o=n.anthropic.usage?.cache_creation_input_tokens??n.anthropic.cacheCreationInputTokens;es(t,cv,o)}n.bedrock?.usage&&(es(t,ga,n.bedrock.usage.cacheReadInputTokens),es(t,cv,n.bedrock.usage.cacheWriteInputTokens)),n.deepseek&&(es(t,ga,n.deepseek.promptCacheHitTokens),es(t,"gen_ai.usage.input_tokens.cache_miss",n.deepseek.promptCacheMissTokens))}catch{}}function es(t,e,n){n!=null&&(t[e]=n)}var Aa="OpenAI",F2=["responses.create","chat.completions.create","embeddings.create"],che=["response.output_item.added","response.function_call_arguments.delta","response.function_call_arguments.done","response.output_item.done"],q2=["response.created","response.in_progress","response.failed","response.completed","response.incomplete","response.queued","response.output_text.delta",...che];function Ag(t){return t.includes("chat.completions")?fg.CHAT:t.includes("responses")?fg.RESPONSES:t.includes("embeddings")?fg.EMBEDDINGS:t.split(".").pop()||"unknown"}function Tv(t){return`gen_ai.${Ag(t)}`}function z2(t){return F2.includes(t)}function Y2(t,e){return t?`${t}.${e}`:e}function W2(t){return t!==null&&typeof t=="object"&&"object"in t&&t.object==="chat.completion"}function K2(t){return t!==null&&typeof t=="object"&&"object"in t&&t.object==="response"}function Z2(t){if(t===null||typeof t!="object"||!("object"in t))return!1;let e=t;return e.object==="list"&&typeof e.model=="string"&&e.model.toLowerCase().includes("embedding")}function J2(t){return t!==null&&typeof t=="object"&&"type"in t&&typeof t.type=="string"&&t.type.startsWith("response.")}function Q2(t){return t!==null&&typeof t=="object"&&"object"in t&&t.object==="chat.completion.chunk"}function X2(t,e,n){if(Rg(t,e.id,e.model,e.created),e.usage&&Wf(t,e.usage.prompt_tokens,e.usage.completion_tokens,e.usage.total_tokens),Array.isArray(e.choices)){let r=e.choices.map(o=>o.finish_reason).filter(o=>o!==null);if(r.length>0&&t.setAttributes({[br]:JSON.stringify(r)}),n){let o=e.choices.map(s=>s.message?.tool_calls).filter(s=>Array.isArray(s)&&s.length>0).flat();o.length>0&&t.setAttributes({[Rn]:JSON.stringify(o)})}}}function eK(t,e,n){if(Rg(t,e.id,e.model,e.created_at),e.status&&t.setAttributes({[br]:JSON.stringify([e.status])}),e.usage&&Wf(t,e.usage.input_tokens,e.usage.output_tokens,e.usage.total_tokens),n){let r=e;if(Array.isArray(r.output)&&r.output.length>0){let o=r.output.filter(s=>typeof s=="object"&&s!==null&&s.type==="function_call");o.length>0&&t.setAttributes({[Rn]:JSON.stringify(o)})}}}function tK(t,e){t.setAttributes({[uv]:e.model,[_n]:e.model}),e.usage&&Wf(t,e.usage.prompt_tokens,void 0,e.usage.total_tokens)}function Wf(t,e,n,r){e!==void 0&&t.setAttributes({[R2]:e,[Nt]:e}),n!==void 0&&t.setAttributes({[A2]:n,[rn]:n}),r!==void 0&&t.setAttributes({[Jr]:r})}function Rg(t,e,n,r){t.setAttributes({[g2]:e,[Qo]:e}),t.setAttributes({[uv]:n,[_n]:n}),t.setAttributes({[S2]:new Date(r*1e3).toISOString()})}function uhe(t,e){for(let n of t){let r=n.index;if(!(r===void 0||!n.function))if(!(r in e.chatCompletionToolCalls))e.chatCompletionToolCalls[r]={...n,function:{name:n.function.name,arguments:n.function.arguments||""}};else{let o=e.chatCompletionToolCalls[r];n.function.arguments&&o?.function&&(o.function.arguments+=n.function.arguments)}}}function phe(t,e,n){e.responseId=t.id??e.responseId,e.responseModel=t.model??e.responseModel,e.responseTimestamp=t.created??e.responseTimestamp,t.usage&&(e.promptTokens=t.usage.prompt_tokens,e.completionTokens=t.usage.completion_tokens,e.totalTokens=t.usage.total_tokens);for(let r of t.choices??[])n&&(r.delta?.content&&e.responseTexts.push(r.delta.content),r.delta?.tool_calls&&uhe(r.delta.tool_calls,e)),r.finish_reason&&e.finishReasons.push(r.finish_reason)}function lhe(t,e,n,r){if(!(t&&typeof t=="object")){e.eventTypes.push("unknown:non-object");return}if(t instanceof Error){r.setStatus({code:2,message:"internal_error"}),Ee(t,{mechanism:{handled:!1,type:"auto.ai.openai.stream-response"}});return}if(!("type"in t))return;let o=t;if(!q2.includes(o.type)){e.eventTypes.push(o.type);return}if(n&&(o.type==="response.output_item.done"&&"item"in o&&e.responsesApiToolCalls.push(o.item),o.type==="response.output_text.delta"&&"delta"in o&&o.delta)){e.responseTexts.push(o.delta);return}if("response"in o){let{response:s}=o;e.responseId=s.id??e.responseId,e.responseModel=s.model??e.responseModel,e.responseTimestamp=s.created_at??e.responseTimestamp,s.usage&&(e.promptTokens=s.usage.input_tokens,e.completionTokens=s.usage.output_tokens,e.totalTokens=s.usage.total_tokens),s.status&&e.finishReasons.push(s.status),n&&s.output_text&&e.responseTexts.push(s.output_text)}}async function*nK(t,e,n){let r={eventTypes:[],responseTexts:[],finishReasons:[],responseId:"",responseModel:"",responseTimestamp:0,promptTokens:void 0,completionTokens:void 0,totalTokens:void 0,chatCompletionToolCalls:{},responsesApiToolCalls:[]};try{for await(let o of t)Q2(o)?phe(o,r,n):J2(o)&&lhe(o,r,n,e),yield o}finally{Rg(e,r.responseId,r.responseModel,r.responseTimestamp),Wf(e,r.promptTokens,r.completionTokens,r.totalTokens),e.setAttributes({[Wc]:!0}),r.finishReasons.length&&e.setAttributes({[br]:JSON.stringify(r.finishReasons)}),n&&r.responseTexts.length&&e.setAttributes({[on]:r.responseTexts.join("")});let s=[...Object.values(r.chatCompletionToolCalls),...r.responsesApiToolCalls];s.length>0&&e.setAttributes({[Rn]:JSON.stringify(s)}),e.end()}}function dhe(t,e){let n={[ma]:"openai",[Wn]:Ag(e),[le]:"auto.ai.openai"};if(t.length>0&&typeof t[0]=="object"&&t[0]!==null){let r=t[0],o=Array.isArray(r.tools)?r.tools:[],i=r.web_search_options&&typeof r.web_search_options=="object"?[{type:"web_search_options",...r.web_search_options}]:[],a=[...o,...i];a.length>0&&(n[Ta]=JSON.stringify(a))}if(t.length>0&&typeof t[0]=="object"&&t[0]!==null){let r=t[0];n[Jt]=r.model??"unknown","temperature"in r&&(n[_a]=r.temperature),"top_p"in r&&(n[Ea]=r.top_p),"frequency_penalty"in r&&(n[ha]=r.frequency_penalty),"presence_penalty"in r&&(n[Hp]=r.presence_penalty),"stream"in r&&(n[Bp]=r.stream),"encoding_format"in r&&(n[d2]=r.encoding_format),"dimensions"in r&&(n[f2]=r.dimensions)}else n[Jt]="unknown";return n}function fhe(t,e,n){if(!e||typeof e!="object")return;let r=e;if(W2(r)){if(X2(t,r,n),n&&r.choices?.length){let o=r.choices.map(s=>s.message?.content||"");t.setAttributes({[on]:JSON.stringify(o)})}}else K2(r)?(eK(t,r,n),n&&r.output_text&&t.setAttributes({[on]:r.output_text})):Z2(r)&&tK(t,r)}function rK(t,e){if("messages"in e){let n=_i(e.messages);t.setAttributes({[An]:n})}if("input"in e){let n=_i(e.input);t.setAttributes({[An]:n})}}function mhe(t,e,n,r){return async function(...s){let i=dhe(s,e),a=i[Jt]||"unknown",c=Ag(e),u=s[0];return u&&typeof u=="object"&&u.stream===!0?Cn({name:`${c} ${a} stream-response`,op:Tv(e),attributes:i},async l=>{try{r.recordInputs&&u&&rK(l,u);let d=await t.apply(n,s);return nK(d,l,r.recordOutputs??!1)}catch(d){throw l.setStatus({code:2,message:"internal_error"}),Ee(d,{mechanism:{handled:!1,type:"auto.ai.openai.stream",data:{function:e}}}),l.end(),d}}):Kr({name:`${c} ${a}`,op:Tv(e),attributes:i},async l=>{try{r.recordInputs&&u&&rK(l,u);let d=await t.apply(n,s);return fhe(l,d,r.recordOutputs),d}catch(d){throw Ee(d,{mechanism:{handled:!1,type:"auto.ai.openai",data:{function:e}}}),d}})}}function oK(t,e="",n){return new Proxy(t,{get(r,o){let s=r[o],i=Y2(e,String(o));return typeof s=="function"&&z2(i)?mhe(s,i,r,n):typeof s=="function"?s.bind(r):s&&typeof s=="object"?oK(s,i,n):s}})}function yg(t,e){let n=!!$()?.getOptions().sendDefaultPii,r={recordInputs:n,recordOutputs:n,...e};return oK(t,"",r)}function _he(t,e){return"type"in t&&typeof t.type=="string"&&t.type==="error"?(e.setStatus({code:2,message:t.error?.type??"internal_error"}),Ee(t.error,{mechanism:{handled:!1,type:"auto.ai.anthropic.anthropic_error"}}),!0):!1}function hhe(t,e){if(t.type==="message_delta"&&t.usage&&"output_tokens"in t.usage&&typeof t.usage.output_tokens=="number"&&(e.completionTokens=t.usage.output_tokens),t.message){let n=t.message;n.id&&(e.responseId=n.id),n.model&&(e.responseModel=n.model),n.stop_reason&&e.finishReasons.push(n.stop_reason),n.usage&&(typeof n.usage.input_tokens=="number"&&(e.promptTokens=n.usage.input_tokens),typeof n.usage.cache_creation_input_tokens=="number"&&(e.cacheCreationInputTokens=n.usage.cache_creation_input_tokens),typeof n.usage.cache_read_input_tokens=="number"&&(e.cacheReadInputTokens=n.usage.cache_read_input_tokens))}}function Ehe(t,e){t.type!=="content_block_start"||typeof t.index!="number"||!t.content_block||(t.content_block.type==="tool_use"||t.content_block.type==="server_tool_use")&&(e.activeToolBlocks[t.index]={id:t.content_block.id,name:t.content_block.name,inputJsonParts:[]})}function The(t,e,n){if(!(t.type!=="content_block_delta"||!t.delta)){if(typeof t.index=="number"&&"partial_json"in t.delta&&typeof t.delta.partial_json=="string"){let r=e.activeToolBlocks[t.index];r&&r.inputJsonParts.push(t.delta.partial_json)}n&&typeof t.delta.text=="string"&&e.responseTexts.push(t.delta.text)}}function ghe(t,e){if(t.type!=="content_block_stop"||typeof t.index!="number")return;let n=e.activeToolBlocks[t.index];if(!n)return;let r=n.inputJsonParts.join(""),o;try{o=r?JSON.parse(r):{}}catch{o={__unparsed:r}}e.toolCalls.push({type:"tool_use",id:n.id,name:n.name,input:o}),delete e.activeToolBlocks[t.index]}function sK(t,e,n,r){!(t&&typeof t=="object")||_he(t,r)||(hhe(t,e),Ehe(t,e),The(t,e,n),ghe(t,e))}function She(t,e,n){e.isRecording()&&(t.responseId&&e.setAttributes({[Qo]:t.responseId}),t.responseModel&&e.setAttributes({[_n]:t.responseModel}),Yf(e,t.promptTokens,t.completionTokens,t.cacheCreationInputTokens,t.cacheReadInputTokens),e.setAttributes({[Wc]:!0}),t.finishReasons.length>0&&e.setAttributes({[br]:JSON.stringify(t.finishReasons)}),n&&t.responseTexts.length>0&&e.setAttributes({[on]:t.responseTexts.join("")}),n&&t.toolCalls.length>0&&e.setAttributes({[Rn]:JSON.stringify(t.toolCalls)}),e.end())}async function*iK(t,e,n){let r={responseTexts:[],finishReasons:[],responseId:"",responseModel:"",promptTokens:void 0,completionTokens:void 0,cacheCreationInputTokens:void 0,cacheReadInputTokens:void 0,toolCalls:[],activeToolBlocks:{}};try{for await(let o of t)sK(o,r,n,e),yield o}finally{r.responseId&&e.setAttributes({[Qo]:r.responseId}),r.responseModel&&e.setAttributes({[_n]:r.responseModel}),Yf(e,r.promptTokens,r.completionTokens,r.cacheCreationInputTokens,r.cacheReadInputTokens),e.setAttributes({[Wc]:!0}),r.finishReasons.length>0&&e.setAttributes({[br]:JSON.stringify(r.finishReasons)}),n&&r.responseTexts.length>0&&e.setAttributes({[on]:r.responseTexts.join("")}),n&&r.toolCalls.length>0&&e.setAttributes({[Rn]:JSON.stringify(r.toolCalls)}),e.end()}}function aK(t,e,n){let r={responseTexts:[],finishReasons:[],responseId:"",responseModel:"",promptTokens:void 0,completionTokens:void 0,cacheCreationInputTokens:void 0,cacheReadInputTokens:void 0,toolCalls:[],activeToolBlocks:{}};return t.on("streamEvent",o=>{sK(o,r,n,e)}),t.on("message",()=>{She(r,e,n)}),t.on("error",o=>{Ee(o,{mechanism:{handled:!1,type:"auto.ai.anthropic.stream_error"}}),e.isRecording()&&(e.setStatus({code:2,message:"stream_error"}),e.end())}),t}var Ra="Anthropic_AI",cK=["messages.create","messages.stream","messages.countTokens","models.get","completions.create","models.retrieve","beta.messages.create"];function uK(t){return cK.includes(t)}function pK(t,e){e.error&&(t.setStatus({code:2,message:e.error.type||"internal_error"}),Ee(e.error,{mechanism:{handled:!1,type:"auto.ai.anthropic.anthropic_error"}}))}function lK(t){let{system:e,messages:n}=t,r=typeof e=="string"?[{role:"system",content:t.system}]:[],o=Array.isArray(n)?n:n!=null?[n]:[];return[...r,...o]}function Ahe(t,e){let n={[ma]:"anthropic",[Wn]:Kc(e),[le]:"auto.ai.anthropic"};if(t.length>0&&typeof t[0]=="object"&&t[0]!==null){let r=t[0];r.tools&&Array.isArray(r.tools)&&(n[Ta]=JSON.stringify(r.tools)),n[Jt]=r.model??"unknown","temperature"in r&&(n[_a]=r.temperature),"top_p"in r&&(n[Ea]=r.top_p),"stream"in r&&(n[Bp]=r.stream),"top_k"in r&&(n[dg]=r.top_k),"frequency_penalty"in r&&(n[ha]=r.frequency_penalty),"max_tokens"in r&&(n[jp]=r.max_tokens)}else e==="models.retrieve"||e==="models.get"?n[Jt]=t[0]:n[Jt]="unknown";return n}function gv(t,e){let n=lK(e);if(n.length){let r=_i(n);t.setAttributes({[An]:r})}if("input"in e){let r=_i(e.input);t.setAttributes({[An]:r})}"prompt"in e&&t.setAttributes({[l2]:JSON.stringify(e.prompt)})}function Rhe(t,e){if("content"in e&&Array.isArray(e.content)){t.setAttributes({[on]:e.content.map(r=>r.text).filter(r=>!!r).join("")});let n=[];for(let r of e.content)(r.type==="tool_use"||r.type==="server_tool_use")&&n.push(r);n.length>0&&t.setAttributes({[Rn]:JSON.stringify(n)})}"completion"in e&&t.setAttributes({[on]:e.completion}),"input_tokens"in e&&t.setAttributes({[on]:JSON.stringify(e.input_tokens)})}function yhe(t,e){"id"in e&&"model"in e&&(t.setAttributes({[Qo]:e.id,[_n]:e.model}),"created"in e&&typeof e.created=="number"&&t.setAttributes({[pv]:new Date(e.created*1e3).toISOString()}),"created_at"in e&&typeof e.created_at=="number"&&t.setAttributes({[pv]:new Date(e.created_at*1e3).toISOString()}),"usage"in e&&e.usage&&Yf(t,e.usage.input_tokens,e.usage.output_tokens,e.usage.cache_creation_input_tokens,e.usage.cache_read_input_tokens))}function bhe(t,e,n){if(!(!e||typeof e!="object")){if("type"in e&&e.type==="error"){pK(t,e);return}n&&Rhe(t,e),yhe(t,e)}}function dK(t,e,n){throw Ee(t,{mechanism:{handled:!1,type:"auto.ai.anthropic",data:{function:n}}}),e.isRecording()&&(e.setStatus({code:2,message:"internal_error"}),e.end()),t}function Nhe(t,e,n,r,o,s,i,a,c,u,p){let l=o[Jt]??"unknown",d={name:`${s} ${l} stream-response`,op:Fp(i),attributes:o};return u&&!p?Cn(d,async f=>{try{c.recordInputs&&a&&gv(f,a);let m=await t.apply(n,r);return iK(m,f,c.recordOutputs??!1)}catch(m){return dK(m,f,i)}}):Cn(d,f=>{try{c.recordInputs&&a&&gv(f,a);let m=e.apply(n,r);return aK(m,f,c.recordOutputs??!1)}catch(m){return dK(m,f,i)}})}function Ohe(t,e,n,r){return new Proxy(t,{apply(o,s,i){let a=Ahe(i,e),c=a[Jt]??"unknown",u=Kc(e),p=typeof i[0]=="object"?i[0]:void 0,l=!!p?.stream,d=e==="messages.stream";return l||d?Nhe(t,o,n,i,a,u,e,p,r,l,d):Kr({name:`${u} ${c}`,op:Fp(e),attributes:a},f=>(r.recordInputs&&p&&gv(f,p),Wr(()=>o.apply(n,i),m=>{Ee(m,{mechanism:{handled:!1,type:"auto.ai.anthropic",data:{function:e}}})},()=>{},m=>bhe(f,m,r.recordOutputs))))}})}function fK(t,e="",n){return new Proxy(t,{get(r,o){let s=r[o],i=Eg(e,String(o));return typeof s=="function"&&uK(i)?Ohe(s,i,r,n):typeof s=="function"?s.bind(r):s&&typeof s=="object"?fK(s,i,n):s}})}function Sv(t,e){let n=!!$()?.getOptions().sendDefaultPii,r={recordInputs:n,recordOutputs:n,...e};return fK(t,"",r)}var ya="Google_GenAI",Av=["models.generateContent","models.generateContentStream","chats.create","sendMessage","sendMessageStream"],mK="google_genai",Rv="chats.create",_K="chat";function Ihe(t,e){let n=t?.promptFeedback;if(n?.blockReason){let r=n.blockReasonMessage??n.blockReason;return e.setStatus({code:2,message:`Content blocked: ${r}`}),Ee(`Content blocked: ${r}`,{mechanism:{handled:!1,type:"auto.ai.google_genai"}}),!0}return!1}function vhe(t,e){typeof t.responseId=="string"&&(e.responseId=t.responseId),typeof t.modelVersion=="string"&&(e.responseModel=t.modelVersion);let n=t.usageMetadata;n&&(typeof n.promptTokenCount=="number"&&(e.promptTokens=n.promptTokenCount),typeof n.candidatesTokenCount=="number"&&(e.completionTokens=n.candidatesTokenCount),typeof n.totalTokenCount=="number"&&(e.totalTokens=n.totalTokenCount))}function xhe(t,e,n){Array.isArray(t.functionCalls)&&e.toolCalls.push(...t.functionCalls);for(let r of t.candidates??[]){r?.finishReason&&!e.finishReasons.includes(r.finishReason)&&e.finishReasons.push(r.finishReason);for(let o of r?.content?.parts??[])n&&o.text&&e.responseTexts.push(o.text),o.functionCall&&e.toolCalls.push({type:"function",id:o.functionCall.id,name:o.functionCall.name,arguments:o.functionCall.args})}}function Phe(t,e,n,r){!t||Ihe(t,r)||(vhe(t,e),xhe(t,e,n))}async function*hK(t,e,n){let r={responseTexts:[],finishReasons:[],toolCalls:[]};try{for await(let o of t)Phe(o,r,n,e),yield o}finally{let o={[Wc]:!0};r.responseId&&(o[Qo]=r.responseId),r.responseModel&&(o[_n]=r.responseModel),r.promptTokens!==void 0&&(o[Nt]=r.promptTokens),r.completionTokens!==void 0&&(o[rn]=r.completionTokens),r.totalTokens!==void 0&&(o[Jr]=r.totalTokens),r.finishReasons.length&&(o[br]=JSON.stringify(r.finishReasons)),n&&r.responseTexts.length&&(o[on]=r.responseTexts.join("")),n&&r.toolCalls.length&&(o[Rn]=JSON.stringify(r.toolCalls)),e.setAttributes(o),e.end()}}function EK(t){if(Av.includes(t))return!0;let e=t.split(".").pop();return Av.includes(e)}function TK(t){return t.includes("Stream")}function zp(t,e="user"){return typeof t=="string"?[{role:e,content:t}]:Array.isArray(t)?t.flatMap(n=>zp(n,e)):typeof t!="object"||!t?[]:"role"in t&&typeof t.role=="string"?[t]:"parts"in t?[{...t,role:e}]:[{role:e,content:t}]}function gK(t,e){if("model"in t&&typeof t.model=="string")return t.model;if(e&&typeof e=="object"){let n=e;if("model"in n&&typeof n.model=="string")return n.model;if("modelVersion"in n&&typeof n.modelVersion=="string")return n.modelVersion}return"unknown"}function Che(t){let e={};return"temperature"in t&&typeof t.temperature=="number"&&(e[_a]=t.temperature),"topP"in t&&typeof t.topP=="number"&&(e[Ea]=t.topP),"topK"in t&&typeof t.topK=="number"&&(e[dg]=t.topK),"maxOutputTokens"in t&&typeof t.maxOutputTokens=="number"&&(e[jp]=t.maxOutputTokens),"frequencyPenalty"in t&&typeof t.frequencyPenalty=="number"&&(e[ha]=t.frequencyPenalty),"presencePenalty"in t&&typeof t.presencePenalty=="number"&&(e[Hp]=t.presencePenalty),e}function Mhe(t,e,n){let r={[ma]:mK,[Wn]:Kc(t),[le]:"auto.ai.google_genai"};if(e){if(r[Jt]=gK(e,n),"config"in e&&typeof e.config=="object"&&e.config){let o=e.config;if(Object.assign(r,Che(o)),"tools"in o&&Array.isArray(o.tools)){let s=o.tools.flatMap(i=>i.functionDeclarations);r[Ta]=JSON.stringify(s)}}}else r[Jt]=gK({},n);return r}function SK(t,e){let n=[];"config"in e&&e.config&&typeof e.config=="object"&&"systemInstruction"in e.config&&e.config.systemInstruction&&n.push(...zp(e.config.systemInstruction,"system")),"history"in e&&n.push(...zp(e.history,"user")),"contents"in e&&n.push(...zp(e.contents,"user")),"message"in e&&n.push(...zp(e.message,"user")),n.length&&t.setAttributes({[An]:JSON.stringify(Sa(n))})}function whe(t,e,n){if(!(!e||typeof e!="object")){if(e.modelVersion&&t.setAttribute(_n,e.modelVersion),e.usageMetadata&&typeof e.usageMetadata=="object"){let r=e.usageMetadata;typeof r.promptTokenCount=="number"&&t.setAttributes({[Nt]:r.promptTokenCount}),typeof r.candidatesTokenCount=="number"&&t.setAttributes({[rn]:r.candidatesTokenCount}),typeof r.totalTokenCount=="number"&&t.setAttributes({[Jr]:r.totalTokenCount})}if(n&&Array.isArray(e.candidates)&&e.candidates.length>0){let r=e.candidates.map(o=>o.content?.parts&&Array.isArray(o.content.parts)?o.content.parts.map(s=>typeof s.text=="string"?s.text:"").filter(s=>s.length>0).join(""):"").filter(o=>o.length>0);r.length>0&&t.setAttributes({[on]:r.join("")})}if(n&&e.functionCalls){let r=e.functionCalls;Array.isArray(r)&&r.length>0&&t.setAttributes({[Rn]:JSON.stringify(r)})}}}function AK(t,e,n,r){let o=e===Rv;return new Proxy(t,{apply(s,i,a){let c=a[0],u=Mhe(e,c,n),p=u[Jt]??"unknown",l=Kc(e);return TK(e)?Cn({name:`${l} ${p} stream-response`,op:Fp(e),attributes:u},async d=>{try{r.recordInputs&&c&&SK(d,c);let f=await s.apply(n,a);return hK(f,d,!!r.recordOutputs)}catch(f){throw d.setStatus({code:2,message:"internal_error"}),Ee(f,{mechanism:{handled:!1,type:"auto.ai.google_genai",data:{function:e}}}),d.end(),f}}):Kr({name:o?`${l} ${p} create`:`${l} ${p}`,op:Fp(e),attributes:u},d=>(r.recordInputs&&c&&SK(d,c),Wr(()=>s.apply(n,a),f=>{Ee(f,{mechanism:{handled:!1,type:"auto.ai.google_genai",data:{function:e}}})},()=>{},f=>{o||whe(d,f,r.recordOutputs)})))}})}function yv(t,e="",n){return new Proxy(t,{get:(r,o,s)=>{let i=Reflect.get(r,o,s),a=Eg(e,String(o));if(typeof i=="function"&&EK(a)){if(a===Rv){let c=AK(i,a,r,n);return function(...p){let l=c(...p);return l&&typeof l=="object"?yv(l,_K,n):l}}return AK(i,a,r,n)}return typeof i=="function"?i.bind(r):i&&typeof i=="object"?yv(i,a,n):i}})}function bv(t,e){let n=!!$()?.getOptions().sendDefaultPii,r={recordInputs:n,recordOutputs:n,...e};return yv(t,"",r)}var bg="LangChain",Zc="auto.ai.langchain",RK={human:"user",ai:"assistant",assistant:"assistant",system:"system",function:"function",tool:"tool"};var hi=(t,e,n)=>{n!=null&&(t[e]=n)},Qr=(t,e,n)=>{let r=Number(n);Number.isNaN(r)||(t[e]=r)};function Nr(t){if(typeof t=="string")return t;try{return JSON.stringify(t)}catch{return String(t)}}function Kf(t){let e=t.toLowerCase();return RK[e]??e}function yK(t){return t.includes("System")?"system":t.includes("Human")?"user":t.includes("AI")||t.includes("Assistant")?"assistant":t.includes("Function")?"function":t.includes("Tool")?"tool":"user"}function Nv(t){if(!(!t||Array.isArray(t)))return t.invocation_params}function Zf(t){return t.map(e=>{let n=e._getType;if(typeof n=="function"){let o=n.call(e);return{role:Kf(o),content:Nr(e.content)}}let r=e.constructor?.name;if(r)return{role:Kf(yK(r)),content:Nr(e.content)};if(e.type){let o=String(e.type).toLowerCase();return{role:Kf(o),content:Nr(e.content)}}if(e.role)return{role:Kf(String(e.role)),content:Nr(e.content)};if(e.lc===1&&e.kwargs){let o=e.id,s=Array.isArray(o)&&o.length>0?o[o.length-1]:"",i=typeof s=="string"?yK(s):"user";return{role:Kf(i),content:Nr(e.kwargs?.content)}}return{role:"user",content:Nr(e.content)}})}function Lhe(t,e,n){let r={},o="kwargs"in t?t.kwargs:void 0,s=e?.temperature??n?.ls_temperature??o?.temperature;Qr(r,_a,s);let i=e?.max_tokens??n?.ls_max_tokens??o?.max_tokens;Qr(r,jp,i);let a=e?.top_p??o?.top_p;Qr(r,Ea,a);let c=e?.frequency_penalty;Qr(r,ha,c);let u=e?.presence_penalty;return Qr(r,Hp,u),e&&"stream"in e&&hi(r,Bp,!!e.stream),r}function bK(t,e,n,r,o,s){return{[ma]:Nr(t??"langchain"),[Wn]:n,[Jt]:Nr(e),[le]:Zc,...Lhe(r,o,s)}}function NK(t,e,n,r,o){let s=o?.ls_provider,i=r?.model??o?.ls_model_name??"unknown",a=bK(s,i,"pipeline",t,r,o);if(n&&Array.isArray(e)&&e.length>0){let c=e.map(u=>({role:"user",content:u}));hi(a,An,Nr(c))}return a}function OK(t,e,n,r,o){let s=o?.ls_provider??t.id?.[2],i=r?.model??o?.ls_model_name??"unknown",a=bK(s,i,"chat",t,r,o);if(n&&Array.isArray(e)&&e.length>0){let c=Zf(e.flat()),u=Sa(c);hi(a,An,Nr(u))}return a}function Dhe(t,e){let n=[],r=t.flat();for(let o of r){let s=o.message?.content;if(Array.isArray(s))for(let i of s){let a=i;a.type==="tool_use"&&n.push(a)}}n.length>0&&hi(e,Rn,Nr(n))}function khe(t,e){if(!t)return;let n=t.tokenUsage,r=t.usage;if(n)Qr(e,Nt,n.promptTokens),Qr(e,rn,n.completionTokens),Qr(e,Jr,n.totalTokens);else if(r){Qr(e,Nt,r.input_tokens),Qr(e,rn,r.output_tokens);let o=Number(r.input_tokens),s=Number(r.output_tokens),i=(Number.isNaN(o)?0:o)+(Number.isNaN(s)?0:s);i>0&&Qr(e,Jr,i),r.cache_creation_input_tokens!==void 0&&Qr(e,h2,r.cache_creation_input_tokens),r.cache_read_input_tokens!==void 0&&Qr(e,E2,r.cache_read_input_tokens)}}function IK(t,e){if(!t)return;let n={};if(Array.isArray(t.generations)){let u=t.generations.flat().map(p=>p.generationInfo?.finish_reason?p.generationInfo.finish_reason:p.generation_info?.finish_reason?p.generation_info.finish_reason:null).filter(p=>typeof p=="string");if(u.length>0&&hi(n,br,Nr(u)),Dhe(t.generations,n),e){let p=t.generations.flat().map(l=>l.text??l.message?.content).filter(l=>typeof l=="string");p.length>0&&hi(n,on,Nr(p))}}khe(t.llmOutput,n);let r=t.llmOutput,s=t.generations?.[0]?.[0]?.message,i=r?.model_name??r?.model??s?.response_metadata?.model_name;i&&hi(n,_n,i);let a=r?.id??s?.id;a&&hi(n,Qo,a);let c=r?.stop_reason??s?.response_metadata?.finish_reason;return c&&hi(n,m2,Nr(c)),n}function Ng(t={}){let e=t.recordInputs??!1,n=t.recordOutputs??!1,r=new Map,o=i=>{let a=r.get(i);a?.isRecording()&&(a.end(),r.delete(i))},s={lc_serializable:!1,lc_namespace:["langchain_core","callbacks","sentry"],lc_secrets:void 0,lc_attributes:void 0,lc_aliases:void 0,lc_serializable_keys:void 0,lc_id:["langchain_core","callbacks","sentry"],lc_kwargs:{},name:"SentryCallbackHandler",ignoreLLM:!1,ignoreChain:!1,ignoreAgent:!1,ignoreRetriever:!1,ignoreCustomEvent:!1,raiseError:!1,awaitHandlers:!0,handleLLMStart(i,a,c,u,p,l,d,f){let m=Nv(l),h=NK(i,a,e,m,d),E=h[Jt],A=h[Wn];Cn({name:`${A} ${E}`,op:"gen_ai.pipeline",attributes:{...h,[J]:"gen_ai.pipeline"}},R=>(r.set(c,R),R))},handleChatModelStart(i,a,c,u,p,l,d,f){let m=Nv(l),h=OK(i,a,e,m,d),E=h[Jt],A=h[Wn];Cn({name:`${A} ${E}`,op:"gen_ai.chat",attributes:{...h,[J]:"gen_ai.chat"}},R=>(r.set(c,R),R))},handleLLMEnd(i,a,c,u,p){let l=r.get(a);if(l?.isRecording()){let d=IK(i,n);d&&l.setAttributes(d),o(a)}},handleLLMError(i,a){let c=r.get(a);c?.isRecording()&&(c.setStatus({code:2,message:"llm_error"}),o(a)),Ee(i,{mechanism:{handled:!1,type:`${Zc}.llm_error_handler`}})},handleChainStart(i,a,c,u){let p=i.name||"unknown_chain",l={[le]:"auto.ai.langchain","langchain.chain.name":p};e&&(l["langchain.chain.inputs"]=JSON.stringify(a)),Cn({name:`chain ${p}`,op:"gen_ai.invoke_agent",attributes:{...l,[J]:"gen_ai.invoke_agent"}},d=>(r.set(c,d),d))},handleChainEnd(i,a){let c=r.get(a);c?.isRecording()&&(n&&c.setAttributes({"langchain.chain.outputs":JSON.stringify(i)}),o(a))},handleChainError(i,a){let c=r.get(a);c?.isRecording()&&(c.setStatus({code:2,message:"chain_error"}),o(a)),Ee(i,{mechanism:{handled:!1,type:`${Zc}.chain_error_handler`}})},handleToolStart(i,a,c,u){let p=i.name||"unknown_tool",l={[le]:Zc,"gen_ai.tool.name":p};e&&(l["gen_ai.tool.input"]=a),Cn({name:`execute_tool ${p}`,op:"gen_ai.execute_tool",attributes:{...l,[J]:"gen_ai.execute_tool"}},d=>(r.set(c,d),d))},handleToolEnd(i,a){let c=r.get(a);c?.isRecording()&&(n&&c.setAttributes({"gen_ai.tool.output":JSON.stringify(i)}),o(a))},handleToolError(i,a){let c=r.get(a);c?.isRecording()&&(c.setStatus({code:2,message:"tool_error"}),o(a)),Ee(i,{mechanism:{handled:!1,type:`${Zc}.tool_error_handler`}})},copy(){return s},toJSON(){return{lc:1,type:"not_implemented",id:s.lc_id}},toJSONNotImplemented(){return{lc:1,type:"not_implemented",id:s.lc_id}}};return s}var Og="LangGraph",Ov="auto.ai.langgraph";function Uhe(t){if(!t||t.length===0)return null;let e=[];for(let n of t)if(n&&typeof n=="object"){let r=n.tool_calls;r&&Array.isArray(r)&&e.push(...r)}return e.length>0?e:null}function $he(t){let e=t,n=0,r=0,o=0;if(e.usage_metadata&&typeof e.usage_metadata=="object"){let s=e.usage_metadata;return typeof s.input_tokens=="number"&&(n=s.input_tokens),typeof s.output_tokens=="number"&&(r=s.output_tokens),typeof s.total_tokens=="number"&&(o=s.total_tokens),{inputTokens:n,outputTokens:r,totalTokens:o}}if(e.response_metadata&&typeof e.response_metadata=="object"){let s=e.response_metadata;if(s.tokenUsage&&typeof s.tokenUsage=="object"){let i=s.tokenUsage;typeof i.promptTokens=="number"&&(n=i.promptTokens),typeof i.completionTokens=="number"&&(r=i.completionTokens),typeof i.totalTokens=="number"&&(o=i.totalTokens)}}return{inputTokens:n,outputTokens:r,totalTokens:o}}function Ghe(t,e){let n=e;if(n.response_metadata&&typeof n.response_metadata=="object"){let r=n.response_metadata;r.model_name&&typeof r.model_name=="string"&&t.setAttribute(_n,r.model_name),r.finish_reason&&typeof r.finish_reason=="string"&&t.setAttribute(br,[r.finish_reason])}}function vK(t){if(!t.builder?.nodes?.tools?.runnable?.tools)return null;let e=t.builder?.nodes?.tools?.runnable?.tools;return!e||!Array.isArray(e)||e.length===0?null:e.map(n=>({name:n.lc_kwargs?.name,description:n.lc_kwargs?.description,schema:n.lc_kwargs?.schema}))}function xK(t,e,n){let o=n?.messages;if(!o||!Array.isArray(o))return;let s=e?.length??0,i=o.length>s?o.slice(s):[];if(i.length===0)return;let a=Uhe(i);a&&t.setAttribute(Rn,JSON.stringify(a));let c=Zf(i);t.setAttribute(on,JSON.stringify(c));let u=0,p=0,l=0;for(let d of i){let f=$he(d);u+=f.inputTokens,p+=f.outputTokens,l+=f.totalTokens,Ghe(t,d)}u>0&&t.setAttribute(Nt,u),p>0&&t.setAttribute(rn,p),l>0&&t.setAttribute(Jr,l)}function Iv(t,e){return new Proxy(t,{apply(n,r,o){return Kr({op:"gen_ai.create_agent",name:"create_agent",attributes:{[le]:Ov,[J]:"gen_ai.create_agent",[Wn]:"create_agent"}},s=>{try{let i=Reflect.apply(n,r,o),a=o.length>0?o[0]:{};a?.name&&typeof a.name=="string"&&(s.setAttribute(av,a.name),s.updateName(`create_agent ${a.name}`));let c=i.invoke;return c&&typeof c=="function"&&(i.invoke=Vhe(c.bind(i),i,a,e)),i}catch(i){throw s.setStatus({code:2,message:"internal_error"}),Ee(i,{mechanism:{handled:!1,type:"auto.ai.langgraph.error"}}),i}})}})}function Vhe(t,e,n,r){return new Proxy(t,{apply(o,s,i){return Kr({op:"gen_ai.invoke_agent",name:"invoke_agent",attributes:{[le]:Ov,[J]:T2,[Wn]:"invoke_agent"}},async a=>{try{let c=n?.name;c&&typeof c=="string"&&(a.setAttribute(_2,c),a.setAttribute(av,c),a.updateName(`invoke_agent ${c}`));let u=vK(e);u&&a.setAttribute(Ta,JSON.stringify(u));let p=r.recordInputs,l=r.recordOutputs,d=i.length>0?i[0].messages??[]:[];if(d&&p){let m=Zf(d),h=Sa(m);a.setAttribute(An,JSON.stringify(h))}let f=await Reflect.apply(o,s,i);return l&&xK(a,d??null,f),f}catch(c){throw a.setStatus({code:2,message:"internal_error"}),Ee(c,{mechanism:{handled:!1,type:"auto.ai.langgraph.error"}}),c}})}})}function Jf(t){if(t!==void 0)return t>=400&&t<500?"warning":t>=500?"error":void 0}function Qf(t,e,n){let r=t[e];if(typeof r=="function"){try{t[e]=n}catch{Object.defineProperty(t,e,{value:n,writable:!0,configurable:!0,enumerable:!0})}if(t.default===r)try{t.default=n}catch{Object.defineProperty(t,"default",{value:n,writable:!0,configurable:!0,enumerable:!0})}}}function CK(t,e=!1){return!(e||t&&!t.startsWith("/")&&!t.match(/^[A-Z]:/)&&!t.startsWith(".")&&!t.match(/^[a-zA-Z]([a-zA-Z0-9.\-+])*:\/\//))&&t!==void 0&&!t.includes("node_modules/")}function MK(t){let e=/^\s*[-]{4,}$/,n=/at (?:async )?(?:(.+?)\s+\()?(?:(.+):(\d+):(\d+)?|([^)]+))\)?/,r=/at (?:async )?(.+?) \(data:(.*?),/;return o=>{let s=o.match(r);if(s)return{filename:`<data:${s[2]}>`,function:s[1]};let i=o.match(n);if(i){let a,c,u,p,l;if(i[1]){u=i[1];let m=u.lastIndexOf(".");if(u[m-1]==="."&&m--,m>0){a=u.slice(0,m),c=u.slice(m+1);let h=a.indexOf(".Module");h>0&&(u=u.slice(h+1),a=a.slice(0,h))}p=void 0}c&&(p=a,l=c),c==="<anonymous>"&&(l=void 0,u=void 0),u===void 0&&(l=l||"?",u=p?`${p}.${l}`:l);let d=i[2]?.startsWith("file://")?i[2].slice(7):i[2],f=i[5]==="native";return d?.match(/\/[A-Z]:/)&&(d=d.slice(1)),!d&&i[5]&&!f&&(d=i[5]),{filename:d?decodeURI(d):void 0,module:t?t(d):void 0,function:u,lineno:PK(i[3]),colno:PK(i[4]),in_app:CK(d||"",f)}}if(o.match(e))return{filename:o}}}function vv(t){return[90,MK(t)]}function PK(t){return parseInt(t||"",10)||void 0}var Or=class{constructor(e){this._maxSize=e,this._cache=new Map}get size(){return this._cache.size}get(e){let n=this._cache.get(e);if(n!==void 0)return this._cache.delete(e),this._cache.set(e,n),n}set(e,n){if(this._cache.size>=this._maxSize){let r=this._cache.keys().next().value;this._cache.delete(r)}this._cache.set(e,n)}remove(e){let n=this._cache.get(e);return n&&this._cache.delete(e),n}clear(){this._cache.clear()}keys(){return Array.from(this._cache.keys())}values(){let e=[];return this._cache.forEach(n=>e.push(n)),e}};var xv=k(_e(),1),Xf={};function Y(t,e,n){return n?lEe(t,e,n):pEe(t,e)}function pEe(t,e){return Object.assign(n=>{let r=Xf[t];if(r)return n&&r.setConfig(n),r;let o=e(n);return Xf[t]=o,(0,xv.registerInstrumentations)({instrumentations:[o]}),o},{id:t})}function lEe(t,e,n){return Object.assign(r=>{let o=n(r),s=Xf[t];if(s)return s.setConfig(o),s;let i=new e(o);return Xf[t]=i,(0,xv.registerInstrumentations)({instrumentations:[i]}),i},{id:t})}function em(t){let e=!1,n=[];if(!dEe(t))e=!0;else{let o=t._wrap;t._wrap=(...s)=>(e=!0,n.forEach(i=>i()),n=[],o(...s))}return o=>{e?o():n.push(o)}}function dEe(t){return typeof t._wrap=="function"}var Na=k(U(),1);import{subscribe as fEe}from"node:diagnostics_channel";var Se=typeof __SENTRY_DEBUG__>"u"||__SENTRY_DEBUG__;var Ps="@sentry/instrumentation-http";var wK=(0,Na.createContextKey)("sentry_http_server_instrumented"),ba="Http.Server",Pv=new Map,LK=new WeakSet;function DK(t,e){nn(t,"_startSpanCallback",new WeakRef(e))}var mEe=((t={})=>{let e={sessions:t.sessions??!0,sessionFlushingDelayMS:t.sessionFlushingDelayMS??6e4,maxRequestBodySize:t.maxRequestBodySize??"medium",ignoreRequestBody:t.ignoreRequestBody};return{name:ba,setupOnce(){fEe("http.server.request.start",(r=>{_Ee(r.server,e)}))},afterAllSetup(n){Se&&n.getIntegrationByName("Http")&&N.warn("It seems that you have manually added `httpServerIntegration` while `httpIntegration` is also present. Make sure to remove `httpServerIntegration` when adding `httpIntegration`.")}}}),tm=mEe;function _Ee(t,{ignoreRequestBody:e,maxRequestBodySize:n,sessions:r,sessionFlushingDelayMS:o}){let s=t.emit;if(LK.has(s))return;let i=new Proxy(s,{apply(a,c,u){if(u[0]!=="request")return a.apply(c,u);let p=$();if(Na.context.active().getValue(wK)||!p)return a.apply(c,u);Se&&N.log(ba,"Handling incoming request");let l=ve().clone(),d=u[1],f=u[2],m=jf(d),h=d.ip||d.socket?.remoteAddress,E=d.url||"/";n!=="none"&&!e?.(E,d)&&EEe(d,l,n),l.setSDKProcessingMetadata({normalizedRequest:m,ipAddress:h});let A=(d.method||"GET").toUpperCase(),R=fi(E),y=`${A} ${R}`;return l.setTransactionName(y),r&&p&&hEe(p,{requestIsolationScope:l,response:f,sessionFlushingDelayMS:o??6e4}),Dc(l,()=>{Ye().getPropagationContext().propagationSpanId=Ar();let O=Na.propagation.extract(Na.context.active(),m.headers).setValue(wK,!0);return Na.context.with(O,()=>{p.emit("httpServerRequest",d,f,m);let P=d._startSpanCallback?.deref();return P?P(()=>a.apply(c,u)):a.apply(c,u)})})}});LK.add(i),t.emit=i}function hEe(t,{requestIsolationScope:e,response:n,sessionFlushingDelayMS:r}){e.setSDKProcessingMetadata({requestSession:{status:"ok"}}),n.once("close",()=>{let o=e.getScopeData().sdkProcessingMetadata.requestSession;if(t&&o){Se&&N.log(`Recorded request session with status: ${o.status}`);let s=new Date;s.setSeconds(0,0);let i=s.toISOString(),a=Pv.get(t),c=a?.[i]||{exited:0,crashed:0,errored:0};if(c[{ok:"exited",crashed:"crashed",errored:"errored"}[o.status]]++,a)a[i]=c;else{Se&&N.log("Opened new request session aggregate.");let u={[i]:c};Pv.set(t,u);let p=()=>{clearTimeout(d),l(),Pv.delete(t);let f=Object.entries(u).map(([m,h])=>({started:m,exited:h.exited,errored:h.errored,crashed:h.crashed}));t.sendSession({aggregates:f})},l=t.on("flush",()=>{Se&&N.log("Sending request session aggregate due to client flush"),p()}),d=setTimeout(()=>{Se&&N.log("Sending request session aggregate due to flushing schedule"),p()},r).unref()}}})}function EEe(t,e,n){let r=0,o=[];Se&&N.log(ba,"Patching request.on");let s=new WeakMap,i=n==="small"?1e3:n==="medium"?1e4:1048576;try{t.on=new Proxy(t.on,{apply:(a,c,u)=>{let[p,l,...d]=u;if(p==="data"){Se&&N.log(ba,`Handling request.on("data") with maximum body size of ${i}b`);let f=new Proxy(l,{apply:(m,h,E)=>{try{let A=E[0],R=Buffer.from(A);r<i?(o.push(R),r+=R.byteLength):Se&&N.log(ba,`Dropping request body chunk because maximum body length of ${i}b is exceeded.`)}catch{Se&&N.error(ba,"Encountered error while storing body chunk.")}return Reflect.apply(m,h,E)}});return s.set(l,f),Reflect.apply(a,c,[p,f,...d])}return Reflect.apply(a,c,u)}}),t.off=new Proxy(t.off,{apply:(a,c,u)=>{let[,p]=u,l=s.get(p);if(l){s.delete(p);let d=u.slice();return d[1]=l,Reflect.apply(a,c,d)}return Reflect.apply(a,c,u)}}),t.on("end",()=>{try{let a=Buffer.concat(o).toString("utf-8");if(a){let u=Buffer.byteLength(a,"utf-8")>i?`${Buffer.from(a).subarray(0,i-3).toString("utf-8")}...`:a;e.setSDKProcessingMetadata({normalizedRequest:{data:u}})}}catch(a){Se&&N.error(ba,"Error building captured request body",a)}})}catch(a){Se&&N.error(ba,"Error patching request to capture body",a)}}var Xr=k(U(),1),Ei=k(ze(),1),eo=k(Qe(),1);import{errorMonitor as TEe}from"node:events";var kK="Http.ServerSpans",gEe=((t={})=>{let e=t.ignoreStaticAssets??!0,n=t.ignoreIncomingRequests,r=t.ignoreStatusCodes??[[401,404],[301,303],[305,399]],{onSpanCreated:o}=t,{requestHook:s,responseHook:i,applyCustomAttributesOnSpan:a}=t.instrumentation??{};return{name:kK,setup(c){typeof __SENTRY_TRACING__<"u"&&!__SENTRY_TRACING__||c.on("httpServerRequest",(u,p,l)=>{let d=u,f=p;DK(d,h=>{if(REe(d,{ignoreStaticAssets:e,ignoreIncomingRequests:n}))return Se&&N.log(kK,"Skipping span creation for incoming request",d.url),h();let E=l.url||d.url||"/",A=Bf(E),R=d.headers,y=R["user-agent"],O=R["x-forwarded-for"],P=d.httpVersion,M=R.host,j=M?.replace(/^(.*)(:[0-9]{1,5})/,"$1")||"localhost",se=c.tracer,we=E.startsWith("https")?"https":"http",gt=l.method||d.method?.toUpperCase()||"GET",dn=A?A.pathname:fi(E),fn=`${gt} ${dn}`,Ke=se.startSpan(fn,{kind:Xr.SpanKind.SERVER,attributes:{[J]:"http.server",[le]:"auto.http.otel.http","sentry.http.prefetch":SEe(d)||void 0,"http.url":E,"http.method":l.method,"http.target":A?`${A.pathname}${A.search}`:dn,"http.host":M,"net.host.name":j,"http.client_ip":typeof O=="string"?O.split(",")[0]:void 0,"http.user_agent":y,"http.scheme":we,"http.flavor":P,"net.transport":P?.toUpperCase()==="QUIC"?"ip_udp":"ip_tcp",...yEe(d),...eg(l.headers||{},c.getOptions().sendDefaultPii??!1)}});s?.(Ke,d),i?.(Ke,f),a?.(Ke,d,f),o?.(Ke,d,f);let jn={type:Ei.RPCType.HTTP,span:Ke};return Xr.context.with((0,Ei.setRPCMetadata)(Xr.trace.setSpan(Xr.context.active(),Ke),jn),()=>{Xr.context.bind(Xr.context.active(),d),Xr.context.bind(Xr.context.active(),f);let Hr=!1;function Hn(Lt){if(Hr)return;Hr=!0;let xn=OEe(d,f);Ke.setAttributes(xn),Ke.setStatus(Lt),Ke.end();let oi=xn["http.route"];oi&&ve().setTransactionName(`${d.method?.toUpperCase()||"GET"} ${oi}`)}return f.on("close",()=>{Hn(Uc(f.statusCode))}),f.on(TEe,()=>{let Lt=Uc(f.statusCode);Hn(Lt.code===2?Lt:{code:2})}),h()})})})},processEvent(c){if(c.type==="transaction"){let u=c.contexts?.trace?.data?.["http.response.status_code"];if(typeof u=="number"&&IEe(u,r))return Se&&N.log("Dropping transaction due to status code",u),null}return c},afterAllSetup(c){Se&&(c.getIntegrationByName("Http")&&N.warn("It seems that you have manually added `httpServerSpansIntergation` while `httpIntegration` is also present. Make sure to remove `httpIntegration` when adding `httpServerSpansIntegration`."),c.getIntegrationByName("Http.Server")||N.error("It seems that you have manually added `httpServerSpansIntergation` without adding `httpServerIntegration`. This is a requiement for spans to be created - please add the `httpServerIntegration` integration."))}}}),nm=gEe;function SEe(t){return t.headers["next-router-prefetch"]==="1"}function AEe(t){let e=fi(t);return!!(e.match(/\.(ico|png|jpg|jpeg|gif|svg|css|js|woff|woff2|ttf|eot|webp|avif)$/)||e.match(/^\/(robots\.txt|sitemap\.xml|manifest\.json|browserconfig\.xml)$/))}function REe(t,{ignoreStaticAssets:e,ignoreIncomingRequests:n}){if((0,Ei.isTracingSuppressed)(Xr.context.active()))return!0;let r=t.url,o=t.method?.toUpperCase();return!!(o==="OPTIONS"||o==="HEAD"||!r||e&&o==="GET"&&AEe(r)||n?.(r,t))}function yEe(t){let e=bEe(t.headers);return e==null?{}:NEe(t.headers)?{"http.request_content_length":e}:{"http.request_content_length_uncompressed":e}}function bEe(t){let e=t["content-length"];if(e===void 0)return null;let n=parseInt(e,10);return isNaN(n)?null:n}function NEe(t){let e=t["content-encoding"];return!!e&&e!=="identity"}function OEe(t,e){let{socket:n}=t,{statusCode:r,statusMessage:o}=e,s={[eo.ATTR_HTTP_RESPONSE_STATUS_CODE]:r,[eo.SEMATTRS_HTTP_STATUS_CODE]:r,"http.status_text":o?.toUpperCase()},i=(0,Ei.getRPCMetadata)(Xr.context.active());if(n){let{localAddress:a,localPort:c,remoteAddress:u,remotePort:p}=n;s[eo.SEMATTRS_NET_HOST_IP]=a,s[eo.SEMATTRS_NET_HOST_PORT]=c,s[eo.SEMATTRS_NET_PEER_IP]=u,s["net.peer.port"]=p}if(s[eo.SEMATTRS_HTTP_STATUS_CODE]=r,s["http.status_text"]=(o||"").toUpperCase(),i?.type===Ei.RPCType.HTTP&&i.route!==void 0){let a=i.route;s[eo.ATTR_HTTP_ROUTE]=a}return s}function IEe(t,e){return e.some(n=>{if(typeof n=="number")return n===t;let[r,o]=n;return t>=r&&t<=o})}var E4=k(U(),1),T4=k(ze(),1),mm=k(_e(),1);import{subscribe as Px,unsubscribe as Cx}from"node:diagnostics_channel";function rm(t){let e=t.protocol||"",n=t.hostname||t.host||"",r=!t.port||t.port===80||t.port===443||/^(.*):(\d+)$/.test(n)?"":`:${t.port}`,o=t.path?t.path:"/";return`${e}//${n}${r}${o}`}var ye=k(Qe(),1);var vr=k(U(),1),W=k(U(),1),ur=k(ze(),1),Oa=k(_x(),1),bx="sentry.parentIsRemote",rl="sentry.graphql.operation";function Nx(t){if("parentSpanId"in t)return t.parentSpanId;if("parentSpanContext"in t)return t.parentSpanContext?.spanId}function Ox(t){let e=t;return!!e.attributes&&typeof e.attributes=="object"}function rge(t){return typeof t.kind=="number"}function oge(t){return!!t.status}function GZ(t){return!!t.name}function sge(t){if(!Ox(t))return{};let e=t.attributes[ye.ATTR_URL_FULL]||t.attributes[ye.SEMATTRS_HTTP_URL],n={url:e,"http.method":t.attributes[ye.ATTR_HTTP_REQUEST_METHOD]||t.attributes[ye.SEMATTRS_HTTP_METHOD]};!n["http.method"]&&n.url&&(n["http.method"]="GET");try{if(typeof e=="string"){let r=la(e);n.url=da(r),r.search&&(n["http.query"]=r.search),r.hash&&(n["http.fragment"]=r.hash)}}catch{}return n}function ige(t){return rge(t)?t.kind:W.SpanKind.INTERNAL}var hx="sentry-trace",Ex="baggage",Ix="sentry.dsc",vx="sentry.sampled_not_recording",VZ="sentry.url",age="sentry.sample_rand",cge="sentry.sample_rate",xx=(0,W.createContextKey)("sentry_scopes"),Tx=(0,W.createContextKey)("sentry_fork_isolation_scope"),gx=(0,W.createContextKey)("sentry_fork_set_scope"),Sx=(0,W.createContextKey)("sentry_fork_set_isolation_scope"),BZ="_scopeContext";function ol(t){return t.getValue(xx)}function jZ(t,e){return t.setValue(xx,e)}function uge(t,e){nn(t,BZ,e)}function lm(t){return t[BZ]}function nl(t){let{traceFlags:e,traceState:n}=t,r=n?n.get(vx)==="1":!1;if(e===W.TraceFlags.SAMPLED)return!0;if(r)return!1;let o=n?n.get(Ix):void 0,s=o?di(o):void 0;if(s?.sampled==="true")return!0;if(s?.sampled==="false")return!1}function HZ(t,e,n){let r=e[ye.ATTR_HTTP_REQUEST_METHOD]||e[ye.SEMATTRS_HTTP_METHOD];if(r)return lge({attributes:e,name:t,kind:n},r);let o=e[ye.SEMATTRS_DB_SYSTEM],s=typeof e[J]=="string"&&e[J].startsWith("cache.");if(o&&!s)return pge({attributes:e,name:t});let i=e[Wt]==="custom"?"custom":"route";if(e[ye.SEMATTRS_RPC_SERVICE])return{...pm(t,e,"route"),op:"rpc"};if(e[ye.SEMATTRS_MESSAGING_SYSTEM])return{...pm(t,e,i),op:"message"};let u=e[ye.SEMATTRS_FAAS_TRIGGER];return u?{...pm(t,e,i),op:u.toString()}:{op:void 0,description:t,source:"custom"}}function FZ(t){let e=Ox(t)?t.attributes:{},n=GZ(t)?t.name:"<unknown>",r=ige(t);return HZ(n,e,r)}function pge({attributes:t,name:e}){let n=t[vs];if(typeof n=="string")return{op:"db",description:n,source:t[Wt]||"custom"};if(t[Wt]==="custom")return{op:"db",description:e,source:"custom"};let r=t[ye.SEMATTRS_DB_STATEMENT];return{op:"db",description:r?r.toString():e,source:"task"}}function lge({name:t,kind:e,attributes:n},r){let o=["http"];switch(e){case W.SpanKind.CLIENT:o.push("client");break;case W.SpanKind.SERVER:o.push("server");break}n["sentry.http.prefetch"]&&o.push("prefetch");let{urlPath:s,url:i,query:a,fragment:c,hasRoute:u}=fge(n,e);if(!s)return{...pm(t,n),op:o.join(".")};let p=n[rl],l=`${r} ${s}`,d=p?`${l} (${dge(p)})`:l,f=u||s==="/"?"route":"url",m={};i&&(m.url=i),a&&(m["http.query"]=a),c&&(m["http.fragment"]=c);let h=e===W.SpanKind.CLIENT||e===W.SpanKind.SERVER,A=!`${n[le]||"manual"}`.startsWith("auto"),R=n[Wt]==="custom",y=n[vs],O=!R&&y==null&&(h||!A),{description:P,source:M}=O?{description:d,source:f}:pm(t,n);return{op:o.join("."),description:P,source:M,data:m}}function dge(t){if(Array.isArray(t)){let e=t.slice().sort();return e.length<=5?e.join(", "):`${e.slice(0,5).join(", ")}, +${e.length-5}`}return`${t}`}function fge(t,e){let n=t[ye.SEMATTRS_HTTP_TARGET],r=t[ye.SEMATTRS_HTTP_URL]||t[ye.ATTR_URL_FULL],o=t[ye.ATTR_HTTP_ROUTE],s=typeof r=="string"?la(r):void 0,i=s?da(s):void 0,a=s?.search||void 0,c=s?.hash||void 0;return typeof o=="string"?{urlPath:o,url:i,query:a,fragment:c,hasRoute:!0}:e===W.SpanKind.SERVER&&typeof n=="string"?{urlPath:fi(n),url:i,query:a,fragment:c,hasRoute:!1}:s?{urlPath:i,url:i,query:a,fragment:c,hasRoute:!1}:typeof n=="string"?{urlPath:fi(n),url:i,query:a,fragment:c,hasRoute:!1}:{urlPath:void 0,url:i,query:a,fragment:c,hasRoute:!1}}function pm(t,e,n="custom"){let r=e[Wt]||n,o=e[vs];return o&&typeof o=="string"?{description:o,source:r}:{description:t,source:r}}function qZ(t){t.on("createDsc",(e,n)=>{if(!n)return;let s=ae(n).data[Wt],{description:i}=GZ(n)?FZ(n):{description:void 0};if(s!=="url"&&i&&(e.transaction=i),Kt()){let a=nl(n.spanContext());e.sampled=a==null?void 0:String(a)}})}function zZ(){return W.trace.getActiveSpan()}var ks=typeof __SENTRY_DEBUG__>"u"||__SENTRY_DEBUG__;function YZ({dsc:t,sampled:e}){let n=t?$c(t):void 0,r=new ur.TraceState,o=n?r.set(Ix,n):r;return e===!1?o.set(vx,"1"):o}var WZ=new Set;function KZ(){return Array.from(WZ)}function AS(t){WZ.add(t)}var TS=class extends ur.W3CBaggagePropagator{constructor(){super(),AS("SentryPropagator"),this._urlMatchesTargetsMap=new Or(100)}inject(e,n,r){if((0,ur.isTracingSuppressed)(e)){ks&&N.log("[Tracing] Not injecting trace data for url because tracing is suppressed.");return}let o=W.trace.getSpan(e),s=o&&hge(o),{tracePropagationTargets:i,propagateTraceparent:a}=$()?.getOptions()||{};if(!dm(s,i,this._urlMatchesTargetsMap)){ks&&N.log("[Tracing] Not injecting trace data for url because it does not match tracePropagationTargets:",s);return}let c=_ge(n),u=W.propagation.getBaggage(e)||W.propagation.createBaggage({}),{dynamicSamplingContext:p,traceId:l,spanId:d,sampled:f}=ZZ(e);if(c){let m=Gc(c);m&&Object.entries(m).forEach(([h,E])=>{u=u.setEntry(h,{value:E})})}p&&(u=Object.entries(p).reduce((m,[h,E])=>E?m.setEntry(`${Nf}${h}`,{value:E}):m,u)),l&&l!==W.INVALID_TRACEID&&(r.set(n,hx,sa(l,d,f)),a&&r.set(n,"traceparent",ia(l,d,f))),super.inject(W.propagation.setBaggage(e,u),n,r)}extract(e,n,r){let o=r.get(n,hx),s=r.get(n,Ex),i=o?Array.isArray(o)?o[0]:o:void 0;return QZ(JZ(e,{sentryTrace:i,baggage:s}))}fields(){return[hx,Ex,"traceparent"]}},DZ="[Tracing] Not injecting trace data for url because it does not match tracePropagationTargets:";function dm(t,e,n){if(typeof t!="string"||!e)return!0;let r=n?.get(t);if(r!==void 0)return ks&&!r&&N.log(DZ,t),r;let o=ta(t,e);return n?.set(t,o),ks&&!o&&N.log(DZ,t),o}function ZZ(t,e={}){let n=W.trace.getSpan(t);if(n?.spanContext().isRemote){let a=n.spanContext();return{dynamicSamplingContext:Zt(n),traceId:a.traceId,spanId:void 0,sampled:nl(a)}}if(n){let a=n.spanContext();return{dynamicSamplingContext:Zt(n),traceId:a.traceId,spanId:a.spanId,sampled:nl(a)}}let r=e.scope||ol(t)?.scope||Ye(),o=e.client||$(),s=r.getPropagationContext();return{dynamicSamplingContext:o?xs(o,r):void 0,traceId:s.traceId,spanId:s.propagationSpanId,sampled:s.sampled}}function JZ(t,{sentryTrace:e,baggage:n}){let r=Of(e,n),{traceId:o,parentSpanId:s,sampled:i,dsc:a}=r,c=$(),u=di(n);if(!s||c&&!hI(c,u?.org_id))return t;let p=Ege({traceId:o,spanId:s,sampled:i,dsc:a});return W.trace.setSpanContext(t,p)}function mge(t,e,n){let r=QZ(JZ(t,e));return W.context.with(r,n)}function QZ(t){let e=ol(t),n={scope:e?e.scope:Ye().clone(),isolationScope:e?e.isolationScope:ve()};return jZ(t,n)}function _ge(t){try{let e=t[Ex];return Array.isArray(e)?e.join(","):e}catch{return}}function hge(t){let e=ae(t).data,n=e[ye.SEMATTRS_HTTP_URL]||e[ye.ATTR_URL_FULL];if(typeof n=="string")return n;let r=t.spanContext().traceState?.get(VZ);if(r)return r}function Ege({spanId:t,traceId:e,sampled:n,dsc:r}){let o=YZ({dsc:r,sampled:n});return{traceId:e,spanId:t,isRemote:!0,traceFlags:n?W.TraceFlags.SAMPLED:W.TraceFlags.NONE,traceState:o}}function XZ(t,e,n){let r=t4(),{name:o,parentSpan:s}=t;return s4(s)(()=>{let a=r4(t.scope,t.forceTransaction),u=t.onlyIfParent&&!W.trace.getSpan(a)?(0,ur.suppressTracing)(a):a,p=n4(t);if(!Kt()){let l=(0,ur.isTracingSuppressed)(u)?u:(0,ur.suppressTracing)(u);return W.context.with(l,()=>r.startActiveSpan(o,p,l,d=>W.context.with(a,()=>Wr(()=>e(d),()=>{ae(d).status===void 0&&d.setStatus({code:W.SpanStatusCode.ERROR})},n?()=>d.end():void 0))))}return r.startActiveSpan(o,p,u,l=>Wr(()=>e(l),()=>{ae(l).status===void 0&&l.setStatus({code:W.SpanStatusCode.ERROR})},n?()=>l.end():void 0))})}function Tge(t,e){return XZ(t,e,!0)}function gge(t,e){return XZ(t,n=>e(n,()=>n.end()),!1)}function Sge(t){let e=t4(),{name:n,parentSpan:r}=t;return s4(r)(()=>{let s=r4(t.scope,t.forceTransaction),a=t.onlyIfParent&&!W.trace.getSpan(s)?(0,ur.suppressTracing)(s):s,c=n4(t);return Kt()||(a=(0,ur.isTracingSuppressed)(a)?a:(0,ur.suppressTracing)(a)),e.startSpan(n,c,a)})}function e4(t,e){let n=t?W.trace.setSpan(W.context.active(),t):W.trace.deleteSpan(W.context.active());return W.context.with(n,()=>e(Ye()))}function t4(){return $()?.tracer||W.trace.getTracer("@sentry/opentelemetry",Pe)}function n4(t){let{startTime:e,attributes:n,kind:r,op:o,links:s}=t,i=typeof e=="number"?Age(e):e;return{attributes:o?{[J]:o,...n}:n,kind:r,links:s,startTime:i}}function Age(t){return t<9999999999?t*1e3:t}function r4(t,e){let n=Rge(t),r=W.trace.getSpan(n);if(!r||!e)return n;let o=W.trace.deleteSpan(n),{spanId:s,traceId:i}=r.spanContext(),a=nl(r.spanContext()),c=Dt(r),u=Zt(c),p=YZ({dsc:u,sampled:a}),l={traceId:i,spanId:s,isRemote:!0,traceFlags:a?W.TraceFlags.SAMPLED:W.TraceFlags.NONE,traceState:p};return W.trace.setSpanContext(o,l)}function Rge(t){if(t){let e=lm(t);if(e)return e}return W.context.active()}function yge(t,e){return mge(W.context.active(),t,e)}function o4(t,e){let n=lm(e),r=n&&W.trace.getSpan(n),o=r?aa(r):kc(e);return[r?Zt(r):xs(t,e),o]}function s4(t){return t!==void 0?e=>e4(t,e):e=>e()}function bge(t){let e=(0,ur.suppressTracing)(W.context.active());return W.context.with(e,t)}function i4(t){t.on("preprocessEvent",e=>{let n=zZ();if(!n||e.type==="transaction")return;e.contexts={trace:aa(n),...e.contexts};let r=Dt(n);return e.sdkProcessingMetadata={dynamicSamplingContext:Zt(r),...e.sdkProcessingMetadata},e})}function Nge({span:t,scope:e,client:n,propagateTraceparent:r}={}){let o=(e&&lm(e))??vr.context.active();if(t){let{scope:p}=Ko(t);o=p&&lm(p)||vr.trace.setSpan(vr.context.active(),t)}let{traceId:s,spanId:i,sampled:a,dynamicSamplingContext:c}=ZZ(o,{scope:e,client:n}),u={"sentry-trace":sa(s,i,a),baggage:$c(c)};return r&&(u.traceparent=ia(s,i,a)),u}function a4(){function t(){let a=vr.context.active(),c=ol(a);return c||{scope:vp(),isolationScope:Eo()}}function e(a){let c=vr.context.active();return vr.context.with(c,()=>a(s()))}function n(a,c){let u=lm(a)||vr.context.active();return vr.context.with(u.setValue(gx,a),()=>c(a))}function r(a){let c=vr.context.active();return vr.context.with(c.setValue(Tx,!0),()=>a(i()))}function o(a,c){let u=vr.context.active();return vr.context.with(u.setValue(Sx,a),()=>c(i()))}function s(){return t().scope}function i(){return t().isolationScope}uI({withScope:e,withSetScope:n,withSetIsolationScope:o,withIsolationScope:r,getCurrentScope:s,getIsolationScope:i,startSpan:Tge,startSpanManual:gge,startInactiveSpan:Sge,getActiveSpan:zZ,suppressTracing:bge,getTraceData:Nge,continueTrace:yge,withActiveSpan:e4})}function c4(t){class e extends t{constructor(...r){super(...r),AS("SentryContextManager")}with(r,o,s,...i){let a=ol(r),c=a?.scope||Ye(),u=a?.isolationScope||ve(),p=r.getValue(Tx)===!0,l=r.getValue(gx),d=r.getValue(Sx),f=l||c.clone(),m=d||(p?u.clone():u),A=jZ(r,{scope:f,isolationScope:m}).deleteValue(Tx).deleteValue(gx).deleteValue(Sx);return uge(f,A),super.with(A,o,s,...i)}getAsyncLocalStorageLookup(){return{asyncLocalStorage:this._asyncLocalStorage,contextSymbol:xx}}}return e}function Oge(t){let e=new Map;for(let n of t)Ige(e,n);return Array.from(e,function([n,r]){return r})}function u4(t){return t.attributes[bx]===!0?void 0:Nx(t)}function Ige(t,e){let n=e.spanContext().spanId,r=u4(e);if(!r){Ax(t,{id:n,span:e,children:[]});return}let o=vge(t,r),s=Ax(t,{id:n,span:e,parentNode:o,children:[]});o.children.push(s)}function vge(t,e){let n=t.get(e);return n||Ax(t,{id:e,children:[]})}function Ax(t,e){let n=t.get(e.id);return n?.span?n:n&&!n.span?(n.span=e.span,n.parentNode=e.parentNode,n):(t.set(e.id,e),e)}var p4={1:"cancelled",2:"unknown_error",3:"invalid_argument",4:"deadline_exceeded",5:"not_found",6:"already_exists",7:"permission_denied",8:"resource_exhausted",9:"failed_precondition",10:"aborted",11:"out_of_range",12:"unimplemented",13:"internal_error",14:"unavailable",15:"data_loss",16:"unauthenticated"},xge=t=>Object.values(p4).includes(t);function l4(t){let e=Ox(t)?t.attributes:{},n=oge(t)?t.status:void 0;if(n){if(n.code===W.SpanStatusCode.OK)return{code:1};if(n.code===W.SpanStatusCode.ERROR){if(typeof n.message>"u"){let o=kZ(e);if(o)return o}return n.message&&xge(n.message)?{code:2,message:n.message}:{code:2,message:"internal_error"}}}let r=kZ(e);return r||(n?.code===W.SpanStatusCode.UNSET?{code:1}:{code:2,message:"unknown_error"})}function kZ(t){let e=t[ye.ATTR_HTTP_RESPONSE_STATUS_CODE]||t[ye.SEMATTRS_HTTP_STATUS_CODE],n=t[ye.SEMATTRS_RPC_GRPC_STATUS_CODE],r=typeof e=="number"?e:typeof e=="string"?parseInt(e):void 0;if(typeof r=="number")return Uc(r);if(typeof n=="string")return{code:2,message:p4[n]||"unknown_error"}}var UZ=1e3,$Z=300,Rx=class{constructor(e){this._finishedSpanBucketSize=e?.timeout||$Z,this._finishedSpanBuckets=new Array(this._finishedSpanBucketSize).fill(void 0),this._lastCleanupTimestampInS=Math.floor(Date.now()/1e3),this._spansToBucketEntry=new WeakMap,this._sentSpans=new Map,this._debouncedFlush=FI(this.flush.bind(this),1,{maxWait:100})}export(e){let n=Math.floor(Date.now()/1e3);if(this._lastCleanupTimestampInS!==n){let i=0;this._finishedSpanBuckets.forEach((a,c)=>{a&&a.timestampInS<=n-this._finishedSpanBucketSize&&(i+=a.spans.size,this._finishedSpanBuckets[c]=void 0)}),i>0&&ks&&N.log(`SpanExporter dropped ${i} spans because they were pending for more than ${this._finishedSpanBucketSize} seconds.`),this._lastCleanupTimestampInS=n}let r=n%this._finishedSpanBucketSize,o=this._finishedSpanBuckets[r]||{timestampInS:n,spans:new Set};this._finishedSpanBuckets[r]=o,o.spans.add(e),this._spansToBucketEntry.set(e,o);let s=u4(e);(!s||this._sentSpans.has(s))&&this._debouncedFlush()}flush(){let e=this._finishedSpanBuckets.flatMap(i=>i?Array.from(i.spans):[]);this._flushSentSpanCache();let n=this._maybeSend(e),r=n.size,o=e.length-r;ks&&N.log(`SpanExporter exported ${r} spans, ${o} spans are waiting for their parent spans to finish`);let s=Date.now()+$Z*1e3;for(let i of n){this._sentSpans.set(i.spanContext().spanId,s);let a=this._spansToBucketEntry.get(i);a&&a.spans.delete(i)}this._debouncedFlush.cancel()}clear(){this._finishedSpanBuckets=this._finishedSpanBuckets.fill(void 0),this._sentSpans.clear(),this._debouncedFlush.cancel()}_maybeSend(e){let n=Oge(e),r=new Set,o=this._getCompletedRootNodes(n);for(let s of o){let i=s.span;r.add(i);let a=Cge(i);if(s.parentNode&&this._sentSpans.has(s.parentNode.id)){let p=a.contexts?.trace?.data;p&&(p["sentry.parent_span_already_sent"]=!0)}let c=a.spans||[];for(let p of s.children)yx(p,c,r);a.spans=c.length>UZ?c.sort((p,l)=>p.start_timestamp-l.start_timestamp).slice(0,UZ):c;let u=jc(i.events);u&&(a.measurements=u),zT(a)}return r}_flushSentSpanCache(){let e=Date.now();for(let[n,r]of this._sentSpans.entries())r<=e&&this._sentSpans.delete(n)}_nodeIsCompletedRootNodeOrHasSentParent(e){return!!e.span&&(!e.parentNode||this._sentSpans.has(e.parentNode.id))}_getCompletedRootNodes(e){return e.filter(n=>this._nodeIsCompletedRootNodeOrHasSentParent(n))}};function Pge(t){let e=t.attributes,n=e[le],r=e[J],o=e[Wt];return{origin:n,op:r,source:o}}function Cge(t){let{op:e,description:n,data:r,origin:o="manual",source:s}=d4(t),i=Ko(t),a=t.attributes[Wo],c={[Wt]:s,[Wo]:a,[J]:e,[le]:o,...r,...f4(t.attributes)},{links:u}=t,{traceId:p,spanId:l}=t.spanContext(),d=Nx(t),f=l4(t),m={parent_span_id:d,span_id:l,trace_id:p,data:c,origin:o,op:e,status:Bc(f),links:Vc(u)},h=c[ye.ATTR_HTTP_RESPONSE_STATUS_CODE],E=typeof h=="number"?{response:{status_code:h}}:void 0;return{contexts:{trace:m,otel:{resource:t.resource.attributes},...E},spans:[],start_timestamp:yr(t.startTime),timestamp:yr(t.endTime),transaction:n,type:"transaction",sdkProcessingMetadata:{capturedSpanScope:i.scope,capturedSpanIsolationScope:i.isolationScope,sampleRate:a,dynamicSamplingContext:Zt(t)},...s&&{transaction_info:{source:s}}}}function yx(t,e,n){let r=t.span;if(r&&n.add(r),!r){t.children.forEach(y=>{yx(y,e,n)});return}let s=r.spanContext().spanId,i=r.spanContext().traceId,a=Nx(r),{attributes:c,startTime:u,endTime:p,links:l}=r,{op:d,description:f,data:m,origin:h="manual"}=d4(r),E={[le]:h,[J]:d,...f4(c),...m},A=l4(r),R={span_id:s,trace_id:i,data:E,description:f,parent_span_id:a,start_timestamp:yr(u),timestamp:yr(p)||void 0,status:Bc(A),op:d,origin:h,measurements:jc(r.events),links:Vc(l)};e.push(R),t.children.forEach(y=>{yx(y,e,n)})}function d4(t){let{op:e,source:n,origin:r}=Pge(t),{op:o,description:s,source:i,data:a}=FZ(t),c=e||o,u=n||i,p={...a,...Mge(t)};return{op:c,description:s,source:u,origin:r,data:p}}function f4(t){let e={...t};return delete e[Wo],delete e[bx],delete e[vs],e}function Mge(t){let e=t.attributes,n={};t.kind!==W.SpanKind.INTERNAL&&(n["otel.kind"]=W.SpanKind[t.kind]);let r=e[ye.SEMATTRS_HTTP_STATUS_CODE];r&&(n[ye.ATTR_HTTP_RESPONSE_STATUS_CODE]=r);let o=sge(t);return o.url&&(n.url=o.url),o["http.query"]&&(n["http.query"]=o["http.query"].slice(1)),o["http.fragment"]&&(n["http.fragment"]=o["http.fragment"].slice(1)),n}function wge(t,e){let n=W.trace.getSpan(e),r=ol(e);n&&!n.spanContext().isRemote&&Mp(n,t),n?.spanContext().isRemote&&t.setAttribute(bx,!0),e===W.ROOT_CONTEXT&&(r={scope:vp(),isolationScope:Eo()}),r&&bf(t,r.scope,r.isolationScope),Cf(t),$()?.emit("spanStart",t)}function Lge(t){Mf(t),$()?.emit("spanEnd",t)}var gS=class{constructor(e){AS("SentrySpanProcessor"),this._exporter=new Rx(e)}async forceFlush(){this._exporter.flush()}async shutdown(){this._exporter.clear()}onStart(e,n){wge(e,n)}onEnd(e){Lge(e),this._exporter.export(e)}},SS=class{constructor(e){this._client=e,AS("SentrySampler")}shouldSample(e,n,r,o,s,i){let a=this._client.getOptions(),c=Uge(e),u=c?.spanContext();if(!Kt(a))return tl({decision:void 0,context:e,spanAttributes:s});let p=s[ye.SEMATTRS_HTTP_METHOD]||s[ye.ATTR_HTTP_REQUEST_METHOD];if(o===W.SpanKind.CLIENT&&p&&(!c||u?.isRemote))return tl({decision:void 0,context:e,spanAttributes:s});let l=c?Dge(c,n,r):void 0;if(!(!c||u?.isRemote))return tl({decision:l?Oa.SamplingDecision.RECORD_AND_SAMPLED:Oa.SamplingDecision.NOT_RECORD,context:e,spanAttributes:s});let{description:f,data:m,op:h}=HZ(r,s,o),E={...m,...s};h&&(E[J]=h);let A={decision:!0};if(this._client.emit("beforeSampling",{spanAttributes:E,spanName:f,parentSampled:l,parentContext:u},A),!A.decision)return tl({decision:void 0,context:e,spanAttributes:s});let{isolationScope:R}=ol(e)??{},y=u?.traceState?u.traceState.get(Ix):void 0,O=y?di(y):void 0,P=Yr(O?.sample_rand)??Math.random(),[M,j,se]=wf(a,{name:f,attributes:E,normalizedRequest:R?.getScopeData().sdkProcessingMetadata.normalizedRequest,parentSampled:l,parentSampleRate:Yr(O?.sample_rate)},P),we=`${p}`.toUpperCase();return we==="OPTIONS"||we==="HEAD"?(ks&&N.log(`[Tracing] Not sampling span because HTTP method is '${we}' for ${r}`),tl({decision:Oa.SamplingDecision.NOT_RECORD,context:e,spanAttributes:s,sampleRand:P,downstreamTraceSampleRate:0})):(!M&&l===void 0&&(ks&&N.log("[Tracing] Discarding root span because its trace was not chosen to be sampled."),this._client.recordDroppedEvent("sample_rate","transaction")),{...tl({decision:M?Oa.SamplingDecision.RECORD_AND_SAMPLED:Oa.SamplingDecision.NOT_RECORD,context:e,spanAttributes:s,sampleRand:P,downstreamTraceSampleRate:se?j:void 0}),attributes:{[Wo]:se?j:void 0}})}toString(){return"SentrySampler"}};function Dge(t,e,n){let r=t.spanContext();if((0,W.isSpanContextValid)(r)&&r.traceId===e){if(r.isRemote){let s=nl(t.spanContext());return ks&&N.log(`[Tracing] Inheriting remote parent's sampled decision for ${n}: ${s}`),s}let o=nl(r);return ks&&N.log(`[Tracing] Inheriting parent's sampled decision for ${n}: ${o}`),o}}function tl({decision:t,context:e,spanAttributes:n,sampleRand:r,downstreamTraceSampleRate:o}){let s=kge(e,n);return o!==void 0&&(s=s.set(cge,`${o}`)),r!==void 0&&(s=s.set(age,`${r}`)),t==null?{decision:Oa.SamplingDecision.NOT_RECORD,traceState:s}:t===Oa.SamplingDecision.NOT_RECORD?{decision:t,traceState:s.set(vx,"1")}:{decision:t,traceState:s}}function kge(t,e){let o=W.trace.getSpan(t)?.spanContext()?.traceState||new ur.TraceState,s=e[ye.SEMATTRS_HTTP_URL]||e[ye.ATTR_URL_FULL];return s&&typeof s=="string"&&(o=o.set(VZ,s)),o}function Uge(t){let e=W.trace.getSpan(t);return e&&(0,W.isSpanContextValid)(e.spanContext())?e:void 0}function fm(t,e){if(!t)return e;let n=Gc(t),r=Gc(e);if(!r)return t;let o={...n};return Object.entries(r).forEach(([s,i])=>{o[s]||(o[s]=i)}),CT(o)}function m4(t,e){let n=$ge(t),r=e?.statusCode,o=Jf(r);go({category:"http",data:{status_code:r,...n},type:"http",level:o},{event:"response",request:t,response:e})}function _4(t,e){let n=Gge(t),{tracePropagationTargets:r,propagateTraceparent:o}=$()?.getOptions()||{},s=dm(n,r,e)?Up({propagateTraceparent:o}):void 0;if(!s)return;let{"sentry-trace":i,baggage:a,traceparent:c}=s;if(i&&!t.getHeader("sentry-trace"))try{t.setHeader("sentry-trace",i),Se&&N.log(Ps,"Added sentry-trace header to outgoing request")}catch(u){Se&&N.error(Ps,"Failed to add sentry-trace header to outgoing request:",ai(u)?u.message:"Unknown error")}if(c&&!t.getHeader("traceparent"))try{t.setHeader("traceparent",c),Se&&N.log(Ps,"Added traceparent header to outgoing request")}catch(u){Se&&N.error(Ps,"Failed to add traceparent header to outgoing request:",ai(u)?u.message:"Unknown error")}if(a){let u=fm(t.getHeader("baggage"),a);if(u)try{t.setHeader("baggage",u),Se&&N.log(Ps,"Added baggage header to outgoing request")}catch(p){Se&&N.error(Ps,"Failed to add baggage header to outgoing request:",ai(p)?p.message:"Unknown error")}}}function $ge(t){try{let e=t.getHeader("host")||t.host,n=new URL(t.path,`${t.protocol}//${e}`),r=la(n.toString()),o={url:da(r),"http.method":t.method||"GET"};return r.search&&(o["http.query"]=r.search),r.hash&&(o["http.fragment"]=r.hash),o}catch{return{}}}function h4(t){return{method:t.method,protocol:t.protocol,host:t.host,hostname:t.host,path:t.path,headers:t.getHeaders()}}function Gge(t){let e=t.getHeader("host")||t.host,n=t.protocol,r=t.path;return`${n}//${e}${r}`}var tu=class extends mm.InstrumentationBase{constructor(e={}){super(Ps,Pe,e),this._propagationDecisionMap=new Or(100),this._ignoreOutgoingRequestsMap=new WeakMap}init(){let e=!1,n=(a=>{let c=a;this._onOutgoingRequestFinish(c.request,c.response)}),r=(a=>{let c=a;this._onOutgoingRequestFinish(c.request,void 0)}),o=(a=>{let c=a;this._onOutgoingRequestCreated(c.request)}),s=a=>(e||(e=!0,Px("http.client.response.finish",n),Px("http.client.request.error",r),this.getConfig().propagateTraceInOutgoingRequests&&Px("http.client.request.created",o)),a),i=()=>{Cx("http.client.response.finish",n),Cx("http.client.request.error",r),Cx("http.client.request.created",o)};return[new mm.InstrumentationNodeModuleDefinition("http",["*"],s,i),new mm.InstrumentationNodeModuleDefinition("https",["*"],s,i)]}_onOutgoingRequestFinish(e,n){Se&&N.log(Ps,"Handling finished outgoing request");let r=this.getConfig().breadcrumbs,o=typeof r>"u"?!0:r,s=this._ignoreOutgoingRequestsMap.get(e)??this._shouldIgnoreOutgoingRequest(e);this._ignoreOutgoingRequestsMap.set(e,s),o&&!s&&m4(e,n)}_onOutgoingRequestCreated(e){let n=this._ignoreOutgoingRequestsMap.get(e)??this._shouldIgnoreOutgoingRequest(e);this._ignoreOutgoingRequestsMap.set(e,n),!n&&_4(e,this._propagationDecisionMap)}_shouldIgnoreOutgoingRequest(e){if((0,T4.isTracingSuppressed)(E4.context.active()))return!0;let n=this.getConfig().ignoreOutgoingRequests;if(!n)return!1;let r=h4(e),o=rm(e);return n(o,r)}};var g4="Http",Vge=Y(`${g4}.sentry`,t=>new tu(t)),S4=(t={})=>{let e={sessions:t.trackIncomingRequestsAsSessions,sessionFlushingDelayMS:t.sessionFlushingDelayMS,ignoreRequestBody:t.ignoreIncomingRequestBody,maxRequestBodySize:t.maxIncomingRequestBodySize},n={ignoreIncomingRequests:t.ignoreIncomingRequests,ignoreStaticAssets:t.ignoreStaticAssets,ignoreStatusCodes:t.dropSpansForIncomingRequestStatusCodes},r={breadcrumbs:t.breadcrumbs,propagateTraceInOutgoingRequests:!0,ignoreOutgoingRequests:t.ignoreOutgoingRequests},o=tm(e),s=nm(n),i=t.spans??!1,a=t.disableIncomingRequestSpans??!1,c=i&&!a;return{name:g4,setup(u){c&&s.setup(u)},setupOnce(){o.setupOnce(),Vge(r)},processEvent(u){return s.processEvent(u)}}};var R4=k(U(),1),y4=k(ze(),1),b4=k(_e(),1);import*as sl from"diagnostics_channel";var nu=iI(process.versions.node),Si=nu.major,_m=nu.minor;var RS="sentry-trace",Mx="baggage",A4=/baggage: (.*)\r\n/,ru=class extends b4.InstrumentationBase{constructor(e={}){super("@sentry/instrumentation-node-fetch",Pe,e),this._channelSubs=[],this._propagationDecisionMap=new Or(100),this._ignoreOutgoingRequestsMap=new WeakMap}init(){}disable(){super.disable(),this._channelSubs.forEach(e=>e.unsubscribe()),this._channelSubs=[]}enable(){super.enable(),this._channelSubs=this._channelSubs||[],!(this._channelSubs.length>0)&&(this._subscribeToChannel("undici:request:create",this._onRequestCreated.bind(this)),this._subscribeToChannel("undici:request:headers",this._onResponseHeaders.bind(this)))}_onRequestCreated({request:e}){if(!(this.getConfig().enabled!==!1))return;let o=this._shouldIgnoreOutgoingRequest(e);if(this._ignoreOutgoingRequestsMap.set(e,o),o)return;let s=wx(e.origin,e.path),{tracePropagationTargets:i,propagateTraceparent:a}=$()?.getOptions()||{},c=dm(s,i,this._propagationDecisionMap)?Up({propagateTraceparent:a}):void 0;if(!c)return;let{"sentry-trace":u,baggage:p,traceparent:l}=c;if(Array.isArray(e.headers)){let d=e.headers;u&&!d.includes(RS)&&d.push(RS,u),l&&!d.includes("traceparent")&&d.push("traceparent",l);let f=d.findIndex(m=>m===Mx);if(p&&f===-1)d.push(Mx,p);else if(p){let m=d[f+1],h=fm(m,p);h&&(d[f+1]=h)}}else{let d=e.headers;u&&!d.includes(`${RS}:`)&&(e.headers+=`${RS}: ${u}\r
`),l&&!d.includes("traceparent:")&&(e.headers+=`traceparent: ${l}\r
`);let f=e.headers.match(A4)?.[1];if(p&&!f)e.headers+=`${Mx}: ${p}\r
`;else if(p){let m=fm(f,p);m&&(e.headers=e.headers.replace(A4,`baggage: ${m}\r
`))}}}_onResponseHeaders({request:e,response:n}){let r=this.getConfig();if(!(r.enabled!==!1))return;let s=r.breadcrumbs,i=typeof s>"u"?!0:s,a=this._ignoreOutgoingRequestsMap.get(e);i&&!a&&Bge(e,n)}_subscribeToChannel(e,n){let r=Si>18||Si===18&&_m>=19,o;if(r)sl.subscribe?.(e,n),o=()=>sl.unsubscribe?.(e,n);else{let s=sl.channel(e);s.subscribe(n),o=()=>s.unsubscribe(n)}this._channelSubs.push({name:e,unsubscribe:o})}_shouldIgnoreOutgoingRequest(e){if((0,y4.isTracingSuppressed)(R4.context.active()))return!0;let n=wx(e.origin,e.path),r=this.getConfig().ignoreOutgoingRequests;return typeof r!="function"||!n?!1:r(n)}};function Bge(t,e){let n=jge(t),r=e.statusCode,o=Jf(r);go({category:"http",data:{status_code:r,...n},type:"http",level:o},{event:"response",request:t,response:e})}function jge(t){try{let e=wx(t.origin,t.path),n=la(e),r={url:da(n),"http.method":t.method||"GET"};return n.search&&(r["http.query"]=n.search),n.hash&&(r["http.fragment"]=n.hash),r}catch{return{}}}function wx(t,e="/"){try{return new URL(e,t).toString()}catch{let n=`${t}`;return n.endsWith("/")&&e.startsWith("/")?`${n}${e.slice(1)}`:!n.endsWith("/")&&!e.startsWith("/")?`${n}/${e.slice(1)}`:`${n}${e}`}}var Hge="NodeFetch",Fge=Y(`${Hge}.sentry`,ru,t=>t),qge=((t={})=>({name:"NodeFetch",setupOnce(){Fge(t)}})),N4=qge;import{execFile as zge}from"node:child_process";import{readFile as Yge,readdir as Wge}from"node:fs";import*as yn from"node:os";import{join as Kge}from"node:path";import{promisify as I4}from"node:util";var Zge=I4(Yge),Jge=I4(Wge),Qge="Context",Xge=((t={})=>{let e,n={app:!0,os:!0,device:!0,culture:!0,cloudResource:!0,...t};async function r(s){e===void 0&&(e=o());let i=eSe(await e);return s.contexts={...s.contexts,app:{...i.app,...s.contexts?.app},os:{...i.os,...s.contexts?.os},device:{...i.device,...s.contexts?.device},culture:{...i.culture,...s.contexts?.culture},cloud_resource:{...i.cloud_resource,...s.contexts?.cloud_resource}},s}async function o(){let s={};if(n.os&&(s.os=await tSe()),n.app&&(s.app=rSe()),n.device&&(s.device=oSe(n.device)),n.culture){let i=nSe();i&&(s.culture=i)}return n.cloudResource&&(s.cloud_resource=pSe()),s}return{name:Qge,processEvent(s){return r(s)}}}),v4=Xge;function eSe(t){if(t.app?.app_memory&&(t.app.app_memory=process.memoryUsage().rss),t.app?.free_memory&&typeof process.availableMemory=="function"){let e=process.availableMemory?.();e!=null&&(t.app.free_memory=e)}return t.device?.free_memory&&(t.device.free_memory=yn.freemem()),t}async function tSe(){let t=yn.platform();switch(t){case"darwin":return cSe();case"linux":return uSe();default:return{name:sSe[t]||t,version:yn.release()}}}function nSe(){try{if(typeof process.versions.icu!="string")return;let t=new Date(9e8);if(new Intl.DateTimeFormat("es",{month:"long"}).format(t)==="enero"){let n=Intl.DateTimeFormat().resolvedOptions();return{locale:n.locale,timezone:n.timeZone}}}catch{}}function rSe(){let t=process.memoryUsage().rss,n={app_start_time:new Date(Date.now()-process.uptime()*1e3).toISOString(),app_memory:t};if(typeof process.availableMemory=="function"){let r=process.availableMemory?.();r!=null&&(n.free_memory=r)}return n}function oSe(t){let e={},n;try{n=yn.uptime()}catch{}if(typeof n=="number"&&(e.boot_time=new Date(Date.now()-n*1e3).toISOString()),e.arch=yn.arch(),(t===!0||t.memory)&&(e.memory_size=yn.totalmem(),e.free_memory=yn.freemem()),t===!0||t.cpu){let r=yn.cpus(),o=r?.[0];o&&(e.processor_count=r.length,e.cpu_description=o.model,e.processor_frequency=o.speed)}return e}var sSe={aix:"IBM AIX",freebsd:"FreeBSD",openbsd:"OpenBSD",sunos:"SunOS",win32:"Windows",ohos:"OpenHarmony",android:"Android"},iSe=[{name:"fedora-release",distros:["Fedora"]},{name:"redhat-release",distros:["Red Hat Linux","Centos"]},{name:"redhat_version",distros:["Red Hat Linux"]},{name:"SuSE-release",distros:["SUSE Linux"]},{name:"lsb-release",distros:["Ubuntu Linux","Arch Linux"]},{name:"debian_version",distros:["Debian"]},{name:"debian_release",distros:["Debian"]},{name:"arch-release",distros:["Arch Linux"]},{name:"gentoo-release",distros:["Gentoo Linux"]},{name:"novell-release",distros:["SUSE Linux"]},{name:"alpine-release",distros:["Alpine Linux"]}],aSe={alpine:t=>t,arch:t=>Us(/distrib_release=(.*)/,t),centos:t=>Us(/release ([^ ]+)/,t),debian:t=>t,fedora:t=>Us(/release (..)/,t),mint:t=>Us(/distrib_release=(.*)/,t),red:t=>Us(/release ([^ ]+)/,t),suse:t=>Us(/VERSION = (.*)\n/,t),ubuntu:t=>Us(/distrib_release=(.*)/,t)};function Us(t,e){let n=t.exec(e);return n?n[1]:void 0}async function cSe(){let t={kernel_version:yn.release(),name:"Mac OS X",version:`10.${Number(yn.release().split(".")[0])-4}`};try{let e=await new Promise((n,r)=>{zge("/usr/bin/sw_vers",(o,s)=>{if(o){r(o);return}n(s)})});t.name=Us(/^ProductName:\s+(.*)$/m,e),t.version=Us(/^ProductVersion:\s+(.*)$/m,e),t.build=Us(/^BuildVersion:\s+(.*)$/m,e)}catch{}return t}function O4(t){return t.split(" ")[0].toLowerCase()}async function uSe(){let t={kernel_version:yn.release(),name:"Linux"};try{let e=await Jge("/etc"),n=iSe.find(a=>e.includes(a.name));if(!n)return t;let r=Kge("/etc",n.name),o=(await Zge(r,{encoding:"utf-8"})).toLowerCase(),{distros:s}=n;t.name=s.find(a=>o.indexOf(O4(a))>=0)||s[0];let i=O4(t.name);t.version=aSe[i]?.(o)}catch{}return t}function pSe(){return process.env.VERCEL?{"cloud.provider":"vercel","cloud.region":process.env.VERCEL_REGION}:process.env.AWS_REGION?{"cloud.provider":"aws","cloud.region":process.env.AWS_REGION,"cloud.platform":process.env.AWS_EXECUTION_ENV}:process.env.GCP_PROJECT?{"cloud.provider":"gcp"}:process.env.ALIYUN_REGION_ID?{"cloud.provider":"alibaba_cloud","cloud.region":process.env.ALIYUN_REGION_ID}:process.env.WEBSITE_SITE_NAME&&process.env.REGION_NAME?{"cloud.provider":"azure","cloud.region":process.env.REGION_NAME}:process.env.IBM_CLOUD_REGION?{"cloud.provider":"ibm_cloud","cloud.region":process.env.IBM_CLOUD_REGION}:process.env.TENCENTCLOUD_REGION?{"cloud.provider":"tencent_cloud","cloud.region":process.env.TENCENTCLOUD_REGION,"cloud.account.id":process.env.TENCENTCLOUD_APPID,"cloud.availability_zone":process.env.TENCENTCLOUD_ZONE}:process.env.NETLIFY?{"cloud.provider":"netlify"}:process.env.FLY_REGION?{"cloud.provider":"fly.io","cloud.region":process.env.FLY_REGION}:process.env.DYNO?{"cloud.provider":"heroku"}:void 0}import{createReadStream as lSe}from"node:fs";import{createInterface as dSe}from"node:readline";var Lx=new Or(10),C4=new Or(20),fSe=7,mSe="ContextLines",_Se=1e3,hSe=1e4;function ESe(t,e,n){let r=t.get(e);return r===void 0?(t.set(e,n),n):r}function TSe(t){return!!(t.startsWith("node:")||t.endsWith(".min.js")||t.endsWith(".min.cjs")||t.endsWith(".min.mjs")||t.startsWith("data:"))}function gSe(t){return t.lineno!==void 0&&t.lineno>hSe||t.colno!==void 0&&t.colno>_Se}function SSe(t,e){let n=Lx.get(t);if(n===void 0)return!1;for(let r=e[0];r<=e[1];r++)if(n[r]===void 0)return!1;return!0}function ASe(t,e){if(!t.length)return[];let n=0,r=t[0];if(typeof r!="number")return[];let o=P4(r,e),s=[];for(;;){if(n===t.length-1){s.push(o);break}let i=t[n+1];if(typeof i!="number")break;i<=o[1]?o[1]=i+e:(s.push(o),o=P4(i,e)),n++}return s}function RSe(t,e,n){return new Promise((r,o)=>{let s=lSe(t),i=dSe({input:s});function a(){s.destroy(),r()}let c=0,u=0,p=e[u];if(p===void 0){a();return}let l=p[0],d=p[1];function f(m){C4.set(t,1),Se&&N.error(`Failed to read file: ${t}. Error: ${m}`),i.close(),i.removeAllListeners(),a()}s.on("error",f),i.on("error",f),i.on("close",a),i.on("line",m=>{if(c++,!(c<l)&&(n[c]=tI(m,0),c>=d)){if(u===e.length-1){i.close(),i.removeAllListeners();return}u++;let h=e[u];if(h===void 0){i.close(),i.removeAllListeners();return}l=h[0],d=h[1]}})})}async function ySe(t,e){let n={};if(e>0&&t.exception?.values){for(let s of t.exception.values)if(s.stacktrace?.frames?.length)for(let i=s.stacktrace.frames.length-1;i>=0;i--){let a=s.stacktrace.frames[i],c=a?.filename;if(!a||typeof c!="string"||typeof a.lineno!="number"||TSe(c)||gSe(a))continue;n[c]||(n[c]=[]),n[c].push(a.lineno)}}let r=Object.keys(n);if(r.length==0)return t;let o=[];for(let s of r){if(C4.get(s))continue;let i=n[s];if(!i)continue;i.sort((u,p)=>u-p);let a=ASe(i,e);if(a.every(u=>SSe(s,u)))continue;let c=ESe(Lx,s,{});o.push(RSe(s,a,c))}if(await Promise.all(o).catch(()=>{Se&&N.log("Failed to read one or more source files and resolve context lines")}),e>0&&t.exception?.values)for(let s of t.exception.values)s.stacktrace?.frames&&s.stacktrace.frames.length>0&&bSe(s.stacktrace.frames,e,Lx);return t}function bSe(t,e,n){for(let r of t)if(r.filename&&r.context_line===void 0&&typeof r.lineno=="number"){let o=n.get(r.filename);if(o===void 0)continue;NSe(r.lineno,r,e,o)}}function x4(t){delete t.pre_context,delete t.context_line,delete t.post_context}function NSe(t,e,n,r){if(e.lineno===void 0||r===void 0){Se&&N.error("Cannot resolve context for frame with no lineno or file contents");return}e.pre_context=[];for(let s=M4(t,n);s<t;s++){let i=r[s];if(i===void 0){x4(e),Se&&N.error(`Could not find line ${s} in file ${e.filename}`);return}e.pre_context.push(i)}if(r[t]===void 0){x4(e),Se&&N.error(`Could not find line ${t} in file ${e.filename}`);return}e.context_line=r[t];let o=w4(t,n);e.post_context=[];for(let s=t+1;s<=o;s++){let i=r[s];if(i===void 0)break;e.post_context.push(i)}}function M4(t,e){return Math.max(1,t-e)}function w4(t,e){return t+e}function P4(t,e){return[M4(t,e),w4(t,e)]}var OSe=((t={})=>{let e=t.frameContextLines!==void 0?t.frameContextLines:fSe;return{name:mSe,processEvent(n){return ySe(n,e)}}}),L4=OSe;import{Worker as ISe}from"node:worker_threads";var yS;async function bS(){if(yS===void 0)try{yS=!!(await import("node:inspector")).url()}catch{yS=!1}return yS}var hm="__SENTRY_ERROR_LOCAL_VARIABLES__";function k4(t,e,n){let r=0,o=5,s=0;return setInterval(()=>{s===0?r>t&&(o*=2,n(o),o>86400&&(o=86400),s=o):(s-=1,s===0&&e()),r=0},1e3).unref(),()=>{r+=1}}function D4(t){return t!==void 0&&(t.length===0||t==="?"||t==="<anonymous>")}function NS(t,e){return t===e||`Object.${t}`===e||t===`Object.${e}`||D4(t)&&D4(e)}var vSe="LyohIEBzZW50cnkvbm9kZS1jb3JlIDEwLjMyLjEgKDUyOGFkZTIpIHwgaHR0cHM6Ly9naXRodWIuY29tL2dldHNlbnRyeS9zZW50cnktamF2YXNjcmlwdCAqLwppbXBvcnR7U2Vzc2lvbiBhcyBlfWZyb20ibm9kZTppbnNwZWN0b3IvcHJvbWlzZXMiO2ltcG9ydHt3b3JrZXJEYXRhIGFzIHR9ZnJvbSJub2RlOndvcmtlcl90aHJlYWRzIjtjb25zdCBuPWdsb2JhbFRoaXMsaT17fTtjb25zdCBvPSJfX1NFTlRSWV9FUlJPUl9MT0NBTF9WQVJJQUJMRVNfXyI7Y29uc3QgYT10O2Z1bmN0aW9uIHMoLi4uZSl7YS5kZWJ1ZyYmZnVuY3Rpb24oZSl7aWYoISgiY29uc29sZSJpbiBuKSlyZXR1cm4gZSgpO2NvbnN0IHQ9bi5jb25zb2xlLG89e30sYT1PYmplY3Qua2V5cyhpKTthLmZvckVhY2goZT0+e2NvbnN0IG49aVtlXTtvW2VdPXRbZV0sdFtlXT1ufSk7dHJ5e3JldHVybiBlKCl9ZmluYWxseXthLmZvckVhY2goZT0+e3RbZV09b1tlXX0pfX0oKCk9PmNvbnNvbGUubG9nKCJbTG9jYWxWYXJpYWJsZXMgV29ya2VyXSIsLi4uZSkpfWFzeW5jIGZ1bmN0aW9uIGMoZSx0LG4saSl7Y29uc3Qgbz1hd2FpdCBlLnBvc3QoIlJ1bnRpbWUuZ2V0UHJvcGVydGllcyIse29iamVjdElkOnQsb3duUHJvcGVydGllczohMH0pO2lbbl09by5yZXN1bHQuZmlsdGVyKGU9PiJsZW5ndGgiIT09ZS5uYW1lJiYhaXNOYU4ocGFyc2VJbnQoZS5uYW1lLDEwKSkpLnNvcnQoKGUsdCk9PnBhcnNlSW50KGUubmFtZSwxMCktcGFyc2VJbnQodC5uYW1lLDEwKSkubWFwKGU9PmUudmFsdWU/LnZhbHVlKX1hc3luYyBmdW5jdGlvbiByKGUsdCxuLGkpe2NvbnN0IG89YXdhaXQgZS5wb3N0KCJSdW50aW1lLmdldFByb3BlcnRpZXMiLHtvYmplY3RJZDp0LG93blByb3BlcnRpZXM6ITB9KTtpW25dPW8ucmVzdWx0Lm1hcChlPT5bZS5uYW1lLGUudmFsdWU/LnZhbHVlXSkucmVkdWNlKChlLFt0LG5dKT0+KGVbdF09bixlKSx7fSl9ZnVuY3Rpb24gdShlLHQpe2UudmFsdWUmJigidmFsdWUiaW4gZS52YWx1ZT92b2lkIDA9PT1lLnZhbHVlLnZhbHVlfHxudWxsPT09ZS52YWx1ZS52YWx1ZT90W2UubmFtZV09YDwke2UudmFsdWUudmFsdWV9PmA6dFtlLm5hbWVdPWUudmFsdWUudmFsdWU6ImRlc2NyaXB0aW9uImluIGUudmFsdWUmJiJmdW5jdGlvbiIhPT1lLnZhbHVlLnR5cGU/dFtlLm5hbWVdPWA8JHtlLnZhbHVlLmRlc2NyaXB0aW9ufT5gOiJ1bmRlZmluZWQiPT09ZS52YWx1ZS50eXBlJiYodFtlLm5hbWVdPSI8dW5kZWZpbmVkPiIpKX1hc3luYyBmdW5jdGlvbiBsKGUsdCl7Y29uc3Qgbj1hd2FpdCBlLnBvc3QoIlJ1bnRpbWUuZ2V0UHJvcGVydGllcyIse29iamVjdElkOnQsb3duUHJvcGVydGllczohMH0pLGk9e307Zm9yKGNvbnN0IHQgb2Ygbi5yZXN1bHQpaWYodC52YWx1ZT8ub2JqZWN0SWQmJiJBcnJheSI9PT10LnZhbHVlLmNsYXNzTmFtZSl7Y29uc3Qgbj10LnZhbHVlLm9iamVjdElkO2F3YWl0IGMoZSxuLHQubmFtZSxpKX1lbHNlIGlmKHQudmFsdWU/Lm9iamVjdElkJiYiT2JqZWN0Ij09PXQudmFsdWUuY2xhc3NOYW1lKXtjb25zdCBuPXQudmFsdWUub2JqZWN0SWQ7YXdhaXQgcihlLG4sdC5uYW1lLGkpfWVsc2UgdC52YWx1ZSYmdSh0LGkpO3JldHVybiBpfWxldCBmOyhhc3luYyBmdW5jdGlvbigpe2NvbnN0IHQ9bmV3IGU7dC5jb25uZWN0VG9NYWluVGhyZWFkKCkscygiQ29ubmVjdGVkIHRvIG1haW4gdGhyZWFkIik7bGV0IG49ITE7dC5vbigiRGVidWdnZXIucmVzdW1lZCIsKCk9PntuPSExfSksdC5vbigiRGVidWdnZXIucGF1c2VkIixlPT57bj0hMCxhc3luYyBmdW5jdGlvbihlLHtyZWFzb246dCxkYXRhOntvYmplY3RJZDpufSxjYWxsRnJhbWVzOml9KXtpZigiZXhjZXB0aW9uIiE9PXQmJiJwcm9taXNlUmVqZWN0aW9uIiE9PXQpcmV0dXJuO2lmKGY/LigpLG51bGw9PW4pcmV0dXJuO2NvbnN0IGE9W107Zm9yKGxldCB0PTA7dDxpLmxlbmd0aDt0Kyspe2NvbnN0e3Njb3BlQ2hhaW46bixmdW5jdGlvbk5hbWU6byx0aGlzOnN9PWlbdF0sYz1uLmZpbmQoZT0+ImxvY2FsIj09PWUudHlwZSkscj0iZ2xvYmFsIiE9PXMuY2xhc3NOYW1lJiZzLmNsYXNzTmFtZT9gJHtzLmNsYXNzTmFtZX0uJHtvfWA6bztpZih2b2lkIDA9PT1jPy5vYmplY3Qub2JqZWN0SWQpYVt0XT17ZnVuY3Rpb246cn07ZWxzZXtjb25zdCBuPWF3YWl0IGwoZSxjLm9iamVjdC5vYmplY3RJZCk7YVt0XT17ZnVuY3Rpb246cix2YXJzOm59fX1hd2FpdCBlLnBvc3QoIlJ1bnRpbWUuY2FsbEZ1bmN0aW9uT24iLHtmdW5jdGlvbkRlY2xhcmF0aW9uOmBmdW5jdGlvbigpIHsgdGhpcy4ke299ID0gdGhpcy4ke299IHx8ICR7SlNPTi5zdHJpbmdpZnkoYSl9OyB9YCxzaWxlbnQ6ITAsb2JqZWN0SWQ6bn0pLGF3YWl0IGUucG9zdCgiUnVudGltZS5yZWxlYXNlT2JqZWN0Iix7b2JqZWN0SWQ6bn0pfSh0LGUucGFyYW1zKS50aGVuKGFzeW5jKCk9PntuJiZhd2FpdCB0LnBvc3QoIkRlYnVnZ2VyLnJlc3VtZSIpfSxhc3luYyBlPT57biYmYXdhaXQgdC5wb3N0KCJEZWJ1Z2dlci5yZXN1bWUiKX0pfSksYXdhaXQgdC5wb3N0KCJEZWJ1Z2dlci5lbmFibGUiKTtjb25zdCBpPSExIT09YS5jYXB0dXJlQWxsRXhjZXB0aW9ucztpZihhd2FpdCB0LnBvc3QoIkRlYnVnZ2VyLnNldFBhdXNlT25FeGNlcHRpb25zIix7c3RhdGU6aT8iYWxsIjoidW5jYXVnaHQifSksaSl7Y29uc3QgZT1hLm1heEV4Y2VwdGlvbnNQZXJTZWNvbmR8fDUwO2Y9ZnVuY3Rpb24oZSx0LG4pe2xldCBpPTAsbz01LGE9MDtyZXR1cm4gc2V0SW50ZXJ2YWwoKCk9PnswPT09YT9pPmUmJihvKj0yLG4obyksbz44NjQwMCYmKG89ODY0MDApLGE9byk6KGEtPTEsMD09PWEmJnQoKSksaT0wfSwxZTMpLnVucmVmKCksKCk9PntpKz0xfX0oZSxhc3luYygpPT57cygiUmF0ZS1saW1pdCBsaWZ0ZWQuIiksYXdhaXQgdC5wb3N0KCJEZWJ1Z2dlci5zZXRQYXVzZU9uRXhjZXB0aW9ucyIse3N0YXRlOiJhbGwifSl9LGFzeW5jIGU9PntzKGBSYXRlLWxpbWl0IGV4Y2VlZGVkLiBEaXNhYmxpbmcgY2FwdHVyaW5nIG9mIGNhdWdodCBleGNlcHRpb25zIGZvciAke2V9IHNlY29uZHMuYCksYXdhaXQgdC5wb3N0KCJEZWJ1Z2dlci5zZXRQYXVzZU9uRXhjZXB0aW9ucyIse3N0YXRlOiJ1bmNhdWdodCJ9KX0pfX0pKCkuY2F0Y2goZT0+e3MoIkZhaWxlZCB0byBzdGFydCBkZWJ1Z2dlciIsZSl9KSxzZXRJbnRlcnZhbCgoKT0+e30sMWU0KTs=";function U4(...t){N.log("[LocalVariables]",...t)}var $4=((t={})=>{function e(s,i){let a=(s.stacktrace?.frames||[]).filter(c=>c.function!=="new Promise");for(let c=0;c<a.length;c++){let u=a.length-c-1,p=i[c],l=a[u];if(!l||!p)break;p.vars===void 0||l.in_app===!1&&t.includeOutOfAppFrames!==!0||!NS(l.function,p.function)||(l.vars=p.vars)}}function n(s,i){if(i.originalException&&typeof i.originalException=="object"&&hm in i.originalException&&Array.isArray(i.originalException[hm])){for(let a of s.exception?.values||[])e(a,i.originalException[hm]);i.originalException[hm]=void 0}return s}async function r(){let s=await import("node:inspector");s.url()||s.open(0)}function o(s){let i=new ISe(new URL(`data:application/javascript;base64,${vSe}`),{workerData:s,execArgv:[],env:{...process.env,NODE_OPTIONS:void 0}});process.on("exit",()=>{i.terminate()}),i.once("error",a=>{U4("Worker error",a)}),i.once("exit",a=>{U4("Worker exit",a)}),i.unref()}return{name:"LocalVariablesAsync",async setup(s){if(!s.getOptions().includeLocalVariables)return;if(await bS()){N.warn("Local variables capture has been disabled because the debugger was already enabled");return}let a={...t,debug:N.isEnabled()};r().then(()=>{try{o(a)}catch(c){N.error("Failed to start worker",c)}},c=>{N.error("Failed to start inspector",c)})},processEvent(s,i){return n(s,i)}}});function G4(t){if(t!==void 0)return t.slice(-10).reduce((e,n)=>`${e},${n.function},${n.lineno},${n.colno}`,"")}function xSe(t,e){if(e!==void 0)return G4(t(e,1))}function V4(t){let e=[],n=!1;function r(i){e=[],!n&&(n=!0,t(i))}e.push(r);function o(i){e.push(i)}function s(i){let a=e.pop()||r;try{a(i)}catch{r(i)}}return{add:o,next:s}}var Dx=class t{constructor(e){this._session=e}static async create(e){if(e)return e;let n=await import("node:inspector");return new t(new n.Session)}configureAndConnect(e,n){this._session.connect(),this._session.on("Debugger.paused",r=>{e(r,()=>{this._session.post("Debugger.resume")})}),this._session.post("Debugger.enable"),this._session.post("Debugger.setPauseOnExceptions",{state:n?"all":"uncaught"})}setPauseOnExceptions(e){this._session.post("Debugger.setPauseOnExceptions",{state:e?"all":"uncaught"})}getLocalVariables(e,n){this._getProperties(e,r=>{let{add:o,next:s}=V4(n);for(let i of r)if(i.value?.objectId&&i.value.className==="Array"){let a=i.value.objectId;o(c=>this._unrollArray(a,i.name,c,s))}else if(i.value?.objectId&&i.value.className==="Object"){let a=i.value.objectId;o(c=>this._unrollObject(a,i.name,c,s))}else i.value&&o(a=>this._unrollOther(i,a,s));s({})})}_getProperties(e,n){this._session.post("Runtime.getProperties",{objectId:e,ownProperties:!0},(r,o)=>{n(r?[]:o.result)})}_unrollArray(e,n,r,o){this._getProperties(e,s=>{r[n]=s.filter(i=>i.name!=="length"&&!isNaN(parseInt(i.name,10))).sort((i,a)=>parseInt(i.name,10)-parseInt(a.name,10)).map(i=>i.value?.value),o(r)})}_unrollObject(e,n,r,o){this._getProperties(e,s=>{r[n]=s.map(i=>[i.name,i.value?.value]).reduce((i,[a,c])=>(i[a]=c,i),{}),o(r)})}_unrollOther(e,n,r){e.value&&("value"in e.value?e.value.value===void 0||e.value.value===null?n[e.name]=`<${e.value.value}>`:n[e.name]=e.value.value:"description"in e.value&&e.value.type!=="function"?n[e.name]=`<${e.value.description}>`:e.value.type==="undefined"&&(n[e.name]="<undefined>")),r(n)}},PSe="LocalVariables",CSe=((t={},e)=>{let n=new Or(20),r,o=!1;function s(u){let p=G4(u.stacktrace?.frames);if(p===void 0)return;let l=n.remove(p);if(l===void 0)return;let d=(u.stacktrace?.frames||[]).filter(f=>f.function!=="new Promise");for(let f=0;f<d.length;f++){let m=d.length-f-1,h=l[f],E=d[m];if(!E||!h)break;h.vars===void 0||E.in_app===!1&&t.includeOutOfAppFrames!==!0||!NS(E.function,h.function)||(E.vars=h.vars)}}function i(u){for(let p of u.exception?.values||[])s(p);return u}let a;async function c(){let p=$()?.getOptions();if(!p?.includeLocalVariables)return;if(Si<18){N.log("The `LocalVariables` integration is only supported on Node >= v18.");return}if(await bS()){N.warn("Local variables capture has been disabled because the debugger was already enabled");return}try{let d=await Dx.create(e),f=(h,{params:{reason:E,data:A,callFrames:R}},y)=>{if(E!=="exception"&&E!=="promiseRejection"){y();return}r?.();let O=xSe(h,A.description);if(O==null){y();return}let{add:P,next:M}=V4(j=>{n.set(O,j),y()});for(let j=0;j<Math.min(R.length,5);j++){let{scopeChain:se,functionName:we,this:gt}=R[j],dn=se.find(Ke=>Ke.type==="local"),fn=gt.className==="global"||!gt.className?we:`${gt.className}.${we}`;if(dn?.object.objectId===void 0)P(Ke=>{Ke[j]={function:fn},M(Ke)});else{let Ke=dn.object.objectId;P(jn=>d.getLocalVariables(Ke,Hr=>{jn[j]={function:fn,vars:Hr},M(jn)}))}}M([])},m=t.captureAllExceptions!==!1;if(d.configureAndConnect((h,E)=>f(p.stackParser,h,E),m),m){let h=t.maxExceptionsPerSecond||50;r=k4(h,()=>{N.log("Local variables rate-limit lifted."),d.setPauseOnExceptions(!0)},E=>{N.log(`Local variables rate-limit exceeded. Disabling capturing of caught exceptions for ${E} seconds.`),d.setPauseOnExceptions(!1)})}o=!0}catch(d){N.log("The `LocalVariables` integration failed to start.",d)}}return{name:PSe,setupOnce(){a=c()},async processEvent(u){return await a,o?i(u):u},_getCachedFramesCount(){return n.size},_getFirstCachedFrame(){return n.values()[0]}}}),B4=CSe;var j4=(t={})=>nu.major<19?B4(t):$4(t);import{existsSync as MSe,readFileSync as z4}from"node:fs";import{dirname as wSe,join as Y4}from"node:path";function Em(){try{return typeof module<"u"&&typeof module.exports<"u"}catch{return!1}}var H4;function F4(){return Em()?!1:Si>=21||Si===20&&_m>=6||Si===18&&_m>=19?!0:(H4||(H4=!0,Yt(()=>{console.warn(`[Sentry] You are using Node.js v${process.versions.node} in ESM mode ("import syntax"). The Sentry Node.js SDK is not compatible with ESM in Node.js versions before 18.19.0 or before 20.6.0. Please either build your application with CommonJS ("require() syntax"), or upgrade your Node.js version.`)})),!1)}var kx,LSe="Modules",DSe=typeof __SENTRY_SERVER_MODULES__>"u"?{}:__SENTRY_SERVER_MODULES__,kSe=(()=>({name:LSe,processEvent(t){return t.modules={...t.modules,...q4()},t},getModules:q4})),W4=kSe;function USe(){try{return q.cache?Object.keys(q.cache):[]}catch{return[]}}function $Se(){return{...DSe,...BSe(),...Em()?GSe():{}}}function GSe(){let t=q.main?.paths||[],e=USe(),n={},r=new Set;return e.forEach(o=>{let s=o,i=()=>{let a=s;if(s=wSe(a),!s||a===s||r.has(a))return;if(t.indexOf(s)<0)return i();let c=Y4(a,"package.json");if(r.add(a),!MSe(c))return i();try{let u=JSON.parse(z4(c,"utf8"));n[u.name]=u.version}catch{}};i()}),n}function q4(){return kx||(kx=$Se()),kx}function VSe(){try{let t=Y4(process.cwd(),"package.json");return JSON.parse(z4(t,"utf8"))}catch{return{}}}function BSe(){let t=VSe();return{...t.dependencies,...t.devDependencies}}var jSe=2e3;function Tm(t){Yt(()=>{console.error(t)});let e=$();if(e===void 0){Se&&N.warn("No NodeClient was defined, we are exiting the process now."),global.process.exit(1);return}let n=e.getOptions(),r=n?.shutdownTimeout&&n.shutdownTimeout>0?n.shutdownTimeout:jSe;e.close(r).then(o=>{o||Se&&N.warn("We reached the timeout for emptying the request buffer, still exiting now!"),global.process.exit(1)},o=>{Se&&N.error(o)})}var HSe="OnUncaughtException",K4=(t={})=>{let e={exitEvenIfOtherHandlersAreRegistered:!1,...t};return{name:HSe,setup(n){global.process.on("uncaughtException",FSe(n,e))}}};function FSe(t,e){let r=!1,o=!1,s=!1,i,a=t.getOptions();return Object.assign(c=>{let u=Tm;e.onFatalError?u=e.onFatalError:a.onFatalError&&(u=a.onFatalError);let l=global.process.listeners("uncaughtException").filter(f=>f.name!=="domainUncaughtExceptionClear"&&f.tag!=="sentry_tracingErrorCallback"&&f._errorHandler!==!0).length===0,d=e.exitEvenIfOtherHandlersAreRegistered||l;r?d&&(s?(Se&&N.warn("uncaught exception after calling fatal error shutdown callback - this is bad! forcing shutdown"),Tm(c)):o||(o=!0,setTimeout(()=>{s||(s=!0,u(i,c))},2e3))):(i=c,r=!0,$()===t&&Ee(c,{originalException:c,captureContext:{level:"fatal"},mechanism:{handled:!1,type:"auto.node.onuncaughtexception"}}),!s&&d&&(s=!0,u(c)))},{_errorHandler:!0})}var qSe="OnUnhandledRejection",zSe=[{name:"AI_NoOutputGeneratedError"}],YSe=((t={})=>{let e={mode:t.mode??"warn",ignore:[...zSe,...t.ignore??[]]};return{name:qSe,setup(n){global.process.on("unhandledRejection",JSe(n,e))}}}),Z4=YSe;function WSe(t){if(typeof t!="object"||t===null)return{name:"",message:String(t??"")};let e=t,n=typeof e.name=="string"?e.name:"",r=typeof e.message=="string"?e.message:String(t);return{name:n,message:r}}function KSe(t,e){let n=t.name===void 0||ui(e.name,t.name,!0),r=t.message===void 0||ui(e.message,t.message);return n&&r}function ZSe(t,e){let n=WSe(e);return t.some(r=>KSe(r,n))}function JSe(t,e){return function(r,o){if($()!==t||ZSe(e.ignore??[],r))return;let s=e.mode==="strict"?"fatal":"error",i=r&&typeof r=="object"?r._sentry_active_span:void 0;(i?c=>ua(i,c):c=>c())(()=>{Ee(r,{originalException:o,captureContext:{extra:{unhandledPromiseRejection:!0},level:s},mechanism:{handled:!1,type:"auto.node.onunhandledrejection"}})}),QSe(r,e.mode)}}function QSe(t,e){let n="This error originated either by throwing inside of an async function without a catch block, or by rejecting a promise which was not handled with .catch(). The promise rejected with the reason:";e==="warn"?Yt(()=>{console.warn(n),console.error(t&&typeof t=="object"&&"stack"in t?t.stack:t)}):e==="strict"&&(Yt(()=>{console.warn(n)}),Tm(t))}import*as J4 from"node:http";var Ux="Spotlight",XSe=((t={})=>{let e={sidecarUrl:t.sidecarUrl||"http://localhost:8969/stream"};return{name:Ux,setup(n){try{N.warn("[Spotlight] It seems you're not in dev mode. Do you really want to have Spotlight enabled?")}catch{}eAe(n,e)}}}),Q4=XSe;function eAe(t,e){let n=tAe(e.sidecarUrl);if(!n)return;let r=0;t.on("beforeEnvelope",o=>{if(r>3){N.warn("[Spotlight] Disabled Sentry -> Spotlight integration due to too many failed requests");return}let s=Pf(o);Dp(()=>{let i=J4.request({method:"POST",path:n.pathname,hostname:n.hostname,port:n.port,headers:{"Content-Type":"application/x-sentry-envelope"}},a=>{a.statusCode&&a.statusCode>=200&&a.statusCode<400&&(r=0),a.on("data",()=>{}),a.on("end",()=>{}),a.setEncoding("utf8")});i.on("error",()=>{r++,N.warn("[Spotlight] Failed to send envelope to Spotlight Sidecar")}),i.write(s),i.end()})})}function tAe(t){try{return new URL(`${t}`)}catch{N.warn(`[Spotlight] Invalid sidecar URL: ${t}`);return}}import*as X4 from"node:util";var nAe="NodeSystemError";function rAe(t){return!(t instanceof Error)||!("errno"in t)||typeof t.errno!="number"?!1:X4.getSystemErrorMap().has(t.errno)}var e9=(t={})=>({name:nAe,processEvent:(e,n,r)=>{if(!rAe(n.originalException))return e;let o=n.originalException,s={...o};!r.getOptions().sendDefaultPii&&t.includePaths!==!0&&(delete s.path,delete s.dest),e.contexts={...e.contexts,node_system_error:s};for(let i of e.exception?.values||[])i.value&&(o.path&&i.value.includes(o.path)&&(i.value=i.value.replace(`'${o.path}'`,"").trim()),o.dest&&i.value.includes(o.dest)&&(i.value=i.value.replace(`'${o.dest}'`,"").trim()));return e}});import*as $x from"node:diagnostics_channel";var oAe="ChildProcess",t9=(t={})=>({name:oAe,setup(){$x.channel("child_process").subscribe(e=>{e&&typeof e=="object"&&"process"in e&&sAe(e.process,t)}),$x.channel("worker_threads").subscribe(e=>{e&&typeof e=="object"&&"worker"in e&&iAe(e.worker,t)})}});function sAe(t,e){let n=!1,r;t.on("spawn",()=>{if(t.spawnfile==="/usr/bin/sw_vers"){n=!0;return}r={spawnfile:t.spawnfile},e.includeChildProcessArgs&&(r.spawnargs=t.spawnargs)}).on("exit",o=>{n||(n=!0,o!==null&&o!==0&&go({category:"child_process",message:`Child process exited with code '${o}'`,level:o===0?"info":"warning",data:r}))}).on("error",o=>{n||(n=!0,go({category:"child_process",message:`Child process errored with '${o.message}'`,level:"error",data:r}))})}function iAe(t,e){let n;t.on("online",()=>{n=t.threadId}).on("error",r=>{e.captureWorkerErrors!==!1?Ee(r,{mechanism:{type:"auto.child_process.worker_thread",handled:!1,data:{threadId:String(n)}}}):go({category:"worker_thread",message:`Worker thread errored with '${r.message}'`,level:"error",data:{threadId:n}})})}var s9=k(o9(),1);var Hx=c4(s9.AsyncLocalStorageContextManager);var gm=k(U(),1);function Fx(){gm.diag.disable(),gm.diag.setLogger({error:N.error,warn:N.warn,info:N.log,debug:N.log,verbose:N.log},gm.DiagLogLevel.DEBUG)}var EAe="ProcessSession",i9=()=>({name:EAe,setupOnce(){KT(),process.on("beforeExit",()=>{ve().getSession()?.status!=="ok"&&kf()})}});import*as gAe from"node:http";import*as SAe from"node:https";import{Readable as AAe}from"node:stream";import{createGzip as RAe}from"node:zlib";import*as Ai from"node:net";import*as zx from"node:tls";import*as qx from"node:http";var $s=Symbol("AgentBaseInternalState"),xS=class extends qx.Agent{constructor(e){super(e),this[$s]={}}isSecureEndpoint(e){if(e){if(typeof e.secureEndpoint=="boolean")return e.secureEndpoint;if(typeof e.protocol=="string")return e.protocol==="https:"}let{stack:n}=new Error;return typeof n!="string"?!1:n.split(`
`).some(r=>r.indexOf("(https.js:")!==-1||r.indexOf("node:https:")!==-1)}createSocket(e,n,r){let o={...n,secureEndpoint:this.isSecureEndpoint(n)};Promise.resolve().then(()=>this.connect(e,o)).then(s=>{if(s instanceof qx.Agent)return s.addRequest(e,o);this[$s].currentSocket=s,super.createSocket(e,n,r)},r)}createConnection(){let e=this[$s].currentSocket;if(this[$s].currentSocket=void 0,!e)throw new Error("No socket was returned in the `connect()` function");return e}get defaultPort(){return this[$s].defaultPort??(this.protocol==="https:"?443:80)}set defaultPort(e){this[$s]&&(this[$s].defaultPort=e)}get protocol(){return this[$s].protocol??(this.isSecureEndpoint()?"https:":"http:")}set protocol(e){this[$s]&&(this[$s].protocol=e)}};function PS(...t){N.log("[https-proxy-agent:parse-proxy-response]",...t)}function a9(t){return new Promise((e,n)=>{let r=0,o=[];function s(){let p=t.read();p?u(p):t.once("readable",s)}function i(){t.removeListener("end",a),t.removeListener("error",c),t.removeListener("readable",s)}function a(){i(),PS("onend"),n(new Error("Proxy connection ended before receiving CONNECT response"))}function c(p){i(),PS("onerror %o",p),n(p)}function u(p){o.push(p),r+=p.length;let l=Buffer.concat(o,r),d=l.indexOf(`\r
\r
`);if(d===-1){PS("have not received end of HTTP headers yet..."),s();return}let f=l.subarray(0,d).toString("ascii").split(`\r
`),m=f.shift();if(!m)return t.destroy(),n(new Error("No header received from proxy CONNECT response"));let h=m.split(" "),E=+(h[1]||0),A=h.slice(2).join(" "),R={};for(let y of f){if(!y)continue;let O=y.indexOf(":");if(O===-1)return t.destroy(),n(new Error(`Invalid header from proxy CONNECT response: "${y}"`));let P=y.slice(0,O).toLowerCase(),M=y.slice(O+1).trimStart(),j=R[P];typeof j=="string"?R[P]=[j,M]:Array.isArray(j)?j.push(M):R[P]=M}PS("got proxy server response: %o %o",m,R),i(),e({connect:{statusCode:E,statusText:A,headers:R},buffered:l})}t.on("error",c),t.on("end",a),s()})}function Sm(...t){N.log("[https-proxy-agent]",...t)}var Am=class extends xS{static __initStatic(){this.protocols=["http","https"]}constructor(e,n){super(n),this.options={},this.proxy=typeof e=="string"?new URL(e):e,this.proxyHeaders=n?.headers??{},Sm("Creating new HttpsProxyAgent instance: %o",this.proxy.href);let r=(this.proxy.hostname||this.proxy.host).replace(/^\[|\]$/g,""),o=this.proxy.port?parseInt(this.proxy.port,10):this.proxy.protocol==="https:"?443:80;this.connectOpts={ALPNProtocols:["http/1.1"],...n?c9(n,"headers"):null,host:r,port:o}}async connect(e,n){let{proxy:r}=this;if(!n.host)throw new TypeError('No "host" provided');let o;if(r.protocol==="https:"){Sm("Creating `tls.Socket`: %o",this.connectOpts);let d=this.connectOpts.servername||this.connectOpts.host;o=zx.connect({...this.connectOpts,servername:d&&Ai.isIP(d)?void 0:d})}else Sm("Creating `net.Socket`: %o",this.connectOpts),o=Ai.connect(this.connectOpts);let s=typeof this.proxyHeaders=="function"?this.proxyHeaders():{...this.proxyHeaders},i=Ai.isIPv6(n.host)?`[${n.host}]`:n.host,a=`CONNECT ${i}:${n.port} HTTP/1.1\r
`;if(r.username||r.password){let d=`${decodeURIComponent(r.username)}:${decodeURIComponent(r.password)}`;s["Proxy-Authorization"]=`Basic ${Buffer.from(d).toString("base64")}`}s.Host=`${i}:${n.port}`,s["Proxy-Connection"]||(s["Proxy-Connection"]=this.keepAlive?"Keep-Alive":"close");for(let d of Object.keys(s))a+=`${d}: ${s[d]}\r
`;let c=a9(o);o.write(`${a}\r
`);let{connect:u,buffered:p}=await c;if(e.emit("proxyConnect",u),this.emit("proxyConnect",u,e),u.statusCode===200){if(e.once("socket",TAe),n.secureEndpoint){Sm("Upgrading socket connection to TLS");let d=n.servername||n.host;return zx.connect({...c9(n,"host","path","port"),socket:o,servername:Ai.isIP(d)?void 0:d})}return o}o.destroy();let l=new Ai.Socket({writable:!1});return l.readable=!0,e.once("socket",d=>{Sm("Replaying proxy buffer for failed request"),d.push(p),d.push(null)}),l}};Am.__initStatic();function TAe(t){t.resume()}function c9(t,...e){let n={},r;for(r in t)e.includes(r)||(n[r]=t[r]);return n}var yAe=1024*32;function bAe(t){return new AAe({read(){this.push(t),this.push(null)}})}function u9(t){let e;try{e=new URL(t.url)}catch{return Yt(()=>{console.warn("[@sentry/node]: Invalid dsn or tunnel option, will not send any events. The tunnel option must be a full URL when used.")}),Gf(t,()=>Promise.resolve({}))}let n=e.protocol==="https:",r=NAe(e,t.proxy||(n?process.env.https_proxy:void 0)||process.env.http_proxy),o=n?SAe:gAe,s=t.keepAlive===void 0?!1:t.keepAlive,i=r?new Am(r):new o.Agent({keepAlive:s,maxSockets:30,timeout:2e3}),a=OAe(t,t.httpModule??o,i);return Gf(t,a)}function NAe(t,e){let{no_proxy:n}=process.env;if(!n?.split(",").some(o=>t.host.endsWith(o)||t.hostname.endsWith(o)))return e}function OAe(t,e,n){let{hostname:r,pathname:o,port:s,protocol:i,search:a}=new URL(t.url);return function(u){return new Promise((p,l)=>{Dp(()=>{let d=bAe(u.body),f={...t.headers};u.body.length>yAe&&(f["content-encoding"]="gzip",d=d.pipe(RAe()));let m=e.request({method:"POST",agent:n,headers:f,hostname:r,path:`${o}${a}`,port:s,protocol:i,ca:t.caCerts},h=>{h.on("data",()=>{}),h.on("end",()=>{}),h.setEncoding("utf8");let E=h.headers["retry-after"]??null,A=h.headers["x-sentry-rate-limits"]??null;p({statusCode:h.statusCode,headers:{"retry-after":E,"x-sentry-rate-limits":Array.isArray(A)?A[0]||null:A}})});m.on("error",l),d.pipe(m)})})}}var IAe=new Set(["false","f","n","no","off","0"]),vAe=new Set(["true","t","y","yes","on","1"]);function CS(t,e){let n=String(t).toLowerCase();return IAe.has(n)?!1:vAe.has(n)?!0:e?.strict?null:!!t}import{posix as xAe,sep as PAe}from"node:path";function p9(t){return t.replace(/^[A-Z]:/,"").replace(/\\/g,"/")}function l9(t=process.argv[1]?KI(process.argv[1]):process.cwd(),e=PAe==="\\"){let n=e?p9(t):t;return r=>{if(!r)return;let o=e?p9(r):r,{dir:s,base:i,ext:a}=xAe.parse(o);(a===".js"||a===".mjs"||a===".cjs")&&(i=i.slice(0,a.length*-1));let c=decodeURIComponent(i);s||(s=".");let u=s.lastIndexOf("/node_modules");if(u>-1)return`${s.slice(u+14).replace(/\//g,".")}:${c}`;if(s.startsWith(n)){let p=s.slice(n.length+1).replace(/\//g,".");return p?`${p}:${c}`:c}return c}}function d9(t){if(process.env.SENTRY_RELEASE)return process.env.SENTRY_RELEASE;if(de.SENTRY_RELEASE?.id)return de.SENTRY_RELEASE.id;let e=process.env.GITHUB_SHA||process.env.CI_MERGE_REQUEST_SOURCE_BRANCH_SHA||process.env.CI_BUILD_REF||process.env.CI_COMMIT_SHA||process.env.BITBUCKET_COMMIT,n=process.env.APPVEYOR_PULL_REQUEST_HEAD_COMMIT||process.env.APPVEYOR_REPO_COMMIT||process.env.CODEBUILD_RESOLVED_SOURCE_VERSION||process.env.AWS_COMMIT_ID||process.env.BUILD_SOURCEVERSION||process.env.GIT_CLONE_COMMIT_HASH||process.env.BUDDY_EXECUTION_REVISION||process.env.BUILDKITE_COMMIT||process.env.CIRCLE_SHA1||process.env.CIRRUS_CHANGE_IN_REPO||process.env.CF_REVISION||process.env.CM_COMMIT||process.env.CF_PAGES_COMMIT_SHA||process.env.DRONE_COMMIT_SHA||process.env.FC_GIT_COMMIT_SHA||process.env.HEROKU_TEST_RUN_COMMIT_VERSION||process.env.HEROKU_SLUG_COMMIT||process.env.RAILWAY_GIT_COMMIT_SHA||process.env.RENDER_GIT_COMMIT||process.env.SEMAPHORE_GIT_SHA||process.env.TRAVIS_PULL_REQUEST_SHA||process.env.VERCEL_GIT_COMMIT_SHA||process.env.VERCEL_GITHUB_COMMIT_SHA||process.env.VERCEL_GITLAB_COMMIT_SHA||process.env.VERCEL_BITBUCKET_COMMIT_SHA||process.env.ZEIT_GITHUB_COMMIT_SHA||process.env.ZEIT_GITLAB_COMMIT_SHA||process.env.ZEIT_BITBUCKET_COMMIT_SHA,r=process.env.CI_COMMIT_ID||process.env.SOURCE_COMMIT||process.env.SOURCE_VERSION||process.env.GIT_COMMIT||process.env.COMMIT_REF||process.env.BUILD_VCS_NUMBER||process.env.CI_COMMIT_SHA;return e||n||r||t}var f9=bT(vv(l9()));var _9=k(U(),1),h9=k(_e(),1);import*as m9 from"node:os";import{threadId as CAe,isMainThread as MAe}from"worker_threads";var wAe=6e4,MS=class extends Vf{constructor(e){let n=e.includeServerName===!1?void 0:e.serverName||global.process.env.SENTRY_NAME||m9.hostname(),r={...e,platform:"node",runtime:{name:"node",version:global.process.version},serverName:n};e.openTelemetryInstrumentations&&(0,h9.registerInstrumentations)({instrumentations:e.openTelemetryInstrumentations}),zc(r,"node"),N.log(`Initializing Sentry: process: ${process.pid}, thread: ${MAe?"main":`worker-${CAe}`}.`),super(r),this.getOptions().enableLogs&&(this._logOnExitFlushListener=()=>{Uf(this)},n&&this.on("beforeCaptureLog",o=>{o.attributes={...o.attributes,"server.address":n}}),process.on("beforeExit",this._logOnExitFlushListener))}get tracer(){if(this._tracer)return this._tracer;let e="@sentry/node",n=Pe,r=_9.trace.getTracer(e,n);return this._tracer=r,r}async flush(e){return await this.traceProvider?.forceFlush(),this.getOptions().sendClientReports&&this._flushOutcomes(),super.flush(e)}async close(e){this._clientReportInterval&&clearInterval(this._clientReportInterval),this._clientReportOnExitFlushListener&&process.off("beforeExit",this._clientReportOnExitFlushListener),this._logOnExitFlushListener&&process.off("beforeExit",this._logOnExitFlushListener);let n=await super.close(e);return this.traceProvider&&await this.traceProvider.shutdown(),n}startClientReportTracking(){let e=this.getOptions();e.sendClientReports&&(this._clientReportOnExitFlushListener=()=>{this._flushOutcomes()},this._clientReportInterval=setInterval(()=>{Se&&N.log("Flushing client reports based on interval."),this._flushOutcomes()},e.clientReportFlushInterval??wAe).unref(),process.on("beforeExit",this._clientReportOnExitFlushListener))}_setupIntegrations(){jI(),super._setupIntegrations()}_getTraceInfoFromScope(e){return e?o4(this,e):[void 0,void 0]}};var E9=k(PO(),1);import*as T9 from"module";function Yx(){if(F4()&&!de._sentryEsmLoaderHookRegistered){de._sentryEsmLoaderHookRegistered=!0;try{let{addHookMessagePort:t}=(0,E9.createAddHookMessageChannel)();T9.register("import-in-the-middle/hook.mjs",import.meta.url,{data:{addHookMessagePort:t,include:[]},transferList:[t]})}catch(t){N.warn("Failed to register 'import-in-the-middle' hook",t)}}}function wS(){return[rg(),tg(),og(),sg(),e9(),ig(),S4(),N4(),K4(),Z4(),L4(),j4(),v4(),t9(),i9(),W4()]}function Wx(t={}){return LAe(t,wS)}function LAe(t={},e){let n=DAe(t,e);n.debug===!0&&(Se?N.enable():Yt(()=>{console.warn("[Sentry] Cannot initialize SDK with `debug` option using a non-debug bundle.")})),n.registerEsmLoaderHooks!==!1&&Yx(),a4(),Ye().update(n.initialScope),n.spotlight&&!n.integrations.some(({name:s})=>s===Ux)&&n.integrations.push(Q4({sidecarUrl:typeof n.spotlight=="string"?n.spotlight:void 0})),zc(n,"node-core");let o=new MS(n);return Ye().setClient(o),o.init(),de._sentryInjectLoaderHookRegister?.(),N.log(`SDK initialized from ${Em()?"CommonJS":"ESM"}`),o.startClientReportTracking(),$Ae(),qZ(o),i4(o),o}function Kx(){if(!Se)return;let t=KZ(),e=["SentryContextManager","SentryPropagator"];Kt()&&e.push("SentrySpanProcessor");for(let n of e)t.includes(n)||N.error(`You have to set up the ${n}. Without this, the OpenTelemetry & Sentry integration will not work properly.`);t.includes("SentrySampler")||N.warn("You have to set up the SentrySampler. Without this, the OpenTelemetry & Sentry integration may still work, but sample rates set for the Sentry SDK will not be respected. If you use a custom sampler, make sure to use `wrapSamplingDecision`.")}function DAe(t,e){let n=kAe(t.release),r;if(t.spotlight===!1)r=!1;else if(typeof t.spotlight=="string")r=t.spotlight;else{let c=CS(process.env.SENTRY_SPOTLIGHT,{strict:!0}),u=c===null&&process.env.SENTRY_SPOTLIGHT?process.env.SENTRY_SPOTLIGHT:void 0;r=t.spotlight===!0?u??!0:c??u}let o=UAe(t.tracesSampleRate),s={...t,dsn:t.dsn??process.env.SENTRY_DSN,environment:t.environment??process.env.SENTRY_ENVIRONMENT,sendClientReports:t.sendClientReports??!0,transport:t.transport??u9,stackParser:qO(t.stackParser||f9),release:n,tracesSampleRate:o,spotlight:r,debug:CS(t.debug??process.env.SENTRY_DEBUG)},i=t.integrations,a=t.defaultIntegrations??e(s);return{...s,integrations:wI({defaultIntegrations:a,integrations:i})}}function kAe(t){if(t!==void 0)return t;let e=d9();if(e!==void 0)return e}function UAe(t){if(t!==void 0)return t;let e=process.env.SENTRY_TRACES_SAMPLE_RATE;if(!e)return;let n=parseFloat(e);return isFinite(n)?n:void 0}function $Ae(){if(CS(process.env.SENTRY_USE_ENVIRONMENT)!==!1){let t=process.env.SENTRY_TRACE,e=process.env.SENTRY_BAGGAGE,n=Of(t,e);Ye().setPropagationContext(n)}}function Xe(t,e){t.setAttribute(le,e)}var Zx="Http",g9="@opentelemetry_sentry-patched/instrumentation-http",GAe=Y(`${Zx}.sentry`,t=>new tu(t)),VAe=Y(Zx,t=>{let e=new A9.HttpInstrumentation({...t,disableIncomingRequestInstrumentation:!0});try{e._diag=S9.diag.createComponentLogger({namespace:g9}),e.instrumentationName=g9}catch{}return e});function BAe(t,e={}){return typeof t.spans=="boolean"?t.spans:!(e.skipOpenTelemetrySetup||!Kt(e)&&nu.major>=22)}var R9=(t={})=>{let e=t.spans??!0,n=t.disableIncomingRequestSpans,r={sessions:t.trackIncomingRequestsAsSessions,sessionFlushingDelayMS:t.sessionFlushingDelayMS,ignoreRequestBody:t.ignoreIncomingRequestBody,maxRequestBodySize:t.maxIncomingRequestBodySize},o={ignoreIncomingRequests:t.ignoreIncomingRequests,ignoreStaticAssets:t.ignoreStaticAssets,ignoreStatusCodes:t.dropSpansForIncomingRequestStatusCodes,instrumentation:t.instrumentation,onSpanCreated:t.incomingRequestSpanHook},s=tm(r),i=nm(o),a=e&&!n;return{name:Zx,setup(c){let u=c.getOptions();a&&Kt(u)&&i.setup(c)},setupOnce(){let c=$()?.getOptions()||{},u=BAe(t,c);s.setupOnce();let p={breadcrumbs:t.breadcrumbs,propagateTraceInOutgoingRequests:!u,ignoreOutgoingRequests:t.ignoreOutgoingRequests};if(GAe(p),u){let l=jAe(t);VAe(l)}},processEvent(c){return i.processEvent(c)}}};function jAe(t={}){return{ignoreOutgoingRequestHook:n=>{let r=rm(n);if(!r)return!1;let o=t.ignoreOutgoingRequests;return!!o?.(r,n)},requireParentforOutgoingSpans:!1,requestHook:(n,r)=>{Xe(n,"auto.http.otel.http"),t.instrumentation?.requestHook?.(n,r)},responseHook:(n,r)=>{t.instrumentation?.responseHook?.(n,r)},applyCustomAttributesOnSpan:(n,r,o)=>{t.instrumentation?.applyCustomAttributesOnSpan?.(n,r,o)}}}var I9=k(O9(),1);var v9="NodeFetch",qAe=Y(v9,I9.UndiciInstrumentation,t=>ZAe(t)),zAe=Y(`${v9}.sentry`,ru,t=>t),YAe=((t={})=>({name:"NodeFetch",setupOnce(){KAe(t,$()?.getOptions())&&qAe(t),zAe(t)}})),x9=YAe;function WAe(t,e="/"){let n=`${t}`;return n.endsWith("/")&&e.startsWith("/")?`${n}${e.slice(1)}`:!n.endsWith("/")&&!e.startsWith("/")?`${n}/${e.slice(1)}`:`${n}${e}`}function KAe(t,e={}){return typeof t.spans=="boolean"?t.spans:!e.skipOpenTelemetrySetup&&Kt(e)}function ZAe(t={}){return{requireParentforSpans:!1,ignoreRequestHook:n=>{let r=WAe(n.origin,n.path),o=t.ignoreOutgoingRequests;return!!(o&&r&&o(r))},startSpanHook:()=>({[le]:"auto.http.otel.node_fetch"}),requestHook:t.requestHook,responseHook:t.responseHook}}var V9=k(G9(),1);var Ut=typeof __SENTRY_DEBUG__>"u"||__SENTRY_DEBUG__;var B9="Express";function dRe(t){Xe(t,"auto.http.otel.express");let e=ae(t).data,n=e["express.type"];n&&t.setAttribute(J,`${n}.express`);let r=e["express.name"];typeof r=="string"&&t.updateName(r)}function fRe(t,e){if(ve()===Eo())return Ut&&N.warn("Isolation scope is still default isolation scope - skipping setting transactionName"),e;if(t.layerType==="request_handler"){let n=t.request,r=n.method?n.method.toUpperCase():"GET";ve().setTransactionName(`${r} ${t.route}`)}return e}var j9=Y(B9,()=>new V9.ExpressInstrumentation({requestHook:t=>dRe(t),spanNameHook:(t,e)=>fRe(t,e)})),mRe=(()=>({name:B9,setupOnce(){j9()}})),H9=mRe;import*as aP from"node:diagnostics_channel";var Qt=k(U(),1),qS=k(ze(),1),S3=k(_e(),1),cn=k(Qe(),1);import _3 from"node:diagnostics_channel";var p3=k(n3(),1);var Om=t=>{if(typeof t!="string")throw new TypeError("invalid pattern");if(t.length>65536)throw new TypeError("pattern is too long")};var RRe={"[:alnum:]":["\\p{L}\\p{Nl}\\p{Nd}",!0],"[:alpha:]":["\\p{L}\\p{Nl}",!0],"[:ascii:]":["\\x00-\\x7f",!1],"[:blank:]":["\\p{Zs}\\t",!0],"[:cntrl:]":["\\p{Cc}",!0],"[:digit:]":["\\p{Nd}",!0],"[:graph:]":["\\p{Z}\\p{C}",!0,!0],"[:lower:]":["\\p{Ll}",!0],"[:print:]":["\\p{C}",!0],"[:punct:]":["\\p{P}",!0],"[:space:]":["\\p{Z}\\t\\r\\n\\v\\f",!0],"[:upper:]":["\\p{Lu}",!0],"[:word:]":["\\p{L}\\p{Nl}\\p{Nd}\\p{Pc}",!0],"[:xdigit:]":["A-Fa-f0-9",!1]},Im=t=>t.replace(/[[\]\\-]/g,"\\$&"),yRe=t=>t.replace(/[-[\]{}()*+?.,\\^$|#\s]/g,"\\$&"),r3=t=>t.join(""),o3=(t,e)=>{let n=e;if(t.charAt(n)!=="[")throw new Error("not in a brace expression");let r=[],o=[],s=n+1,i=!1,a=!1,c=!1,u=!1,p=n,l="";e:for(;s<t.length;){let h=t.charAt(s);if((h==="!"||h==="^")&&s===n+1){u=!0,s++;continue}if(h==="]"&&i&&!c){p=s+1;break}if(i=!0,h==="\\"&&!c){c=!0,s++;continue}if(h==="["&&!c){for(let[E,[A,R,y]]of Object.entries(RRe))if(t.startsWith(E,s)){if(l)return["$.",!1,t.length-n,!0];s+=E.length,y?o.push(A):r.push(A),a=a||R;continue e}}if(c=!1,l){h>l?r.push(Im(l)+"-"+Im(h)):h===l&&r.push(Im(h)),l="",s++;continue}if(t.startsWith("-]",s+1)){r.push(Im(h+"-")),s+=2;continue}if(t.startsWith("-",s+1)){l=h,s+=2;continue}r.push(Im(h)),s++}if(p<s)return["",!1,0,!1];if(!r.length&&!o.length)return["$.",!1,t.length-n,!0];if(o.length===0&&r.length===1&&/^\\?.$/.test(r[0])&&!u){let h=r[0].length===2?r[0].slice(-1):r[0];return[yRe(h),!1,p-n,!1]}let d="["+(u?"^":"")+r3(r)+"]",f="["+(u?"":"^")+r3(o)+"]";return[r.length&&o.length?"("+d+"|"+f+")":r.length?d:f,a,p-n,!0]};var va=(t,{windowsPathsNoEscape:e=!1}={})=>e?t.replace(/\[([^\/\\])\]/g,"$1"):t.replace(/((?!\\).|^)\[([^\/\\])\]/g,"$1$2").replace(/\\([^\/])/g,"$1");var bRe=new Set(["!","?","+","*","@"]),s3=t=>bRe.has(t),NRe="(?!(?:^|/)\\.\\.?(?:$|/))",jS="(?!\\.)",ORe=new Set(["[","."]),IRe=new Set(["..","."]),vRe=new Set("().*{}+?[]^$\\!"),xRe=t=>t.replace(/[-[\]{}()*+?.,\\^$|#\s]/g,"\\$&"),oP="[^/]",i3=oP+"*?",a3=oP+"+?",dl=class t{type;#n;#r;#s=!1;#e=[];#t;#i;#c;#a=!1;#o;#u;#l=!1;constructor(e,n,r={}){this.type=e,e&&(this.#r=!0),this.#t=n,this.#n=this.#t?this.#t.#n:this,this.#o=this.#n===this?r:this.#n.#o,this.#c=this.#n===this?[]:this.#n.#c,e==="!"&&!this.#n.#a&&this.#c.push(this),this.#i=this.#t?this.#t.#e.length:0}get hasMagic(){if(this.#r!==void 0)return this.#r;for(let e of this.#e)if(typeof e!="string"&&(e.type||e.hasMagic))return this.#r=!0;return this.#r}toString(){return this.#u!==void 0?this.#u:this.type?this.#u=this.type+"("+this.#e.map(e=>String(e)).join("|")+")":this.#u=this.#e.map(e=>String(e)).join("")}#f(){if(this!==this.#n)throw new Error("should only call on root");if(this.#a)return this;this.toString(),this.#a=!0;let e;for(;e=this.#c.pop();){if(e.type!=="!")continue;let n=e,r=n.#t;for(;r;){for(let o=n.#i+1;!r.type&&o<r.#e.length;o++)for(let s of e.#e){if(typeof s=="string")throw new Error("string part in extglob AST??");s.copyIn(r.#e[o])}n=r,r=n.#t}}return this}push(...e){for(let n of e)if(n!==""){if(typeof n!="string"&&!(n instanceof t&&n.#t===this))throw new Error("invalid part: "+n);this.#e.push(n)}}toJSON(){let e=this.type===null?this.#e.slice().map(n=>typeof n=="string"?n:n.toJSON()):[this.type,...this.#e.map(n=>n.toJSON())];return this.isStart()&&!this.type&&e.unshift([]),this.isEnd()&&(this===this.#n||this.#n.#a&&this.#t?.type==="!")&&e.push({}),e}isStart(){if(this.#n===this)return!0;if(!this.#t?.isStart())return!1;if(this.#i===0)return!0;let e=this.#t;for(let n=0;n<this.#i;n++){let r=e.#e[n];if(!(r instanceof t&&r.type==="!"))return!1}return!0}isEnd(){if(this.#n===this||this.#t?.type==="!")return!0;if(!this.#t?.isEnd())return!1;if(!this.type)return this.#t?.isEnd();let e=this.#t?this.#t.#e.length:0;return this.#i===e-1}copyIn(e){typeof e=="string"?this.push(e):this.push(e.clone(this))}clone(e){let n=new t(this.type,e);for(let r of this.#e)n.copyIn(r);return n}static#p(e,n,r,o){let s=!1,i=!1,a=-1,c=!1;if(n.type===null){let f=r,m="";for(;f<e.length;){let h=e.charAt(f++);if(s||h==="\\"){s=!s,m+=h;continue}if(i){f===a+1?(h==="^"||h==="!")&&(c=!0):h==="]"&&!(f===a+2&&c)&&(i=!1),m+=h;continue}else if(h==="["){i=!0,a=f,c=!1,m+=h;continue}if(!o.noext&&s3(h)&&e.charAt(f)==="("){n.push(m),m="";let E=new t(h,n);f=t.#p(e,E,f,o),n.push(E);continue}m+=h}return n.push(m),f}let u=r+1,p=new t(null,n),l=[],d="";for(;u<e.length;){let f=e.charAt(u++);if(s||f==="\\"){s=!s,d+=f;continue}if(i){u===a+1?(f==="^"||f==="!")&&(c=!0):f==="]"&&!(u===a+2&&c)&&(i=!1),d+=f;continue}else if(f==="["){i=!0,a=u,c=!1,d+=f;continue}if(s3(f)&&e.charAt(u)==="("){p.push(d),d="";let m=new t(f,p);p.push(m),u=t.#p(e,m,u,o);continue}if(f==="|"){p.push(d),d="",l.push(p),p=new t(null,n);continue}if(f===")")return d===""&&n.#e.length===0&&(n.#l=!0),p.push(d),d="",n.push(...l,p),u;d+=f}return n.type=null,n.#r=void 0,n.#e=[e.substring(r-1)],u}static fromGlob(e,n={}){let r=new t(null,void 0,n);return t.#p(e,r,0,n),r}toMMPattern(){if(this!==this.#n)return this.#n.toMMPattern();let e=this.toString(),[n,r,o,s]=this.toRegExpSource();if(!(o||this.#r||this.#o.nocase&&!this.#o.nocaseMagicOnly&&e.toUpperCase()!==e.toLowerCase()))return r;let a=(this.#o.nocase?"i":"")+(s?"u":"");return Object.assign(new RegExp(`^${n}$`,a),{_src:n,_glob:e})}get options(){return this.#o}toRegExpSource(e){let n=e??!!this.#o.dot;if(this.#n===this&&this.#f(),!this.type){let c=this.isStart()&&this.isEnd(),u=this.#e.map(f=>{let[m,h,E,A]=typeof f=="string"?t.#m(f,this.#r,c):f.toRegExpSource(e);return this.#r=this.#r||E,this.#s=this.#s||A,m}).join(""),p="";if(this.isStart()&&typeof this.#e[0]=="string"&&!(this.#e.length===1&&IRe.has(this.#e[0]))){let m=ORe,h=n&&m.has(u.charAt(0))||u.startsWith("\\.")&&m.has(u.charAt(2))||u.startsWith("\\.\\.")&&m.has(u.charAt(4)),E=!n&&!e&&m.has(u.charAt(0));p=h?NRe:E?jS:""}let l="";return this.isEnd()&&this.#n.#a&&this.#t?.type==="!"&&(l="(?:$|\\/)"),[p+u+l,va(u),this.#r=!!this.#r,this.#s]}let r=this.type==="*"||this.type==="+",o=this.type==="!"?"(?:(?!(?:":"(?:",s=this.#d(n);if(this.isStart()&&this.isEnd()&&!s&&this.type!=="!"){let c=this.toString();return this.#e=[c],this.type=null,this.#r=void 0,[c,va(this.toString()),!1,!1]}let i=!r||e||n||!jS?"":this.#d(!0);i===s&&(i=""),i&&(s=`(?:${s})(?:${i})*?`);let a="";if(this.type==="!"&&this.#l)a=(this.isStart()&&!n?jS:"")+a3;else{let c=this.type==="!"?"))"+(this.isStart()&&!n&&!e?jS:"")+i3+")":this.type==="@"?")":this.type==="?"?")?":this.type==="+"&&i?")":this.type==="*"&&i?")?":`)${this.type}`;a=o+s+c}return[a,va(s),this.#r=!!this.#r,this.#s]}#d(e){return this.#e.map(n=>{if(typeof n=="string")throw new Error("string type in extglob ast??");let[r,o,s,i]=n.toRegExpSource(e);return this.#s=this.#s||i,r}).filter(n=>!(this.isStart()&&this.isEnd())||!!n).join("|")}static#m(e,n,r=!1){let o=!1,s="",i=!1;for(let a=0;a<e.length;a++){let c=e.charAt(a);if(o){o=!1,s+=(vRe.has(c)?"\\":"")+c;continue}if(c==="\\"){a===e.length-1?s+="\\\\":o=!0;continue}if(c==="["){let[u,p,l,d]=o3(e,a);if(l){s+=u,i=i||p,a+=l-1,n=n||d;continue}}if(c==="*"){r&&e==="*"?s+=a3:s+=i3,n=!0;continue}if(c==="?"){s+=oP,n=!0;continue}s+=xRe(c)}return[s,va(e),!!n,i]}};var sP=(t,{windowsPathsNoEscape:e=!1}={})=>e?t.replace(/[?*()[\]]/g,"[$&]"):t.replace(/[?*()[\]\\]/g,"\\$&");var wn=(t,e,n={})=>(Om(e),!n.nocomment&&e.charAt(0)==="#"?!1:new fl(e,n).match(t)),PRe=/^\*+([^+@!?\*\[\(]*)$/,CRe=t=>e=>!e.startsWith(".")&&e.endsWith(t),MRe=t=>e=>e.endsWith(t),wRe=t=>(t=t.toLowerCase(),e=>!e.startsWith(".")&&e.toLowerCase().endsWith(t)),LRe=t=>(t=t.toLowerCase(),e=>e.toLowerCase().endsWith(t)),DRe=/^\*+\.\*+$/,kRe=t=>!t.startsWith(".")&&t.includes("."),URe=t=>t!=="."&&t!==".."&&t.includes("."),$Re=/^\.\*+$/,GRe=t=>t!=="."&&t!==".."&&t.startsWith("."),VRe=/^\*+$/,BRe=t=>t.length!==0&&!t.startsWith("."),jRe=t=>t.length!==0&&t!=="."&&t!=="..",HRe=/^\?+([^+@!?\*\[\(]*)?$/,FRe=([t,e=""])=>{let n=l3([t]);return e?(e=e.toLowerCase(),r=>n(r)&&r.toLowerCase().endsWith(e)):n},qRe=([t,e=""])=>{let n=d3([t]);return e?(e=e.toLowerCase(),r=>n(r)&&r.toLowerCase().endsWith(e)):n},zRe=([t,e=""])=>{let n=d3([t]);return e?r=>n(r)&&r.endsWith(e):n},YRe=([t,e=""])=>{let n=l3([t]);return e?r=>n(r)&&r.endsWith(e):n},l3=([t])=>{let e=t.length;return n=>n.length===e&&!n.startsWith(".")},d3=([t])=>{let e=t.length;return n=>n.length===e&&n!=="."&&n!==".."},f3=typeof process=="object"&&process?typeof process.env=="object"&&process.env&&process.env.__MINIMATCH_TESTING_PLATFORM__||process.platform:"posix",c3={win32:{sep:"\\"},posix:{sep:"/"}},WRe=f3==="win32"?c3.win32.sep:c3.posix.sep;wn.sep=WRe;var yo=Symbol("globstar **");wn.GLOBSTAR=yo;var KRe="[^/]",ZRe=KRe+"*?",JRe="(?:(?!(?:\\/|^)(?:\\.{1,2})($|\\/)).)*?",QRe="(?:(?!(?:\\/|^)\\.).)*?",XRe=(t,e={})=>n=>wn(n,t,e);wn.filter=XRe;var Ro=(t,e={})=>Object.assign({},t,e),eye=t=>{if(!t||typeof t!="object"||!Object.keys(t).length)return wn;let e=wn;return Object.assign((r,o,s={})=>e(r,o,Ro(t,s)),{Minimatch:class extends e.Minimatch{constructor(o,s={}){super(o,Ro(t,s))}static defaults(o){return e.defaults(Ro(t,o)).Minimatch}},AST:class extends e.AST{constructor(o,s,i={}){super(o,s,Ro(t,i))}static fromGlob(o,s={}){return e.AST.fromGlob(o,Ro(t,s))}},unescape:(r,o={})=>e.unescape(r,Ro(t,o)),escape:(r,o={})=>e.escape(r,Ro(t,o)),filter:(r,o={})=>e.filter(r,Ro(t,o)),defaults:r=>e.defaults(Ro(t,r)),makeRe:(r,o={})=>e.makeRe(r,Ro(t,o)),braceExpand:(r,o={})=>e.braceExpand(r,Ro(t,o)),match:(r,o,s={})=>e.match(r,o,Ro(t,s)),sep:e.sep,GLOBSTAR:yo})};wn.defaults=eye;var m3=(t,e={})=>(Om(t),e.nobrace||!/\{(?:(?!\{).)*\}/.test(t)?[t]:(0,p3.default)(t));wn.braceExpand=m3;var tye=(t,e={})=>new fl(t,e).makeRe();wn.makeRe=tye;var nye=(t,e,n={})=>{let r=new fl(e,n);return t=t.filter(o=>r.match(o)),r.options.nonull&&!t.length&&t.push(e),t};wn.match=nye;var u3=/[?*]|[+@!]\(.*?\)|\[|\]/,rye=t=>t.replace(/[-[\]{}()*+?.,\\^$|#\s]/g,"\\$&"),fl=class{options;set;pattern;windowsPathsNoEscape;nonegate;negate;comment;empty;preserveMultipleSlashes;partial;globSet;globParts;nocase;isWindows;platform;windowsNoMagicRoot;regexp;constructor(e,n={}){Om(e),n=n||{},this.options=n,this.pattern=e,this.platform=n.platform||f3,this.isWindows=this.platform==="win32",this.windowsPathsNoEscape=!!n.windowsPathsNoEscape||n.allowWindowsEscape===!1,this.windowsPathsNoEscape&&(this.pattern=this.pattern.replace(/\\/g,"/")),this.preserveMultipleSlashes=!!n.preserveMultipleSlashes,this.regexp=null,this.negate=!1,this.nonegate=!!n.nonegate,this.comment=!1,this.empty=!1,this.partial=!!n.partial,this.nocase=!!this.options.nocase,this.windowsNoMagicRoot=n.windowsNoMagicRoot!==void 0?n.windowsNoMagicRoot:!!(this.isWindows&&this.nocase),this.globSet=[],this.globParts=[],this.set=[],this.make()}hasMagic(){if(this.options.magicalBraces&&this.set.length>1)return!0;for(let e of this.set)for(let n of e)if(typeof n!="string")return!0;return!1}debug(...e){}make(){let e=this.pattern,n=this.options;if(!n.nocomment&&e.charAt(0)==="#"){this.comment=!0;return}if(!e){this.empty=!0;return}this.parseNegate(),this.globSet=[...new Set(this.braceExpand())],n.debug&&(this.debug=(...s)=>console.error(...s)),this.debug(this.pattern,this.globSet);let r=this.globSet.map(s=>this.slashSplit(s));this.globParts=this.preprocess(r),this.debug(this.pattern,this.globParts);let o=this.globParts.map((s,i,a)=>{if(this.isWindows&&this.windowsNoMagicRoot){let c=s[0]===""&&s[1]===""&&(s[2]==="?"||!u3.test(s[2]))&&!u3.test(s[3]),u=/^[a-z]:/i.test(s[0]);if(c)return[...s.slice(0,4),...s.slice(4).map(p=>this.parse(p))];if(u)return[s[0],...s.slice(1).map(p=>this.parse(p))]}return s.map(c=>this.parse(c))});if(this.debug(this.pattern,o),this.set=o.filter(s=>s.indexOf(!1)===-1),this.isWindows)for(let s=0;s<this.set.length;s++){let i=this.set[s];i[0]===""&&i[1]===""&&this.globParts[s][2]==="?"&&typeof i[3]=="string"&&/^[a-z]:$/i.test(i[3])&&(i[2]="?")}this.debug(this.pattern,this.set)}preprocess(e){if(this.options.noglobstar)for(let r=0;r<e.length;r++)for(let o=0;o<e[r].length;o++)e[r][o]==="**"&&(e[r][o]="*");let{optimizationLevel:n=1}=this.options;return n>=2?(e=this.firstPhasePreProcess(e),e=this.secondPhasePreProcess(e)):n>=1?e=this.levelOneOptimize(e):e=this.adjascentGlobstarOptimize(e),e}adjascentGlobstarOptimize(e){return e.map(n=>{let r=-1;for(;(r=n.indexOf("**",r+1))!==-1;){let o=r;for(;n[o+1]==="**";)o++;o!==r&&n.splice(r,o-r)}return n})}levelOneOptimize(e){return e.map(n=>(n=n.reduce((r,o)=>{let s=r[r.length-1];return o==="**"&&s==="**"?r:o===".."&&s&&s!==".."&&s!=="."&&s!=="**"?(r.pop(),r):(r.push(o),r)},[]),n.length===0?[""]:n))}levelTwoFileOptimize(e){Array.isArray(e)||(e=this.slashSplit(e));let n=!1;do{if(n=!1,!this.preserveMultipleSlashes){for(let o=1;o<e.length-1;o++){let s=e[o];o===1&&s===""&&e[0]===""||(s==="."||s==="")&&(n=!0,e.splice(o,1),o--)}e[0]==="."&&e.length===2&&(e[1]==="."||e[1]==="")&&(n=!0,e.pop())}let r=0;for(;(r=e.indexOf("..",r+1))!==-1;){let o=e[r-1];o&&o!=="."&&o!==".."&&o!=="**"&&(n=!0,e.splice(r-1,2),r-=2)}}while(n);return e.length===0?[""]:e}firstPhasePreProcess(e){let n=!1;do{n=!1;for(let r of e){let o=-1;for(;(o=r.indexOf("**",o+1))!==-1;){let i=o;for(;r[i+1]==="**";)i++;i>o&&r.splice(o+1,i-o);let a=r[o+1],c=r[o+2],u=r[o+3];if(a!==".."||!c||c==="."||c===".."||!u||u==="."||u==="..")continue;n=!0,r.splice(o,1);let p=r.slice(0);p[o]="**",e.push(p),o--}if(!this.preserveMultipleSlashes){for(let i=1;i<r.length-1;i++){let a=r[i];i===1&&a===""&&r[0]===""||(a==="."||a==="")&&(n=!0,r.splice(i,1),i--)}r[0]==="."&&r.length===2&&(r[1]==="."||r[1]==="")&&(n=!0,r.pop())}let s=0;for(;(s=r.indexOf("..",s+1))!==-1;){let i=r[s-1];if(i&&i!=="."&&i!==".."&&i!=="**"){n=!0;let c=s===1&&r[s+1]==="**"?["."]:[];r.splice(s-1,2,...c),r.length===0&&r.push(""),s-=2}}}}while(n);return e}secondPhasePreProcess(e){for(let n=0;n<e.length-1;n++)for(let r=n+1;r<e.length;r++){let o=this.partsMatch(e[n],e[r],!this.preserveMultipleSlashes);if(o){e[n]=[],e[r]=o;break}}return e.filter(n=>n.length)}partsMatch(e,n,r=!1){let o=0,s=0,i=[],a="";for(;o<e.length&&s<n.length;)if(e[o]===n[s])i.push(a==="b"?n[s]:e[o]),o++,s++;else if(r&&e[o]==="**"&&n[s]===e[o+1])i.push(e[o]),o++;else if(r&&n[s]==="**"&&e[o]===n[s+1])i.push(n[s]),s++;else if(e[o]==="*"&&n[s]&&(this.options.dot||!n[s].startsWith("."))&&n[s]!=="**"){if(a==="b")return!1;a="a",i.push(e[o]),o++,s++}else if(n[s]==="*"&&e[o]&&(this.options.dot||!e[o].startsWith("."))&&e[o]!=="**"){if(a==="a")return!1;a="b",i.push(n[s]),o++,s++}else return!1;return e.length===n.length&&i}parseNegate(){if(this.nonegate)return;let e=this.pattern,n=!1,r=0;for(let o=0;o<e.length&&e.charAt(o)==="!";o++)n=!n,r++;r&&(this.pattern=e.slice(r)),this.negate=n}matchOne(e,n,r=!1){let o=this.options;if(this.isWindows){let h=typeof e[0]=="string"&&/^[a-z]:$/i.test(e[0]),E=!h&&e[0]===""&&e[1]===""&&e[2]==="?"&&/^[a-z]:$/i.test(e[3]),A=typeof n[0]=="string"&&/^[a-z]:$/i.test(n[0]),R=!A&&n[0]===""&&n[1]===""&&n[2]==="?"&&typeof n[3]=="string"&&/^[a-z]:$/i.test(n[3]),y=E?3:h?0:void 0,O=R?3:A?0:void 0;if(typeof y=="number"&&typeof O=="number"){let[P,M]=[e[y],n[O]];P.toLowerCase()===M.toLowerCase()&&(n[O]=P,O>y?n=n.slice(O):y>O&&(e=e.slice(y)))}}let{optimizationLevel:s=1}=this.options;s>=2&&(e=this.levelTwoFileOptimize(e)),this.debug("matchOne",this,{file:e,pattern:n}),this.debug("matchOne",e.length,n.length);for(var i=0,a=0,c=e.length,u=n.length;i<c&&a<u;i++,a++){this.debug("matchOne loop");var p=n[a],l=e[i];if(this.debug(n,p,l),p===!1)return!1;if(p===yo){this.debug("GLOBSTAR",[n,p,l]);var d=i,f=a+1;if(f===u){for(this.debug("** at the end");i<c;i++)if(e[i]==="."||e[i]===".."||!o.dot&&e[i].charAt(0)===".")return!1;return!0}for(;d<c;){var m=e[d];if(this.debug(`
globstar while`,e,d,n,f,m),this.matchOne(e.slice(d),n.slice(f),r))return this.debug("globstar found match!",d,c,m),!0;if(m==="."||m===".."||!o.dot&&m.charAt(0)==="."){this.debug("dot detected!",e,d,n,f);break}this.debug("globstar swallow a segment, and continue"),d++}return!!(r&&(this.debug(`
>>> no match, partial?`,e,d,n,f),d===c))}let h;if(typeof p=="string"?(h=l===p,this.debug("string match",p,l,h)):(h=p.test(l),this.debug("pattern match",p,l,h)),!h)return!1}if(i===c&&a===u)return!0;if(i===c)return r;if(a===u)return i===c-1&&e[i]==="";throw new Error("wtf?")}braceExpand(){return m3(this.pattern,this.options)}parse(e){Om(e);let n=this.options;if(e==="**")return yo;if(e==="")return"";let r,o=null;(r=e.match(VRe))?o=n.dot?jRe:BRe:(r=e.match(PRe))?o=(n.nocase?n.dot?LRe:wRe:n.dot?MRe:CRe)(r[1]):(r=e.match(HRe))?o=(n.nocase?n.dot?qRe:FRe:n.dot?zRe:YRe)(r):(r=e.match(DRe))?o=n.dot?URe:kRe:(r=e.match($Re))&&(o=GRe);let s=dl.fromGlob(e,this.options).toMMPattern();return o&&typeof s=="object"&&Reflect.defineProperty(s,"test",{value:o}),s}makeRe(){if(this.regexp||this.regexp===!1)return this.regexp;let e=this.set;if(!e.length)return this.regexp=!1,this.regexp;let n=this.options,r=n.noglobstar?ZRe:n.dot?JRe:QRe,o=new Set(n.nocase?["i"]:[]),s=e.map(c=>{let u=c.map(p=>{if(p instanceof RegExp)for(let l of p.flags.split(""))o.add(l);return typeof p=="string"?rye(p):p===yo?yo:p._src});return u.forEach((p,l)=>{let d=u[l+1],f=u[l-1];p!==yo||f===yo||(f===void 0?d!==void 0&&d!==yo?u[l+1]="(?:\\/|"+r+"\\/)?"+d:u[l]=r:d===void 0?u[l-1]=f+"(?:\\/|"+r+")?":d!==yo&&(u[l-1]=f+"(?:\\/|\\/"+r+"\\/)"+d,u[l+1]=yo))}),u.filter(p=>p!==yo).join("/")}).join("|"),[i,a]=e.length>1?["(?:",")"]:["",""];s="^"+i+s+a+"$",this.negate&&(s="^(?!"+s+").+$");try{this.regexp=new RegExp(s,[...o].join(""))}catch{this.regexp=!1}return this.regexp}slashSplit(e){return this.preserveMultipleSlashes?e.split("/"):this.isWindows&&/^\/\/[^\/]+/.test(e)?["",...e.split(/\/+/)]:e.split(/\/+/)}match(e,n=this.partial){if(this.debug("match",e,this.pattern),this.comment)return!1;if(this.empty)return e==="";if(e==="/"&&n)return!0;let r=this.options;this.isWindows&&(e=e.split("\\").join("/"));let o=this.slashSplit(e);this.debug(this.pattern,"split",o);let s=this.set;this.debug(this.pattern,"set",s);let i=o[o.length-1];if(!i)for(let a=o.length-2;!i&&a>=0;a--)i=o[a];for(let a=0;a<s.length;a++){let c=s[a],u=o;if(r.matchBase&&c.length===1&&(u=[i]),this.matchOne(u,c,n))return r.flipNegate?!0:!this.negate}return r.flipNegate?!1:this.negate}static defaults(e){return wn.defaults(e).Minimatch}};wn.AST=dl;wn.Minimatch=fl;wn.escape=sP;wn.unescape=va;var h3="@fastify/otel",sye="0.8.0",iye=">=4.0.0 <6",E3=["onRequest","preParsing","preValidation","preHandler","preSerialization","onSend","onResponse","onError"],ft={HOOK_NAME:"hook.name",FASTIFY_TYPE:"fastify.type",HOOK_CALLBACK_NAME:"hook.callback.name",ROOT:"fastify.root"},xa={ROUTE:"route-hook",INSTANCE:"hook",HANDLER:"request-handler"},Ri="anonymous",pr=Symbol("fastify otel instance"),Pa=Symbol("fastify otel request spans"),vm=Symbol("fastify otel request context"),T3=Symbol("fastify otel addhook original"),g3=Symbol("fastify otel setnotfound original"),HS=Symbol("fastify otel ignore path"),FS=class extends S3.InstrumentationBase{constructor(e){if(super(h3,sye,e),this.servername=e?.servername??process.env.OTEL_SERVICE_NAME??"fastify",this[HS]=null,this._logger=Qt.diag.createComponentLogger({namespace:h3}),e?.ignorePaths!=null||process.env.OTEL_FASTIFY_IGNORE_PATHS!=null){let n=e?.ignorePaths??process.env.OTEL_FASTIFY_IGNORE_PATHS;if((typeof n!="string"||n.length===0)&&typeof n!="function")throw new TypeError("ignorePaths must be a string or a function");let r=wn;this[HS]=o=>typeof n=="function"?n(o):r(o.url,n)}}enable(){if(this._handleInitialization===void 0&&this.getConfig().registerOnInitialization){let e=this.plugin();this._handleInitialization=n=>{n.fastify.register(e)},_3.subscribe("fastify.initialization",this._handleInitialization)}return super.enable()}disable(){return this._handleInitialization&&(_3.unsubscribe("fastify.initialization",this._handleInitialization),this._handleInitialization=void 0),super.disable()}init(){return[]}plugin(){let e=this;return n[Symbol.for("skip-override")]=!0,n[Symbol.for("fastify.display-name")]="@fastify/otel",n[Symbol.for("plugin-meta")]={fastify:iye,name:"@fastify/otel"},n;function n(r,o,s){r.decorate(pr,e),r.decorate(T3,r.addHook),r.decorate(g3,r.setNotFoundHandler),r.decorateRequest("opentelemetry",function(){let d=this[vm];return{span:this[Pa],tracer:e.tracer,context:d,inject:(m,h)=>Qt.propagation.inject(d,m,h),extract:(m,h)=>Qt.propagation.extract(d,m,h)}}),r.decorateRequest(Pa,null),r.decorateRequest(vm,null),r.addHook("onRoute",function(l){if(e[HS]?.(l)===!0){e._logger.debug(`Ignoring route instrumentation ${l.method} ${l.url} because it matches the ignore path`);return}for(let d of E3)if(l[d]!=null){let f=l[d];if(typeof f=="function")l[d]=p(f,{[cn.ATTR_SERVICE_NAME]:r[pr].servername,[ft.HOOK_NAME]:`${this.pluginName} - route -> ${d}`,[ft.FASTIFY_TYPE]:xa.ROUTE,[cn.ATTR_HTTP_ROUTE]:l.url,[ft.HOOK_CALLBACK_NAME]:f.name?.length>0?f.name:Ri});else if(Array.isArray(f)){let m=[];for(let h of f)m.push(p(h,{[cn.ATTR_SERVICE_NAME]:r[pr].servername,[ft.HOOK_NAME]:`${this.pluginName} - route -> ${d}`,[ft.FASTIFY_TYPE]:xa.ROUTE,[cn.ATTR_HTTP_ROUTE]:l.url,[ft.HOOK_CALLBACK_NAME]:h.name?.length>0?h.name:Ri}));l[d]=m}}l.onSend!=null?l.onSend=Array.isArray(l.onSend)?[...l.onSend,i]:[l.onSend,i]:l.onSend=i,l.onError!=null?l.onError=Array.isArray(l.onError)?[...l.onError,a]:[l.onError,a]:l.onError=a,l.handler=p(l.handler,{[cn.ATTR_SERVICE_NAME]:r[pr].servername,[ft.HOOK_NAME]:`${this.pluginName} - route-handler`,[ft.FASTIFY_TYPE]:xa.HANDLER,[cn.ATTR_HTTP_ROUTE]:l.url,[ft.HOOK_CALLBACK_NAME]:l.handler.name.length>0?l.handler.name:Ri})}),r.addHook("onRequest",function(l,d,f){if(this[pr].isEnabled()===!1)return f();if(this[pr][HS]?.({url:l.url,method:l.method})===!0)return this[pr]._logger.debug(`Ignoring request ${l.method} ${l.url} because it matches the ignore path`),f();let m=Qt.context.active();Qt.trace.getSpan(m)==null&&(m=Qt.propagation.extract(m,l.headers));let h=(0,qS.getRPCMetadata)(m);l.routeOptions.url!=null&&h?.type===qS.RPCType.HTTP&&(h.route=l.routeOptions.url);let E=this[pr].tracer.startSpan("request",{attributes:{[cn.ATTR_SERVICE_NAME]:r[pr].servername,[ft.ROOT]:"@fastify/otel",[cn.ATTR_HTTP_ROUTE]:l.url,[cn.ATTR_HTTP_REQUEST_METHOD]:l.method}},m);l[vm]=Qt.trace.setSpan(m,E),l[Pa]=E,Qt.context.with(l[vm],()=>{f()})}),r.addHook("onResponse",function(l,d,f){let m=l[Pa];m!=null&&(m.setStatus({code:Qt.SpanStatusCode.OK,message:"OK"}),m.setAttributes({[cn.ATTR_HTTP_RESPONSE_STATUS_CODE]:404}),m.end()),l[Pa]=null,f()}),r.addHook=c,r.setNotFoundHandler=u,s();function i(l,d,f,m){let h=l[Pa];h!=null&&(d.statusCode<500&&h.setStatus({code:Qt.SpanStatusCode.OK,message:"OK"}),h.setAttributes({[cn.ATTR_HTTP_RESPONSE_STATUS_CODE]:d.statusCode}),h.end()),l[Pa]=null,m(null,f)}function a(l,d,f,m){let h=l[Pa];h!=null&&(h.setStatus({code:Qt.SpanStatusCode.ERROR,message:f.message}),h.recordException(f)),m()}function c(l,d){let f=this[T3];return E3.includes(l)?f.call(this,l,p(d,{[cn.ATTR_SERVICE_NAME]:r[pr].servername,[ft.HOOK_NAME]:`${this.pluginName} - ${l}`,[ft.FASTIFY_TYPE]:xa.INSTANCE,[ft.HOOK_CALLBACK_NAME]:d.name?.length>0?d.name:Ri})):f.call(this,l,d)}function u(l,d){let f=this[g3];typeof l=="function"?(d=p(l,{[cn.ATTR_SERVICE_NAME]:r[pr].servername,[ft.HOOK_NAME]:`${this.pluginName} - not-found-handler`,[ft.FASTIFY_TYPE]:xa.INSTANCE,[ft.HOOK_CALLBACK_NAME]:l.name?.length>0?l.name:Ri}),f.call(this,d)):(l.preValidation!=null&&(l.preValidation=p(l.preValidation,{[cn.ATTR_SERVICE_NAME]:r[pr].servername,[ft.HOOK_NAME]:`${this.pluginName} - not-found-handler - preValidation`,[ft.FASTIFY_TYPE]:xa.INSTANCE,[ft.HOOK_CALLBACK_NAME]:l.preValidation.name?.length>0?l.preValidation.name:Ri})),l.preHandler!=null&&(l.preHandler=p(l.preHandler,{[cn.ATTR_SERVICE_NAME]:r[pr].servername,[ft.HOOK_NAME]:`${this.pluginName} - not-found-handler - preHandler`,[ft.FASTIFY_TYPE]:xa.INSTANCE,[ft.HOOK_CALLBACK_NAME]:l.preHandler.name?.length>0?l.preHandler.name:Ri})),d=p(d,{[cn.ATTR_SERVICE_NAME]:r[pr].servername,[ft.HOOK_NAME]:`${this.pluginName} - not-found-handler`,[ft.FASTIFY_TYPE]:xa.INSTANCE,[ft.HOOK_CALLBACK_NAME]:d.name?.length>0?d.name:Ri}),f.call(this,l,d))}function p(l,d={}){return function(...m){let h=this[pr],[E]=m;if(h.isEnabled()===!1)return l.call(this,...m);let A=E[vm]??Qt.context.active(),R=h.tracer.startSpan(`handler - ${l.name?.length>0?l.name:this.pluginName??Ri}`,{attributes:d},A);return Qt.context.with(Qt.trace.setSpan(A,R),function(){try{let y=l.call(this,...m);return typeof y?.then=="function"?y.then(O=>(R.end(),O),O=>(R.setStatus({code:Qt.SpanStatusCode.ERROR,message:O.message}),R.recordException(O),R.end(),Promise.reject(O))):(R.end(),y)}catch(y){throw R.setStatus({code:Qt.SpanStatusCode.ERROR,message:y.message}),R.recordException(y),R.end(),y}},this)}}}}};var ns=k(U(),1),WS=k(ze(),1),su=k(_e(),1),N3=k(Qe(),1);var yi;(function(t){let e="fastify.name";t.FASTIFY_NAME=e;let n="fastify.type";t.FASTIFY_TYPE=n;let r="hook.name";t.HOOK_NAME=r;let o="plugin.name";t.PLUGIN_NAME=o})(yi||(yi={}));var xm;(function(t){let e="middleware";t.MIDDLEWARE=e;let n="request_handler";t.REQUEST_HANDLER=n})(xm||(xm={}));var Pm;(function(t){let e="middleware";t.MIDDLEWARE=e;let n="request handler";t.REQUEST_HANDLER=n})(Pm||(Pm={}));var R3=k(U(),1);var Cm=Symbol("opentelemetry.instrumentation.fastify.request_active_span");function iP(t,e,n,r={}){let o=e.startSpan(n,{attributes:r}),s=t[Cm]||[];return s.push(o),Object.defineProperty(t,Cm,{enumerable:!1,configurable:!0,value:s}),o}function zS(t,e){let n=t[Cm]||[];n.length&&(n.forEach(r=>{e&&(r.setStatus({code:R3.SpanStatusCode.ERROR,message:e.message}),r.recordException(e)),r.end()}),delete t[Cm])}function y3(t,e,n){let r,o;try{o=t(),A3(o)&&o.then(s=>e(void 0,s),s=>e(s))}catch(s){r=s}finally{if(!A3(o)&&(e(r,o),r))throw r;return o}}function A3(t){return typeof t=="object"&&t&&typeof Object.getOwnPropertyDescriptor(t,"then")?.value=="function"||!1}var aye="0.1.0",cye="@sentry/instrumentation-fastify-v3",b3="anonymous",uye=new Set(["onTimeout","onRequest","preParsing","preValidation","preSerialization","preHandler","onSend","onResponse","onError"]),YS=class extends su.InstrumentationBase{constructor(e={}){super(cye,aye,e)}init(){return[new su.InstrumentationNodeModuleDefinition("fastify",[">=3.0.0 <4"],e=>this._patchConstructor(e))]}_hookOnRequest(){let e=this;return function(r,o,s){if(!e.isEnabled())return s();e._wrap(o,"send",e._patchSend());let i=r,a=(0,WS.getRPCMetadata)(ns.context.active()),c=i.routeOptions?i.routeOptions.url:r.routerPath;c&&a?.type===WS.RPCType.HTTP&&(a.route=c);let u=r.method||"GET";ve().setTransactionName(`${u} ${c}`),s()}}_wrapHandler(e,n,r,o){let s=this;return this._diag.debug("Patching fastify route.handler function"),function(...i){if(!s.isEnabled())return r.apply(this,i);let a=r.name||e||b3,c=`${Pm.MIDDLEWARE} - ${a}`,u=i[1],p=iP(u,s.tracer,c,{[yi.FASTIFY_TYPE]:xm.MIDDLEWARE,[yi.PLUGIN_NAME]:e,[yi.HOOK_NAME]:n}),l=o&&i[i.length-1];return l&&(i[i.length-1]=function(...d){zS(u),l.apply(this,d)}),ns.context.with(ns.trace.setSpan(ns.context.active(),p),()=>y3(()=>r.apply(this,i),d=>{d instanceof Error&&(p.setStatus({code:ns.SpanStatusCode.ERROR,message:d.message}),p.recordException(d)),o||zS(u)}))}}_wrapAddHook(){let e=this;return this._diag.debug("Patching fastify server.addHook function"),function(n){return function(...o){let s=o[0],i=o[1],a=this.pluginName;if(!uye.has(s))return n.apply(this,o);let c=typeof o[o.length-1]=="function"&&i.constructor.name!=="AsyncFunction";return n.apply(this,[s,e._wrapHandler(a,s,i,c)])}}}_patchConstructor(e){let n=this;function r(...o){let s=e.fastify.apply(this,o);return s.addHook("onRequest",n._hookOnRequest()),s.addHook("preHandler",n._hookPreHandler()),pye(),n._wrap(s,"addHook",n._wrapAddHook()),s}return e.errorCodes!==void 0&&(r.errorCodes=e.errorCodes),r.fastify=r,r.default=r,r}_patchSend(){let e=this;return this._diag.debug("Patching fastify reply.send function"),function(r){return function(...s){let i=s[0];return e.isEnabled()?(0,su.safeExecuteInTheMiddle)(()=>r.apply(this,s),a=>{!a&&i instanceof Error&&(a=i),zS(this,a)}):r.apply(this,s)}}}_hookPreHandler(){let e=this;return this._diag.debug("Patching fastify preHandler function"),function(r,o,s){if(!e.isEnabled())return s();let i=r,a=i.routeOptions?.handler||i.context?.handler,c=a?.name.startsWith("bound ")?a.name.substring(6):a?.name,u=`${Pm.REQUEST_HANDLER} - ${c||this.pluginName||b3}`,p={[yi.PLUGIN_NAME]:this.pluginName,[yi.FASTIFY_TYPE]:xm.REQUEST_HANDLER,[N3.SEMATTRS_HTTP_ROUTE]:i.routeOptions?i.routeOptions.url:r.routerPath};c&&(p[yi.FASTIFY_NAME]=c);let l=iP(o,e.tracer,u,p);O3(l);let{requestHook:d}=e.getConfig();return d&&(0,su.safeExecuteInTheMiddle)(()=>d(l,{request:r}),f=>{f&&e._diag.error("request hook failed",f)},!0),ns.context.with(ns.trace.setSpan(ns.context.active(),l),()=>{s()})}}};function pye(){let t=$();t&&t.on("spanStart",e=>{O3(e)})}function O3(t){let e=ae(t).data,n=e["fastify.type"];if(e[J]||!n)return;t.setAttributes({[le]:"auto.http.otel.fastify",[J]:`${n}.fastify`});let r=e["fastify.name"]||e["plugin.name"]||e["hook.name"];if(typeof r=="string"){let o=r.replace(/^fastify -> /,"").replace(/^@fastify\/otel -> /,"");t.updateName(o)}}var KS="Fastify",v3=Y(`${KS}.v3`,()=>new YS);function lye(){let t=$();if(t)return t.getIntegrationByName(KS)}function I3(t,e,n,r){let o=lye()?.getShouldHandleError()||C3;if(r==="diagnostics-channel"&&(this.diagnosticsChannelExists=!0),this.diagnosticsChannelExists&&r==="onError-hook"){Ut&&N.warn("Fastify error handler was already registered via diagnostics channel.","You can safely remove `setupFastifyErrorHandler` call and set `shouldHandleError` on the integration options.");return}o(t,e,n)&&Ee(t,{mechanism:{handled:!1,type:"auto.function.fastify"}})}var x3=Y(`${KS}.v5`,()=>{let t=new FS,e=t.plugin();return aP.subscribe("fastify.initialization",n=>{let r=n.fastify;r?.register(e).after(o=>{o?Ut&&N.error("Failed to setup Fastify instrumentation",o):(fye(),r&&mye(r))})}),aP.subscribe("tracing:fastify.request.handler:error",n=>{let{error:r,request:o,reply:s}=n;I3.call(I3,r,o,s,"diagnostics-channel")}),t}),dye=(({shouldHandleError:t})=>{let e;return{name:KS,setupOnce(){e=t||C3,v3(),x3()},getShouldHandleError(){return e},setShouldHandleError(n){e=n}}}),P3=(t={})=>dye(t);function C3(t,e,n){let r=n.statusCode;return r>=500||r<=299}function M3(t){let e=ae(t),n=e.description,r=e.data,o=r["fastify.type"],s=o==="hook",i=o===n?.startsWith("handler -"),a=n==="request"||o==="request-handler";if(r[J]||!i&&!a&&!s)return;let c=s?"hook":i?"middleware":a?"request-handler":"<unknown>";t.setAttributes({[le]:"auto.http.otel.fastify",[J]:`${c}.fastify`});let u=r["fastify.name"]||r["plugin.name"]||r["hook.name"];if(typeof u=="string"){let p=u.replace(/^fastify -> /,"").replace(/^@fastify\/otel -> /,"");t.updateName(p)}}function fye(){let t=$();t&&t.on("spanStart",e=>{M3(e)})}function mye(t){t.addHook("onRequest",async(e,n)=>{if(e.opentelemetry){let{span:s}=e.opentelemetry();s&&M3(s)}let r=e.routeOptions?.url,o=e.method||"GET";ve().setTransactionName(`${o} ${r}`)})}var X3=k(U(),1),e6=k(Q3(),1);var t6="Graphql",n6=Y(t6,e6.GraphQLInstrumentation,t=>{let e=o6(t);return{...e,responseHook(n,r){Xe(n,"auto.graphql.otel.graphql"),r.errors?.length&&!ae(n).status&&n.setStatus({code:X3.SpanStatusCode.ERROR});let s=ae(n).data,i=s["graphql.operation.type"],a=s["graphql.operation.name"];if(e.useOperationNameForRootSpan&&i){let c=Dt(n),p=ae(c).data[rl]||[],l=a?`${i} ${a}`:`${i}`;Array.isArray(p)?(p.push(l),c.setAttribute(rl,p)):typeof p=="string"?c.setAttribute(rl,[p,l]):c.setAttribute(rl,l),ae(c).data["original-description"]||c.setAttribute("original-description",ae(c).description),c.updateName(`${ae(c).data["original-description"]} (${Dye(p)})`)}}}}),Lye=((t={})=>({name:t6,setupOnce(){n6(o6(t))}})),r6=Lye;function o6(t){return{ignoreResolveSpans:!0,ignoreTrivialResolveSpans:!0,useOperationNameForRootSpan:!0,...t}}function Dye(t){if(Array.isArray(t)){let e=t.slice().sort();return e.length<=5?e.join(", "):`${e.slice(0,5).join(", ")}, +${e.length-5}`}return`${t}`}var h6=k(_6(),1);var E6="Kafka",T6=Y(E6,()=>new h6.KafkaJsInstrumentation({consumerHook(t){Xe(t,"auto.kafkajs.otel.consumer")},producerHook(t){Xe(t,"auto.kafkajs.otel.producer")}})),Uye=(()=>({name:E6,setupOnce(){T6()}})),g6=Uye;var O6=k(N6(),1);var I6="LruMemoizer",v6=Y(I6,()=>new O6.LruMemoizerInstrumentation),Gye=(()=>({name:I6,setupOnce(){v6()}})),x6=Gye;var $6=k(U6(),1);var G6="Mongo",V6=Y(G6,()=>new $6.MongoDBInstrumentation({dbStatementSerializer:Fye,responseHook(t){Xe(t,"auto.db.otel.mongo")}}));function Fye(t){let e=hP(t);return JSON.stringify(e)}function hP(t){if(Array.isArray(t))return t.map(e=>hP(e));if(qye(t)){let e={};return Object.entries(t).map(([n,r])=>[n,hP(r)]).reduce((n,r)=>(Yye(r)&&(n[r[0]]=r[1]),n),e)}return"?"}function qye(t){return typeof t=="object"&&t!==null&&!zye(t)}function zye(t){let e=!1;return typeof Buffer<"u"&&(e=Buffer.isBuffer(t)),e}function Yye(t){return Array.isArray(t)}var Wye=(()=>({name:G6,setupOnce(){V6()}})),B6=Wye;var Q6=k(J6(),1);var X6="Mongoose",e5=Y(X6,()=>new Q6.MongooseInstrumentation({responseHook(t){Xe(t,"auto.db.otel.mongoose")}})),obe=(()=>({name:X6,setupOnce(){e5()}})),t5=obe;var u5=k(c5(),1);var p5="Mysql",l5=Y(p5,()=>new u5.MySQLInstrumentation({})),mbe=(()=>({name:p5,setupOnce(){l5()}})),d5=mbe;var S5=k(g5(),1);var A5="Mysql2",R5=Y(A5,()=>new S5.MySQL2Instrumentation({responseHook(t){Xe(t,"auto.db.otel.mysql2")}})),xbe=(()=>({name:A5,setupOnce(){R5()}})),y5=xbe;var Z5=k(C5(),1),J5=k(q5(),1);var Wbe=["get","set","setex"],UP=["get","mget"],Kbe=["set","setex"];function Fm(t,e){return t.includes(e.toLowerCase())}function $P(t){return Fm(UP,t)?"cache.get":Fm(Kbe,t)?"cache.put":void 0}function Zbe(t,e){return e.some(n=>t.startsWith(n))}function Y5(t,e){try{if(e.length===0)return;let n=o=>typeof o=="string"||typeof o=="number"||Buffer.isBuffer(o)?[o.toString()]:Array.isArray(o)?z5(o.map(s=>n(s))):["<unknown>"],r=e[0];return Fm(Wbe,t)&&r!=null?n(r):z5(e.map(o=>n(o)))}catch{return}}function W5(t,e,n){if(!$P(t))return!1;for(let r of e)if(Zbe(r,n))return!0;return!1}function K5(t){let e=n=>{try{return Buffer.isBuffer(n)?n.byteLength:typeof n=="string"?n.length:typeof n=="number"?n.toString().length:n==null?0:JSON.stringify(n).length}catch{return}};return Array.isArray(t)?t.reduce((n,r)=>{let o=e(r);return typeof o=="number"?n!==void 0?n+o:o:n},0):e(t)}function z5(t){let e=[],n=r=>{r.forEach(o=>{Array.isArray(o)?n(o):e.push(o)})};return n(t),e}var wA="Redis",qm={},Q5=(t,e,n,r)=>{t.setAttribute(le,"auto.db.otel.redis");let o=Y5(e,n),s=$P(e);if(!o||!s||!qm.cachePrefixes||!W5(e,o,qm.cachePrefixes))return;let i=ae(t).data["net.peer.name"],a=ae(t).data["net.peer.port"];a&&i&&t.setAttributes({"network.peer.address":i,"network.peer.port":a});let c=K5(r);c&&t.setAttribute(_I,c),Fm(UP,e)&&c!==void 0&&t.setAttribute(fI,c>0),t.setAttributes({[J]:s,[mI]:o});let u=o.join(", ");t.updateName(qm.maxCacheKeyLength?ea(u,qm.maxCacheKeyLength):u)},Jbe=Y(`${wA}.IORedis`,()=>new Z5.IORedisInstrumentation({responseHook:Q5})),Qbe=Y(`${wA}.Redis`,()=>new J5.RedisInstrumentation({responseHook:Q5})),X5=Object.assign(()=>{Jbe(),Qbe()},{id:wA}),Xbe=((t={})=>({name:wA,setupOnce(){qm=t,X5()}})),eJ=Xbe;var EJ=k(hJ(),1);var TJ="Postgres",gJ=Y(TJ,()=>new EJ.PgInstrumentation({requireParentSpan:!0,requestHook(t){Xe(t,"auto.db.otel.postgres")}})),mNe=(()=>({name:TJ,setupOnce(){gJ()}})),SJ=mNe;var jA=k(U(),1),Ii=k(_e(),1),Xt=k(Qe(),1);var BA="PostgresJs",AJ=[">=3.0.0 <4"],_Ne=/^(SELECT|INSERT|UPDATE|DELETE|CREATE|DROP|ALTER)/i,VA=Symbol("sentryPostgresConnectionContext"),FP=Symbol.for("sentry.instrumented.postgresjs"),RJ=Symbol.for("sentry.query.from.instrumented.sql"),yJ=Y(BA,t=>new qP({requireParentSpan:t?.requireParentSpan??!0,requestHook:t?.requestHook})),qP=class extends Ii.InstrumentationBase{constructor(e){super("sentry-postgres-js",Pe,e)}init(){let e=new Ii.InstrumentationNodeModuleDefinition("postgres",AJ,n=>{try{return this._patchPostgres(n)}catch(r){return Ut&&N.error("Failed to patch postgres module:",r),n}},n=>n);return["src","cf/src","cjs/src"].forEach(n=>{e.files.push(new Ii.InstrumentationNodeModuleFile(`postgres/${n}/query.js`,AJ,this._patchQueryPrototype.bind(this),this._unpatchQueryPrototype.bind(this)))}),e}_patchPostgres(e){let n=typeof e=="function",r=n?e:e.default;if(typeof r!="function")return Ut&&N.warn("postgres module does not export a function. Skipping instrumentation."),e;let o=this,s=function(...i){let a=Reflect.construct(r,i);return!a||typeof a!="function"?(Ut&&N.warn("postgres() did not return a valid instance"),a):o._instrumentSqlInstance(a)};Object.setPrototypeOf(s,r),Object.setPrototypeOf(s.prototype,r.prototype);for(let i of Object.getOwnPropertyNames(r))if(!["length","name","prototype"].includes(i)){let a=Object.getOwnPropertyDescriptor(r,i);a&&Object.defineProperty(s,i,a)}return n?s:(Qf(e,"default",s),e)}_wrapQueryMethod(e,n,r){let o=this;return function(...s){let i=Reflect.apply(e,n,s);return i&&typeof i=="object"&&"handle"in i&&o._wrapSingleQueryHandle(i,r),i}}_wrapCallbackMethod(e,n,r){let o=this;return function(...s){let i=r[VA];if(!(typeof s[s.length-1]=="function")){let l=Reflect.apply(e,n,s);return l&&typeof l.then=="function"?l.then(d=>o._instrumentSqlInstance(d,i)):l}let c=s.length===1?s[0]:s[1],u=function(l){let d=o._instrumentSqlInstance(l,i);return c(d)},p=s.length===1?[u]:[s[0],u];return Reflect.apply(e,n,p)}}_setConnectionAttributes(e,n){if(n&&(n.ATTR_DB_NAMESPACE&&e.setAttribute(Xt.ATTR_DB_NAMESPACE,n.ATTR_DB_NAMESPACE),n.ATTR_SERVER_ADDRESS&&e.setAttribute(Xt.ATTR_SERVER_ADDRESS,n.ATTR_SERVER_ADDRESS),n.ATTR_SERVER_PORT!==void 0)){let r=parseInt(n.ATTR_SERVER_PORT,10);isNaN(r)||e.setAttribute(Xt.ATTR_SERVER_PORT,r)}}_setOperationName(e,n,r){if(r){e.setAttribute(Xt.ATTR_DB_OPERATION_NAME,r);return}let o=n?.match(_Ne);o?.[1]&&e.setAttribute(Xt.ATTR_DB_OPERATION_NAME,o[1].toUpperCase())}_attachConnectionContext(e,n){let r=e;if(!r.options||typeof r.options!="object")return;let o=r.options,s=o.host?.[0]||"localhost",i=o.port?.[0]||5432,a={ATTR_DB_NAMESPACE:typeof o.database=="string"&&o.database!==""?o.database:void 0,ATTR_SERVER_ADDRESS:s,ATTR_SERVER_PORT:String(i)};n[VA]=a}_instrumentSqlInstance(e,n){if(e[FP])return e;let r=this,o=new Proxy(e,{apply(s,i,a){let c=Reflect.apply(s,i,a);return c&&typeof c=="object"&&"handle"in c&&r._wrapSingleQueryHandle(c,o),c},get(s,i){let a=s[i];return typeof i!="string"||typeof a!="function"?a:i==="unsafe"||i==="file"?r._wrapQueryMethod(a,s,o):i==="begin"||i==="reserve"?r._wrapCallbackMethod(a,s,o):a}});return n?o[VA]=n:this._attachConnectionContext(e,o),e[FP]=!0,o[FP]=!0,o}_wrapSingleQueryHandle(e,n){if(e.handle?.__sentryWrapped)return;e[RJ]=!0;let r=e.handle,o=this,s=async function(...i){if(!o._shouldCreateSpans())return r.apply(this,i);let a=o._reconstructQuery(e.strings),c=o._sanitizeSqlQuery(a);return Cn({name:c||"postgresjs.query",op:"db"},u=>{Xe(u,"auto.db.postgresjs"),u.setAttributes({[Xt.ATTR_DB_SYSTEM_NAME]:"postgres",[Xt.ATTR_DB_QUERY_TEXT]:c});let p=n?n[VA]:void 0;o._setConnectionAttributes(u,p);let l=o.getConfig(),{requestHook:d}=l;d&&(0,Ii.safeExecuteInTheMiddle)(()=>d(u,c,p),m=>{m&&(u.setAttribute("sentry.hook.error","requestHook failed"),Ut&&N.error(`Error in requestHook for ${BA} integration:`,m))},!0);let f=this;f.resolve=new Proxy(f.resolve,{apply:(m,h,E)=>{try{o._setOperationName(u,c,E?.[0]?.command),u.end()}catch(A){Ut&&N.error("Error ending span in resolve callback:",A)}return Reflect.apply(m,h,E)}}),f.reject=new Proxy(f.reject,{apply:(m,h,E)=>{try{u.setStatus({code:2,message:E?.[0]?.message||"unknown_error"}),u.setAttribute(Xt.ATTR_DB_RESPONSE_STATUS_CODE,E?.[0]?.code||"unknown"),u.setAttribute(Xt.ATTR_ERROR_TYPE,E?.[0]?.name||"unknown"),o._setOperationName(u,c),u.end()}catch(A){Ut&&N.error("Error ending span in reject callback:",A)}return Reflect.apply(m,h,E)}});try{return r.apply(this,i)}catch(m){throw u.setStatus({code:2,message:m instanceof Error?m.message:"unknown_error"}),u.end(),m}})};s.__sentryWrapped=!0,e.handle=s}_shouldCreateSpans(){let e=this.getConfig();return jA.trace.getSpan(jA.context.active())!==void 0||!e.requireParentSpan}_reconstructQuery(e){if(e?.length)return e.length===1?e[0]||void 0:e.reduce((n,r,o)=>o===0?r:`${n}$${o}${r}`,"")}_sanitizeSqlQuery(e){return e?e.replace(/--.*$/gm,"").replace(/\/\*[\s\S]*?\*\//g,"").replace(/;\s*$/,"").replace(/\s+/g," ").trim().replace(/\bX'[0-9A-Fa-f]*'/gi,"?").replace(/\bB'[01]*'/gi,"?").replace(/'(?:[^']|'')*'/g,"?").replace(/\b0x[0-9A-Fa-f]+/gi,"?").replace(/\b(?:TRUE|FALSE)\b/gi,"?").replace(/-?\b\d+\.?\d*[eE][+-]?\d+\b/g,"?").replace(/-?\b\d+\.\d+\b/g,"?").replace(/-?\.\d+\b/g,"?").replace(/(?<!\$)-?\b\d+\b/g,"?").replace(/\bIN\b\s*\(\s*\?(?:\s*,\s*\?)*\s*\)/gi,"IN (?)").replace(/\bIN\b\s*\(\s*\$\d+(?:\s*,\s*\$\d+)*\s*\)/gi,"IN ($?)"):"Unknown SQL Query"}_patchQueryPrototype(e){let n=this,r=e.Query.prototype.handle;return e.Query.prototype.handle=async function(...o){if(this[RJ])return r.apply(this,o);if(!n._shouldCreateSpans())return r.apply(this,o);let s=n._reconstructQuery(this.strings),i=n._sanitizeSqlQuery(s);return Cn({name:i||"postgresjs.query",op:"db"},a=>{Xe(a,"auto.db.postgresjs"),a.setAttributes({[Xt.ATTR_DB_SYSTEM_NAME]:"postgres",[Xt.ATTR_DB_QUERY_TEXT]:i});let c=n.getConfig(),{requestHook:u}=c;u&&(0,Ii.safeExecuteInTheMiddle)(()=>u(a,i,void 0),d=>{d&&(a.setAttribute("sentry.hook.error","requestHook failed"),Ut&&N.error(`Error in requestHook for ${BA} integration:`,d))},!0);let p=this.resolve;this.resolve=new Proxy(p,{apply:(d,f,m)=>{try{n._setOperationName(a,i,m?.[0]?.command),a.end()}catch(h){Ut&&N.error("Error ending span in resolve callback:",h)}return Reflect.apply(d,f,m)}});let l=this.reject;this.reject=new Proxy(l,{apply:(d,f,m)=>{try{a.setStatus({code:2,message:m?.[0]?.message||"unknown_error"}),a.setAttribute(Xt.ATTR_DB_RESPONSE_STATUS_CODE,m?.[0]?.code||"unknown"),a.setAttribute(Xt.ATTR_ERROR_TYPE,m?.[0]?.name||"unknown"),n._setOperationName(a,i),a.end()}catch(h){Ut&&N.error("Error ending span in reject callback:",h)}return Reflect.apply(d,f,m)}});try{return r.apply(this,o)}catch(d){throw a.setStatus({code:2,message:d instanceof Error?d.message:"unknown_error"}),a.end(),d}})},e.Query.prototype.handle.__sentry_original__=r,e}_unpatchQueryPrototype(e){return e.Query.prototype.handle.__sentry_original__&&(e.Query.prototype.handle=e.Query.prototype.handle.__sentry_original__),e}},hNe=(t=>({name:BA,setupOnce(){yJ(t)}})),bJ=hNe;var Po=k(U(),1);var IJ=k(U(),1),HA=k(_e(),1),Ua=k(U(),1);var ENe=process.env.PRISMA_SHOW_ALL_TRACES==="true",TNe="00-10-10-00";function gNe(t){switch(t){case"client":return Ua.SpanKind.CLIENT;case"internal":default:return Ua.SpanKind.INTERNAL}}var SNe=class{tracerProvider;ignoreSpanTypes;constructor({tracerProvider:t,ignoreSpanTypes:e}){this.tracerProvider=t,this.ignoreSpanTypes=e}isEnabled(){return!0}getTraceParent(t){let e=Ua.trace.getSpanContext(t??Ua.context.active());return e?`00-${e.traceId}-${e.spanId}-0${e.traceFlags}`:TNe}dispatchEngineSpans(t){let e=this.tracerProvider.getTracer("prisma"),n=new Map,r=t.filter(o=>o.parentId===null);for(let o of r)vJ(e,o,t,n,this.ignoreSpanTypes)}getActiveContext(){return Ua.context.active()}runInChildSpan(t,e){if(typeof t=="string"&&(t={name:t}),t.internal&&!ENe)return e();let n=this.tracerProvider.getTracer("prisma"),r=t.context??this.getActiveContext(),o=`prisma:client:${t.name}`;if(xJ(o,this.ignoreSpanTypes))return e();if(t.active===!1){let s=n.startSpan(o,t,r);return NJ(s,e(s,r))}return n.startActiveSpan(o,t,s=>NJ(s,e(s,r)))}};function vJ(t,e,n,r,o){if(xJ(e.name,o))return;let s={attributes:e.attributes,kind:gNe(e.kind),startTime:e.startTime};t.startActiveSpan(e.name,s,i=>{r.set(e.id,i.spanContext().spanId),e.links&&i.addLinks(e.links.flatMap(c=>{let u=r.get(c);return u?{context:{spanId:u,traceId:i.spanContext().traceId,traceFlags:i.spanContext().traceFlags}}:[]}));let a=n.filter(c=>c.parentId===e.id);for(let c of a)vJ(t,c,n,r,o);i.end(e.endTime)})}function NJ(t,e){return ANe(e)?e.then(n=>(t.end(),n),n=>{throw t.end(),n}):(t.end(),e)}function ANe(t){return t!=null&&typeof t.then=="function"}function xJ(t,e){return e.some(n=>typeof n=="string"?n===t:n.test(t))}var PJ={name:"@prisma/instrumentation",version:"6.19.0",description:"OpenTelemetry compliant instrumentation for Prisma Client",main:"dist/index.js",module:"dist/index.mjs",types:"dist/index.d.ts",exports:{".":{require:{types:"./dist/index.d.ts",default:"./dist/index.js"},import:{types:"./dist/index.d.ts",default:"./dist/index.mjs"}}},license:"Apache-2.0",homepage:"https://www.prisma.io",repository:{type:"git",url:"https://github.com/prisma/prisma.git",directory:"packages/instrumentation"},bugs:"https://github.com/prisma/prisma/issues",devDependencies:{"@prisma/internals":"workspace:*","@types/node":"18.19.76","@opentelemetry/api":"1.9.0",typescript:"5.4.5"},dependencies:{"@opentelemetry/instrumentation":">=0.52.0 <1"},peerDependencies:{"@opentelemetry/api":"^1.8"},files:["dist"],keywords:["prisma","instrumentation","opentelemetry","otel"],scripts:{dev:"DEV=true tsx helpers/build.ts",build:"tsx helpers/build.ts",prepublishOnly:"pnpm run build",test:"vitest run"},sideEffects:!1},YP=PJ.version,RNe=YP.split(".")[0],OJ="PRISMA_INSTRUMENTATION",zP=`V${RNe}_PRISMA_INSTRUMENTATION`,yNe=PJ.name,bNe="@prisma/client",CJ=class extends HA.InstrumentationBase{tracerProvider;constructor(t={}){super(yNe,YP,t)}setTracerProvider(t){this.tracerProvider=t}init(){return[new HA.InstrumentationNodeModuleDefinition(bNe,[YP])]}enable(){let t=this._config,e={helper:new SNe({tracerProvider:this.tracerProvider??IJ.trace.getTracerProvider(),ignoreSpanTypes:t.ignoreSpanTypes??[]})};global[OJ]=e,global[zP]=e}disable(){delete global[OJ],delete global[zP]}isEnabled(){return!!global[zP]}};var MJ="Prisma";function NNe(t){return!!t&&typeof t=="object"&&"dispatchEngineSpans"in t}function wJ(){let t=globalThis.PRISMA_INSTRUMENTATION;return t&&typeof t=="object"&&"helper"in t?t.helper:void 0}var WP=class extends CJ{constructor(){super()}enable(){super.enable();let e=wJ();NNe(e)&&(e.createEngineSpan=n=>{let r=Po.trace.getTracer("prismaV5Compatibility"),o=r._idGenerator;if(!o){Yt(()=>{console.warn("[Sentry] Could not find _idGenerator on tracer, skipping Prisma v5 compatibility - some Prisma spans may be missing!")});return}try{n.spans.forEach(s=>{let i=ONe(s.kind),a=s.parent_span_id,c=s.span_id,u=s.trace_id,p=s.links?.map(d=>({context:{traceId:d.trace_id,spanId:d.span_id,traceFlags:Po.TraceFlags.SAMPLED}})),l=Po.trace.setSpanContext(Po.context.active(),{traceId:u,spanId:a,traceFlags:Po.TraceFlags.SAMPLED});Po.context.with(l,()=>{let d={generateTraceId:()=>u,generateSpanId:()=>c};r._idGenerator=d,r.startSpan(s.name,{kind:i,links:p,startTime:s.start_time,attributes:s.attributes}).end(s.end_time),r._idGenerator=o})})}finally{r._idGenerator=o}})}};function ONe(t){switch(t){case"client":return Po.SpanKind.CLIENT;case"internal":default:return Po.SpanKind.INTERNAL}}var INe=Y(MJ,t=>new WP),LJ=t=>({name:MJ,setupOnce(){INe()},setup(e){wJ()&&e.on("spanStart",n=>{let r=ae(n);r.description?.startsWith("prisma:")&&n.setAttribute(le,"auto.db.otel.prisma"),r.description==="prisma:engine:db_query"&&r.data["db.query.text"]&&n.updateName(r.data["db.query.text"]),r.description==="prisma:engine:db_query"&&!r.data["db.system"]&&n.setAttribute("db.system","prisma")})}});var FJ=k(HJ(),1);var qJ="Hapi",zJ=Y(qJ,()=>new FJ.HapiInstrumentation),VNe=(()=>({name:qJ,setupOnce(){zJ()}})),YJ=VNe;var WA=k(Qe(),1);var Ga={HONO_TYPE:"hono.type",HONO_NAME:"hono.name"},Xm={MIDDLEWARE:"middleware",REQUEST_HANDLER:"request_handler"};var cu=k(U(),1),YA=k(_e(),1);var BNe="@sentry/instrumentation-hono",jNe="0.0.1",zA=class extends YA.InstrumentationBase{constructor(e={}){super(BNe,jNe,e)}init(){return[new YA.InstrumentationNodeModuleDefinition("hono",[">=4.0.0 <5"],e=>this._patch(e))]}_patch(e){let n=this;class r extends e.Hono{constructor(...s){super(...s),n._wrap(this,"get",n._patchHandler()),n._wrap(this,"post",n._patchHandler()),n._wrap(this,"put",n._patchHandler()),n._wrap(this,"delete",n._patchHandler()),n._wrap(this,"options",n._patchHandler()),n._wrap(this,"patch",n._patchHandler()),n._wrap(this,"all",n._patchHandler()),n._wrap(this,"on",n._patchOnHandler()),n._wrap(this,"use",n._patchMiddlewareHandler())}}try{e.Hono=r}catch{return{...e,Hono:r}}return e}_patchHandler(){let e=this;return function(n){return function(...o){if(typeof o[0]=="string"){let s=o[0];if(o.length===1)return n.apply(this,[s]);let i=o.slice(1);return n.apply(this,[s,...i.map(a=>e._wrapHandler(a))])}return n.apply(this,o.map(s=>e._wrapHandler(s)))}}}_patchOnHandler(){let e=this;return function(n){return function(...o){let s=o.slice(2);return n.apply(this,[...o.slice(0,2),...s.map(i=>e._wrapHandler(i))])}}}_patchMiddlewareHandler(){let e=this;return function(n){return function(...o){if(typeof o[0]=="string"){let s=o[0];if(o.length===1)return n.apply(this,[s]);let i=o.slice(1);return n.apply(this,[s,...i.map(a=>e._wrapHandler(a))])}return n.apply(this,o.map(s=>e._wrapHandler(s)))}}}_wrapHandler(e){let n=this;return function(r,o){if(!n.isEnabled())return e.apply(this,[r,o]);let s=r.req.path,i=n.tracer.startSpan(s);return cu.context.with(cu.trace.setSpan(cu.context.active(),i),()=>n._safeExecute(()=>{let a=e.apply(this,[r,o]);if(ar(a))return a.then(c=>{let u=n._determineHandlerType(c);return i.setAttributes({[Ga.HONO_TYPE]:u,[Ga.HONO_NAME]:u===Xm.REQUEST_HANDLER?s:e.name||"anonymous"}),n.getConfig().responseHook?.(i),c});{let c=n._determineHandlerType(a);return i.setAttributes({[Ga.HONO_TYPE]:c,[Ga.HONO_NAME]:c===Xm.REQUEST_HANDLER?s:e.name||"anonymous"}),n.getConfig().responseHook?.(i),a}},()=>i.end(),a=>{n._handleError(i,a),i.end()}))}}_safeExecute(e,n,r){try{let o=e();return ar(o)?o.then(()=>n(),s=>r(s)):n(),o}catch(o){throw r(o),o}}_determineHandlerType(e){return e===void 0?Xm.MIDDLEWARE:Xm.REQUEST_HANDLER}_handleError(e,n){n instanceof Error&&(e.setStatus({code:cu.SpanStatusCode.ERROR,message:n.message}),e.recordException(n))}};var WJ="Hono";function HNe(t){let e=ae(t).data,n=e[Ga.HONO_TYPE];if(e[J]||!n)return;t.setAttributes({[le]:"auto.http.otel.hono",[J]:`${n}.hono`});let r=e[Ga.HONO_NAME];if(typeof r=="string"&&t.updateName(r),ve()===Eo()){Ut&&N.warn("Isolation scope is default isolation scope - skipping setting transactionName");return}let o=e[WA.ATTR_HTTP_ROUTE],s=e[WA.ATTR_HTTP_REQUEST_METHOD];typeof o=="string"&&typeof s=="string"&&ve().setTransactionName(`${s} ${o}`)}var KJ=Y(WJ,()=>new zA({responseHook:t=>{HNe(t)}})),FNe=(()=>({name:WJ,setupOnce(){KJ()}})),ZJ=FNe;var cQ=k(aQ(),1),uQ=k(Qe(),1);var pQ="Koa",lQ=Y(pQ,cQ.KoaInstrumentation,(t={})=>({ignoreLayersType:t.ignoreLayersType,requestHook(e,n){Xe(e,"auto.http.otel.koa");let r=ae(e).data,o=r["koa.type"];o&&e.setAttribute(J,`${o}.koa`);let s=r["koa.name"];if(typeof s=="string"&&e.updateName(s||"< unknown >"),ve()===Eo()){Ut&&N.warn("Isolation scope is default isolation scope - skipping setting transactionName");return}let i=r[uQ.ATTR_HTTP_ROUTE],a=n.context?.request?.method?.toUpperCase()||"GET";i&&ve().setTransactionName(`${a} ${i}`)}})),XNe=((t={})=>({name:pQ,setupOnce(){lQ(t)}})),dQ=XNe;var AQ=k(SQ(),1);var RQ="Connect",yQ=Y(RQ,()=>new AQ.ConnectInstrumentation),uOe=(()=>({name:RQ,setupOnce(){yQ()}})),bQ=uOe;var LQ=k(wQ(),1);var mOe=new Set(["callProcedure","execSql","execSqlBatch","execBulkLoad","prepare","execute"]),DQ="Tedious",kQ=Y(DQ,()=>new LQ.TediousInstrumentation({})),_Oe=(()=>{let t;return{name:DQ,setupOnce(){let e=kQ();t=em(e)},setup(e){t?.(()=>e.on("spanStart",n=>{let{description:r,data:o}=ae(n);if(!r||o["db.system"]!=="mssql")return;let s=r.split(" ")[0]||"";mOe.has(s)&&n.setAttribute(le,"auto.db.otel.tedious")}))}}}),UQ=_Oe;var jQ=k(BQ(),1);var HQ="GenericPool",FQ=Y(HQ,()=>new jQ.GenericPoolInstrumentation({})),EOe=(()=>{let t;return{name:HQ,setupOnce(){let e=FQ();t=em(e)},setup(e){t?.(()=>e.on("spanStart",n=>{let o=ae(n).description;(o==="generic-pool.aquire"||o==="generic-pool.acquire")&&n.setAttribute(le,"auto.db.otel.generic_pool")}))}}}),qQ=EOe;var tX=k(eX(),1);var nX="Amqplib",vOe={consumeEndHook:t=>{Xe(t,"auto.amqplib.otel.consumer")},publishHook:t=>{Xe(t,"auto.amqplib.otel.publisher")}},rX=Y(nX,()=>new tX.AmqplibInstrumentation(vOe)),xOe=(()=>({name:nX,setupOnce(){rX()}})),oX=xOe;var o_="VercelAI";var lR=k(_e(),1);var sX=["generateText","streamText","generateObject","streamObject","embed","embedMany"];function POe(t){if(typeof t!="object"||t===null)return!1;let e=t;return"type"in e&&"error"in e&&"toolName"in e&&"toolCallId"in e&&e.type==="tool-error"&&e.error instanceof Error}function COe(t){if(typeof t!="object"||t===null||!("content"in t))return;let e=t;if(Array.isArray(e.content)){for(let n of e.content)if(POe(n)){let r=hv(n.toolCallId);if(r){let o=r.spanContext();qr(s=>{s.setContext("trace",{trace_id:o.traceId,span_id:o.spanId}),s.setTag("vercel.ai.tool.name",n.toolName),s.setTag("vercel.ai.tool.callId",n.toolCallId),s.setLevel("error"),Ee(n.error,{mechanism:{type:"auto.vercelai.otel",handled:!1}})}),Ev(n.toolCallId)}else qr(o=>{o.setTag("vercel.ai.tool.name",n.toolName),o.setTag("vercel.ai.tool.callId",n.toolCallId),o.setLevel("error"),Ee(n.error,{mechanism:{type:"auto.vercelai.otel",handled:!1}})})}}}function MOe(t,e,n,r){let o=t?.recordInputs!==void 0?t.recordInputs:e.recordInputs!==void 0?e.recordInputs:n===!0?!0:r,s=t?.recordOutputs!==void 0?t.recordOutputs:e.recordOutputs!==void 0?e.recordOutputs:n===!0?!0:r;return{recordInputs:o,recordOutputs:s}}var pR=class t extends lR.InstrumentationBase{__init(){this._isPatched=!1}__init2(){this._callbacks=[]}constructor(e={}){super("@sentry/instrumentation-vercel-ai",Pe,e),t.prototype.__init.call(this),t.prototype.__init2.call(this)}init(){return new lR.InstrumentationNodeModuleDefinition("ai",[">=3.0.0 <6"],this._patch.bind(this))}callWhenPatched(e){this._isPatched?e():this._callbacks.push(e)}_patch(e){this._isPatched=!0,this._callbacks.forEach(r=>r()),this._callbacks=[];let n=r=>new Proxy(r,{apply:(o,s,i)=>{let a=i[0].experimental_telemetry||{},c=a.isEnabled,u=$(),p=u?.getIntegrationByName(o_),l=p?.options,d=p?!!u?.getOptions().sendDefaultPii:!1,{recordInputs:f,recordOutputs:m}=MOe(l,a,c,d);return i[0].experimental_telemetry={...a,isEnabled:c!==void 0?c:!0,recordInputs:f,recordOutputs:m},Wr(()=>Reflect.apply(o,s,i),h=>{h&&typeof h=="object"&&nn(h,"_sentry_active_span",To())},()=>{},h=>{COe(h)})}});if(Object.prototype.toString.call(e)==="[object Module]"){for(let r of sX)e[r]=n(e[r]);return e}else{let r=sX.reduce((o,s)=>(o[s]=n(e[s]),o),{});return{...e,...r}}}};var iX=Y(o_,()=>new pR({}));function wOe(t){return!!t.getIntegrationByName("Modules")?.getModules?.()?.ai}var LOe=((t={})=>{let e;return{name:o_,options:t,setupOnce(){e=iX()},afterAllSetup(n){t.force??wOe(n)?Sg(n):e?.callWhenPatched(()=>Sg(n))}}}),aX=LOe;var fR=k(_e(),1);var DOe=[">=4.0.0 <7"],dR=class extends fR.InstrumentationBase{constructor(e={}){super("@sentry/instrumentation-openai",Pe,e)}init(){return new fR.InstrumentationNodeModuleDefinition("openai",DOe,this._patch.bind(this))}_patch(e){let n=e;return n=this._patchClient(n,"OpenAI"),n=this._patchClient(n,"AzureOpenAI"),n}_patchClient(e,n){let r=e[n];if(!r)return e;let o=this.getConfig(),s=function(...i){if(qc(Aa))return Reflect.construct(r,i);let a=Reflect.construct(r,i),u=!!$()?.getOptions().sendDefaultPii,p=o.recordInputs??u,l=o.recordOutputs??u;return yg(a,{recordInputs:p,recordOutputs:l})};Object.setPrototypeOf(s,r),Object.setPrototypeOf(s.prototype,r.prototype);for(let i of Object.getOwnPropertyNames(r))if(!["length","name","prototype"].includes(i)){let a=Object.getOwnPropertyDescriptor(r,i);a&&Object.defineProperty(s,i,a)}try{e[n]=s}catch{Object.defineProperty(e,n,{value:s,writable:!0,configurable:!0,enumerable:!0})}if(e.default===r)try{e.default=s}catch{Object.defineProperty(e,"default",{value:s,writable:!0,configurable:!0,enumerable:!0})}return e}};var cX=Y(Aa,t=>new dR(t)),kOe=((t={})=>({name:Aa,setupOnce(){cX(t)}})),uX=kOe;var _R=k(_e(),1);var UOe=[">=0.19.2 <1.0.0"],mR=class extends _R.InstrumentationBase{constructor(e={}){super("@sentry/instrumentation-anthropic-ai",Pe,e)}init(){return new _R.InstrumentationNodeModuleDefinition("@anthropic-ai/sdk",UOe,this._patch.bind(this))}_patch(e){let n=e.Anthropic,r=this.getConfig(),o=function(...s){if(qc(Ra))return Reflect.construct(n,s);let i=Reflect.construct(n,s),c=!!$()?.getOptions().sendDefaultPii,u=r.recordInputs??c,p=r.recordOutputs??c;return Sv(i,{recordInputs:u,recordOutputs:p})};Object.setPrototypeOf(o,n),Object.setPrototypeOf(o.prototype,n.prototype);for(let s of Object.getOwnPropertyNames(n))if(!["length","name","prototype"].includes(s)){let i=Object.getOwnPropertyDescriptor(n,s);i&&Object.defineProperty(o,s,i)}try{e.Anthropic=o}catch{Object.defineProperty(e,"Anthropic",{value:o,writable:!0,configurable:!0,enumerable:!0})}if(e.default===n)try{e.default=o}catch{Object.defineProperty(e,"default",{value:o,writable:!0,configurable:!0,enumerable:!0})}return e}};var pX=Y(Ra,t=>new mR(t)),$Oe=((t={})=>({name:Ra,options:t,setupOnce(){pX(t)}})),lX=$Oe;var Kl=k(_e(),1);var dX=[">=0.10.0 <2"],hR=class extends Kl.InstrumentationBase{constructor(e={}){super("@sentry/instrumentation-google-genai",Pe,e)}init(){return new Kl.InstrumentationNodeModuleDefinition("@google/genai",dX,n=>this._patch(n),n=>n,[new Kl.InstrumentationNodeModuleFile("@google/genai/dist/node/index.cjs",dX,n=>this._patch(n),n=>n)])}_patch(e){let n=e.GoogleGenAI,r=this.getConfig();if(typeof n!="function")return e;let o=function(...s){if(qc(ya))return Reflect.construct(n,s);let i=Reflect.construct(n,s),c=!!$()?.getOptions().sendDefaultPii,u=r,p=u?.recordInputs??c,l=u?.recordOutputs??c;return bv(i,{recordInputs:p,recordOutputs:l})};Object.setPrototypeOf(o,n),Object.setPrototypeOf(o.prototype,n.prototype);for(let s of Object.getOwnPropertyNames(n))if(!["length","name","prototype"].includes(s)){let i=Object.getOwnPropertyDescriptor(n,s);i&&Object.defineProperty(o,s,i)}return Qf(e,"GoogleGenAI",o),e}};var fX=Y(ya,t=>new hR(t)),GOe=((t={})=>({name:ya,setupOnce(){fX(t)}})),mX=GOe;var Ya=k(_e(),1);var ER=[">=0.1.0 <2.0.0"];function VOe(t,e){return t?Array.isArray(t)?t.includes(e)?t:[...t,e]:typeof t=="object"?[t,e]:t:[e]}function BOe(t,e,n){return new Proxy(t,{apply(r,o,s){let a=s[1];(!a||typeof a!="object"||Array.isArray(a))&&(a={},s[1]=a);let c=a.callbacks,u=VOe(c,e);return a.callbacks=u,Reflect.apply(r,o,s)}})}var TR=class extends Ya.InstrumentationBase{constructor(e={}){super("@sentry/instrumentation-langchain",Pe,e)}init(){let e=[],n=["@langchain/anthropic","@langchain/openai","@langchain/google-genai","@langchain/mistralai","@langchain/google-vertexai","@langchain/groq"];for(let r of n)e.push(new Ya.InstrumentationNodeModuleDefinition(r,ER,this._patch.bind(this),o=>o,[new Ya.InstrumentationNodeModuleFile(`${r}/dist/index.cjs`,ER,this._patch.bind(this),o=>o)]));return e.push(new Ya.InstrumentationNodeModuleDefinition("langchain",ER,this._patch.bind(this),r=>r,[new Ya.InstrumentationNodeModuleFile("langchain/dist/chat_models/universal.cjs",ER,this._patch.bind(this),r=>r)])),e}_patch(e){BI([Aa,Ra,ya]);let r=!!$()?.getOptions().sendDefaultPii,o=this.getConfig(),s=o?.recordInputs??r,i=o?.recordOutputs??r,a=Ng({recordInputs:s,recordOutputs:i});return this._patchRunnableMethods(e,a),e}_patchRunnableMethods(e,n){let r=["ChatAnthropic","ChatOpenAI","ChatGoogleGenerativeAI","ChatMistralAI","ChatVertexAI","ChatGroq","ConfigurableModel"],o=e.universal_exports??e,s=Object.values(o).find(c=>typeof c=="function"&&r.includes(c.name));if(!s)return;let i=s.prototype,a=["invoke","stream","batch"];for(let c of a){let u=i[c];typeof u=="function"&&(i[c]=BOe(u,n))}}};var _X=Y(bg,t=>new TR(t)),jOe=((t={})=>({name:bg,setupOnce(){_X(t)}})),hX=jOe;var Zl=k(_e(),1);var EX=[">=0.0.0 <2.0.0"],gR=class extends Zl.InstrumentationBase{constructor(e={}){super("@sentry/instrumentation-langgraph",Pe,e)}init(){return new Zl.InstrumentationNodeModuleDefinition("@langchain/langgraph",EX,this._patch.bind(this),n=>n,[new Zl.InstrumentationNodeModuleFile("@langchain/langgraph/dist/index.cjs",EX,this._patch.bind(this),n=>n)])}_patch(e){let r=!!$()?.getOptions().sendDefaultPii,o=this.getConfig(),s=o.recordInputs??r,i=o.recordOutputs??r,a={recordInputs:s,recordOutputs:i};if(e.StateGraph&&typeof e.StateGraph=="function"){let c=e.StateGraph;c.prototype.compile=Iv(c.prototype.compile,a)}return e}};var TX=Y(Og,t=>new gR(t)),HOe=((t={})=>({name:Og,setupOnce(){TX(t)}})),gX=HOe;var IX=k(_e(),1);var xi=k(U(),1),Pi=k(_e(),1),Mo=k(Qe(),1);import*as AX from"node:net";function RX(t,e,n,r,o){let i=()=>{},a=o.firestoreSpanCreationHook;typeof a=="function"&&(i=p=>{(0,Pi.safeExecuteInTheMiddle)(()=>a(p),l=>{l&&xi.diag.error(l?.message)},!0)});let c=new Pi.InstrumentationNodeModuleDefinition("@firebase/firestore",e,p=>SX(p,n,r,t,i)),u=["@firebase/firestore/dist/lite/index.node.cjs.js","@firebase/firestore/dist/lite/index.node.mjs.js","@firebase/firestore/dist/lite/index.rn.esm2017.js","@firebase/firestore/dist/lite/index.cjs.js"];for(let p of u)c.files.push(new Pi.InstrumentationNodeModuleFile(p,e,l=>SX(l,n,r,t,i),l=>yX(l,r)));return c}function SX(t,e,n,r,o){return yX(t,n),e(t,"addDoc",FOe(r,o)),e(t,"getDocs",zOe(r,o)),e(t,"setDoc",YOe(r,o)),e(t,"deleteDoc",qOe(r,o)),t}function yX(t,e){for(let n of["addDoc","getDocs","setDoc","deleteDoc"])(0,Pi.isWrapped)(t[n])&&e(t,n);return t}function FOe(t,e){return function(r){return function(o,s){let i=AR(t,"addDoc",o);return e(i),SR(i,()=>r(o,s))}}}function qOe(t,e){return function(r){return function(o){let s=AR(t,"deleteDoc",o.parent||o);return e(s),SR(s,()=>r(o))}}}function zOe(t,e){return function(r){return function(o){let s=AR(t,"getDocs",o);return e(s),SR(s,()=>r(o))}}}function YOe(t,e){return function(r){return function(o,s,i){let a=AR(t,"setDoc",o.parent||o);return e(a),SR(a,()=>typeof i<"u"?r(o,s,i):r(o,s))}}}function SR(t,e){return xi.context.with(xi.trace.setSpan(xi.context.active(),t),()=>(0,Pi.safeExecuteInTheMiddle)(()=>e(),n=>{n&&t.recordException(n),t.end()},!0))}function AR(t,e,n){let r=t.startSpan(`${e} ${n.path}`,{kind:xi.SpanKind.CLIENT});return KOe(r,n),r.setAttribute(Mo.ATTR_DB_OPERATION_NAME,e),r}function WOe(t){let e,n;if(typeof t.host=="string")if(t.host.startsWith("[")){if(t.host.endsWith("]"))e=t.host.replace(/^\[|\]$/g,"");else if(t.host.includes("]:")){let r=t.host.lastIndexOf(":");r!==-1&&(e=t.host.slice(1,r).replace(/^\[|\]$/g,""),n=t.host.slice(r+1))}}else if(AX.isIPv6(t.host))e=t.host;else{let r=t.host.lastIndexOf(":");r!==-1?(e=t.host.slice(0,r),n=t.host.slice(r+1)):e=t.host}return{address:e,port:n?parseInt(n,10):void 0}}function KOe(t,e){let n=e.firestore.app,r=n.options,s=(e.firestore.toJSON()||{}).settings||{},i={[Mo.ATTR_DB_COLLECTION_NAME]:e.path,[Mo.ATTR_DB_NAMESPACE]:n.name,[Mo.ATTR_DB_SYSTEM_NAME]:"firebase.firestore","firebase.firestore.type":e.type,"firebase.firestore.options.projectId":r.projectId,"firebase.firestore.options.appId":r.appId,"firebase.firestore.options.messagingSenderId":r.messagingSenderId,"firebase.firestore.options.storageBucket":r.storageBucket},{address:a,port:c}=WOe(s);a&&(i[Mo.ATTR_SERVER_ADDRESS]=a),c&&(i[Mo.ATTR_SERVER_PORT]=c),t.setAttributes(i)}var qs=k(U(),1),Ci=k(_e(),1);function bX(t,e,n,r,o){let s=()=>{},i=()=>{},a=o.functions?.errorHook,c=o.functions?.requestHook,u=o.functions?.responseHook;typeof u=="function"&&(i=(d,f)=>{(0,Ci.safeExecuteInTheMiddle)(()=>u(d,f),m=>{m&&qs.diag.error(m?.message)},!0)}),typeof c=="function"&&(s=d=>{(0,Ci.safeExecuteInTheMiddle)(()=>c(d),f=>{f&&qs.diag.error(f?.message)},!0)});let p=new Ci.InstrumentationNodeModuleDefinition("firebase-functions",e);return[{name:"firebase-functions/lib/v2/providers/https.js",triggerType:"function"},{name:"firebase-functions/lib/v2/providers/firestore.js",triggerType:"firestore"},{name:"firebase-functions/lib/v2/providers/scheduler.js",triggerType:"scheduler"},{name:"firebase-functions/lib/v2/storage.js",triggerType:"storage"}].forEach(({name:d,triggerType:f})=>{p.files.push(new Ci.InstrumentationNodeModuleFile(d,e,m=>ZOe(m,n,r,t,{requestHook:s,responseHook:i,errorHook:a},f),m=>NX(m,r)))}),p}function fr(t,e,n){return function(o){return function(...s){let i=typeof s[0]=="function"?s[0]:s[1],a=typeof s[0]=="function"?void 0:s[0];if(!i)return o.call(this,...s);let c=async function(...u){let p=process.env.FUNCTION_TARGET||process.env.K_SERVICE||"unknown",l=t.startSpan(`firebase.function.${n}`,{kind:qs.SpanKind.SERVER}),d={"faas.name":p,"faas.trigger":n,"faas.provider":"firebase"};return process.env.GCLOUD_PROJECT&&(d["cloud.project_id"]=process.env.GCLOUD_PROJECT),process.env.EVENTARC_CLOUD_EVENT_SOURCE&&(d["cloud.event_source"]=process.env.EVENTARC_CLOUD_EVENT_SOURCE),l.setAttributes(d),e?.requestHook?.(l),qs.context.with(qs.trace.setSpan(qs.context.active(),l),async()=>{let f,m;try{m=await i.apply(this,u)}catch(h){f=h}if(e?.responseHook?.(l,f),f&&l.recordException(f),l.end(),f)throw await e?.errorHook?.(l,f),f;return m})};return a?o.call(this,a,c):o.call(this,c)}}}function ZOe(t,e,n,r,o,s){switch(NX(t,n),s){case"function":e(t,"onRequest",fr(r,o,"http.request")),e(t,"onCall",fr(r,o,"http.call"));break;case"firestore":e(t,"onDocumentCreated",fr(r,o,"firestore.document.created")),e(t,"onDocumentUpdated",fr(r,o,"firestore.document.updated")),e(t,"onDocumentDeleted",fr(r,o,"firestore.document.deleted")),e(t,"onDocumentWritten",fr(r,o,"firestore.document.written")),e(t,"onDocumentCreatedWithAuthContext",fr(r,o,"firestore.document.created")),e(t,"onDocumentUpdatedWithAuthContext",fr(r,o,"firestore.document.updated")),e(t,"onDocumentDeletedWithAuthContext",fr(r,o,"firestore.document.deleted")),e(t,"onDocumentWrittenWithAuthContext",fr(r,o,"firestore.document.written"));break;case"scheduler":e(t,"onSchedule",fr(r,o,"scheduler.scheduled"));break;case"storage":e(t,"onObjectFinalized",fr(r,o,"storage.object.finalized")),e(t,"onObjectArchived",fr(r,o,"storage.object.archived")),e(t,"onObjectDeleted",fr(r,o,"storage.object.deleted")),e(t,"onObjectMetadataUpdated",fr(r,o,"storage.object.metadataUpdated"));break}return t}function NX(t,e){let n=["onSchedule","onRequest","onCall","onObjectFinalized","onObjectArchived","onObjectDeleted","onObjectMetadataUpdated","onDocumentCreated","onDocumentUpdated","onDocumentDeleted","onDocumentWritten","onDocumentCreatedWithAuthContext","onDocumentUpdatedWithAuthContext","onDocumentDeletedWithAuthContext","onDocumentWrittenWithAuthContext"];for(let r of n)(0,Ci.isWrapped)(t[r])&&e(t,r);return t}var OX={},JOe=[">=3.0.0 <5"],QOe=[">=6.0.0 <7"],RR=class extends IX.InstrumentationBase{constructor(e=OX){super("@sentry/instrumentation-firebase",Pe,e)}setConfig(e={}){super.setConfig({...OX,...e})}init(){let e=[];return e.push(RX(this.tracer,JOe,this._wrap,this._unwrap,this.getConfig())),e.push(bX(this.tracer,QOe,this._wrap,this._unwrap,this.getConfig())),e}};var vX="Firebase",XOe={firestoreSpanCreationHook:t=>{Xe(t,"auto.firebase.otel.firestore"),t.setAttribute(J,"db.query")},functions:{requestHook:t=>{Xe(t,"auto.firebase.otel.functions"),t.setAttribute(J,"http.request")},errorHook:async(t,e)=>{e&&(Ee(e,{mechanism:{type:"auto.firebase.otel.functions",handled:!1}}),await YT(2e3))}}},xX=Y(vX,()=>new RR(XOe)),eIe=(()=>({name:vX,setupOnce(){xX()}})),PX=eIe;function CX(){return[H9(),P3(),r6(),ZJ(),B6(),t5(),d5(),y5(),eJ(),SJ(),LJ(),YJ(),dQ(),bQ(),UQ(),qQ(),g6(),oX(),x6(),hX(),gX(),aX(),uX(),lX(),mX(),bJ(),PX()]}var Jl=k(U(),1),yR=k(Fv(),1),MX=k(_x(),1),Ql=k(Qe(),1);var fC=1e6;function wX(t,e={}){t.getOptions().debug&&Fx();let[n,r]=tIe(t,e);t.traceProvider=n,t.asyncLocalStorageLookup=r}function tIe(t,e={}){let n=new MX.BasicTracerProvider({sampler:new SS(t),resource:(0,yR.defaultResource)().merge((0,yR.resourceFromAttributes)({[Ql.ATTR_SERVICE_NAME]:"node",[Ql.SEMRESATTRS_SERVICE_NAMESPACE]:"sentry",[Ql.ATTR_SERVICE_VERSION]:Pe})),forceFlushTimeoutMillis:500,spanProcessors:[new gS({timeout:nIe(t.getOptions().maxSpanWaitDuration)}),...e.spanProcessors||[]]});Jl.trace.setGlobalTracerProvider(n),Jl.propagation.setGlobalPropagator(new TS);let r=new Hx;return Jl.context.setGlobalContextManager(r),[n,r.getAsyncLocalStorageLookup()]}function nIe(t){if(t!=null){if(t>fC)return Ut&&N.warn(`\`maxSpanWaitDuration\` is too high, using the maximum value of ${fC}`),fC;if(t<=0||Number.isNaN(t)){Ut&&N.warn("`maxSpanWaitDuration` must be a positive number, using default value instead.");return}return t}}function LX(){return wS().filter(e=>e.name!=="Http"&&e.name!=="NodeFetch").concat(R9(),x9())}function DX(t){return[...LX(),...Kt(t)?CX():[]]}function mC(t={}){return rIe(t,DX)}function rIe(t={},e){zc(t,"node");let n=Wx({...t,defaultIntegrations:t.defaultIntegrations??e(t)});return n&&!t.skipOpenTelemetrySetup&&(wX(n,{spanProcessors:t.openTelemetrySpanProcessors}),Kx()),n}var x={};Ph(x,{BRAND:()=>PIe,DIRTY:()=>lu,EMPTY_PATH:()=>cIe,INVALID:()=>ue,NEVER:()=>fve,OK:()=>Xn,ParseStatus:()=>Dn,Schema:()=>Ne,ZodAny:()=>Za,ZodArray:()=>Di,ZodBigInt:()=>fu,ZodBoolean:()=>mu,ZodBranded:()=>i_,ZodCatch:()=>Nu,ZodDate:()=>_u,ZodDefault:()=>bu,ZodDiscriminatedUnion:()=>OR,ZodEffects:()=>Lo,ZodEnum:()=>Ru,ZodError:()=>Mr,ZodFirstPartyTypeKind:()=>D,ZodFunction:()=>vR,ZodIntersection:()=>gu,ZodIssueCode:()=>L,ZodLazy:()=>Su,ZodLiteral:()=>Au,ZodMap:()=>od,ZodNaN:()=>id,ZodNativeEnum:()=>yu,ZodNever:()=>as,ZodNull:()=>Eu,ZodNullable:()=>Ws,ZodNumber:()=>du,ZodObject:()=>Lr,ZodOptional:()=>wr,ZodParsedType:()=>F,ZodPipeline:()=>a_,ZodPromise:()=>Ja,ZodReadonly:()=>Ou,ZodRecord:()=>IR,ZodSchema:()=>Ne,ZodSet:()=>sd,ZodString:()=>Ka,ZodSymbol:()=>nd,ZodTransformer:()=>Lo,ZodTuple:()=>Ys,ZodType:()=>Ne,ZodUndefined:()=>hu,ZodUnion:()=>Tu,ZodUnknown:()=>Li,ZodVoid:()=>rd,addIssueToContext:()=>B,any:()=>GIe,array:()=>HIe,bigint:()=>LIe,boolean:()=>zX,coerce:()=>dve,custom:()=>HX,date:()=>DIe,datetimeRegex:()=>BX,defaultErrorMap:()=>Mi,discriminatedUnion:()=>zIe,effect:()=>ove,enum:()=>tve,function:()=>QIe,getErrorMap:()=>Xl,getParsedType:()=>zs,instanceof:()=>MIe,intersection:()=>YIe,isAborted:()=>bR,isAsync:()=>ed,isDirty:()=>NR,isValid:()=>Wa,late:()=>CIe,lazy:()=>XIe,literal:()=>eve,makeIssue:()=>s_,map:()=>ZIe,nan:()=>wIe,nativeEnum:()=>nve,never:()=>BIe,null:()=>$Ie,nullable:()=>ive,number:()=>qX,object:()=>TC,objectUtil:()=>_C,oboolean:()=>lve,onumber:()=>pve,optional:()=>sve,ostring:()=>uve,pipeline:()=>cve,preprocess:()=>ave,promise:()=>rve,quotelessJson:()=>sIe,record:()=>KIe,set:()=>JIe,setErrorMap:()=>aIe,strictObject:()=>FIe,string:()=>FX,symbol:()=>kIe,transformer:()=>ove,tuple:()=>WIe,undefined:()=>UIe,union:()=>qIe,unknown:()=>VIe,util:()=>Ce,void:()=>jIe});var Ce;(function(t){t.assertEqual=o=>{};function e(o){}t.assertIs=e;function n(o){throw new Error}t.assertNever=n,t.arrayToEnum=o=>{let s={};for(let i of o)s[i]=i;return s},t.getValidEnumValues=o=>{let s=t.objectKeys(o).filter(a=>typeof o[o[a]]!="number"),i={};for(let a of s)i[a]=o[a];return t.objectValues(i)},t.objectValues=o=>t.objectKeys(o).map(function(s){return o[s]}),t.objectKeys=typeof Object.keys=="function"?o=>Object.keys(o):o=>{let s=[];for(let i in o)Object.prototype.hasOwnProperty.call(o,i)&&s.push(i);return s},t.find=(o,s)=>{for(let i of o)if(s(i))return i},t.isInteger=typeof Number.isInteger=="function"?o=>Number.isInteger(o):o=>typeof o=="number"&&Number.isFinite(o)&&Math.floor(o)===o;function r(o,s=" | "){return o.map(i=>typeof i=="string"?`'${i}'`:i).join(s)}t.joinValues=r,t.jsonStringifyReplacer=(o,s)=>typeof s=="bigint"?s.toString():s})(Ce||(Ce={}));var _C;(function(t){t.mergeShapes=(e,n)=>({...e,...n})})(_C||(_C={}));var F=Ce.arrayToEnum(["string","nan","number","integer","float","boolean","date","bigint","symbol","function","undefined","null","array","object","unknown","promise","void","never","map","set"]),zs=t=>{switch(typeof t){case"undefined":return F.undefined;case"string":return F.string;case"number":return Number.isNaN(t)?F.nan:F.number;case"boolean":return F.boolean;case"function":return F.function;case"bigint":return F.bigint;case"symbol":return F.symbol;case"object":return Array.isArray(t)?F.array:t===null?F.null:t.then&&typeof t.then=="function"&&t.catch&&typeof t.catch=="function"?F.promise:typeof Map<"u"&&t instanceof Map?F.map:typeof Set<"u"&&t instanceof Set?F.set:typeof Date<"u"&&t instanceof Date?F.date:F.object;default:return F.unknown}};var L=Ce.arrayToEnum(["invalid_type","invalid_literal","custom","invalid_union","invalid_union_discriminator","invalid_enum_value","unrecognized_keys","invalid_arguments","invalid_return_type","invalid_date","invalid_string","too_small","too_big","invalid_intersection_types","not_multiple_of","not_finite"]),sIe=t=>JSON.stringify(t,null,2).replace(/"([^"]+)":/g,"$1:"),Mr=class t extends Error{get errors(){return this.issues}constructor(e){super(),this.issues=[],this.addIssue=r=>{this.issues=[...this.issues,r]},this.addIssues=(r=[])=>{this.issues=[...this.issues,...r]};let n=new.target.prototype;Object.setPrototypeOf?Object.setPrototypeOf(this,n):this.__proto__=n,this.name="ZodError",this.issues=e}format(e){let n=e||function(s){return s.message},r={_errors:[]},o=s=>{for(let i of s.issues)if(i.code==="invalid_union")i.unionErrors.map(o);else if(i.code==="invalid_return_type")o(i.returnTypeError);else if(i.code==="invalid_arguments")o(i.argumentsError);else if(i.path.length===0)r._errors.push(n(i));else{let a=r,c=0;for(;c<i.path.length;){let u=i.path[c];c===i.path.length-1?(a[u]=a[u]||{_errors:[]},a[u]._errors.push(n(i))):a[u]=a[u]||{_errors:[]},a=a[u],c++}}};return o(this),r}static assert(e){if(!(e instanceof t))throw new Error(`Not a ZodError: ${e}`)}toString(){return this.message}get message(){return JSON.stringify(this.issues,Ce.jsonStringifyReplacer,2)}get isEmpty(){return this.issues.length===0}flatten(e=n=>n.message){let n={},r=[];for(let o of this.issues)if(o.path.length>0){let s=o.path[0];n[s]=n[s]||[],n[s].push(e(o))}else r.push(e(o));return{formErrors:r,fieldErrors:n}}get formErrors(){return this.flatten()}};Mr.create=t=>new Mr(t);var iIe=(t,e)=>{let n;switch(t.code){case L.invalid_type:t.received===F.undefined?n="Required":n=`Expected ${t.expected}, received ${t.received}`;break;case L.invalid_literal:n=`Invalid literal value, expected ${JSON.stringify(t.expected,Ce.jsonStringifyReplacer)}`;break;case L.unrecognized_keys:n=`Unrecognized key(s) in object: ${Ce.joinValues(t.keys,", ")}`;break;case L.invalid_union:n="Invalid input";break;case L.invalid_union_discriminator:n=`Invalid discriminator value. Expected ${Ce.joinValues(t.options)}`;break;case L.invalid_enum_value:n=`Invalid enum value. Expected ${Ce.joinValues(t.options)}, received '${t.received}'`;break;case L.invalid_arguments:n="Invalid function arguments";break;case L.invalid_return_type:n="Invalid function return type";break;case L.invalid_date:n="Invalid date";break;case L.invalid_string:typeof t.validation=="object"?"includes"in t.validation?(n=`Invalid input: must include "${t.validation.includes}"`,typeof t.validation.position=="number"&&(n=`${n} at one or more positions greater than or equal to ${t.validation.position}`)):"startsWith"in t.validation?n=`Invalid input: must start with "${t.validation.startsWith}"`:"endsWith"in t.validation?n=`Invalid input: must end with "${t.validation.endsWith}"`:Ce.assertNever(t.validation):t.validation!=="regex"?n=`Invalid ${t.validation}`:n="Invalid";break;case L.too_small:t.type==="array"?n=`Array must contain ${t.exact?"exactly":t.inclusive?"at least":"more than"} ${t.minimum} element(s)`:t.type==="string"?n=`String must contain ${t.exact?"exactly":t.inclusive?"at least":"over"} ${t.minimum} character(s)`:t.type==="number"?n=`Number must be ${t.exact?"exactly equal to ":t.inclusive?"greater than or equal to ":"greater than "}${t.minimum}`:t.type==="bigint"?n=`Number must be ${t.exact?"exactly equal to ":t.inclusive?"greater than or equal to ":"greater than "}${t.minimum}`:t.type==="date"?n=`Date must be ${t.exact?"exactly equal to ":t.inclusive?"greater than or equal to ":"greater than "}${new Date(Number(t.minimum))}`:n="Invalid input";break;case L.too_big:t.type==="array"?n=`Array must contain ${t.exact?"exactly":t.inclusive?"at most":"less than"} ${t.maximum} element(s)`:t.type==="string"?n=`String must contain ${t.exact?"exactly":t.inclusive?"at most":"under"} ${t.maximum} character(s)`:t.type==="number"?n=`Number must be ${t.exact?"exactly":t.inclusive?"less than or equal to":"less than"} ${t.maximum}`:t.type==="bigint"?n=`BigInt must be ${t.exact?"exactly":t.inclusive?"less than or equal to":"less than"} ${t.maximum}`:t.type==="date"?n=`Date must be ${t.exact?"exactly":t.inclusive?"smaller than or equal to":"smaller than"} ${new Date(Number(t.maximum))}`:n="Invalid input";break;case L.custom:n="Invalid input";break;case L.invalid_intersection_types:n="Intersection results could not be merged";break;case L.not_multiple_of:n=`Number must be a multiple of ${t.multipleOf}`;break;case L.not_finite:n="Number must be finite";break;default:n=e.defaultError,Ce.assertNever(t)}return{message:n}},Mi=iIe;var kX=Mi;function aIe(t){kX=t}function Xl(){return kX}var s_=t=>{let{data:e,path:n,errorMaps:r,issueData:o}=t,s=[...n,...o.path||[]],i={...o,path:s};if(o.message!==void 0)return{...o,path:s,message:o.message};let a="",c=r.filter(u=>!!u).slice().reverse();for(let u of c)a=u(i,{data:e,defaultError:a}).message;return{...o,path:s,message:a}},cIe=[];function B(t,e){let n=Xl(),r=s_({issueData:e,data:t.data,path:t.path,errorMaps:[t.common.contextualErrorMap,t.schemaErrorMap,n,n===Mi?void 0:Mi].filter(o=>!!o)});t.common.issues.push(r)}var Dn=class t{constructor(){this.value="valid"}dirty(){this.value==="valid"&&(this.value="dirty")}abort(){this.value!=="aborted"&&(this.value="aborted")}static mergeArray(e,n){let r=[];for(let o of n){if(o.status==="aborted")return ue;o.status==="dirty"&&e.dirty(),r.push(o.value)}return{status:e.value,value:r}}static async mergeObjectAsync(e,n){let r=[];for(let o of n){let s=await o.key,i=await o.value;r.push({key:s,value:i})}return t.mergeObjectSync(e,r)}static mergeObjectSync(e,n){let r={};for(let o of n){let{key:s,value:i}=o;if(s.status==="aborted"||i.status==="aborted")return ue;s.status==="dirty"&&e.dirty(),i.status==="dirty"&&e.dirty(),s.value!=="__proto__"&&(typeof i.value<"u"||o.alwaysSet)&&(r[s.value]=i.value)}return{status:e.value,value:r}}},ue=Object.freeze({status:"aborted"}),lu=t=>({status:"dirty",value:t}),Xn=t=>({status:"valid",value:t}),bR=t=>t.status==="aborted",NR=t=>t.status==="dirty",Wa=t=>t.status==="valid",ed=t=>typeof Promise<"u"&&t instanceof Promise;var Z;(function(t){t.errToObj=e=>typeof e=="string"?{message:e}:e||{},t.toString=e=>typeof e=="string"?e:e?.message})(Z||(Z={}));var wo=class{constructor(e,n,r,o){this._cachedPath=[],this.parent=e,this.data=n,this._path=r,this._key=o}get path(){return this._cachedPath.length||(Array.isArray(this._key)?this._cachedPath.push(...this._path,...this._key):this._cachedPath.push(...this._path,this._key)),this._cachedPath}},UX=(t,e)=>{if(Wa(e))return{success:!0,data:e.value};if(!t.common.issues.length)throw new Error("Validation failed but no issues detected.");return{success:!1,get error(){if(this._error)return this._error;let n=new Mr(t.common.issues);return this._error=n,this._error}}};function Ae(t){if(!t)return{};let{errorMap:e,invalid_type_error:n,required_error:r,description:o}=t;if(e&&(n||r))throw new Error(`Can't use "invalid_type_error" or "required_error" in conjunction with custom error map.`);return e?{errorMap:e,description:o}:{errorMap:(i,a)=>{let{message:c}=t;return i.code==="invalid_enum_value"?{message:c??a.defaultError}:typeof a.data>"u"?{message:c??r??a.defaultError}:i.code!=="invalid_type"?{message:a.defaultError}:{message:c??n??a.defaultError}},description:o}}var Ne=class{get description(){return this._def.description}_getType(e){return zs(e.data)}_getOrReturnCtx(e,n){return n||{common:e.parent.common,data:e.data,parsedType:zs(e.data),schemaErrorMap:this._def.errorMap,path:e.path,parent:e.parent}}_processInputParams(e){return{status:new Dn,ctx:{common:e.parent.common,data:e.data,parsedType:zs(e.data),schemaErrorMap:this._def.errorMap,path:e.path,parent:e.parent}}}_parseSync(e){let n=this._parse(e);if(ed(n))throw new Error("Synchronous parse encountered promise.");return n}_parseAsync(e){let n=this._parse(e);return Promise.resolve(n)}parse(e,n){let r=this.safeParse(e,n);if(r.success)return r.data;throw r.error}safeParse(e,n){let r={common:{issues:[],async:n?.async??!1,contextualErrorMap:n?.errorMap},path:n?.path||[],schemaErrorMap:this._def.errorMap,parent:null,data:e,parsedType:zs(e)},o=this._parseSync({data:e,path:r.path,parent:r});return UX(r,o)}"~validate"(e){let n={common:{issues:[],async:!!this["~standard"].async},path:[],schemaErrorMap:this._def.errorMap,parent:null,data:e,parsedType:zs(e)};if(!this["~standard"].async)try{let r=this._parseSync({data:e,path:[],parent:n});return Wa(r)?{value:r.value}:{issues:n.common.issues}}catch(r){r?.message?.toLowerCase()?.includes("encountered")&&(this["~standard"].async=!0),n.common={issues:[],async:!0}}return this._parseAsync({data:e,path:[],parent:n}).then(r=>Wa(r)?{value:r.value}:{issues:n.common.issues})}async parseAsync(e,n){let r=await this.safeParseAsync(e,n);if(r.success)return r.data;throw r.error}async safeParseAsync(e,n){let r={common:{issues:[],contextualErrorMap:n?.errorMap,async:!0},path:n?.path||[],schemaErrorMap:this._def.errorMap,parent:null,data:e,parsedType:zs(e)},o=this._parse({data:e,path:r.path,parent:r}),s=await(ed(o)?o:Promise.resolve(o));return UX(r,s)}refine(e,n){let r=o=>typeof n=="string"||typeof n>"u"?{message:n}:typeof n=="function"?n(o):n;return this._refinement((o,s)=>{let i=e(o),a=()=>s.addIssue({code:L.custom,...r(o)});return typeof Promise<"u"&&i instanceof Promise?i.then(c=>c?!0:(a(),!1)):i?!0:(a(),!1)})}refinement(e,n){return this._refinement((r,o)=>e(r)?!0:(o.addIssue(typeof n=="function"?n(r,o):n),!1))}_refinement(e){return new Lo({schema:this,typeName:D.ZodEffects,effect:{type:"refinement",refinement:e}})}superRefine(e){return this._refinement(e)}constructor(e){this.spa=this.safeParseAsync,this._def=e,this.parse=this.parse.bind(this),this.safeParse=this.safeParse.bind(this),this.parseAsync=this.parseAsync.bind(this),this.safeParseAsync=this.safeParseAsync.bind(this),this.spa=this.spa.bind(this),this.refine=this.refine.bind(this),this.refinement=this.refinement.bind(this),this.superRefine=this.superRefine.bind(this),this.optional=this.optional.bind(this),this.nullable=this.nullable.bind(this),this.nullish=this.nullish.bind(this),this.array=this.array.bind(this),this.promise=this.promise.bind(this),this.or=this.or.bind(this),this.and=this.and.bind(this),this.transform=this.transform.bind(this),this.brand=this.brand.bind(this),this.default=this.default.bind(this),this.catch=this.catch.bind(this),this.describe=this.describe.bind(this),this.pipe=this.pipe.bind(this),this.readonly=this.readonly.bind(this),this.isNullable=this.isNullable.bind(this),this.isOptional=this.isOptional.bind(this),this["~standard"]={version:1,vendor:"zod",validate:n=>this["~validate"](n)}}optional(){return wr.create(this,this._def)}nullable(){return Ws.create(this,this._def)}nullish(){return this.nullable().optional()}array(){return Di.create(this)}promise(){return Ja.create(this,this._def)}or(e){return Tu.create([this,e],this._def)}and(e){return gu.create(this,e,this._def)}transform(e){return new Lo({...Ae(this._def),schema:this,typeName:D.ZodEffects,effect:{type:"transform",transform:e}})}default(e){let n=typeof e=="function"?e:()=>e;return new bu({...Ae(this._def),innerType:this,defaultValue:n,typeName:D.ZodDefault})}brand(){return new i_({typeName:D.ZodBranded,type:this,...Ae(this._def)})}catch(e){let n=typeof e=="function"?e:()=>e;return new Nu({...Ae(this._def),innerType:this,catchValue:n,typeName:D.ZodCatch})}describe(e){let n=this.constructor;return new n({...this._def,description:e})}pipe(e){return a_.create(this,e)}readonly(){return Ou.create(this)}isOptional(){return this.safeParse(void 0).success}isNullable(){return this.safeParse(null).success}},uIe=/^c[^\s-]{8,}$/i,pIe=/^[0-9a-z]+$/,lIe=/^[0-9A-HJKMNP-TV-Z]{26}$/i,dIe=/^[0-9a-fA-F]{8}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{12}$/i,fIe=/^[a-z0-9_-]{21}$/i,mIe=/^[A-Za-z0-9-_]+\.[A-Za-z0-9-_]+\.[A-Za-z0-9-_]*$/,_Ie=/^[-+]?P(?!$)(?:(?:[-+]?\d+Y)|(?:[-+]?\d+[.,]\d+Y$))?(?:(?:[-+]?\d+M)|(?:[-+]?\d+[.,]\d+M$))?(?:(?:[-+]?\d+W)|(?:[-+]?\d+[.,]\d+W$))?(?:(?:[-+]?\d+D)|(?:[-+]?\d+[.,]\d+D$))?(?:T(?=[\d+-])(?:(?:[-+]?\d+H)|(?:[-+]?\d+[.,]\d+H$))?(?:(?:[-+]?\d+M)|(?:[-+]?\d+[.,]\d+M$))?(?:[-+]?\d+(?:[.,]\d+)?S)?)??$/,hIe=/^(?!\.)(?!.*\.\.)([A-Z0-9_'+\-\.]*)[A-Z0-9_+-]@([A-Z0-9][A-Z0-9\-]*\.)+[A-Z]{2,}$/i,EIe="^(\\p{Extended_Pictographic}|\\p{Emoji_Component})+$",hC,TIe=/^(?:(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\.){3}(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])$/,gIe=/^(?:(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\.){3}(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\/(3[0-2]|[12]?[0-9])$/,SIe=/^(([0-9a-fA-F]{1,4}:){7,7}[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,7}:|([0-9a-fA-F]{1,4}:){1,6}:[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,5}(:[0-9a-fA-F]{1,4}){1,2}|([0-9a-fA-F]{1,4}:){1,4}(:[0-9a-fA-F]{1,4}){1,3}|([0-9a-fA-F]{1,4}:){1,3}(:[0-9a-fA-F]{1,4}){1,4}|([0-9a-fA-F]{1,4}:){1,2}(:[0-9a-fA-F]{1,4}){1,5}|[0-9a-fA-F]{1,4}:((:[0-9a-fA-F]{1,4}){1,6})|:((:[0-9a-fA-F]{1,4}){1,7}|:)|fe80:(:[0-9a-fA-F]{0,4}){0,4}%[0-9a-zA-Z]{1,}|::(ffff(:0{1,4}){0,1}:){0,1}((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])|([0-9a-fA-F]{1,4}:){1,4}:((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9]))$/,AIe=/^(([0-9a-fA-F]{1,4}:){7,7}[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,7}:|([0-9a-fA-F]{1,4}:){1,6}:[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,5}(:[0-9a-fA-F]{1,4}){1,2}|([0-9a-fA-F]{1,4}:){1,4}(:[0-9a-fA-F]{1,4}){1,3}|([0-9a-fA-F]{1,4}:){1,3}(:[0-9a-fA-F]{1,4}){1,4}|([0-9a-fA-F]{1,4}:){1,2}(:[0-9a-fA-F]{1,4}){1,5}|[0-9a-fA-F]{1,4}:((:[0-9a-fA-F]{1,4}){1,6})|:((:[0-9a-fA-F]{1,4}){1,7}|:)|fe80:(:[0-9a-fA-F]{0,4}){0,4}%[0-9a-zA-Z]{1,}|::(ffff(:0{1,4}){0,1}:){0,1}((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])|([0-9a-fA-F]{1,4}:){1,4}:((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9]))\/(12[0-8]|1[01][0-9]|[1-9]?[0-9])$/,RIe=/^([0-9a-zA-Z+/]{4})*(([0-9a-zA-Z+/]{2}==)|([0-9a-zA-Z+/]{3}=))?$/,yIe=/^([0-9a-zA-Z-_]{4})*(([0-9a-zA-Z-_]{2}(==)?)|([0-9a-zA-Z-_]{3}(=)?))?$/,GX="((\\d\\d[2468][048]|\\d\\d[13579][26]|\\d\\d0[48]|[02468][048]00|[13579][26]00)-02-29|\\d{4}-((0[13578]|1[02])-(0[1-9]|[12]\\d|3[01])|(0[469]|11)-(0[1-9]|[12]\\d|30)|(02)-(0[1-9]|1\\d|2[0-8])))",bIe=new RegExp(`^${GX}$`);function VX(t){let e="[0-5]\\d";t.precision?e=`${e}\\.\\d{${t.precision}}`:t.precision==null&&(e=`${e}(\\.\\d+)?`);let n=t.precision?"+":"?";return`([01]\\d|2[0-3]):[0-5]\\d(:${e})${n}`}function NIe(t){return new RegExp(`^${VX(t)}$`)}function BX(t){let e=`${GX}T${VX(t)}`,n=[];return n.push(t.local?"Z?":"Z"),t.offset&&n.push("([+-]\\d{2}:?\\d{2})"),e=`${e}(${n.join("|")})`,new RegExp(`^${e}$`)}function OIe(t,e){return!!((e==="v4"||!e)&&TIe.test(t)||(e==="v6"||!e)&&SIe.test(t))}function IIe(t,e){if(!mIe.test(t))return!1;try{let[n]=t.split(".");if(!n)return!1;let r=n.replace(/-/g,"+").replace(/_/g,"/").padEnd(n.length+(4-n.length%4)%4,"="),o=JSON.parse(atob(r));return!(typeof o!="object"||o===null||"typ"in o&&o?.typ!=="JWT"||!o.alg||e&&o.alg!==e)}catch{return!1}}function vIe(t,e){return!!((e==="v4"||!e)&&gIe.test(t)||(e==="v6"||!e)&&AIe.test(t))}var Ka=class t extends Ne{_parse(e){if(this._def.coerce&&(e.data=String(e.data)),this._getType(e)!==F.string){let s=this._getOrReturnCtx(e);return B(s,{code:L.invalid_type,expected:F.string,received:s.parsedType}),ue}let r=new Dn,o;for(let s of this._def.checks)if(s.kind==="min")e.data.length<s.value&&(o=this._getOrReturnCtx(e,o),B(o,{code:L.too_small,minimum:s.value,type:"string",inclusive:!0,exact:!1,message:s.message}),r.dirty());else if(s.kind==="max")e.data.length>s.value&&(o=this._getOrReturnCtx(e,o),B(o,{code:L.too_big,maximum:s.value,type:"string",inclusive:!0,exact:!1,message:s.message}),r.dirty());else if(s.kind==="length"){let i=e.data.length>s.value,a=e.data.length<s.value;(i||a)&&(o=this._getOrReturnCtx(e,o),i?B(o,{code:L.too_big,maximum:s.value,type:"string",inclusive:!0,exact:!0,message:s.message}):a&&B(o,{code:L.too_small,minimum:s.value,type:"string",inclusive:!0,exact:!0,message:s.message}),r.dirty())}else if(s.kind==="email")hIe.test(e.data)||(o=this._getOrReturnCtx(e,o),B(o,{validation:"email",code:L.invalid_string,message:s.message}),r.dirty());else if(s.kind==="emoji")hC||(hC=new RegExp(EIe,"u")),hC.test(e.data)||(o=this._getOrReturnCtx(e,o),B(o,{validation:"emoji",code:L.invalid_string,message:s.message}),r.dirty());else if(s.kind==="uuid")dIe.test(e.data)||(o=this._getOrReturnCtx(e,o),B(o,{validation:"uuid",code:L.invalid_string,message:s.message}),r.dirty());else if(s.kind==="nanoid")fIe.test(e.data)||(o=this._getOrReturnCtx(e,o),B(o,{validation:"nanoid",code:L.invalid_string,message:s.message}),r.dirty());else if(s.kind==="cuid")uIe.test(e.data)||(o=this._getOrReturnCtx(e,o),B(o,{validation:"cuid",code:L.invalid_string,message:s.message}),r.dirty());else if(s.kind==="cuid2")pIe.test(e.data)||(o=this._getOrReturnCtx(e,o),B(o,{validation:"cuid2",code:L.invalid_string,message:s.message}),r.dirty());else if(s.kind==="ulid")lIe.test(e.data)||(o=this._getOrReturnCtx(e,o),B(o,{validation:"ulid",code:L.invalid_string,message:s.message}),r.dirty());else if(s.kind==="url")try{new URL(e.data)}catch{o=this._getOrReturnCtx(e,o),B(o,{validation:"url",code:L.invalid_string,message:s.message}),r.dirty()}else s.kind==="regex"?(s.regex.lastIndex=0,s.regex.test(e.data)||(o=this._getOrReturnCtx(e,o),B(o,{validation:"regex",code:L.invalid_string,message:s.message}),r.dirty())):s.kind==="trim"?e.data=e.data.trim():s.kind==="includes"?e.data.includes(s.value,s.position)||(o=this._getOrReturnCtx(e,o),B(o,{code:L.invalid_string,validation:{includes:s.value,position:s.position},message:s.message}),r.dirty()):s.kind==="toLowerCase"?e.data=e.data.toLowerCase():s.kind==="toUpperCase"?e.data=e.data.toUpperCase():s.kind==="startsWith"?e.data.startsWith(s.value)||(o=this._getOrReturnCtx(e,o),B(o,{code:L.invalid_string,validation:{startsWith:s.value},message:s.message}),r.dirty()):s.kind==="endsWith"?e.data.endsWith(s.value)||(o=this._getOrReturnCtx(e,o),B(o,{code:L.invalid_string,validation:{endsWith:s.value},message:s.message}),r.dirty()):s.kind==="datetime"?BX(s).test(e.data)||(o=this._getOrReturnCtx(e,o),B(o,{code:L.invalid_string,validation:"datetime",message:s.message}),r.dirty()):s.kind==="date"?bIe.test(e.data)||(o=this._getOrReturnCtx(e,o),B(o,{code:L.invalid_string,validation:"date",message:s.message}),r.dirty()):s.kind==="time"?NIe(s).test(e.data)||(o=this._getOrReturnCtx(e,o),B(o,{code:L.invalid_string,validation:"time",message:s.message}),r.dirty()):s.kind==="duration"?_Ie.test(e.data)||(o=this._getOrReturnCtx(e,o),B(o,{validation:"duration",code:L.invalid_string,message:s.message}),r.dirty()):s.kind==="ip"?OIe(e.data,s.version)||(o=this._getOrReturnCtx(e,o),B(o,{validation:"ip",code:L.invalid_string,message:s.message}),r.dirty()):s.kind==="jwt"?IIe(e.data,s.alg)||(o=this._getOrReturnCtx(e,o),B(o,{validation:"jwt",code:L.invalid_string,message:s.message}),r.dirty()):s.kind==="cidr"?vIe(e.data,s.version)||(o=this._getOrReturnCtx(e,o),B(o,{validation:"cidr",code:L.invalid_string,message:s.message}),r.dirty()):s.kind==="base64"?RIe.test(e.data)||(o=this._getOrReturnCtx(e,o),B(o,{validation:"base64",code:L.invalid_string,message:s.message}),r.dirty()):s.kind==="base64url"?yIe.test(e.data)||(o=this._getOrReturnCtx(e,o),B(o,{validation:"base64url",code:L.invalid_string,message:s.message}),r.dirty()):Ce.assertNever(s);return{status:r.value,value:e.data}}_regex(e,n,r){return this.refinement(o=>e.test(o),{validation:n,code:L.invalid_string,...Z.errToObj(r)})}_addCheck(e){return new t({...this._def,checks:[...this._def.checks,e]})}email(e){return this._addCheck({kind:"email",...Z.errToObj(e)})}url(e){return this._addCheck({kind:"url",...Z.errToObj(e)})}emoji(e){return this._addCheck({kind:"emoji",...Z.errToObj(e)})}uuid(e){return this._addCheck({kind:"uuid",...Z.errToObj(e)})}nanoid(e){return this._addCheck({kind:"nanoid",...Z.errToObj(e)})}cuid(e){return this._addCheck({kind:"cuid",...Z.errToObj(e)})}cuid2(e){return this._addCheck({kind:"cuid2",...Z.errToObj(e)})}ulid(e){return this._addCheck({kind:"ulid",...Z.errToObj(e)})}base64(e){return this._addCheck({kind:"base64",...Z.errToObj(e)})}base64url(e){return this._addCheck({kind:"base64url",...Z.errToObj(e)})}jwt(e){return this._addCheck({kind:"jwt",...Z.errToObj(e)})}ip(e){return this._addCheck({kind:"ip",...Z.errToObj(e)})}cidr(e){return this._addCheck({kind:"cidr",...Z.errToObj(e)})}datetime(e){return typeof e=="string"?this._addCheck({kind:"datetime",precision:null,offset:!1,local:!1,message:e}):this._addCheck({kind:"datetime",precision:typeof e?.precision>"u"?null:e?.precision,offset:e?.offset??!1,local:e?.local??!1,...Z.errToObj(e?.message)})}date(e){return this._addCheck({kind:"date",message:e})}time(e){return typeof e=="string"?this._addCheck({kind:"time",precision:null,message:e}):this._addCheck({kind:"time",precision:typeof e?.precision>"u"?null:e?.precision,...Z.errToObj(e?.message)})}duration(e){return this._addCheck({kind:"duration",...Z.errToObj(e)})}regex(e,n){return this._addCheck({kind:"regex",regex:e,...Z.errToObj(n)})}includes(e,n){return this._addCheck({kind:"includes",value:e,position:n?.position,...Z.errToObj(n?.message)})}startsWith(e,n){return this._addCheck({kind:"startsWith",value:e,...Z.errToObj(n)})}endsWith(e,n){return this._addCheck({kind:"endsWith",value:e,...Z.errToObj(n)})}min(e,n){return this._addCheck({kind:"min",value:e,...Z.errToObj(n)})}max(e,n){return this._addCheck({kind:"max",value:e,...Z.errToObj(n)})}length(e,n){return this._addCheck({kind:"length",value:e,...Z.errToObj(n)})}nonempty(e){return this.min(1,Z.errToObj(e))}trim(){return new t({...this._def,checks:[...this._def.checks,{kind:"trim"}]})}toLowerCase(){return new t({...this._def,checks:[...this._def.checks,{kind:"toLowerCase"}]})}toUpperCase(){return new t({...this._def,checks:[...this._def.checks,{kind:"toUpperCase"}]})}get isDatetime(){return!!this._def.checks.find(e=>e.kind==="datetime")}get isDate(){return!!this._def.checks.find(e=>e.kind==="date")}get isTime(){return!!this._def.checks.find(e=>e.kind==="time")}get isDuration(){return!!this._def.checks.find(e=>e.kind==="duration")}get isEmail(){return!!this._def.checks.find(e=>e.kind==="email")}get isURL(){return!!this._def.checks.find(e=>e.kind==="url")}get isEmoji(){return!!this._def.checks.find(e=>e.kind==="emoji")}get isUUID(){return!!this._def.checks.find(e=>e.kind==="uuid")}get isNANOID(){return!!this._def.checks.find(e=>e.kind==="nanoid")}get isCUID(){return!!this._def.checks.find(e=>e.kind==="cuid")}get isCUID2(){return!!this._def.checks.find(e=>e.kind==="cuid2")}get isULID(){return!!this._def.checks.find(e=>e.kind==="ulid")}get isIP(){return!!this._def.checks.find(e=>e.kind==="ip")}get isCIDR(){return!!this._def.checks.find(e=>e.kind==="cidr")}get isBase64(){return!!this._def.checks.find(e=>e.kind==="base64")}get isBase64url(){return!!this._def.checks.find(e=>e.kind==="base64url")}get minLength(){let e=null;for(let n of this._def.checks)n.kind==="min"&&(e===null||n.value>e)&&(e=n.value);return e}get maxLength(){let e=null;for(let n of this._def.checks)n.kind==="max"&&(e===null||n.value<e)&&(e=n.value);return e}};Ka.create=t=>new Ka({checks:[],typeName:D.ZodString,coerce:t?.coerce??!1,...Ae(t)});function xIe(t,e){let n=(t.toString().split(".")[1]||"").length,r=(e.toString().split(".")[1]||"").length,o=n>r?n:r,s=Number.parseInt(t.toFixed(o).replace(".","")),i=Number.parseInt(e.toFixed(o).replace(".",""));return s%i/10**o}var du=class t extends Ne{constructor(){super(...arguments),this.min=this.gte,this.max=this.lte,this.step=this.multipleOf}_parse(e){if(this._def.coerce&&(e.data=Number(e.data)),this._getType(e)!==F.number){let s=this._getOrReturnCtx(e);return B(s,{code:L.invalid_type,expected:F.number,received:s.parsedType}),ue}let r,o=new Dn;for(let s of this._def.checks)s.kind==="int"?Ce.isInteger(e.data)||(r=this._getOrReturnCtx(e,r),B(r,{code:L.invalid_type,expected:"integer",received:"float",message:s.message}),o.dirty()):s.kind==="min"?(s.inclusive?e.data<s.value:e.data<=s.value)&&(r=this._getOrReturnCtx(e,r),B(r,{code:L.too_small,minimum:s.value,type:"number",inclusive:s.inclusive,exact:!1,message:s.message}),o.dirty()):s.kind==="max"?(s.inclusive?e.data>s.value:e.data>=s.value)&&(r=this._getOrReturnCtx(e,r),B(r,{code:L.too_big,maximum:s.value,type:"number",inclusive:s.inclusive,exact:!1,message:s.message}),o.dirty()):s.kind==="multipleOf"?xIe(e.data,s.value)!==0&&(r=this._getOrReturnCtx(e,r),B(r,{code:L.not_multiple_of,multipleOf:s.value,message:s.message}),o.dirty()):s.kind==="finite"?Number.isFinite(e.data)||(r=this._getOrReturnCtx(e,r),B(r,{code:L.not_finite,message:s.message}),o.dirty()):Ce.assertNever(s);return{status:o.value,value:e.data}}gte(e,n){return this.setLimit("min",e,!0,Z.toString(n))}gt(e,n){return this.setLimit("min",e,!1,Z.toString(n))}lte(e,n){return this.setLimit("max",e,!0,Z.toString(n))}lt(e,n){return this.setLimit("max",e,!1,Z.toString(n))}setLimit(e,n,r,o){return new t({...this._def,checks:[...this._def.checks,{kind:e,value:n,inclusive:r,message:Z.toString(o)}]})}_addCheck(e){return new t({...this._def,checks:[...this._def.checks,e]})}int(e){return this._addCheck({kind:"int",message:Z.toString(e)})}positive(e){return this._addCheck({kind:"min",value:0,inclusive:!1,message:Z.toString(e)})}negative(e){return this._addCheck({kind:"max",value:0,inclusive:!1,message:Z.toString(e)})}nonpositive(e){return this._addCheck({kind:"max",value:0,inclusive:!0,message:Z.toString(e)})}nonnegative(e){return this._addCheck({kind:"min",value:0,inclusive:!0,message:Z.toString(e)})}multipleOf(e,n){return this._addCheck({kind:"multipleOf",value:e,message:Z.toString(n)})}finite(e){return this._addCheck({kind:"finite",message:Z.toString(e)})}safe(e){return this._addCheck({kind:"min",inclusive:!0,value:Number.MIN_SAFE_INTEGER,message:Z.toString(e)})._addCheck({kind:"max",inclusive:!0,value:Number.MAX_SAFE_INTEGER,message:Z.toString(e)})}get minValue(){let e=null;for(let n of this._def.checks)n.kind==="min"&&(e===null||n.value>e)&&(e=n.value);return e}get maxValue(){let e=null;for(let n of this._def.checks)n.kind==="max"&&(e===null||n.value<e)&&(e=n.value);return e}get isInt(){return!!this._def.checks.find(e=>e.kind==="int"||e.kind==="multipleOf"&&Ce.isInteger(e.value))}get isFinite(){let e=null,n=null;for(let r of this._def.checks){if(r.kind==="finite"||r.kind==="int"||r.kind==="multipleOf")return!0;r.kind==="min"?(n===null||r.value>n)&&(n=r.value):r.kind==="max"&&(e===null||r.value<e)&&(e=r.value)}return Number.isFinite(n)&&Number.isFinite(e)}};du.create=t=>new du({checks:[],typeName:D.ZodNumber,coerce:t?.coerce||!1,...Ae(t)});var fu=class t extends Ne{constructor(){super(...arguments),this.min=this.gte,this.max=this.lte}_parse(e){if(this._def.coerce)try{e.data=BigInt(e.data)}catch{return this._getInvalidInput(e)}if(this._getType(e)!==F.bigint)return this._getInvalidInput(e);let r,o=new Dn;for(let s of this._def.checks)s.kind==="min"?(s.inclusive?e.data<s.value:e.data<=s.value)&&(r=this._getOrReturnCtx(e,r),B(r,{code:L.too_small,type:"bigint",minimum:s.value,inclusive:s.inclusive,message:s.message}),o.dirty()):s.kind==="max"?(s.inclusive?e.data>s.value:e.data>=s.value)&&(r=this._getOrReturnCtx(e,r),B(r,{code:L.too_big,type:"bigint",maximum:s.value,inclusive:s.inclusive,message:s.message}),o.dirty()):s.kind==="multipleOf"?e.data%s.value!==BigInt(0)&&(r=this._getOrReturnCtx(e,r),B(r,{code:L.not_multiple_of,multipleOf:s.value,message:s.message}),o.dirty()):Ce.assertNever(s);return{status:o.value,value:e.data}}_getInvalidInput(e){let n=this._getOrReturnCtx(e);return B(n,{code:L.invalid_type,expected:F.bigint,received:n.parsedType}),ue}gte(e,n){return this.setLimit("min",e,!0,Z.toString(n))}gt(e,n){return this.setLimit("min",e,!1,Z.toString(n))}lte(e,n){return this.setLimit("max",e,!0,Z.toString(n))}lt(e,n){return this.setLimit("max",e,!1,Z.toString(n))}setLimit(e,n,r,o){return new t({...this._def,checks:[...this._def.checks,{kind:e,value:n,inclusive:r,message:Z.toString(o)}]})}_addCheck(e){return new t({...this._def,checks:[...this._def.checks,e]})}positive(e){return this._addCheck({kind:"min",value:BigInt(0),inclusive:!1,message:Z.toString(e)})}negative(e){return this._addCheck({kind:"max",value:BigInt(0),inclusive:!1,message:Z.toString(e)})}nonpositive(e){return this._addCheck({kind:"max",value:BigInt(0),inclusive:!0,message:Z.toString(e)})}nonnegative(e){return this._addCheck({kind:"min",value:BigInt(0),inclusive:!0,message:Z.toString(e)})}multipleOf(e,n){return this._addCheck({kind:"multipleOf",value:e,message:Z.toString(n)})}get minValue(){let e=null;for(let n of this._def.checks)n.kind==="min"&&(e===null||n.value>e)&&(e=n.value);return e}get maxValue(){let e=null;for(let n of this._def.checks)n.kind==="max"&&(e===null||n.value<e)&&(e=n.value);return e}};fu.create=t=>new fu({checks:[],typeName:D.ZodBigInt,coerce:t?.coerce??!1,...Ae(t)});var mu=class extends Ne{_parse(e){if(this._def.coerce&&(e.data=!!e.data),this._getType(e)!==F.boolean){let r=this._getOrReturnCtx(e);return B(r,{code:L.invalid_type,expected:F.boolean,received:r.parsedType}),ue}return Xn(e.data)}};mu.create=t=>new mu({typeName:D.ZodBoolean,coerce:t?.coerce||!1,...Ae(t)});var _u=class t extends Ne{_parse(e){if(this._def.coerce&&(e.data=new Date(e.data)),this._getType(e)!==F.date){let s=this._getOrReturnCtx(e);return B(s,{code:L.invalid_type,expected:F.date,received:s.parsedType}),ue}if(Number.isNaN(e.data.getTime())){let s=this._getOrReturnCtx(e);return B(s,{code:L.invalid_date}),ue}let r=new Dn,o;for(let s of this._def.checks)s.kind==="min"?e.data.getTime()<s.value&&(o=this._getOrReturnCtx(e,o),B(o,{code:L.too_small,message:s.message,inclusive:!0,exact:!1,minimum:s.value,type:"date"}),r.dirty()):s.kind==="max"?e.data.getTime()>s.value&&(o=this._getOrReturnCtx(e,o),B(o,{code:L.too_big,message:s.message,inclusive:!0,exact:!1,maximum:s.value,type:"date"}),r.dirty()):Ce.assertNever(s);return{status:r.value,value:new Date(e.data.getTime())}}_addCheck(e){return new t({...this._def,checks:[...this._def.checks,e]})}min(e,n){return this._addCheck({kind:"min",value:e.getTime(),message:Z.toString(n)})}max(e,n){return this._addCheck({kind:"max",value:e.getTime(),message:Z.toString(n)})}get minDate(){let e=null;for(let n of this._def.checks)n.kind==="min"&&(e===null||n.value>e)&&(e=n.value);return e!=null?new Date(e):null}get maxDate(){let e=null;for(let n of this._def.checks)n.kind==="max"&&(e===null||n.value<e)&&(e=n.value);return e!=null?new Date(e):null}};_u.create=t=>new _u({checks:[],coerce:t?.coerce||!1,typeName:D.ZodDate,...Ae(t)});var nd=class extends Ne{_parse(e){if(this._getType(e)!==F.symbol){let r=this._getOrReturnCtx(e);return B(r,{code:L.invalid_type,expected:F.symbol,received:r.parsedType}),ue}return Xn(e.data)}};nd.create=t=>new nd({typeName:D.ZodSymbol,...Ae(t)});var hu=class extends Ne{_parse(e){if(this._getType(e)!==F.undefined){let r=this._getOrReturnCtx(e);return B(r,{code:L.invalid_type,expected:F.undefined,received:r.parsedType}),ue}return Xn(e.data)}};hu.create=t=>new hu({typeName:D.ZodUndefined,...Ae(t)});var Eu=class extends Ne{_parse(e){if(this._getType(e)!==F.null){let r=this._getOrReturnCtx(e);return B(r,{code:L.invalid_type,expected:F.null,received:r.parsedType}),ue}return Xn(e.data)}};Eu.create=t=>new Eu({typeName:D.ZodNull,...Ae(t)});var Za=class extends Ne{constructor(){super(...arguments),this._any=!0}_parse(e){return Xn(e.data)}};Za.create=t=>new Za({typeName:D.ZodAny,...Ae(t)});var Li=class extends Ne{constructor(){super(...arguments),this._unknown=!0}_parse(e){return Xn(e.data)}};Li.create=t=>new Li({typeName:D.ZodUnknown,...Ae(t)});var as=class extends Ne{_parse(e){let n=this._getOrReturnCtx(e);return B(n,{code:L.invalid_type,expected:F.never,received:n.parsedType}),ue}};as.create=t=>new as({typeName:D.ZodNever,...Ae(t)});var rd=class extends Ne{_parse(e){if(this._getType(e)!==F.undefined){let r=this._getOrReturnCtx(e);return B(r,{code:L.invalid_type,expected:F.void,received:r.parsedType}),ue}return Xn(e.data)}};rd.create=t=>new rd({typeName:D.ZodVoid,...Ae(t)});var Di=class t extends Ne{_parse(e){let{ctx:n,status:r}=this._processInputParams(e),o=this._def;if(n.parsedType!==F.array)return B(n,{code:L.invalid_type,expected:F.array,received:n.parsedType}),ue;if(o.exactLength!==null){let i=n.data.length>o.exactLength.value,a=n.data.length<o.exactLength.value;(i||a)&&(B(n,{code:i?L.too_big:L.too_small,minimum:a?o.exactLength.value:void 0,maximum:i?o.exactLength.value:void 0,type:"array",inclusive:!0,exact:!0,message:o.exactLength.message}),r.dirty())}if(o.minLength!==null&&n.data.length<o.minLength.value&&(B(n,{code:L.too_small,minimum:o.minLength.value,type:"array",inclusive:!0,exact:!1,message:o.minLength.message}),r.dirty()),o.maxLength!==null&&n.data.length>o.maxLength.value&&(B(n,{code:L.too_big,maximum:o.maxLength.value,type:"array",inclusive:!0,exact:!1,message:o.maxLength.message}),r.dirty()),n.common.async)return Promise.all([...n.data].map((i,a)=>o.type._parseAsync(new wo(n,i,n.path,a)))).then(i=>Dn.mergeArray(r,i));let s=[...n.data].map((i,a)=>o.type._parseSync(new wo(n,i,n.path,a)));return Dn.mergeArray(r,s)}get element(){return this._def.type}min(e,n){return new t({...this._def,minLength:{value:e,message:Z.toString(n)}})}max(e,n){return new t({...this._def,maxLength:{value:e,message:Z.toString(n)}})}length(e,n){return new t({...this._def,exactLength:{value:e,message:Z.toString(n)}})}nonempty(e){return this.min(1,e)}};Di.create=(t,e)=>new Di({type:t,minLength:null,maxLength:null,exactLength:null,typeName:D.ZodArray,...Ae(e)});function td(t){if(t instanceof Lr){let e={};for(let n in t.shape){let r=t.shape[n];e[n]=wr.create(td(r))}return new Lr({...t._def,shape:()=>e})}else return t instanceof Di?new Di({...t._def,type:td(t.element)}):t instanceof wr?wr.create(td(t.unwrap())):t instanceof Ws?Ws.create(td(t.unwrap())):t instanceof Ys?Ys.create(t.items.map(e=>td(e))):t}var Lr=class t extends Ne{constructor(){super(...arguments),this._cached=null,this.nonstrict=this.passthrough,this.augment=this.extend}_getCached(){if(this._cached!==null)return this._cached;let e=this._def.shape(),n=Ce.objectKeys(e);return this._cached={shape:e,keys:n},this._cached}_parse(e){if(this._getType(e)!==F.object){let u=this._getOrReturnCtx(e);return B(u,{code:L.invalid_type,expected:F.object,received:u.parsedType}),ue}let{status:r,ctx:o}=this._processInputParams(e),{shape:s,keys:i}=this._getCached(),a=[];if(!(this._def.catchall instanceof as&&this._def.unknownKeys==="strip"))for(let u in o.data)i.includes(u)||a.push(u);let c=[];for(let u of i){let p=s[u],l=o.data[u];c.push({key:{status:"valid",value:u},value:p._parse(new wo(o,l,o.path,u)),alwaysSet:u in o.data})}if(this._def.catchall instanceof as){let u=this._def.unknownKeys;if(u==="passthrough")for(let p of a)c.push({key:{status:"valid",value:p},value:{status:"valid",value:o.data[p]}});else if(u==="strict")a.length>0&&(B(o,{code:L.unrecognized_keys,keys:a}),r.dirty());else if(u!=="strip")throw new Error("Internal ZodObject error: invalid unknownKeys value.")}else{let u=this._def.catchall;for(let p of a){let l=o.data[p];c.push({key:{status:"valid",value:p},value:u._parse(new wo(o,l,o.path,p)),alwaysSet:p in o.data})}}return o.common.async?Promise.resolve().then(async()=>{let u=[];for(let p of c){let l=await p.key,d=await p.value;u.push({key:l,value:d,alwaysSet:p.alwaysSet})}return u}).then(u=>Dn.mergeObjectSync(r,u)):Dn.mergeObjectSync(r,c)}get shape(){return this._def.shape()}strict(e){return Z.errToObj,new t({...this._def,unknownKeys:"strict",...e!==void 0?{errorMap:(n,r)=>{let o=this._def.errorMap?.(n,r).message??r.defaultError;return n.code==="unrecognized_keys"?{message:Z.errToObj(e).message??o}:{message:o}}}:{}})}strip(){return new t({...this._def,unknownKeys:"strip"})}passthrough(){return new t({...this._def,unknownKeys:"passthrough"})}extend(e){return new t({...this._def,shape:()=>({...this._def.shape(),...e})})}merge(e){return new t({unknownKeys:e._def.unknownKeys,catchall:e._def.catchall,shape:()=>({...this._def.shape(),...e._def.shape()}),typeName:D.ZodObject})}setKey(e,n){return this.augment({[e]:n})}catchall(e){return new t({...this._def,catchall:e})}pick(e){let n={};for(let r of Ce.objectKeys(e))e[r]&&this.shape[r]&&(n[r]=this.shape[r]);return new t({...this._def,shape:()=>n})}omit(e){let n={};for(let r of Ce.objectKeys(this.shape))e[r]||(n[r]=this.shape[r]);return new t({...this._def,shape:()=>n})}deepPartial(){return td(this)}partial(e){let n={};for(let r of Ce.objectKeys(this.shape)){let o=this.shape[r];e&&!e[r]?n[r]=o:n[r]=o.optional()}return new t({...this._def,shape:()=>n})}required(e){let n={};for(let r of Ce.objectKeys(this.shape))if(e&&!e[r])n[r]=this.shape[r];else{let s=this.shape[r];for(;s instanceof wr;)s=s._def.innerType;n[r]=s}return new t({...this._def,shape:()=>n})}keyof(){return jX(Ce.objectKeys(this.shape))}};Lr.create=(t,e)=>new Lr({shape:()=>t,unknownKeys:"strip",catchall:as.create(),typeName:D.ZodObject,...Ae(e)});Lr.strictCreate=(t,e)=>new Lr({shape:()=>t,unknownKeys:"strict",catchall:as.create(),typeName:D.ZodObject,...Ae(e)});Lr.lazycreate=(t,e)=>new Lr({shape:t,unknownKeys:"strip",catchall:as.create(),typeName:D.ZodObject,...Ae(e)});var Tu=class extends Ne{_parse(e){let{ctx:n}=this._processInputParams(e),r=this._def.options;function o(s){for(let a of s)if(a.result.status==="valid")return a.result;for(let a of s)if(a.result.status==="dirty")return n.common.issues.push(...a.ctx.common.issues),a.result;let i=s.map(a=>new Mr(a.ctx.common.issues));return B(n,{code:L.invalid_union,unionErrors:i}),ue}if(n.common.async)return Promise.all(r.map(async s=>{let i={...n,common:{...n.common,issues:[]},parent:null};return{result:await s._parseAsync({data:n.data,path:n.path,parent:i}),ctx:i}})).then(o);{let s,i=[];for(let c of r){let u={...n,common:{...n.common,issues:[]},parent:null},p=c._parseSync({data:n.data,path:n.path,parent:u});if(p.status==="valid")return p;p.status==="dirty"&&!s&&(s={result:p,ctx:u}),u.common.issues.length&&i.push(u.common.issues)}if(s)return n.common.issues.push(...s.ctx.common.issues),s.result;let a=i.map(c=>new Mr(c));return B(n,{code:L.invalid_union,unionErrors:a}),ue}}get options(){return this._def.options}};Tu.create=(t,e)=>new Tu({options:t,typeName:D.ZodUnion,...Ae(e)});var wi=t=>t instanceof Su?wi(t.schema):t instanceof Lo?wi(t.innerType()):t instanceof Au?[t.value]:t instanceof Ru?t.options:t instanceof yu?Ce.objectValues(t.enum):t instanceof bu?wi(t._def.innerType):t instanceof hu?[void 0]:t instanceof Eu?[null]:t instanceof wr?[void 0,...wi(t.unwrap())]:t instanceof Ws?[null,...wi(t.unwrap())]:t instanceof i_||t instanceof Ou?wi(t.unwrap()):t instanceof Nu?wi(t._def.innerType):[],OR=class t extends Ne{_parse(e){let{ctx:n}=this._processInputParams(e);if(n.parsedType!==F.object)return B(n,{code:L.invalid_type,expected:F.object,received:n.parsedType}),ue;let r=this.discriminator,o=n.data[r],s=this.optionsMap.get(o);return s?n.common.async?s._parseAsync({data:n.data,path:n.path,parent:n}):s._parseSync({data:n.data,path:n.path,parent:n}):(B(n,{code:L.invalid_union_discriminator,options:Array.from(this.optionsMap.keys()),path:[r]}),ue)}get discriminator(){return this._def.discriminator}get options(){return this._def.options}get optionsMap(){return this._def.optionsMap}static create(e,n,r){let o=new Map;for(let s of n){let i=wi(s.shape[e]);if(!i.length)throw new Error(`A discriminator value for key \`${e}\` could not be extracted from all schema options`);for(let a of i){if(o.has(a))throw new Error(`Discriminator property ${String(e)} has duplicate value ${String(a)}`);o.set(a,s)}}return new t({typeName:D.ZodDiscriminatedUnion,discriminator:e,options:n,optionsMap:o,...Ae(r)})}};function EC(t,e){let n=zs(t),r=zs(e);if(t===e)return{valid:!0,data:t};if(n===F.object&&r===F.object){let o=Ce.objectKeys(e),s=Ce.objectKeys(t).filter(a=>o.indexOf(a)!==-1),i={...t,...e};for(let a of s){let c=EC(t[a],e[a]);if(!c.valid)return{valid:!1};i[a]=c.data}return{valid:!0,data:i}}else if(n===F.array&&r===F.array){if(t.length!==e.length)return{valid:!1};let o=[];for(let s=0;s<t.length;s++){let i=t[s],a=e[s],c=EC(i,a);if(!c.valid)return{valid:!1};o.push(c.data)}return{valid:!0,data:o}}else return n===F.date&&r===F.date&&+t==+e?{valid:!0,data:t}:{valid:!1}}var gu=class extends Ne{_parse(e){let{status:n,ctx:r}=this._processInputParams(e),o=(s,i)=>{if(bR(s)||bR(i))return ue;let a=EC(s.value,i.value);return a.valid?((NR(s)||NR(i))&&n.dirty(),{status:n.value,value:a.data}):(B(r,{code:L.invalid_intersection_types}),ue)};return r.common.async?Promise.all([this._def.left._parseAsync({data:r.data,path:r.path,parent:r}),this._def.right._parseAsync({data:r.data,path:r.path,parent:r})]).then(([s,i])=>o(s,i)):o(this._def.left._parseSync({data:r.data,path:r.path,parent:r}),this._def.right._parseSync({data:r.data,path:r.path,parent:r}))}};gu.create=(t,e,n)=>new gu({left:t,right:e,typeName:D.ZodIntersection,...Ae(n)});var Ys=class t extends Ne{_parse(e){let{status:n,ctx:r}=this._processInputParams(e);if(r.parsedType!==F.array)return B(r,{code:L.invalid_type,expected:F.array,received:r.parsedType}),ue;if(r.data.length<this._def.items.length)return B(r,{code:L.too_small,minimum:this._def.items.length,inclusive:!0,exact:!1,type:"array"}),ue;!this._def.rest&&r.data.length>this._def.items.length&&(B(r,{code:L.too_big,maximum:this._def.items.length,inclusive:!0,exact:!1,type:"array"}),n.dirty());let s=[...r.data].map((i,a)=>{let c=this._def.items[a]||this._def.rest;return c?c._parse(new wo(r,i,r.path,a)):null}).filter(i=>!!i);return r.common.async?Promise.all(s).then(i=>Dn.mergeArray(n,i)):Dn.mergeArray(n,s)}get items(){return this._def.items}rest(e){return new t({...this._def,rest:e})}};Ys.create=(t,e)=>{if(!Array.isArray(t))throw new Error("You must pass an array of schemas to z.tuple([ ... ])");return new Ys({items:t,typeName:D.ZodTuple,rest:null,...Ae(e)})};var IR=class t extends Ne{get keySchema(){return this._def.keyType}get valueSchema(){return this._def.valueType}_parse(e){let{status:n,ctx:r}=this._processInputParams(e);if(r.parsedType!==F.object)return B(r,{code:L.invalid_type,expected:F.object,received:r.parsedType}),ue;let o=[],s=this._def.keyType,i=this._def.valueType;for(let a in r.data)o.push({key:s._parse(new wo(r,a,r.path,a)),value:i._parse(new wo(r,r.data[a],r.path,a)),alwaysSet:a in r.data});return r.common.async?Dn.mergeObjectAsync(n,o):Dn.mergeObjectSync(n,o)}get element(){return this._def.valueType}static create(e,n,r){return n instanceof Ne?new t({keyType:e,valueType:n,typeName:D.ZodRecord,...Ae(r)}):new t({keyType:Ka.create(),valueType:e,typeName:D.ZodRecord,...Ae(n)})}},od=class extends Ne{get keySchema(){return this._def.keyType}get valueSchema(){return this._def.valueType}_parse(e){let{status:n,ctx:r}=this._processInputParams(e);if(r.parsedType!==F.map)return B(r,{code:L.invalid_type,expected:F.map,received:r.parsedType}),ue;let o=this._def.keyType,s=this._def.valueType,i=[...r.data.entries()].map(([a,c],u)=>({key:o._parse(new wo(r,a,r.path,[u,"key"])),value:s._parse(new wo(r,c,r.path,[u,"value"]))}));if(r.common.async){let a=new Map;return Promise.resolve().then(async()=>{for(let c of i){let u=await c.key,p=await c.value;if(u.status==="aborted"||p.status==="aborted")return ue;(u.status==="dirty"||p.status==="dirty")&&n.dirty(),a.set(u.value,p.value)}return{status:n.value,value:a}})}else{let a=new Map;for(let c of i){let u=c.key,p=c.value;if(u.status==="aborted"||p.status==="aborted")return ue;(u.status==="dirty"||p.status==="dirty")&&n.dirty(),a.set(u.value,p.value)}return{status:n.value,value:a}}}};od.create=(t,e,n)=>new od({valueType:e,keyType:t,typeName:D.ZodMap,...Ae(n)});var sd=class t extends Ne{_parse(e){let{status:n,ctx:r}=this._processInputParams(e);if(r.parsedType!==F.set)return B(r,{code:L.invalid_type,expected:F.set,received:r.parsedType}),ue;let o=this._def;o.minSize!==null&&r.data.size<o.minSize.value&&(B(r,{code:L.too_small,minimum:o.minSize.value,type:"set",inclusive:!0,exact:!1,message:o.minSize.message}),n.dirty()),o.maxSize!==null&&r.data.size>o.maxSize.value&&(B(r,{code:L.too_big,maximum:o.maxSize.value,type:"set",inclusive:!0,exact:!1,message:o.maxSize.message}),n.dirty());let s=this._def.valueType;function i(c){let u=new Set;for(let p of c){if(p.status==="aborted")return ue;p.status==="dirty"&&n.dirty(),u.add(p.value)}return{status:n.value,value:u}}let a=[...r.data.values()].map((c,u)=>s._parse(new wo(r,c,r.path,u)));return r.common.async?Promise.all(a).then(c=>i(c)):i(a)}min(e,n){return new t({...this._def,minSize:{value:e,message:Z.toString(n)}})}max(e,n){return new t({...this._def,maxSize:{value:e,message:Z.toString(n)}})}size(e,n){return this.min(e,n).max(e,n)}nonempty(e){return this.min(1,e)}};sd.create=(t,e)=>new sd({valueType:t,minSize:null,maxSize:null,typeName:D.ZodSet,...Ae(e)});var vR=class t extends Ne{constructor(){super(...arguments),this.validate=this.implement}_parse(e){let{ctx:n}=this._processInputParams(e);if(n.parsedType!==F.function)return B(n,{code:L.invalid_type,expected:F.function,received:n.parsedType}),ue;function r(a,c){return s_({data:a,path:n.path,errorMaps:[n.common.contextualErrorMap,n.schemaErrorMap,Xl(),Mi].filter(u=>!!u),issueData:{code:L.invalid_arguments,argumentsError:c}})}function o(a,c){return s_({data:a,path:n.path,errorMaps:[n.common.contextualErrorMap,n.schemaErrorMap,Xl(),Mi].filter(u=>!!u),issueData:{code:L.invalid_return_type,returnTypeError:c}})}let s={errorMap:n.common.contextualErrorMap},i=n.data;if(this._def.returns instanceof Ja){let a=this;return Xn(async function(...c){let u=new Mr([]),p=await a._def.args.parseAsync(c,s).catch(f=>{throw u.addIssue(r(c,f)),u}),l=await Reflect.apply(i,this,p);return await a._def.returns._def.type.parseAsync(l,s).catch(f=>{throw u.addIssue(o(l,f)),u})})}else{let a=this;return Xn(function(...c){let u=a._def.args.safeParse(c,s);if(!u.success)throw new Mr([r(c,u.error)]);let p=Reflect.apply(i,this,u.data),l=a._def.returns.safeParse(p,s);if(!l.success)throw new Mr([o(p,l.error)]);return l.data})}}parameters(){return this._def.args}returnType(){return this._def.returns}args(...e){return new t({...this._def,args:Ys.create(e).rest(Li.create())})}returns(e){return new t({...this._def,returns:e})}implement(e){return this.parse(e)}strictImplement(e){return this.parse(e)}static create(e,n,r){return new t({args:e||Ys.create([]).rest(Li.create()),returns:n||Li.create(),typeName:D.ZodFunction,...Ae(r)})}},Su=class extends Ne{get schema(){return this._def.getter()}_parse(e){let{ctx:n}=this._processInputParams(e);return this._def.getter()._parse({data:n.data,path:n.path,parent:n})}};Su.create=(t,e)=>new Su({getter:t,typeName:D.ZodLazy,...Ae(e)});var Au=class extends Ne{_parse(e){if(e.data!==this._def.value){let n=this._getOrReturnCtx(e);return B(n,{received:n.data,code:L.invalid_literal,expected:this._def.value}),ue}return{status:"valid",value:e.data}}get value(){return this._def.value}};Au.create=(t,e)=>new Au({value:t,typeName:D.ZodLiteral,...Ae(e)});function jX(t,e){return new Ru({values:t,typeName:D.ZodEnum,...Ae(e)})}var Ru=class t extends Ne{_parse(e){if(typeof e.data!="string"){let n=this._getOrReturnCtx(e),r=this._def.values;return B(n,{expected:Ce.joinValues(r),received:n.parsedType,code:L.invalid_type}),ue}if(this._cache||(this._cache=new Set(this._def.values)),!this._cache.has(e.data)){let n=this._getOrReturnCtx(e),r=this._def.values;return B(n,{received:n.data,code:L.invalid_enum_value,options:r}),ue}return Xn(e.data)}get options(){return this._def.values}get enum(){let e={};for(let n of this._def.values)e[n]=n;return e}get Values(){let e={};for(let n of this._def.values)e[n]=n;return e}get Enum(){let e={};for(let n of this._def.values)e[n]=n;return e}extract(e,n=this._def){return t.create(e,{...this._def,...n})}exclude(e,n=this._def){return t.create(this.options.filter(r=>!e.includes(r)),{...this._def,...n})}};Ru.create=jX;var yu=class extends Ne{_parse(e){let n=Ce.getValidEnumValues(this._def.values),r=this._getOrReturnCtx(e);if(r.parsedType!==F.string&&r.parsedType!==F.number){let o=Ce.objectValues(n);return B(r,{expected:Ce.joinValues(o),received:r.parsedType,code:L.invalid_type}),ue}if(this._cache||(this._cache=new Set(Ce.getValidEnumValues(this._def.values))),!this._cache.has(e.data)){let o=Ce.objectValues(n);return B(r,{received:r.data,code:L.invalid_enum_value,options:o}),ue}return Xn(e.data)}get enum(){return this._def.values}};yu.create=(t,e)=>new yu({values:t,typeName:D.ZodNativeEnum,...Ae(e)});var Ja=class extends Ne{unwrap(){return this._def.type}_parse(e){let{ctx:n}=this._processInputParams(e);if(n.parsedType!==F.promise&&n.common.async===!1)return B(n,{code:L.invalid_type,expected:F.promise,received:n.parsedType}),ue;let r=n.parsedType===F.promise?n.data:Promise.resolve(n.data);return Xn(r.then(o=>this._def.type.parseAsync(o,{path:n.path,errorMap:n.common.contextualErrorMap})))}};Ja.create=(t,e)=>new Ja({type:t,typeName:D.ZodPromise,...Ae(e)});var Lo=class extends Ne{innerType(){return this._def.schema}sourceType(){return this._def.schema._def.typeName===D.ZodEffects?this._def.schema.sourceType():this._def.schema}_parse(e){let{status:n,ctx:r}=this._processInputParams(e),o=this._def.effect||null,s={addIssue:i=>{B(r,i),i.fatal?n.abort():n.dirty()},get path(){return r.path}};if(s.addIssue=s.addIssue.bind(s),o.type==="preprocess"){let i=o.transform(r.data,s);if(r.common.async)return Promise.resolve(i).then(async a=>{if(n.value==="aborted")return ue;let c=await this._def.schema._parseAsync({data:a,path:r.path,parent:r});return c.status==="aborted"?ue:c.status==="dirty"?lu(c.value):n.value==="dirty"?lu(c.value):c});{if(n.value==="aborted")return ue;let a=this._def.schema._parseSync({data:i,path:r.path,parent:r});return a.status==="aborted"?ue:a.status==="dirty"?lu(a.value):n.value==="dirty"?lu(a.value):a}}if(o.type==="refinement"){let i=a=>{let c=o.refinement(a,s);if(r.common.async)return Promise.resolve(c);if(c instanceof Promise)throw new Error("Async refinement encountered during synchronous parse operation. Use .parseAsync instead.");return a};if(r.common.async===!1){let a=this._def.schema._parseSync({data:r.data,path:r.path,parent:r});return a.status==="aborted"?ue:(a.status==="dirty"&&n.dirty(),i(a.value),{status:n.value,value:a.value})}else return this._def.schema._parseAsync({data:r.data,path:r.path,parent:r}).then(a=>a.status==="aborted"?ue:(a.status==="dirty"&&n.dirty(),i(a.value).then(()=>({status:n.value,value:a.value}))))}if(o.type==="transform")if(r.common.async===!1){let i=this._def.schema._parseSync({data:r.data,path:r.path,parent:r});if(!Wa(i))return ue;let a=o.transform(i.value,s);if(a instanceof Promise)throw new Error("Asynchronous transform encountered during synchronous parse operation. Use .parseAsync instead.");return{status:n.value,value:a}}else return this._def.schema._parseAsync({data:r.data,path:r.path,parent:r}).then(i=>Wa(i)?Promise.resolve(o.transform(i.value,s)).then(a=>({status:n.value,value:a})):ue);Ce.assertNever(o)}};Lo.create=(t,e,n)=>new Lo({schema:t,typeName:D.ZodEffects,effect:e,...Ae(n)});Lo.createWithPreprocess=(t,e,n)=>new Lo({schema:e,effect:{type:"preprocess",transform:t},typeName:D.ZodEffects,...Ae(n)});var wr=class extends Ne{_parse(e){return this._getType(e)===F.undefined?Xn(void 0):this._def.innerType._parse(e)}unwrap(){return this._def.innerType}};wr.create=(t,e)=>new wr({innerType:t,typeName:D.ZodOptional,...Ae(e)});var Ws=class extends Ne{_parse(e){return this._getType(e)===F.null?Xn(null):this._def.innerType._parse(e)}unwrap(){return this._def.innerType}};Ws.create=(t,e)=>new Ws({innerType:t,typeName:D.ZodNullable,...Ae(e)});var bu=class extends Ne{_parse(e){let{ctx:n}=this._processInputParams(e),r=n.data;return n.parsedType===F.undefined&&(r=this._def.defaultValue()),this._def.innerType._parse({data:r,path:n.path,parent:n})}removeDefault(){return this._def.innerType}};bu.create=(t,e)=>new bu({innerType:t,typeName:D.ZodDefault,defaultValue:typeof e.default=="function"?e.default:()=>e.default,...Ae(e)});var Nu=class extends Ne{_parse(e){let{ctx:n}=this._processInputParams(e),r={...n,common:{...n.common,issues:[]}},o=this._def.innerType._parse({data:r.data,path:r.path,parent:{...r}});return ed(o)?o.then(s=>({status:"valid",value:s.status==="valid"?s.value:this._def.catchValue({get error(){return new Mr(r.common.issues)},input:r.data})})):{status:"valid",value:o.status==="valid"?o.value:this._def.catchValue({get error(){return new Mr(r.common.issues)},input:r.data})}}removeCatch(){return this._def.innerType}};Nu.create=(t,e)=>new Nu({innerType:t,typeName:D.ZodCatch,catchValue:typeof e.catch=="function"?e.catch:()=>e.catch,...Ae(e)});var id=class extends Ne{_parse(e){if(this._getType(e)!==F.nan){let r=this._getOrReturnCtx(e);return B(r,{code:L.invalid_type,expected:F.nan,received:r.parsedType}),ue}return{status:"valid",value:e.data}}};id.create=t=>new id({typeName:D.ZodNaN,...Ae(t)});var PIe=Symbol("zod_brand"),i_=class extends Ne{_parse(e){let{ctx:n}=this._processInputParams(e),r=n.data;return this._def.type._parse({data:r,path:n.path,parent:n})}unwrap(){return this._def.type}},a_=class t extends Ne{_parse(e){let{status:n,ctx:r}=this._processInputParams(e);if(r.common.async)return(async()=>{let s=await this._def.in._parseAsync({data:r.data,path:r.path,parent:r});return s.status==="aborted"?ue:s.status==="dirty"?(n.dirty(),lu(s.value)):this._def.out._parseAsync({data:s.value,path:r.path,parent:r})})();{let o=this._def.in._parseSync({data:r.data,path:r.path,parent:r});return o.status==="aborted"?ue:o.status==="dirty"?(n.dirty(),{status:"dirty",value:o.value}):this._def.out._parseSync({data:o.value,path:r.path,parent:r})}}static create(e,n){return new t({in:e,out:n,typeName:D.ZodPipeline})}},Ou=class extends Ne{_parse(e){let n=this._def.innerType._parse(e),r=o=>(Wa(o)&&(o.value=Object.freeze(o.value)),o);return ed(n)?n.then(o=>r(o)):r(n)}unwrap(){return this._def.innerType}};Ou.create=(t,e)=>new Ou({innerType:t,typeName:D.ZodReadonly,...Ae(e)});function $X(t,e){let n=typeof t=="function"?t(e):typeof t=="string"?{message:t}:t;return typeof n=="string"?{message:n}:n}function HX(t,e={},n){return t?Za.create().superRefine((r,o)=>{let s=t(r);if(s instanceof Promise)return s.then(i=>{if(!i){let a=$X(e,r),c=a.fatal??n??!0;o.addIssue({code:"custom",...a,fatal:c})}});if(!s){let i=$X(e,r),a=i.fatal??n??!0;o.addIssue({code:"custom",...i,fatal:a})}}):Za.create()}var CIe={object:Lr.lazycreate},D;(function(t){t.ZodString="ZodString",t.ZodNumber="ZodNumber",t.ZodNaN="ZodNaN",t.ZodBigInt="ZodBigInt",t.ZodBoolean="ZodBoolean",t.ZodDate="ZodDate",t.ZodSymbol="ZodSymbol",t.ZodUndefined="ZodUndefined",t.ZodNull="ZodNull",t.ZodAny="ZodAny",t.ZodUnknown="ZodUnknown",t.ZodNever="ZodNever",t.ZodVoid="ZodVoid",t.ZodArray="ZodArray",t.ZodObject="ZodObject",t.ZodUnion="ZodUnion",t.ZodDiscriminatedUnion="ZodDiscriminatedUnion",t.ZodIntersection="ZodIntersection",t.ZodTuple="ZodTuple",t.ZodRecord="ZodRecord",t.ZodMap="ZodMap",t.ZodSet="ZodSet",t.ZodFunction="ZodFunction",t.ZodLazy="ZodLazy",t.ZodLiteral="ZodLiteral",t.ZodEnum="ZodEnum",t.ZodEffects="ZodEffects",t.ZodNativeEnum="ZodNativeEnum",t.ZodOptional="ZodOptional",t.ZodNullable="ZodNullable",t.ZodDefault="ZodDefault",t.ZodCatch="ZodCatch",t.ZodPromise="ZodPromise",t.ZodBranded="ZodBranded",t.ZodPipeline="ZodPipeline",t.ZodReadonly="ZodReadonly"})(D||(D={}));var MIe=(t,e={message:`Input not instance of ${t.name}`})=>HX(n=>n instanceof t,e),FX=Ka.create,qX=du.create,wIe=id.create,LIe=fu.create,zX=mu.create,DIe=_u.create,kIe=nd.create,UIe=hu.create,$Ie=Eu.create,GIe=Za.create,VIe=Li.create,BIe=as.create,jIe=rd.create,HIe=Di.create,TC=Lr.create,FIe=Lr.strictCreate,qIe=Tu.create,zIe=OR.create,YIe=gu.create,WIe=Ys.create,KIe=IR.create,ZIe=od.create,JIe=sd.create,QIe=vR.create,XIe=Su.create,eve=Au.create,tve=Ru.create,nve=yu.create,rve=Ja.create,ove=Lo.create,sve=wr.create,ive=Ws.create,ave=Lo.createWithPreprocess,cve=a_.create,uve=()=>FX().optional(),pve=()=>qX().optional(),lve=()=>zX().optional(),dve={string:(t=>Ka.create({...t,coerce:!0})),number:(t=>du.create({...t,coerce:!0})),boolean:(t=>mu.create({...t,coerce:!0})),bigint:(t=>fu.create({...t,coerce:!0})),date:(t=>_u.create({...t,coerce:!0}))};var fve=ue;var mve=Object.freeze({status:"aborted"});function v(t,e,n){function r(a,c){var u;Object.defineProperty(a,"_zod",{value:a._zod??{},enumerable:!1}),(u=a._zod).traits??(u.traits=new Set),a._zod.traits.add(t),e(a,c);for(let p in i.prototype)p in a||Object.defineProperty(a,p,{value:i.prototype[p].bind(a)});a._zod.constr=i,a._zod.def=c}let o=n?.Parent??Object;class s extends o{}Object.defineProperty(s,"name",{value:t});function i(a){var c;let u=n?.Parent?new s:this;r(u,a),(c=u._zod).deferred??(c.deferred=[]);for(let p of u._zod.deferred)p();return u}return Object.defineProperty(i,"init",{value:r}),Object.defineProperty(i,Symbol.hasInstance,{value:a=>n?.Parent&&a instanceof n.Parent?!0:a?._zod?.traits?.has(t)}),Object.defineProperty(i,"name",{value:t}),i}var _ve=Symbol("zod_brand"),ki=class extends Error{constructor(){super("Encountered Promise during synchronous parse. Use .parseAsync() instead.")}},xR={};function so(t){return t&&Object.assign(xR,t),xR}var ke={};Ph(ke,{BIGINT_FORMAT_RANGES:()=>WX,Class:()=>SC,NUMBER_FORMAT_RANGES:()=>IC,aborted:()=>vu,allowsEval:()=>bC,assert:()=>Sve,assertEqual:()=>hve,assertIs:()=>Tve,assertNever:()=>gve,assertNotEqual:()=>Eve,assignProp:()=>yC,cached:()=>p_,captureStackTrace:()=>CR,cleanEnum:()=>wve,cleanRegex:()=>d_,clone:()=>io,createTransparentProxy:()=>Ove,defineLazy:()=>pt,esc:()=>Iu,escapeRegex:()=>Qa,extend:()=>xve,finalizeIssue:()=>cs,floatSafeRemainder:()=>RC,getElementAtPath:()=>Ave,getEnumValues:()=>u_,getLengthableOrigin:()=>f_,getParsedType:()=>Nve,getSizableOrigin:()=>KX,isObject:()=>ad,isPlainObject:()=>cd,issue:()=>vC,joinValues:()=>PR,jsonStringifyReplacer:()=>AC,merge:()=>Pve,normalizeParams:()=>pe,nullish:()=>l_,numKeys:()=>bve,omit:()=>vve,optionalKeys:()=>OC,partial:()=>Cve,pick:()=>Ive,prefixIssues:()=>Ks,primitiveTypes:()=>YX,promiseAllObject:()=>Rve,propertyKeyTypes:()=>NC,randomString:()=>yve,required:()=>Mve,stringifyPrimitive:()=>MR,unwrapMessage:()=>c_});function hve(t){return t}function Eve(t){return t}function Tve(t){}function gve(t){throw new Error}function Sve(t){}function u_(t){let e=Object.values(t).filter(r=>typeof r=="number");return Object.entries(t).filter(([r,o])=>e.indexOf(+r)===-1).map(([r,o])=>o)}function PR(t,e="|"){return t.map(n=>MR(n)).join(e)}function AC(t,e){return typeof e=="bigint"?e.toString():e}function p_(t){return{get value(){{let n=t();return Object.defineProperty(this,"value",{value:n}),n}throw new Error("cached value already set")}}}function l_(t){return t==null}function d_(t){let e=t.startsWith("^")?1:0,n=t.endsWith("$")?t.length-1:t.length;return t.slice(e,n)}function RC(t,e){let n=(t.toString().split(".")[1]||"").length,r=(e.toString().split(".")[1]||"").length,o=n>r?n:r,s=Number.parseInt(t.toFixed(o).replace(".","")),i=Number.parseInt(e.toFixed(o).replace(".",""));return s%i/10**o}function pt(t,e,n){Object.defineProperty(t,e,{get(){{let o=n();return t[e]=o,o}throw new Error("cached value already set")},set(o){Object.defineProperty(t,e,{value:o})},configurable:!0})}function yC(t,e,n){Object.defineProperty(t,e,{value:n,writable:!0,enumerable:!0,configurable:!0})}function Ave(t,e){return e?e.reduce((n,r)=>n?.[r],t):t}function Rve(t){let e=Object.keys(t),n=e.map(r=>t[r]);return Promise.all(n).then(r=>{let o={};for(let s=0;s<e.length;s++)o[e[s]]=r[s];return o})}function yve(t=10){let e="abcdefghijklmnopqrstuvwxyz",n="";for(let r=0;r<t;r++)n+=e[Math.floor(Math.random()*e.length)];return n}function Iu(t){return JSON.stringify(t)}var CR=Error.captureStackTrace?Error.captureStackTrace:(...t)=>{};function ad(t){return typeof t=="object"&&t!==null&&!Array.isArray(t)}var bC=p_(()=>{if(typeof navigator<"u"&&navigator?.userAgent?.includes("Cloudflare"))return!1;try{let t=Function;return new t(""),!0}catch{return!1}});function cd(t){if(ad(t)===!1)return!1;let e=t.constructor;if(e===void 0)return!0;let n=e.prototype;return!(ad(n)===!1||Object.prototype.hasOwnProperty.call(n,"isPrototypeOf")===!1)}function bve(t){let e=0;for(let n in t)Object.prototype.hasOwnProperty.call(t,n)&&e++;return e}var Nve=t=>{let e=typeof t;switch(e){case"undefined":return"undefined";case"string":return"string";case"number":return Number.isNaN(t)?"nan":"number";case"boolean":return"boolean";case"function":return"function";case"bigint":return"bigint";case"symbol":return"symbol";case"object":return Array.isArray(t)?"array":t===null?"null":t.then&&typeof t.then=="function"&&t.catch&&typeof t.catch=="function"?"promise":typeof Map<"u"&&t instanceof Map?"map":typeof Set<"u"&&t instanceof Set?"set":typeof Date<"u"&&t instanceof Date?"date":typeof File<"u"&&t instanceof File?"file":"object";default:throw new Error(`Unknown data type: ${e}`)}},NC=new Set(["string","number","symbol"]),YX=new Set(["string","number","bigint","boolean","symbol","undefined"]);function Qa(t){return t.replace(/[.*+?^${}()|[\]\\]/g,"\\$&")}function io(t,e,n){let r=new t._zod.constr(e??t._zod.def);return(!e||n?.parent)&&(r._zod.parent=t),r}function pe(t){let e=t;if(!e)return{};if(typeof e=="string")return{error:()=>e};if(e?.message!==void 0){if(e?.error!==void 0)throw new Error("Cannot specify both `message` and `error` params");e.error=e.message}return delete e.message,typeof e.error=="string"?{...e,error:()=>e.error}:e}function Ove(t){let e;return new Proxy({},{get(n,r,o){return e??(e=t()),Reflect.get(e,r,o)},set(n,r,o,s){return e??(e=t()),Reflect.set(e,r,o,s)},has(n,r){return e??(e=t()),Reflect.has(e,r)},deleteProperty(n,r){return e??(e=t()),Reflect.deleteProperty(e,r)},ownKeys(n){return e??(e=t()),Reflect.ownKeys(e)},getOwnPropertyDescriptor(n,r){return e??(e=t()),Reflect.getOwnPropertyDescriptor(e,r)},defineProperty(n,r,o){return e??(e=t()),Reflect.defineProperty(e,r,o)}})}function MR(t){return typeof t=="bigint"?t.toString()+"n":typeof t=="string"?`"${t}"`:`${t}`}function OC(t){return Object.keys(t).filter(e=>t[e]._zod.optin==="optional"&&t[e]._zod.optout==="optional")}var IC={safeint:[Number.MIN_SAFE_INTEGER,Number.MAX_SAFE_INTEGER],int32:[-2147483648,2147483647],uint32:[0,4294967295],float32:[-34028234663852886e22,34028234663852886e22],float64:[-Number.MAX_VALUE,Number.MAX_VALUE]},WX={int64:[BigInt("-9223372036854775808"),BigInt("9223372036854775807")],uint64:[BigInt(0),BigInt("18446744073709551615")]};function Ive(t,e){let n={},r=t._zod.def;for(let o in e){if(!(o in r.shape))throw new Error(`Unrecognized key: "${o}"`);e[o]&&(n[o]=r.shape[o])}return io(t,{...t._zod.def,shape:n,checks:[]})}function vve(t,e){let n={...t._zod.def.shape},r=t._zod.def;for(let o in e){if(!(o in r.shape))throw new Error(`Unrecognized key: "${o}"`);e[o]&&delete n[o]}return io(t,{...t._zod.def,shape:n,checks:[]})}function xve(t,e){if(!cd(e))throw new Error("Invalid input to extend: expected a plain object");let n={...t._zod.def,get shape(){let r={...t._zod.def.shape,...e};return yC(this,"shape",r),r},checks:[]};return io(t,n)}function Pve(t,e){return io(t,{...t._zod.def,get shape(){let n={...t._zod.def.shape,...e._zod.def.shape};return yC(this,"shape",n),n},catchall:e._zod.def.catchall,checks:[]})}function Cve(t,e,n){let r=e._zod.def.shape,o={...r};if(n)for(let s in n){if(!(s in r))throw new Error(`Unrecognized key: "${s}"`);n[s]&&(o[s]=t?new t({type:"optional",innerType:r[s]}):r[s])}else for(let s in r)o[s]=t?new t({type:"optional",innerType:r[s]}):r[s];return io(e,{...e._zod.def,shape:o,checks:[]})}function Mve(t,e,n){let r=e._zod.def.shape,o={...r};if(n)for(let s in n){if(!(s in o))throw new Error(`Unrecognized key: "${s}"`);n[s]&&(o[s]=new t({type:"nonoptional",innerType:r[s]}))}else for(let s in r)o[s]=new t({type:"nonoptional",innerType:r[s]});return io(e,{...e._zod.def,shape:o,checks:[]})}function vu(t,e=0){for(let n=e;n<t.issues.length;n++)if(t.issues[n]?.continue!==!0)return!0;return!1}function Ks(t,e){return e.map(n=>{var r;return(r=n).path??(r.path=[]),n.path.unshift(t),n})}function c_(t){return typeof t=="string"?t:t?.message}function cs(t,e,n){let r={...t,path:t.path??[]};if(!t.message){let o=c_(t.inst?._zod.def?.error?.(t))??c_(e?.error?.(t))??c_(n.customError?.(t))??c_(n.localeError?.(t))??"Invalid input";r.message=o}return delete r.inst,delete r.continue,e?.reportInput||delete r.input,r}function KX(t){return t instanceof Set?"set":t instanceof Map?"map":t instanceof File?"file":"unknown"}function f_(t){return Array.isArray(t)?"array":typeof t=="string"?"string":"unknown"}function vC(...t){let[e,n,r]=t;return typeof e=="string"?{message:e,code:"custom",input:n,inst:r}:{...e}}function wve(t){return Object.entries(t).filter(([e,n])=>Number.isNaN(Number.parseInt(e,10))).map(e=>e[1])}var SC=class{constructor(...e){}};var ZX=(t,e)=>{t.name="$ZodError",Object.defineProperty(t,"_zod",{value:t._zod,enumerable:!1}),Object.defineProperty(t,"issues",{value:e,enumerable:!1}),Object.defineProperty(t,"message",{get(){return JSON.stringify(e,AC,2)},enumerable:!0}),Object.defineProperty(t,"toString",{value:()=>t.message,enumerable:!1})},wR=v("$ZodError",ZX),m_=v("$ZodError",ZX,{Parent:Error});function xC(t,e=n=>n.message){let n={},r=[];for(let o of t.issues)o.path.length>0?(n[o.path[0]]=n[o.path[0]]||[],n[o.path[0]].push(e(o))):r.push(e(o));return{formErrors:r,fieldErrors:n}}function PC(t,e){let n=e||function(s){return s.message},r={_errors:[]},o=s=>{for(let i of s.issues)if(i.code==="invalid_union"&&i.errors.length)i.errors.map(a=>o({issues:a}));else if(i.code==="invalid_key")o({issues:i.issues});else if(i.code==="invalid_element")o({issues:i.issues});else if(i.path.length===0)r._errors.push(n(i));else{let a=r,c=0;for(;c<i.path.length;){let u=i.path[c];c===i.path.length-1?(a[u]=a[u]||{_errors:[]},a[u]._errors.push(n(i))):a[u]=a[u]||{_errors:[]},a=a[u],c++}}};return o(t),r}var CC=t=>(e,n,r,o)=>{let s=r?Object.assign(r,{async:!1}):{async:!1},i=e._zod.run({value:n,issues:[]},s);if(i instanceof Promise)throw new ki;if(i.issues.length){let a=new(o?.Err??t)(i.issues.map(c=>cs(c,s,so())));throw CR(a,o?.callee),a}return i.value},MC=CC(m_),wC=t=>async(e,n,r,o)=>{let s=r?Object.assign(r,{async:!0}):{async:!0},i=e._zod.run({value:n,issues:[]},s);if(i instanceof Promise&&(i=await i),i.issues.length){let a=new(o?.Err??t)(i.issues.map(c=>cs(c,s,so())));throw CR(a,o?.callee),a}return i.value},LC=wC(m_),DC=t=>(e,n,r)=>{let o=r?{...r,async:!1}:{async:!1},s=e._zod.run({value:n,issues:[]},o);if(s instanceof Promise)throw new ki;return s.issues.length?{success:!1,error:new(t??wR)(s.issues.map(i=>cs(i,o,so())))}:{success:!0,data:s.value}},xu=DC(m_),kC=t=>async(e,n,r)=>{let o=r?Object.assign(r,{async:!0}):{async:!0},s=e._zod.run({value:n,issues:[]},o);return s instanceof Promise&&(s=await s),s.issues.length?{success:!1,error:new t(s.issues.map(i=>cs(i,o,so())))}:{success:!0,data:s.value}},Pu=kC(m_);var JX=/^[cC][^\s-]{8,}$/,QX=/^[0-9a-z]+$/,XX=/^[0-9A-HJKMNP-TV-Za-hjkmnp-tv-z]{26}$/,e8=/^[0-9a-vA-V]{20}$/,t8=/^[A-Za-z0-9]{27}$/,n8=/^[a-zA-Z0-9_-]{21}$/,r8=/^P(?:(\d+W)|(?!.*W)(?=\d|T\d)(\d+Y)?(\d+M)?(\d+D)?(T(?=\d)(\d+H)?(\d+M)?(\d+([.,]\d+)?S)?)?)$/;var o8=/^([0-9a-fA-F]{8}-[0-9a-fA-F]{4}-[0-9a-fA-F]{4}-[0-9a-fA-F]{4}-[0-9a-fA-F]{12})$/,UC=t=>t?new RegExp(`^([0-9a-fA-F]{8}-[0-9a-fA-F]{4}-${t}[0-9a-fA-F]{3}-[89abAB][0-9a-fA-F]{3}-[0-9a-fA-F]{12})$`):/^([0-9a-fA-F]{8}-[0-9a-fA-F]{4}-[1-8][0-9a-fA-F]{3}-[89abAB][0-9a-fA-F]{3}-[0-9a-fA-F]{12}|00000000-0000-0000-0000-000000000000)$/;var s8=/^(?!\.)(?!.*\.\.)([A-Za-z0-9_'+\-\.]*)[A-Za-z0-9_+-]@([A-Za-z0-9][A-Za-z0-9\-]*\.)+[A-Za-z]{2,}$/;var Dve="^(\\p{Extended_Pictographic}|\\p{Emoji_Component})+$";function i8(){return new RegExp(Dve,"u")}var a8=/^(?:(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\.){3}(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])$/,c8=/^(([0-9a-fA-F]{1,4}:){7}[0-9a-fA-F]{1,4}|::|([0-9a-fA-F]{1,4})?::([0-9a-fA-F]{1,4}:?){0,6})$/,u8=/^((25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\.){3}(25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\/([0-9]|[1-2][0-9]|3[0-2])$/,p8=/^(([0-9a-fA-F]{1,4}:){7}[0-9a-fA-F]{1,4}|::|([0-9a-fA-F]{1,4})?::([0-9a-fA-F]{1,4}:?){0,6})\/(12[0-8]|1[01][0-9]|[1-9]?[0-9])$/,l8=/^$|^(?:[0-9a-zA-Z+/]{4})*(?:(?:[0-9a-zA-Z+/]{2}==)|(?:[0-9a-zA-Z+/]{3}=))?$/,$C=/^[A-Za-z0-9_-]*$/,d8=/^([a-zA-Z0-9-]+\.)*[a-zA-Z0-9-]+$/;var f8=/^\+(?:[0-9]){6,14}[0-9]$/,m8="(?:(?:\\d\\d[2468][048]|\\d\\d[13579][26]|\\d\\d0[48]|[02468][048]00|[13579][26]00)-02-29|\\d{4}-(?:(?:0[13578]|1[02])-(?:0[1-9]|[12]\\d|3[01])|(?:0[469]|11)-(?:0[1-9]|[12]\\d|30)|(?:02)-(?:0[1-9]|1\\d|2[0-8])))",_8=new RegExp(`^${m8}$`);function h8(t){let e="(?:[01]\\d|2[0-3]):[0-5]\\d";return typeof t.precision=="number"?t.precision===-1?`${e}`:t.precision===0?`${e}:[0-5]\\d`:`${e}:[0-5]\\d\\.\\d{${t.precision}}`:`${e}(?::[0-5]\\d(?:\\.\\d+)?)?`}function E8(t){return new RegExp(`^${h8(t)}$`)}function T8(t){let e=h8({precision:t.precision}),n=["Z"];t.local&&n.push(""),t.offset&&n.push("([+-]\\d{2}:\\d{2})");let r=`${e}(?:${n.join("|")})`;return new RegExp(`^${m8}T(?:${r})$`)}var g8=t=>{let e=t?`[\\s\\S]{${t?.minimum??0},${t?.maximum??""}}`:"[\\s\\S]*";return new RegExp(`^${e}$`)};var S8=/^\d+$/,A8=/^-?\d+(?:\.\d+)?/i,R8=/true|false/i,y8=/null/i;var b8=/^[^A-Z]*$/,N8=/^[^a-z]*$/;var kn=v("$ZodCheck",(t,e)=>{var n;t._zod??(t._zod={}),t._zod.def=e,(n=t._zod).onattach??(n.onattach=[])}),O8={number:"number",bigint:"bigint",object:"date"},GC=v("$ZodCheckLessThan",(t,e)=>{kn.init(t,e);let n=O8[typeof e.value];t._zod.onattach.push(r=>{let o=r._zod.bag,s=(e.inclusive?o.maximum:o.exclusiveMaximum)??Number.POSITIVE_INFINITY;e.value<s&&(e.inclusive?o.maximum=e.value:o.exclusiveMaximum=e.value)}),t._zod.check=r=>{(e.inclusive?r.value<=e.value:r.value<e.value)||r.issues.push({origin:n,code:"too_big",maximum:e.value,input:r.value,inclusive:e.inclusive,inst:t,continue:!e.abort})}}),VC=v("$ZodCheckGreaterThan",(t,e)=>{kn.init(t,e);let n=O8[typeof e.value];t._zod.onattach.push(r=>{let o=r._zod.bag,s=(e.inclusive?o.minimum:o.exclusiveMinimum)??Number.NEGATIVE_INFINITY;e.value>s&&(e.inclusive?o.minimum=e.value:o.exclusiveMinimum=e.value)}),t._zod.check=r=>{(e.inclusive?r.value>=e.value:r.value>e.value)||r.issues.push({origin:n,code:"too_small",minimum:e.value,input:r.value,inclusive:e.inclusive,inst:t,continue:!e.abort})}}),I8=v("$ZodCheckMultipleOf",(t,e)=>{kn.init(t,e),t._zod.onattach.push(n=>{var r;(r=n._zod.bag).multipleOf??(r.multipleOf=e.value)}),t._zod.check=n=>{if(typeof n.value!=typeof e.value)throw new Error("Cannot mix number and bigint in multiple_of check.");(typeof n.value=="bigint"?n.value%e.value===BigInt(0):RC(n.value,e.value)===0)||n.issues.push({origin:typeof n.value,code:"not_multiple_of",divisor:e.value,input:n.value,inst:t,continue:!e.abort})}}),v8=v("$ZodCheckNumberFormat",(t,e)=>{kn.init(t,e),e.format=e.format||"float64";let n=e.format?.includes("int"),r=n?"int":"number",[o,s]=IC[e.format];t._zod.onattach.push(i=>{let a=i._zod.bag;a.format=e.format,a.minimum=o,a.maximum=s,n&&(a.pattern=S8)}),t._zod.check=i=>{let a=i.value;if(n){if(!Number.isInteger(a)){i.issues.push({expected:r,format:e.format,code:"invalid_type",input:a,inst:t});return}if(!Number.isSafeInteger(a)){a>0?i.issues.push({input:a,code:"too_big",maximum:Number.MAX_SAFE_INTEGER,note:"Integers must be within the safe integer range.",inst:t,origin:r,continue:!e.abort}):i.issues.push({input:a,code:"too_small",minimum:Number.MIN_SAFE_INTEGER,note:"Integers must be within the safe integer range.",inst:t,origin:r,continue:!e.abort});return}}a<o&&i.issues.push({origin:"number",input:a,code:"too_small",minimum:o,inclusive:!0,inst:t,continue:!e.abort}),a>s&&i.issues.push({origin:"number",input:a,code:"too_big",maximum:s,inst:t})}});var x8=v("$ZodCheckMaxLength",(t,e)=>{var n;kn.init(t,e),(n=t._zod.def).when??(n.when=r=>{let o=r.value;return!l_(o)&&o.length!==void 0}),t._zod.onattach.push(r=>{let o=r._zod.bag.maximum??Number.POSITIVE_INFINITY;e.maximum<o&&(r._zod.bag.maximum=e.maximum)}),t._zod.check=r=>{let o=r.value;if(o.length<=e.maximum)return;let i=f_(o);r.issues.push({origin:i,code:"too_big",maximum:e.maximum,inclusive:!0,input:o,inst:t,continue:!e.abort})}}),P8=v("$ZodCheckMinLength",(t,e)=>{var n;kn.init(t,e),(n=t._zod.def).when??(n.when=r=>{let o=r.value;return!l_(o)&&o.length!==void 0}),t._zod.onattach.push(r=>{let o=r._zod.bag.minimum??Number.NEGATIVE_INFINITY;e.minimum>o&&(r._zod.bag.minimum=e.minimum)}),t._zod.check=r=>{let o=r.value;if(o.length>=e.minimum)return;let i=f_(o);r.issues.push({origin:i,code:"too_small",minimum:e.minimum,inclusive:!0,input:o,inst:t,continue:!e.abort})}}),C8=v("$ZodCheckLengthEquals",(t,e)=>{var n;kn.init(t,e),(n=t._zod.def).when??(n.when=r=>{let o=r.value;return!l_(o)&&o.length!==void 0}),t._zod.onattach.push(r=>{let o=r._zod.bag;o.minimum=e.length,o.maximum=e.length,o.length=e.length}),t._zod.check=r=>{let o=r.value,s=o.length;if(s===e.length)return;let i=f_(o),a=s>e.length;r.issues.push({origin:i,...a?{code:"too_big",maximum:e.length}:{code:"too_small",minimum:e.length},inclusive:!0,exact:!0,input:r.value,inst:t,continue:!e.abort})}}),__=v("$ZodCheckStringFormat",(t,e)=>{var n,r;kn.init(t,e),t._zod.onattach.push(o=>{let s=o._zod.bag;s.format=e.format,e.pattern&&(s.patterns??(s.patterns=new Set),s.patterns.add(e.pattern))}),e.pattern?(n=t._zod).check??(n.check=o=>{e.pattern.lastIndex=0,!e.pattern.test(o.value)&&o.issues.push({origin:"string",code:"invalid_format",format:e.format,input:o.value,...e.pattern?{pattern:e.pattern.toString()}:{},inst:t,continue:!e.abort})}):(r=t._zod).check??(r.check=()=>{})}),M8=v("$ZodCheckRegex",(t,e)=>{__.init(t,e),t._zod.check=n=>{e.pattern.lastIndex=0,!e.pattern.test(n.value)&&n.issues.push({origin:"string",code:"invalid_format",format:"regex",input:n.value,pattern:e.pattern.toString(),inst:t,continue:!e.abort})}}),w8=v("$ZodCheckLowerCase",(t,e)=>{e.pattern??(e.pattern=b8),__.init(t,e)}),L8=v("$ZodCheckUpperCase",(t,e)=>{e.pattern??(e.pattern=N8),__.init(t,e)}),D8=v("$ZodCheckIncludes",(t,e)=>{kn.init(t,e);let n=Qa(e.includes),r=new RegExp(typeof e.position=="number"?`^.{${e.position}}${n}`:n);e.pattern=r,t._zod.onattach.push(o=>{let s=o._zod.bag;s.patterns??(s.patterns=new Set),s.patterns.add(r)}),t._zod.check=o=>{o.value.includes(e.includes,e.position)||o.issues.push({origin:"string",code:"invalid_format",format:"includes",includes:e.includes,input:o.value,inst:t,continue:!e.abort})}}),k8=v("$ZodCheckStartsWith",(t,e)=>{kn.init(t,e);let n=new RegExp(`^${Qa(e.prefix)}.*`);e.pattern??(e.pattern=n),t._zod.onattach.push(r=>{let o=r._zod.bag;o.patterns??(o.patterns=new Set),o.patterns.add(n)}),t._zod.check=r=>{r.value.startsWith(e.prefix)||r.issues.push({origin:"string",code:"invalid_format",format:"starts_with",prefix:e.prefix,input:r.value,inst:t,continue:!e.abort})}}),U8=v("$ZodCheckEndsWith",(t,e)=>{kn.init(t,e);let n=new RegExp(`.*${Qa(e.suffix)}$`);e.pattern??(e.pattern=n),t._zod.onattach.push(r=>{let o=r._zod.bag;o.patterns??(o.patterns=new Set),o.patterns.add(n)}),t._zod.check=r=>{r.value.endsWith(e.suffix)||r.issues.push({origin:"string",code:"invalid_format",format:"ends_with",suffix:e.suffix,input:r.value,inst:t,continue:!e.abort})}});var $8=v("$ZodCheckOverwrite",(t,e)=>{kn.init(t,e),t._zod.check=n=>{n.value=e.tx(n.value)}});var DR=class{constructor(e=[]){this.content=[],this.indent=0,this&&(this.args=e)}indented(e){this.indent+=1,e(this),this.indent-=1}write(e){if(typeof e=="function"){e(this,{execution:"sync"}),e(this,{execution:"async"});return}let r=e.split(`
`).filter(i=>i),o=Math.min(...r.map(i=>i.length-i.trimStart().length)),s=r.map(i=>i.slice(o)).map(i=>" ".repeat(this.indent*2)+i);for(let i of s)this.content.push(i)}compile(){let e=Function,n=this?.args,o=[...(this?.content??[""]).map(s=>`  ${s}`)];return new e(...n,o.join(`
`))}};var V8={major:4,minor:0,patch:0};var ot=v("$ZodType",(t,e)=>{var n;t??(t={}),t._zod.def=e,t._zod.bag=t._zod.bag||{},t._zod.version=V8;let r=[...t._zod.def.checks??[]];t._zod.traits.has("$ZodCheck")&&r.unshift(t);for(let o of r)for(let s of o._zod.onattach)s(t);if(r.length===0)(n=t._zod).deferred??(n.deferred=[]),t._zod.deferred?.push(()=>{t._zod.run=t._zod.parse});else{let o=(s,i,a)=>{let c=vu(s),u;for(let p of i){if(p._zod.def.when){if(!p._zod.def.when(s))continue}else if(c)continue;let l=s.issues.length,d=p._zod.check(s);if(d instanceof Promise&&a?.async===!1)throw new ki;if(u||d instanceof Promise)u=(u??Promise.resolve()).then(async()=>{await d,s.issues.length!==l&&(c||(c=vu(s,l)))});else{if(s.issues.length===l)continue;c||(c=vu(s,l))}}return u?u.then(()=>s):s};t._zod.run=(s,i)=>{let a=t._zod.parse(s,i);if(a instanceof Promise){if(i.async===!1)throw new ki;return a.then(c=>o(c,r,i))}return o(a,r,i)}}t["~standard"]={validate:o=>{try{let s=xu(t,o);return s.success?{value:s.data}:{issues:s.error?.issues}}catch{return Pu(t,o).then(i=>i.success?{value:i.data}:{issues:i.error?.issues})}},vendor:"zod",version:1}}),h_=v("$ZodString",(t,e)=>{ot.init(t,e),t._zod.pattern=[...t?._zod.bag?.patterns??[]].pop()??g8(t._zod.bag),t._zod.parse=(n,r)=>{if(e.coerce)try{n.value=String(n.value)}catch{}return typeof n.value=="string"||n.issues.push({expected:"string",code:"invalid_type",input:n.value,inst:t}),n}}),lt=v("$ZodStringFormat",(t,e)=>{__.init(t,e),h_.init(t,e)}),jC=v("$ZodGUID",(t,e)=>{e.pattern??(e.pattern=o8),lt.init(t,e)}),HC=v("$ZodUUID",(t,e)=>{if(e.version){let r={v1:1,v2:2,v3:3,v4:4,v5:5,v6:6,v7:7,v8:8}[e.version];if(r===void 0)throw new Error(`Invalid UUID version: "${e.version}"`);e.pattern??(e.pattern=UC(r))}else e.pattern??(e.pattern=UC());lt.init(t,e)}),FC=v("$ZodEmail",(t,e)=>{e.pattern??(e.pattern=s8),lt.init(t,e)}),qC=v("$ZodURL",(t,e)=>{lt.init(t,e),t._zod.check=n=>{try{let r=n.value,o=new URL(r),s=o.href;e.hostname&&(e.hostname.lastIndex=0,e.hostname.test(o.hostname)||n.issues.push({code:"invalid_format",format:"url",note:"Invalid hostname",pattern:d8.source,input:n.value,inst:t,continue:!e.abort})),e.protocol&&(e.protocol.lastIndex=0,e.protocol.test(o.protocol.endsWith(":")?o.protocol.slice(0,-1):o.protocol)||n.issues.push({code:"invalid_format",format:"url",note:"Invalid protocol",pattern:e.protocol.source,input:n.value,inst:t,continue:!e.abort})),!r.endsWith("/")&&s.endsWith("/")?n.value=s.slice(0,-1):n.value=s;return}catch{n.issues.push({code:"invalid_format",format:"url",input:n.value,inst:t,continue:!e.abort})}}}),zC=v("$ZodEmoji",(t,e)=>{e.pattern??(e.pattern=i8()),lt.init(t,e)}),YC=v("$ZodNanoID",(t,e)=>{e.pattern??(e.pattern=n8),lt.init(t,e)}),WC=v("$ZodCUID",(t,e)=>{e.pattern??(e.pattern=JX),lt.init(t,e)}),KC=v("$ZodCUID2",(t,e)=>{e.pattern??(e.pattern=QX),lt.init(t,e)}),ZC=v("$ZodULID",(t,e)=>{e.pattern??(e.pattern=XX),lt.init(t,e)}),JC=v("$ZodXID",(t,e)=>{e.pattern??(e.pattern=e8),lt.init(t,e)}),QC=v("$ZodKSUID",(t,e)=>{e.pattern??(e.pattern=t8),lt.init(t,e)}),Z8=v("$ZodISODateTime",(t,e)=>{e.pattern??(e.pattern=T8(e)),lt.init(t,e)}),J8=v("$ZodISODate",(t,e)=>{e.pattern??(e.pattern=_8),lt.init(t,e)}),Q8=v("$ZodISOTime",(t,e)=>{e.pattern??(e.pattern=E8(e)),lt.init(t,e)}),X8=v("$ZodISODuration",(t,e)=>{e.pattern??(e.pattern=r8),lt.init(t,e)}),XC=v("$ZodIPv4",(t,e)=>{e.pattern??(e.pattern=a8),lt.init(t,e),t._zod.onattach.push(n=>{let r=n._zod.bag;r.format="ipv4"})}),eM=v("$ZodIPv6",(t,e)=>{e.pattern??(e.pattern=c8),lt.init(t,e),t._zod.onattach.push(n=>{let r=n._zod.bag;r.format="ipv6"}),t._zod.check=n=>{try{new URL(`http://[${n.value}]`)}catch{n.issues.push({code:"invalid_format",format:"ipv6",input:n.value,inst:t,continue:!e.abort})}}}),tM=v("$ZodCIDRv4",(t,e)=>{e.pattern??(e.pattern=u8),lt.init(t,e)}),nM=v("$ZodCIDRv6",(t,e)=>{e.pattern??(e.pattern=p8),lt.init(t,e),t._zod.check=n=>{let[r,o]=n.value.split("/");try{if(!o)throw new Error;let s=Number(o);if(`${s}`!==o)throw new Error;if(s<0||s>128)throw new Error;new URL(`http://[${r}]`)}catch{n.issues.push({code:"invalid_format",format:"cidrv6",input:n.value,inst:t,continue:!e.abort})}}});function e7(t){if(t==="")return!0;if(t.length%4!==0)return!1;try{return atob(t),!0}catch{return!1}}var rM=v("$ZodBase64",(t,e)=>{e.pattern??(e.pattern=l8),lt.init(t,e),t._zod.onattach.push(n=>{n._zod.bag.contentEncoding="base64"}),t._zod.check=n=>{e7(n.value)||n.issues.push({code:"invalid_format",format:"base64",input:n.value,inst:t,continue:!e.abort})}});function kve(t){if(!$C.test(t))return!1;let e=t.replace(/[-_]/g,r=>r==="-"?"+":"/"),n=e.padEnd(Math.ceil(e.length/4)*4,"=");return e7(n)}var oM=v("$ZodBase64URL",(t,e)=>{e.pattern??(e.pattern=$C),lt.init(t,e),t._zod.onattach.push(n=>{n._zod.bag.contentEncoding="base64url"}),t._zod.check=n=>{kve(n.value)||n.issues.push({code:"invalid_format",format:"base64url",input:n.value,inst:t,continue:!e.abort})}}),sM=v("$ZodE164",(t,e)=>{e.pattern??(e.pattern=f8),lt.init(t,e)});function Uve(t,e=null){try{let n=t.split(".");if(n.length!==3)return!1;let[r]=n;if(!r)return!1;let o=JSON.parse(atob(r));return!("typ"in o&&o?.typ!=="JWT"||!o.alg||e&&(!("alg"in o)||o.alg!==e))}catch{return!1}}var iM=v("$ZodJWT",(t,e)=>{lt.init(t,e),t._zod.check=n=>{Uve(n.value,e.alg)||n.issues.push({code:"invalid_format",format:"jwt",input:n.value,inst:t,continue:!e.abort})}});var UR=v("$ZodNumber",(t,e)=>{ot.init(t,e),t._zod.pattern=t._zod.bag.pattern??A8,t._zod.parse=(n,r)=>{if(e.coerce)try{n.value=Number(n.value)}catch{}let o=n.value;if(typeof o=="number"&&!Number.isNaN(o)&&Number.isFinite(o))return n;let s=typeof o=="number"?Number.isNaN(o)?"NaN":Number.isFinite(o)?void 0:"Infinity":void 0;return n.issues.push({expected:"number",code:"invalid_type",input:o,inst:t,...s?{received:s}:{}}),n}}),aM=v("$ZodNumber",(t,e)=>{v8.init(t,e),UR.init(t,e)}),cM=v("$ZodBoolean",(t,e)=>{ot.init(t,e),t._zod.pattern=R8,t._zod.parse=(n,r)=>{if(e.coerce)try{n.value=!!n.value}catch{}let o=n.value;return typeof o=="boolean"||n.issues.push({expected:"boolean",code:"invalid_type",input:o,inst:t}),n}});var uM=v("$ZodNull",(t,e)=>{ot.init(t,e),t._zod.pattern=y8,t._zod.values=new Set([null]),t._zod.parse=(n,r)=>{let o=n.value;return o===null||n.issues.push({expected:"null",code:"invalid_type",input:o,inst:t}),n}});var pM=v("$ZodUnknown",(t,e)=>{ot.init(t,e),t._zod.parse=n=>n}),lM=v("$ZodNever",(t,e)=>{ot.init(t,e),t._zod.parse=(n,r)=>(n.issues.push({expected:"never",code:"invalid_type",input:n.value,inst:t}),n)});function B8(t,e,n){t.issues.length&&e.issues.push(...Ks(n,t.issues)),e.value[n]=t.value}var dM=v("$ZodArray",(t,e)=>{ot.init(t,e),t._zod.parse=(n,r)=>{let o=n.value;if(!Array.isArray(o))return n.issues.push({expected:"array",code:"invalid_type",input:o,inst:t}),n;n.value=Array(o.length);let s=[];for(let i=0;i<o.length;i++){let a=o[i],c=e.element._zod.run({value:a,issues:[]},r);c instanceof Promise?s.push(c.then(u=>B8(u,n,i))):B8(c,n,i)}return s.length?Promise.all(s).then(()=>n):n}});function kR(t,e,n){t.issues.length&&e.issues.push(...Ks(n,t.issues)),e.value[n]=t.value}function j8(t,e,n,r){t.issues.length?r[n]===void 0?n in r?e.value[n]=void 0:e.value[n]=t.value:e.issues.push(...Ks(n,t.issues)):t.value===void 0?n in r&&(e.value[n]=void 0):e.value[n]=t.value}var $R=v("$ZodObject",(t,e)=>{ot.init(t,e);let n=p_(()=>{let l=Object.keys(e.shape);for(let f of l)if(!(e.shape[f]instanceof ot))throw new Error(`Invalid element at key "${f}": expected a Zod schema`);let d=OC(e.shape);return{shape:e.shape,keys:l,keySet:new Set(l),numKeys:l.length,optionalKeys:new Set(d)}});pt(t._zod,"propValues",()=>{let l=e.shape,d={};for(let f in l){let m=l[f]._zod;if(m.values){d[f]??(d[f]=new Set);for(let h of m.values)d[f].add(h)}}return d});let r=l=>{let d=new DR(["shape","payload","ctx"]),f=n.value,m=R=>{let y=Iu(R);return`shape[${y}]._zod.run({ value: input[${y}], issues: [] }, ctx)`};d.write("const input = payload.value;");let h=Object.create(null),E=0;for(let R of f.keys)h[R]=`key_${E++}`;d.write("const newResult = {}");for(let R of f.keys)if(f.optionalKeys.has(R)){let y=h[R];d.write(`const ${y} = ${m(R)};`);let O=Iu(R);d.write(`
        if (${y}.issues.length) {
          if (input[${O}] === undefined) {
            if (${O} in input) {
              newResult[${O}] = undefined;
            }
          } else {
            payload.issues = payload.issues.concat(
              ${y}.issues.map((iss) => ({
                ...iss,
                path: iss.path ? [${O}, ...iss.path] : [${O}],
              }))
            );
          }
        } else if (${y}.value === undefined) {
          if (${O} in input) newResult[${O}] = undefined;
        } else {
          newResult[${O}] = ${y}.value;
        }
        `)}else{let y=h[R];d.write(`const ${y} = ${m(R)};`),d.write(`
          if (${y}.issues.length) payload.issues = payload.issues.concat(${y}.issues.map(iss => ({
            ...iss,
            path: iss.path ? [${Iu(R)}, ...iss.path] : [${Iu(R)}]
          })));`),d.write(`newResult[${Iu(R)}] = ${y}.value`)}d.write("payload.value = newResult;"),d.write("return payload;");let A=d.compile();return(R,y)=>A(l,R,y)},o,s=ad,i=!xR.jitless,c=i&&bC.value,u=e.catchall,p;t._zod.parse=(l,d)=>{p??(p=n.value);let f=l.value;if(!s(f))return l.issues.push({expected:"object",code:"invalid_type",input:f,inst:t}),l;let m=[];if(i&&c&&d?.async===!1&&d.jitless!==!0)o||(o=r(e.shape)),l=o(l,d);else{l.value={};let y=p.shape;for(let O of p.keys){let P=y[O],M=P._zod.run({value:f[O],issues:[]},d),j=P._zod.optin==="optional"&&P._zod.optout==="optional";M instanceof Promise?m.push(M.then(se=>j?j8(se,l,O,f):kR(se,l,O))):j?j8(M,l,O,f):kR(M,l,O)}}if(!u)return m.length?Promise.all(m).then(()=>l):l;let h=[],E=p.keySet,A=u._zod,R=A.def.type;for(let y of Object.keys(f)){if(E.has(y))continue;if(R==="never"){h.push(y);continue}let O=A.run({value:f[y],issues:[]},d);O instanceof Promise?m.push(O.then(P=>kR(P,l,y))):kR(O,l,y)}return h.length&&l.issues.push({code:"unrecognized_keys",keys:h,input:f,inst:t}),m.length?Promise.all(m).then(()=>l):l}});function H8(t,e,n,r){for(let o of t)if(o.issues.length===0)return e.value=o.value,e;return e.issues.push({code:"invalid_union",input:e.value,inst:n,errors:t.map(o=>o.issues.map(s=>cs(s,r,so())))}),e}var GR=v("$ZodUnion",(t,e)=>{ot.init(t,e),pt(t._zod,"optin",()=>e.options.some(n=>n._zod.optin==="optional")?"optional":void 0),pt(t._zod,"optout",()=>e.options.some(n=>n._zod.optout==="optional")?"optional":void 0),pt(t._zod,"values",()=>{if(e.options.every(n=>n._zod.values))return new Set(e.options.flatMap(n=>Array.from(n._zod.values)))}),pt(t._zod,"pattern",()=>{if(e.options.every(n=>n._zod.pattern)){let n=e.options.map(r=>r._zod.pattern);return new RegExp(`^(${n.map(r=>d_(r.source)).join("|")})$`)}}),t._zod.parse=(n,r)=>{let o=!1,s=[];for(let i of e.options){let a=i._zod.run({value:n.value,issues:[]},r);if(a instanceof Promise)s.push(a),o=!0;else{if(a.issues.length===0)return a;s.push(a)}}return o?Promise.all(s).then(i=>H8(i,n,t,r)):H8(s,n,t,r)}}),fM=v("$ZodDiscriminatedUnion",(t,e)=>{GR.init(t,e);let n=t._zod.parse;pt(t._zod,"propValues",()=>{let o={};for(let s of e.options){let i=s._zod.propValues;if(!i||Object.keys(i).length===0)throw new Error(`Invalid discriminated union option at index "${e.options.indexOf(s)}"`);for(let[a,c]of Object.entries(i)){o[a]||(o[a]=new Set);for(let u of c)o[a].add(u)}}return o});let r=p_(()=>{let o=e.options,s=new Map;for(let i of o){let a=i._zod.propValues[e.discriminator];if(!a||a.size===0)throw new Error(`Invalid discriminated union option at index "${e.options.indexOf(i)}"`);for(let c of a){if(s.has(c))throw new Error(`Duplicate discriminator value "${String(c)}"`);s.set(c,i)}}return s});t._zod.parse=(o,s)=>{let i=o.value;if(!ad(i))return o.issues.push({code:"invalid_type",expected:"object",input:i,inst:t}),o;let a=r.value.get(i?.[e.discriminator]);return a?a._zod.run(o,s):e.unionFallback?n(o,s):(o.issues.push({code:"invalid_union",errors:[],note:"No matching discriminator",input:i,path:[e.discriminator],inst:t}),o)}}),mM=v("$ZodIntersection",(t,e)=>{ot.init(t,e),t._zod.parse=(n,r)=>{let o=n.value,s=e.left._zod.run({value:o,issues:[]},r),i=e.right._zod.run({value:o,issues:[]},r);return s instanceof Promise||i instanceof Promise?Promise.all([s,i]).then(([c,u])=>F8(n,c,u)):F8(n,s,i)}});function BC(t,e){if(t===e)return{valid:!0,data:t};if(t instanceof Date&&e instanceof Date&&+t==+e)return{valid:!0,data:t};if(cd(t)&&cd(e)){let n=Object.keys(e),r=Object.keys(t).filter(s=>n.indexOf(s)!==-1),o={...t,...e};for(let s of r){let i=BC(t[s],e[s]);if(!i.valid)return{valid:!1,mergeErrorPath:[s,...i.mergeErrorPath]};o[s]=i.data}return{valid:!0,data:o}}if(Array.isArray(t)&&Array.isArray(e)){if(t.length!==e.length)return{valid:!1,mergeErrorPath:[]};let n=[];for(let r=0;r<t.length;r++){let o=t[r],s=e[r],i=BC(o,s);if(!i.valid)return{valid:!1,mergeErrorPath:[r,...i.mergeErrorPath]};n.push(i.data)}return{valid:!0,data:n}}return{valid:!1,mergeErrorPath:[]}}function F8(t,e,n){if(e.issues.length&&t.issues.push(...e.issues),n.issues.length&&t.issues.push(...n.issues),vu(t))return t;let r=BC(e.value,n.value);if(!r.valid)throw new Error(`Unmergable intersection. Error path: ${JSON.stringify(r.mergeErrorPath)}`);return t.value=r.data,t}var _M=v("$ZodRecord",(t,e)=>{ot.init(t,e),t._zod.parse=(n,r)=>{let o=n.value;if(!cd(o))return n.issues.push({expected:"record",code:"invalid_type",input:o,inst:t}),n;let s=[];if(e.keyType._zod.values){let i=e.keyType._zod.values;n.value={};for(let c of i)if(typeof c=="string"||typeof c=="number"||typeof c=="symbol"){let u=e.valueType._zod.run({value:o[c],issues:[]},r);u instanceof Promise?s.push(u.then(p=>{p.issues.length&&n.issues.push(...Ks(c,p.issues)),n.value[c]=p.value})):(u.issues.length&&n.issues.push(...Ks(c,u.issues)),n.value[c]=u.value)}let a;for(let c in o)i.has(c)||(a=a??[],a.push(c));a&&a.length>0&&n.issues.push({code:"unrecognized_keys",input:o,inst:t,keys:a})}else{n.value={};for(let i of Reflect.ownKeys(o)){if(i==="__proto__")continue;let a=e.keyType._zod.run({value:i,issues:[]},r);if(a instanceof Promise)throw new Error("Async schemas not supported in object keys currently");if(a.issues.length){n.issues.push({origin:"record",code:"invalid_key",issues:a.issues.map(u=>cs(u,r,so())),input:i,path:[i],inst:t}),n.value[a.value]=a.value;continue}let c=e.valueType._zod.run({value:o[i],issues:[]},r);c instanceof Promise?s.push(c.then(u=>{u.issues.length&&n.issues.push(...Ks(i,u.issues)),n.value[a.value]=u.value})):(c.issues.length&&n.issues.push(...Ks(i,c.issues)),n.value[a.value]=c.value)}}return s.length?Promise.all(s).then(()=>n):n}});var hM=v("$ZodEnum",(t,e)=>{ot.init(t,e);let n=u_(e.entries);t._zod.values=new Set(n),t._zod.pattern=new RegExp(`^(${n.filter(r=>NC.has(typeof r)).map(r=>typeof r=="string"?Qa(r):r.toString()).join("|")})$`),t._zod.parse=(r,o)=>{let s=r.value;return t._zod.values.has(s)||r.issues.push({code:"invalid_value",values:n,input:s,inst:t}),r}}),EM=v("$ZodLiteral",(t,e)=>{ot.init(t,e),t._zod.values=new Set(e.values),t._zod.pattern=new RegExp(`^(${e.values.map(n=>typeof n=="string"?Qa(n):n?n.toString():String(n)).join("|")})$`),t._zod.parse=(n,r)=>{let o=n.value;return t._zod.values.has(o)||n.issues.push({code:"invalid_value",values:e.values,input:o,inst:t}),n}});var TM=v("$ZodTransform",(t,e)=>{ot.init(t,e),t._zod.parse=(n,r)=>{let o=e.transform(n.value,n);if(r.async)return(o instanceof Promise?o:Promise.resolve(o)).then(i=>(n.value=i,n));if(o instanceof Promise)throw new ki;return n.value=o,n}}),gM=v("$ZodOptional",(t,e)=>{ot.init(t,e),t._zod.optin="optional",t._zod.optout="optional",pt(t._zod,"values",()=>e.innerType._zod.values?new Set([...e.innerType._zod.values,void 0]):void 0),pt(t._zod,"pattern",()=>{let n=e.innerType._zod.pattern;return n?new RegExp(`^(${d_(n.source)})?$`):void 0}),t._zod.parse=(n,r)=>e.innerType._zod.optin==="optional"?e.innerType._zod.run(n,r):n.value===void 0?n:e.innerType._zod.run(n,r)}),SM=v("$ZodNullable",(t,e)=>{ot.init(t,e),pt(t._zod,"optin",()=>e.innerType._zod.optin),pt(t._zod,"optout",()=>e.innerType._zod.optout),pt(t._zod,"pattern",()=>{let n=e.innerType._zod.pattern;return n?new RegExp(`^(${d_(n.source)}|null)$`):void 0}),pt(t._zod,"values",()=>e.innerType._zod.values?new Set([...e.innerType._zod.values,null]):void 0),t._zod.parse=(n,r)=>n.value===null?n:e.innerType._zod.run(n,r)}),AM=v("$ZodDefault",(t,e)=>{ot.init(t,e),t._zod.optin="optional",pt(t._zod,"values",()=>e.innerType._zod.values),t._zod.parse=(n,r)=>{if(n.value===void 0)return n.value=e.defaultValue,n;let o=e.innerType._zod.run(n,r);return o instanceof Promise?o.then(s=>q8(s,e)):q8(o,e)}});function q8(t,e){return t.value===void 0&&(t.value=e.defaultValue),t}var RM=v("$ZodPrefault",(t,e)=>{ot.init(t,e),t._zod.optin="optional",pt(t._zod,"values",()=>e.innerType._zod.values),t._zod.parse=(n,r)=>(n.value===void 0&&(n.value=e.defaultValue),e.innerType._zod.run(n,r))}),yM=v("$ZodNonOptional",(t,e)=>{ot.init(t,e),pt(t._zod,"values",()=>{let n=e.innerType._zod.values;return n?new Set([...n].filter(r=>r!==void 0)):void 0}),t._zod.parse=(n,r)=>{let o=e.innerType._zod.run(n,r);return o instanceof Promise?o.then(s=>z8(s,t)):z8(o,t)}});function z8(t,e){return!t.issues.length&&t.value===void 0&&t.issues.push({code:"invalid_type",expected:"nonoptional",input:t.value,inst:e}),t}var bM=v("$ZodCatch",(t,e)=>{ot.init(t,e),t._zod.optin="optional",pt(t._zod,"optout",()=>e.innerType._zod.optout),pt(t._zod,"values",()=>e.innerType._zod.values),t._zod.parse=(n,r)=>{let o=e.innerType._zod.run(n,r);return o instanceof Promise?o.then(s=>(n.value=s.value,s.issues.length&&(n.value=e.catchValue({...n,error:{issues:s.issues.map(i=>cs(i,r,so()))},input:n.value}),n.issues=[]),n)):(n.value=o.value,o.issues.length&&(n.value=e.catchValue({...n,error:{issues:o.issues.map(s=>cs(s,r,so()))},input:n.value}),n.issues=[]),n)}});var NM=v("$ZodPipe",(t,e)=>{ot.init(t,e),pt(t._zod,"values",()=>e.in._zod.values),pt(t._zod,"optin",()=>e.in._zod.optin),pt(t._zod,"optout",()=>e.out._zod.optout),t._zod.parse=(n,r)=>{let o=e.in._zod.run(n,r);return o instanceof Promise?o.then(s=>Y8(s,e,r)):Y8(o,e,r)}});function Y8(t,e,n){return vu(t)?t:e.out._zod.run({value:t.value,issues:t.issues},n)}var OM=v("$ZodReadonly",(t,e)=>{ot.init(t,e),pt(t._zod,"propValues",()=>e.innerType._zod.propValues),pt(t._zod,"values",()=>e.innerType._zod.values),pt(t._zod,"optin",()=>e.innerType._zod.optin),pt(t._zod,"optout",()=>e.innerType._zod.optout),t._zod.parse=(n,r)=>{let o=e.innerType._zod.run(n,r);return o instanceof Promise?o.then(W8):W8(o)}});function W8(t){return t.value=Object.freeze(t.value),t}var IM=v("$ZodCustom",(t,e)=>{kn.init(t,e),ot.init(t,e),t._zod.parse=(n,r)=>n,t._zod.check=n=>{let r=n.value,o=e.fn(r);if(o instanceof Promise)return o.then(s=>K8(s,n,r,t));K8(o,n,r,t)}});function K8(t,e,n,r){if(!t){let o={code:"custom",input:n,inst:r,path:[...r._zod.def.path??[]],continue:!r._zod.def.abort};r._zod.def.params&&(o.params=r._zod.def.params),e.issues.push(vC(o))}}var $ve=t=>{let e=typeof t;switch(e){case"number":return Number.isNaN(t)?"NaN":"number";case"object":{if(Array.isArray(t))return"array";if(t===null)return"null";if(Object.getPrototypeOf(t)!==Object.prototype&&t.constructor)return t.constructor.name}}return e},Gve=()=>{let t={string:{unit:"characters",verb:"to have"},file:{unit:"bytes",verb:"to have"},array:{unit:"items",verb:"to have"},set:{unit:"items",verb:"to have"}};function e(r){return t[r]??null}let n={regex:"input",email:"email address",url:"URL",emoji:"emoji",uuid:"UUID",uuidv4:"UUIDv4",uuidv6:"UUIDv6",nanoid:"nanoid",guid:"GUID",cuid:"cuid",cuid2:"cuid2",ulid:"ULID",xid:"XID",ksuid:"KSUID",datetime:"ISO datetime",date:"ISO date",time:"ISO time",duration:"ISO duration",ipv4:"IPv4 address",ipv6:"IPv6 address",cidrv4:"IPv4 range",cidrv6:"IPv6 range",base64:"base64-encoded string",base64url:"base64url-encoded string",json_string:"JSON string",e164:"E.164 number",jwt:"JWT",template_literal:"input"};return r=>{switch(r.code){case"invalid_type":return`Invalid input: expected ${r.expected}, received ${$ve(r.input)}`;case"invalid_value":return r.values.length===1?`Invalid input: expected ${MR(r.values[0])}`:`Invalid option: expected one of ${PR(r.values,"|")}`;case"too_big":{let o=r.inclusive?"<=":"<",s=e(r.origin);return s?`Too big: expected ${r.origin??"value"} to have ${o}${r.maximum.toString()} ${s.unit??"elements"}`:`Too big: expected ${r.origin??"value"} to be ${o}${r.maximum.toString()}`}case"too_small":{let o=r.inclusive?">=":">",s=e(r.origin);return s?`Too small: expected ${r.origin} to have ${o}${r.minimum.toString()} ${s.unit}`:`Too small: expected ${r.origin} to be ${o}${r.minimum.toString()}`}case"invalid_format":{let o=r;return o.format==="starts_with"?`Invalid string: must start with "${o.prefix}"`:o.format==="ends_with"?`Invalid string: must end with "${o.suffix}"`:o.format==="includes"?`Invalid string: must include "${o.includes}"`:o.format==="regex"?`Invalid string: must match pattern ${o.pattern}`:`Invalid ${n[o.format]??r.format}`}case"not_multiple_of":return`Invalid number: must be a multiple of ${r.divisor}`;case"unrecognized_keys":return`Unrecognized key${r.keys.length>1?"s":""}: ${PR(r.keys,", ")}`;case"invalid_key":return`Invalid key in ${r.origin}`;case"invalid_union":return"Invalid input";case"invalid_element":return`Invalid value in ${r.origin}`;default:return"Invalid input"}}};function t7(){return{localeError:Gve()}}var Vve=Symbol("ZodOutput"),Bve=Symbol("ZodInput"),E_=class{constructor(){this._map=new Map,this._idmap=new Map}add(e,...n){let r=n[0];if(this._map.set(e,r),r&&typeof r=="object"&&"id"in r){if(this._idmap.has(r.id))throw new Error(`ID ${r.id} already exists in the registry`);this._idmap.set(r.id,e)}return this}clear(){return this._map=new Map,this._idmap=new Map,this}remove(e){let n=this._map.get(e);return n&&typeof n=="object"&&"id"in n&&this._idmap.delete(n.id),this._map.delete(e),this}get(e){let n=e._zod.parent;if(n){let r={...this.get(n)??{}};return delete r.id,{...r,...this._map.get(e)}}return this._map.get(e)}has(e){return this._map.has(e)}};function n7(){return new E_}var Xa=n7();function vM(t,e){return new t({type:"string",...pe(e)})}function xM(t,e){return new t({type:"string",format:"email",check:"string_format",abort:!1,...pe(e)})}function VR(t,e){return new t({type:"string",format:"guid",check:"string_format",abort:!1,...pe(e)})}function PM(t,e){return new t({type:"string",format:"uuid",check:"string_format",abort:!1,...pe(e)})}function CM(t,e){return new t({type:"string",format:"uuid",check:"string_format",abort:!1,version:"v4",...pe(e)})}function MM(t,e){return new t({type:"string",format:"uuid",check:"string_format",abort:!1,version:"v6",...pe(e)})}function wM(t,e){return new t({type:"string",format:"uuid",check:"string_format",abort:!1,version:"v7",...pe(e)})}function LM(t,e){return new t({type:"string",format:"url",check:"string_format",abort:!1,...pe(e)})}function DM(t,e){return new t({type:"string",format:"emoji",check:"string_format",abort:!1,...pe(e)})}function kM(t,e){return new t({type:"string",format:"nanoid",check:"string_format",abort:!1,...pe(e)})}function UM(t,e){return new t({type:"string",format:"cuid",check:"string_format",abort:!1,...pe(e)})}function $M(t,e){return new t({type:"string",format:"cuid2",check:"string_format",abort:!1,...pe(e)})}function GM(t,e){return new t({type:"string",format:"ulid",check:"string_format",abort:!1,...pe(e)})}function VM(t,e){return new t({type:"string",format:"xid",check:"string_format",abort:!1,...pe(e)})}function BM(t,e){return new t({type:"string",format:"ksuid",check:"string_format",abort:!1,...pe(e)})}function jM(t,e){return new t({type:"string",format:"ipv4",check:"string_format",abort:!1,...pe(e)})}function HM(t,e){return new t({type:"string",format:"ipv6",check:"string_format",abort:!1,...pe(e)})}function FM(t,e){return new t({type:"string",format:"cidrv4",check:"string_format",abort:!1,...pe(e)})}function qM(t,e){return new t({type:"string",format:"cidrv6",check:"string_format",abort:!1,...pe(e)})}function zM(t,e){return new t({type:"string",format:"base64",check:"string_format",abort:!1,...pe(e)})}function YM(t,e){return new t({type:"string",format:"base64url",check:"string_format",abort:!1,...pe(e)})}function WM(t,e){return new t({type:"string",format:"e164",check:"string_format",abort:!1,...pe(e)})}function KM(t,e){return new t({type:"string",format:"jwt",check:"string_format",abort:!1,...pe(e)})}function r7(t,e){return new t({type:"string",format:"datetime",check:"string_format",offset:!1,local:!1,precision:null,...pe(e)})}function o7(t,e){return new t({type:"string",format:"date",check:"string_format",...pe(e)})}function s7(t,e){return new t({type:"string",format:"time",check:"string_format",precision:null,...pe(e)})}function i7(t,e){return new t({type:"string",format:"duration",check:"string_format",...pe(e)})}function ZM(t,e){return new t({type:"number",checks:[],...pe(e)})}function JM(t,e){return new t({type:"number",check:"number_format",abort:!1,format:"safeint",...pe(e)})}function QM(t,e){return new t({type:"boolean",...pe(e)})}function XM(t,e){return new t({type:"null",...pe(e)})}function ew(t){return new t({type:"unknown"})}function tw(t,e){return new t({type:"never",...pe(e)})}function BR(t,e){return new GC({check:"less_than",...pe(e),value:t,inclusive:!1})}function T_(t,e){return new GC({check:"less_than",...pe(e),value:t,inclusive:!0})}function jR(t,e){return new VC({check:"greater_than",...pe(e),value:t,inclusive:!1})}function g_(t,e){return new VC({check:"greater_than",...pe(e),value:t,inclusive:!0})}function HR(t,e){return new I8({check:"multiple_of",...pe(e),value:t})}function FR(t,e){return new x8({check:"max_length",...pe(e),maximum:t})}function ud(t,e){return new P8({check:"min_length",...pe(e),minimum:t})}function qR(t,e){return new C8({check:"length_equals",...pe(e),length:t})}function nw(t,e){return new M8({check:"string_format",format:"regex",...pe(e),pattern:t})}function rw(t){return new w8({check:"string_format",format:"lowercase",...pe(t)})}function ow(t){return new L8({check:"string_format",format:"uppercase",...pe(t)})}function sw(t,e){return new D8({check:"string_format",format:"includes",...pe(e),includes:t})}function iw(t,e){return new k8({check:"string_format",format:"starts_with",...pe(e),prefix:t})}function aw(t,e){return new U8({check:"string_format",format:"ends_with",...pe(e),suffix:t})}function Cu(t){return new $8({check:"overwrite",tx:t})}function cw(t){return Cu(e=>e.normalize(t))}function uw(){return Cu(t=>t.trim())}function pw(){return Cu(t=>t.toLowerCase())}function lw(){return Cu(t=>t.toUpperCase())}function a7(t,e,n){return new t({type:"array",element:e,...pe(n)})}function dw(t,e,n){let r=pe(n);return r.abort??(r.abort=!0),new t({type:"custom",check:"custom",fn:e,...r})}function fw(t,e,n){return new t({type:"custom",check:"custom",fn:e,...pe(n)})}var zR=class{constructor(e){this.counter=0,this.metadataRegistry=e?.metadata??Xa,this.target=e?.target??"draft-2020-12",this.unrepresentable=e?.unrepresentable??"throw",this.override=e?.override??(()=>{}),this.io=e?.io??"output",this.seen=new Map}process(e,n={path:[],schemaPath:[]}){var r;let o=e._zod.def,s={guid:"uuid",url:"uri",datetime:"date-time",json_string:"json-string",regex:""},i=this.seen.get(e);if(i)return i.count++,n.schemaPath.includes(e)&&(i.cycle=n.path),i.schema;let a={schema:{},count:1,cycle:void 0,path:n.path};this.seen.set(e,a);let c=e._zod.toJSONSchema?.();if(c)a.schema=c;else{let l={...n,schemaPath:[...n.schemaPath,e],path:n.path},d=e._zod.parent;if(d)a.ref=d,this.process(d,l),this.seen.get(d).isParent=!0;else{let f=a.schema;switch(o.type){case"string":{let m=f;m.type="string";let{minimum:h,maximum:E,format:A,patterns:R,contentEncoding:y}=e._zod.bag;if(typeof h=="number"&&(m.minLength=h),typeof E=="number"&&(m.maxLength=E),A&&(m.format=s[A]??A,m.format===""&&delete m.format),y&&(m.contentEncoding=y),R&&R.size>0){let O=[...R];O.length===1?m.pattern=O[0].source:O.length>1&&(a.schema.allOf=[...O.map(P=>({...this.target==="draft-7"?{type:"string"}:{},pattern:P.source}))])}break}case"number":{let m=f,{minimum:h,maximum:E,format:A,multipleOf:R,exclusiveMaximum:y,exclusiveMinimum:O}=e._zod.bag;typeof A=="string"&&A.includes("int")?m.type="integer":m.type="number",typeof O=="number"&&(m.exclusiveMinimum=O),typeof h=="number"&&(m.minimum=h,typeof O=="number"&&(O>=h?delete m.minimum:delete m.exclusiveMinimum)),typeof y=="number"&&(m.exclusiveMaximum=y),typeof E=="number"&&(m.maximum=E,typeof y=="number"&&(y<=E?delete m.maximum:delete m.exclusiveMaximum)),typeof R=="number"&&(m.multipleOf=R);break}case"boolean":{let m=f;m.type="boolean";break}case"bigint":{if(this.unrepresentable==="throw")throw new Error("BigInt cannot be represented in JSON Schema");break}case"symbol":{if(this.unrepresentable==="throw")throw new Error("Symbols cannot be represented in JSON Schema");break}case"null":{f.type="null";break}case"any":break;case"unknown":break;case"undefined":{if(this.unrepresentable==="throw")throw new Error("Undefined cannot be represented in JSON Schema");break}case"void":{if(this.unrepresentable==="throw")throw new Error("Void cannot be represented in JSON Schema");break}case"never":{f.not={};break}case"date":{if(this.unrepresentable==="throw")throw new Error("Date cannot be represented in JSON Schema");break}case"array":{let m=f,{minimum:h,maximum:E}=e._zod.bag;typeof h=="number"&&(m.minItems=h),typeof E=="number"&&(m.maxItems=E),m.type="array",m.items=this.process(o.element,{...l,path:[...l.path,"items"]});break}case"object":{let m=f;m.type="object",m.properties={};let h=o.shape;for(let R in h)m.properties[R]=this.process(h[R],{...l,path:[...l.path,"properties",R]});let E=new Set(Object.keys(h)),A=new Set([...E].filter(R=>{let y=o.shape[R]._zod;return this.io==="input"?y.optin===void 0:y.optout===void 0}));A.size>0&&(m.required=Array.from(A)),o.catchall?._zod.def.type==="never"?m.additionalProperties=!1:o.catchall?o.catchall&&(m.additionalProperties=this.process(o.catchall,{...l,path:[...l.path,"additionalProperties"]})):this.io==="output"&&(m.additionalProperties=!1);break}case"union":{let m=f;m.anyOf=o.options.map((h,E)=>this.process(h,{...l,path:[...l.path,"anyOf",E]}));break}case"intersection":{let m=f,h=this.process(o.left,{...l,path:[...l.path,"allOf",0]}),E=this.process(o.right,{...l,path:[...l.path,"allOf",1]}),A=y=>"allOf"in y&&Object.keys(y).length===1,R=[...A(h)?h.allOf:[h],...A(E)?E.allOf:[E]];m.allOf=R;break}case"tuple":{let m=f;m.type="array";let h=o.items.map((R,y)=>this.process(R,{...l,path:[...l.path,"prefixItems",y]}));if(this.target==="draft-2020-12"?m.prefixItems=h:m.items=h,o.rest){let R=this.process(o.rest,{...l,path:[...l.path,"items"]});this.target==="draft-2020-12"?m.items=R:m.additionalItems=R}o.rest&&(m.items=this.process(o.rest,{...l,path:[...l.path,"items"]}));let{minimum:E,maximum:A}=e._zod.bag;typeof E=="number"&&(m.minItems=E),typeof A=="number"&&(m.maxItems=A);break}case"record":{let m=f;m.type="object",m.propertyNames=this.process(o.keyType,{...l,path:[...l.path,"propertyNames"]}),m.additionalProperties=this.process(o.valueType,{...l,path:[...l.path,"additionalProperties"]});break}case"map":{if(this.unrepresentable==="throw")throw new Error("Map cannot be represented in JSON Schema");break}case"set":{if(this.unrepresentable==="throw")throw new Error("Set cannot be represented in JSON Schema");break}case"enum":{let m=f,h=u_(o.entries);h.every(E=>typeof E=="number")&&(m.type="number"),h.every(E=>typeof E=="string")&&(m.type="string"),m.enum=h;break}case"literal":{let m=f,h=[];for(let E of o.values)if(E===void 0){if(this.unrepresentable==="throw")throw new Error("Literal `undefined` cannot be represented in JSON Schema")}else if(typeof E=="bigint"){if(this.unrepresentable==="throw")throw new Error("BigInt literals cannot be represented in JSON Schema");h.push(Number(E))}else h.push(E);if(h.length!==0)if(h.length===1){let E=h[0];m.type=E===null?"null":typeof E,m.const=E}else h.every(E=>typeof E=="number")&&(m.type="number"),h.every(E=>typeof E=="string")&&(m.type="string"),h.every(E=>typeof E=="boolean")&&(m.type="string"),h.every(E=>E===null)&&(m.type="null"),m.enum=h;break}case"file":{let m=f,h={type:"string",format:"binary",contentEncoding:"binary"},{minimum:E,maximum:A,mime:R}=e._zod.bag;E!==void 0&&(h.minLength=E),A!==void 0&&(h.maxLength=A),R?R.length===1?(h.contentMediaType=R[0],Object.assign(m,h)):m.anyOf=R.map(y=>({...h,contentMediaType:y})):Object.assign(m,h);break}case"transform":{if(this.unrepresentable==="throw")throw new Error("Transforms cannot be represented in JSON Schema");break}case"nullable":{let m=this.process(o.innerType,l);f.anyOf=[m,{type:"null"}];break}case"nonoptional":{this.process(o.innerType,l),a.ref=o.innerType;break}case"success":{let m=f;m.type="boolean";break}case"default":{this.process(o.innerType,l),a.ref=o.innerType,f.default=JSON.parse(JSON.stringify(o.defaultValue));break}case"prefault":{this.process(o.innerType,l),a.ref=o.innerType,this.io==="input"&&(f._prefault=JSON.parse(JSON.stringify(o.defaultValue)));break}case"catch":{this.process(o.innerType,l),a.ref=o.innerType;let m;try{m=o.catchValue(void 0)}catch{throw new Error("Dynamic catch values are not supported in JSON Schema")}f.default=m;break}case"nan":{if(this.unrepresentable==="throw")throw new Error("NaN cannot be represented in JSON Schema");break}case"template_literal":{let m=f,h=e._zod.pattern;if(!h)throw new Error("Pattern not found in template literal");m.type="string",m.pattern=h.source;break}case"pipe":{let m=this.io==="input"?o.in._zod.def.type==="transform"?o.out:o.in:o.out;this.process(m,l),a.ref=m;break}case"readonly":{this.process(o.innerType,l),a.ref=o.innerType,f.readOnly=!0;break}case"promise":{this.process(o.innerType,l),a.ref=o.innerType;break}case"optional":{this.process(o.innerType,l),a.ref=o.innerType;break}case"lazy":{let m=e._zod.innerType;this.process(m,l),a.ref=m;break}case"custom":{if(this.unrepresentable==="throw")throw new Error("Custom types cannot be represented in JSON Schema");break}default:}}}let u=this.metadataRegistry.get(e);return u&&Object.assign(a.schema,u),this.io==="input"&&En(e)&&(delete a.schema.examples,delete a.schema.default),this.io==="input"&&a.schema._prefault&&((r=a.schema).default??(r.default=a.schema._prefault)),delete a.schema._prefault,this.seen.get(e).schema}emit(e,n){let r={cycles:n?.cycles??"ref",reused:n?.reused??"inline",external:n?.external??void 0},o=this.seen.get(e);if(!o)throw new Error("Unprocessed schema. This is a bug in Zod.");let s=p=>{let l=this.target==="draft-2020-12"?"$defs":"definitions";if(r.external){let h=r.external.registry.get(p[0])?.id,E=r.external.uri??(R=>R);if(h)return{ref:E(h)};let A=p[1].defId??p[1].schema.id??`schema${this.counter++}`;return p[1].defId=A,{defId:A,ref:`${E("__shared")}#/${l}/${A}`}}if(p[1]===o)return{ref:"#"};let f=`#/${l}/`,m=p[1].schema.id??`__schema${this.counter++}`;return{defId:m,ref:f+m}},i=p=>{if(p[1].schema.$ref)return;let l=p[1],{ref:d,defId:f}=s(p);l.def={...l.schema},f&&(l.defId=f);let m=l.schema;for(let h in m)delete m[h];m.$ref=d};if(r.cycles==="throw")for(let p of this.seen.entries()){let l=p[1];if(l.cycle)throw new Error(`Cycle detected: #/${l.cycle?.join("/")}/<root>

Set the \`cycles\` parameter to \`"ref"\` to resolve cyclical schemas with defs.`)}for(let p of this.seen.entries()){let l=p[1];if(e===p[0]){i(p);continue}if(r.external){let f=r.external.registry.get(p[0])?.id;if(e!==p[0]&&f){i(p);continue}}if(this.metadataRegistry.get(p[0])?.id){i(p);continue}if(l.cycle){i(p);continue}if(l.count>1&&r.reused==="ref"){i(p);continue}}let a=(p,l)=>{let d=this.seen.get(p),f=d.def??d.schema,m={...f};if(d.ref===null)return;let h=d.ref;if(d.ref=null,h){a(h,l);let E=this.seen.get(h).schema;E.$ref&&l.target==="draft-7"?(f.allOf=f.allOf??[],f.allOf.push(E)):(Object.assign(f,E),Object.assign(f,m))}d.isParent||this.override({zodSchema:p,jsonSchema:f,path:d.path??[]})};for(let p of[...this.seen.entries()].reverse())a(p[0],{target:this.target});let c={};if(this.target==="draft-2020-12"?c.$schema="https://json-schema.org/draft/2020-12/schema":this.target==="draft-7"?c.$schema="http://json-schema.org/draft-07/schema#":console.warn(`Invalid target: ${this.target}`),r.external?.uri){let p=r.external.registry.get(e)?.id;if(!p)throw new Error("Schema is missing an `id` property");c.$id=r.external.uri(p)}Object.assign(c,o.def);let u=r.external?.defs??{};for(let p of this.seen.entries()){let l=p[1];l.def&&l.defId&&(u[l.defId]=l.def)}r.external||Object.keys(u).length>0&&(this.target==="draft-2020-12"?c.$defs=u:c.definitions=u);try{return JSON.parse(JSON.stringify(c))}catch{throw new Error("Error converting schema to JSON.")}}};function mw(t,e){if(t instanceof E_){let r=new zR(e),o={};for(let a of t._idmap.entries()){let[c,u]=a;r.process(u)}let s={},i={registry:t,uri:e?.uri,defs:o};for(let a of t._idmap.entries()){let[c,u]=a;s[c]=r.emit(u,{...e,external:i})}if(Object.keys(o).length>0){let a=r.target==="draft-2020-12"?"$defs":"definitions";s.__shared={[a]:o}}return{schemas:s}}let n=new zR(e);return n.process(t),n.emit(t,e)}function En(t,e){let n=e??{seen:new Set};if(n.seen.has(t))return!1;n.seen.add(t);let o=t._zod.def;switch(o.type){case"string":case"number":case"bigint":case"boolean":case"date":case"symbol":case"undefined":case"null":case"any":case"unknown":case"never":case"void":case"literal":case"enum":case"nan":case"file":case"template_literal":return!1;case"array":return En(o.element,n);case"object":{for(let s in o.shape)if(En(o.shape[s],n))return!0;return!1}case"union":{for(let s of o.options)if(En(s,n))return!0;return!1}case"intersection":return En(o.left,n)||En(o.right,n);case"tuple":{for(let s of o.items)if(En(s,n))return!0;return!!(o.rest&&En(o.rest,n))}case"record":return En(o.keyType,n)||En(o.valueType,n);case"map":return En(o.keyType,n)||En(o.valueType,n);case"set":return En(o.valueType,n);case"promise":case"optional":case"nonoptional":case"nullable":case"readonly":return En(o.innerType,n);case"lazy":return En(o.getter(),n);case"default":return En(o.innerType,n);case"prefault":return En(o.innerType,n);case"custom":return!1;case"transform":return!0;case"pipe":return En(o.in,n)||En(o.out,n);case"success":return!1;case"catch":return!1;default:}throw new Error(`Unknown schema type: ${o.type}`)}var Rxe=v("ZodMiniType",(t,e)=>{if(!t._zod)throw new Error("Uninitialized schema in ZodMiniType.");ot.init(t,e),t.def=e,t.parse=(n,r)=>MC(t,n,r,{callee:t.parse}),t.safeParse=(n,r)=>xu(t,n,r),t.parseAsync=async(n,r)=>LC(t,n,r,{callee:t.parseAsync}),t.safeParseAsync=async(n,r)=>Pu(t,n,r),t.check=(...n)=>t.clone({...e,checks:[...e.checks??[],...n.map(r=>typeof r=="function"?{_zod:{check:r,def:{check:"custom"},onattach:[]}}:r)]}),t.clone=(n,r)=>io(t,n,r),t.brand=()=>t,t.register=((n,r)=>(n.add(t,r),t))});var yxe=v("ZodMiniObject",(t,e)=>{$R.init(t,e),Rxe.init(t,e),ke.defineLazy(t,"shape",()=>e.shape)});function _w(t,e){let n={type:"object",get shape(){return ke.assignProp(this,"shape",{...t}),this.shape},...ke.normalizeParams(e)};return new yxe(n)}function Do(t){return!!t._zod}function wu(t){let e=Object.values(t);if(e.length===0)return _w({});let n=e.every(Do),r=e.every(o=>!Do(o));if(n)return _w(t);if(r)return TC(t);throw new Error("Mixed Zod versions detected in object shape.")}function ec(t,e){return Do(t)?xu(t,e):t.safeParse(e)}async function YR(t,e){return Do(t)?await Pu(t,e):await t.safeParseAsync(e)}function tc(t){if(!t)return;let e;if(Do(t)?e=t._zod?.def?.shape:e=t.shape,!!e){if(typeof e=="function")try{return e()}catch{return}return e}}function pd(t){if(t){if(typeof t=="object"){let e=t,n=t;if(!e._def&&!n._zod){let r=Object.values(t);if(r.length>0&&r.every(o=>typeof o=="object"&&o!==null&&(o._def!==void 0||o._zod!==void 0||typeof o.parse=="function")))return wu(t)}}if(Do(t)){let n=t._zod?.def;if(n&&(n.type==="object"||n.shape!==void 0))return t}else if(t.shape!==void 0)return t}}function WR(t){if(t&&typeof t=="object"){if("message"in t&&typeof t.message=="string")return t.message;if("issues"in t&&Array.isArray(t.issues)&&t.issues.length>0){let e=t.issues[0];if(e&&typeof e=="object"&&"message"in e)return String(e.message)}try{return JSON.stringify(t)}catch{return String(t)}}return String(t)}function u7(t){return t.description}function p7(t){if(Do(t))return t._zod?.def?.type==="optional";let e=t;return typeof t.isOptional=="function"?t.isOptional():e._def?.typeName==="ZodOptional"}function KR(t){if(Do(t)){let s=t._zod?.def;if(s){if(s.value!==void 0)return s.value;if(Array.isArray(s.values)&&s.values.length>0)return s.values[0]}}let n=t._def;if(n){if(n.value!==void 0)return n.value;if(Array.isArray(n.values)&&n.values.length>0)return n.values[0]}let r=t.value;if(r!==void 0)return r}var S_={};Ph(S_,{ZodISODate:()=>d7,ZodISODateTime:()=>l7,ZodISODuration:()=>m7,ZodISOTime:()=>f7,date:()=>Ew,datetime:()=>hw,duration:()=>gw,time:()=>Tw});var l7=v("ZodISODateTime",(t,e)=>{Z8.init(t,e),At.init(t,e)});function hw(t){return r7(l7,t)}var d7=v("ZodISODate",(t,e)=>{J8.init(t,e),At.init(t,e)});function Ew(t){return o7(d7,t)}var f7=v("ZodISOTime",(t,e)=>{Q8.init(t,e),At.init(t,e)});function Tw(t){return s7(f7,t)}var m7=v("ZodISODuration",(t,e)=>{X8.init(t,e),At.init(t,e)});function gw(t){return i7(m7,t)}var _7=(t,e)=>{wR.init(t,e),t.name="ZodError",Object.defineProperties(t,{format:{value:n=>PC(t,n)},flatten:{value:n=>xC(t,n)},addIssue:{value:n=>t.issues.push(n)},addIssues:{value:n=>t.issues.push(...n)},isEmpty:{get(){return t.issues.length===0}}})},Drt=v("ZodError",_7),A_=v("ZodError",_7,{Parent:Error});var h7=CC(A_),E7=wC(A_),T7=DC(A_),g7=kC(A_);var Ct=v("ZodType",(t,e)=>(ot.init(t,e),t.def=e,Object.defineProperty(t,"_def",{value:e}),t.check=(...n)=>t.clone({...e,checks:[...e.checks??[],...n.map(r=>typeof r=="function"?{_zod:{check:r,def:{check:"custom"},onattach:[]}}:r)]}),t.clone=(n,r)=>io(t,n,r),t.brand=()=>t,t.register=((n,r)=>(n.add(t,r),t)),t.parse=(n,r)=>h7(t,n,r,{callee:t.parse}),t.safeParse=(n,r)=>T7(t,n,r),t.parseAsync=async(n,r)=>E7(t,n,r,{callee:t.parseAsync}),t.safeParseAsync=async(n,r)=>g7(t,n,r),t.spa=t.safeParseAsync,t.refine=(n,r)=>t.check(SPe(n,r)),t.superRefine=n=>t.check(APe(n)),t.overwrite=n=>t.check(Cu(n)),t.optional=()=>Pt(t),t.nullable=()=>R7(t),t.nullish=()=>Pt(R7(t)),t.nonoptional=n=>fPe(t,n),t.array=()=>Ue(t),t.or=n=>dt([t,n]),t.and=n=>JR(t,n),t.transform=n=>Aw(t,I7(n)),t.default=n=>pPe(t,n),t.prefault=n=>dPe(t,n),t.catch=n=>_Pe(t,n),t.pipe=n=>Aw(t,n),t.readonly=()=>TPe(t),t.describe=n=>{let r=t.clone();return Xa.add(r,{description:n}),r},Object.defineProperty(t,"description",{get(){return Xa.get(t)?.description},configurable:!0}),t.meta=(...n)=>{if(n.length===0)return Xa.get(t);let r=t.clone();return Xa.add(r,n[0]),r},t.isOptional=()=>t.safeParse(void 0).success,t.isNullable=()=>t.safeParse(null).success,t)),y7=v("_ZodString",(t,e)=>{h_.init(t,e),Ct.init(t,e);let n=t._zod.bag;t.format=n.format??null,t.minLength=n.minimum??null,t.maxLength=n.maximum??null,t.regex=(...r)=>t.check(nw(...r)),t.includes=(...r)=>t.check(sw(...r)),t.startsWith=(...r)=>t.check(iw(...r)),t.endsWith=(...r)=>t.check(aw(...r)),t.min=(...r)=>t.check(ud(...r)),t.max=(...r)=>t.check(FR(...r)),t.length=(...r)=>t.check(qR(...r)),t.nonempty=(...r)=>t.check(ud(1,...r)),t.lowercase=r=>t.check(rw(r)),t.uppercase=r=>t.check(ow(r)),t.trim=()=>t.check(uw()),t.normalize=(...r)=>t.check(cw(...r)),t.toLowerCase=()=>t.check(pw()),t.toUpperCase=()=>t.check(lw())}),Mxe=v("ZodString",(t,e)=>{h_.init(t,e),y7.init(t,e),t.email=n=>t.check(xM(wxe,n)),t.url=n=>t.check(LM(Lxe,n)),t.jwt=n=>t.check(KM(Kxe,n)),t.emoji=n=>t.check(DM(Dxe,n)),t.guid=n=>t.check(VR(S7,n)),t.uuid=n=>t.check(PM(ZR,n)),t.uuidv4=n=>t.check(CM(ZR,n)),t.uuidv6=n=>t.check(MM(ZR,n)),t.uuidv7=n=>t.check(wM(ZR,n)),t.nanoid=n=>t.check(kM(kxe,n)),t.guid=n=>t.check(VR(S7,n)),t.cuid=n=>t.check(UM(Uxe,n)),t.cuid2=n=>t.check($M($xe,n)),t.ulid=n=>t.check(GM(Gxe,n)),t.base64=n=>t.check(zM(zxe,n)),t.base64url=n=>t.check(YM(Yxe,n)),t.xid=n=>t.check(VM(Vxe,n)),t.ksuid=n=>t.check(BM(Bxe,n)),t.ipv4=n=>t.check(jM(jxe,n)),t.ipv6=n=>t.check(HM(Hxe,n)),t.cidrv4=n=>t.check(FM(Fxe,n)),t.cidrv6=n=>t.check(qM(qxe,n)),t.e164=n=>t.check(WM(Wxe,n)),t.datetime=n=>t.check(hw(n)),t.date=n=>t.check(Ew(n)),t.time=n=>t.check(Tw(n)),t.duration=n=>t.check(gw(n))});function I(t){return vM(Mxe,t)}var At=v("ZodStringFormat",(t,e)=>{lt.init(t,e),y7.init(t,e)}),wxe=v("ZodEmail",(t,e)=>{FC.init(t,e),At.init(t,e)});var S7=v("ZodGUID",(t,e)=>{jC.init(t,e),At.init(t,e)});var ZR=v("ZodUUID",(t,e)=>{HC.init(t,e),At.init(t,e)});var Lxe=v("ZodURL",(t,e)=>{qC.init(t,e),At.init(t,e)});var Dxe=v("ZodEmoji",(t,e)=>{zC.init(t,e),At.init(t,e)});var kxe=v("ZodNanoID",(t,e)=>{YC.init(t,e),At.init(t,e)});var Uxe=v("ZodCUID",(t,e)=>{WC.init(t,e),At.init(t,e)});var $xe=v("ZodCUID2",(t,e)=>{KC.init(t,e),At.init(t,e)});var Gxe=v("ZodULID",(t,e)=>{ZC.init(t,e),At.init(t,e)});var Vxe=v("ZodXID",(t,e)=>{JC.init(t,e),At.init(t,e)});var Bxe=v("ZodKSUID",(t,e)=>{QC.init(t,e),At.init(t,e)});var jxe=v("ZodIPv4",(t,e)=>{XC.init(t,e),At.init(t,e)});var Hxe=v("ZodIPv6",(t,e)=>{eM.init(t,e),At.init(t,e)});var Fxe=v("ZodCIDRv4",(t,e)=>{tM.init(t,e),At.init(t,e)});var qxe=v("ZodCIDRv6",(t,e)=>{nM.init(t,e),At.init(t,e)});var zxe=v("ZodBase64",(t,e)=>{rM.init(t,e),At.init(t,e)});var Yxe=v("ZodBase64URL",(t,e)=>{oM.init(t,e),At.init(t,e)});var Wxe=v("ZodE164",(t,e)=>{sM.init(t,e),At.init(t,e)});var Kxe=v("ZodJWT",(t,e)=>{iM.init(t,e),At.init(t,e)});var b7=v("ZodNumber",(t,e)=>{UR.init(t,e),Ct.init(t,e),t.gt=(r,o)=>t.check(jR(r,o)),t.gte=(r,o)=>t.check(g_(r,o)),t.min=(r,o)=>t.check(g_(r,o)),t.lt=(r,o)=>t.check(BR(r,o)),t.lte=(r,o)=>t.check(T_(r,o)),t.max=(r,o)=>t.check(T_(r,o)),t.int=r=>t.check(A7(r)),t.safe=r=>t.check(A7(r)),t.positive=r=>t.check(jR(0,r)),t.nonnegative=r=>t.check(g_(0,r)),t.negative=r=>t.check(BR(0,r)),t.nonpositive=r=>t.check(T_(0,r)),t.multipleOf=(r,o)=>t.check(HR(r,o)),t.step=(r,o)=>t.check(HR(r,o)),t.finite=()=>t;let n=t._zod.bag;t.minValue=Math.max(n.minimum??Number.NEGATIVE_INFINITY,n.exclusiveMinimum??Number.NEGATIVE_INFINITY)??null,t.maxValue=Math.min(n.maximum??Number.POSITIVE_INFINITY,n.exclusiveMaximum??Number.POSITIVE_INFINITY)??null,t.isInt=(n.format??"").includes("int")||Number.isSafeInteger(n.multipleOf??.5),t.isFinite=!0,t.format=n.format??null});function et(t){return ZM(b7,t)}var Zxe=v("ZodNumberFormat",(t,e)=>{aM.init(t,e),b7.init(t,e)});function A7(t){return JM(Zxe,t)}var Jxe=v("ZodBoolean",(t,e)=>{cM.init(t,e),Ct.init(t,e)});function In(t){return QM(Jxe,t)}var Qxe=v("ZodNull",(t,e)=>{uM.init(t,e),Ct.init(t,e)});function Rw(t){return XM(Qxe,t)}var Xxe=v("ZodUnknown",(t,e)=>{pM.init(t,e),Ct.init(t,e)});function Rt(){return ew(Xxe)}var ePe=v("ZodNever",(t,e)=>{lM.init(t,e),Ct.init(t,e)});function tPe(t){return tw(ePe,t)}var nPe=v("ZodArray",(t,e)=>{dM.init(t,e),Ct.init(t,e),t.element=e.element,t.min=(n,r)=>t.check(ud(n,r)),t.nonempty=n=>t.check(ud(1,n)),t.max=(n,r)=>t.check(FR(n,r)),t.length=(n,r)=>t.check(qR(n,r)),t.unwrap=()=>t.element});function Ue(t,e){return a7(nPe,t,e)}var N7=v("ZodObject",(t,e)=>{$R.init(t,e),Ct.init(t,e),ke.defineLazy(t,"shape",()=>e.shape),t.keyof=()=>Dr(Object.keys(t._zod.def.shape)),t.catchall=n=>t.clone({...t._zod.def,catchall:n}),t.passthrough=()=>t.clone({...t._zod.def,catchall:Rt()}),t.loose=()=>t.clone({...t._zod.def,catchall:Rt()}),t.strict=()=>t.clone({...t._zod.def,catchall:tPe()}),t.strip=()=>t.clone({...t._zod.def,catchall:void 0}),t.extend=n=>ke.extend(t,n),t.merge=n=>ke.merge(t,n),t.pick=n=>ke.pick(t,n),t.omit=n=>ke.omit(t,n),t.partial=(...n)=>ke.partial(v7,t,n[0]),t.required=(...n)=>ke.required(x7,t,n[0])});function z(t,e){let n={type:"object",get shape(){return ke.assignProp(this,"shape",{...t}),this.shape},...ke.normalizeParams(e)};return new N7(n)}function mr(t,e){return new N7({type:"object",get shape(){return ke.assignProp(this,"shape",{...t}),this.shape},catchall:Rt(),...ke.normalizeParams(e)})}var O7=v("ZodUnion",(t,e)=>{GR.init(t,e),Ct.init(t,e),t.options=e.options});function dt(t,e){return new O7({type:"union",options:t,...ke.normalizeParams(e)})}var rPe=v("ZodDiscriminatedUnion",(t,e)=>{O7.init(t,e),fM.init(t,e)});function yw(t,e,n){return new rPe({type:"union",options:e,discriminator:t,...ke.normalizeParams(n)})}var oPe=v("ZodIntersection",(t,e)=>{mM.init(t,e),Ct.init(t,e)});function JR(t,e){return new oPe({type:"intersection",left:t,right:e})}var sPe=v("ZodRecord",(t,e)=>{_M.init(t,e),Ct.init(t,e),t.keyType=e.keyType,t.valueType=e.valueType});function yt(t,e,n){return new sPe({type:"record",keyType:t,valueType:e,...ke.normalizeParams(n)})}var Sw=v("ZodEnum",(t,e)=>{hM.init(t,e),Ct.init(t,e),t.enum=e.entries,t.options=Object.values(e.entries);let n=new Set(Object.keys(e.entries));t.extract=(r,o)=>{let s={};for(let i of r)if(n.has(i))s[i]=e.entries[i];else throw new Error(`Key ${i} not found in enum`);return new Sw({...e,checks:[],...ke.normalizeParams(o),entries:s})},t.exclude=(r,o)=>{let s={...e.entries};for(let i of r)if(n.has(i))delete s[i];else throw new Error(`Key ${i} not found in enum`);return new Sw({...e,checks:[],...ke.normalizeParams(o),entries:s})}});function Dr(t,e){let n=Array.isArray(t)?Object.fromEntries(t.map(r=>[r,r])):t;return new Sw({type:"enum",entries:n,...ke.normalizeParams(e)})}var iPe=v("ZodLiteral",(t,e)=>{EM.init(t,e),Ct.init(t,e),t.values=new Set(e.values),Object.defineProperty(t,"value",{get(){if(e.values.length>1)throw new Error("This schema contains multiple valid literal values. Use `.values` instead.");return e.values[0]}})});function ee(t,e){return new iPe({type:"literal",values:Array.isArray(t)?t:[t],...ke.normalizeParams(e)})}var aPe=v("ZodTransform",(t,e)=>{TM.init(t,e),Ct.init(t,e),t._zod.parse=(n,r)=>{n.addIssue=s=>{if(typeof s=="string")n.issues.push(ke.issue(s,n.value,e));else{let i=s;i.fatal&&(i.continue=!1),i.code??(i.code="custom"),i.input??(i.input=n.value),i.inst??(i.inst=t),i.continue??(i.continue=!0),n.issues.push(ke.issue(i))}};let o=e.transform(n.value,n);return o instanceof Promise?o.then(s=>(n.value=s,n)):(n.value=o,n)}});function I7(t){return new aPe({type:"transform",transform:t})}var v7=v("ZodOptional",(t,e)=>{gM.init(t,e),Ct.init(t,e),t.unwrap=()=>t._zod.def.innerType});function Pt(t){return new v7({type:"optional",innerType:t})}var cPe=v("ZodNullable",(t,e)=>{SM.init(t,e),Ct.init(t,e),t.unwrap=()=>t._zod.def.innerType});function R7(t){return new cPe({type:"nullable",innerType:t})}var uPe=v("ZodDefault",(t,e)=>{AM.init(t,e),Ct.init(t,e),t.unwrap=()=>t._zod.def.innerType,t.removeDefault=t.unwrap});function pPe(t,e){return new uPe({type:"default",innerType:t,get defaultValue(){return typeof e=="function"?e():e}})}var lPe=v("ZodPrefault",(t,e)=>{RM.init(t,e),Ct.init(t,e),t.unwrap=()=>t._zod.def.innerType});function dPe(t,e){return new lPe({type:"prefault",innerType:t,get defaultValue(){return typeof e=="function"?e():e}})}var x7=v("ZodNonOptional",(t,e)=>{yM.init(t,e),Ct.init(t,e),t.unwrap=()=>t._zod.def.innerType});function fPe(t,e){return new x7({type:"nonoptional",innerType:t,...ke.normalizeParams(e)})}var mPe=v("ZodCatch",(t,e)=>{bM.init(t,e),Ct.init(t,e),t.unwrap=()=>t._zod.def.innerType,t.removeCatch=t.unwrap});function _Pe(t,e){return new mPe({type:"catch",innerType:t,catchValue:typeof e=="function"?e:()=>e})}var hPe=v("ZodPipe",(t,e)=>{NM.init(t,e),Ct.init(t,e),t.in=e.in,t.out=e.out});function Aw(t,e){return new hPe({type:"pipe",in:t,out:e})}var EPe=v("ZodReadonly",(t,e)=>{OM.init(t,e),Ct.init(t,e)});function TPe(t){return new EPe({type:"readonly",innerType:t})}var P7=v("ZodCustom",(t,e)=>{IM.init(t,e),Ct.init(t,e)});function gPe(t){let e=new kn({check:"custom"});return e._zod.check=t,e}function C7(t,e){return dw(P7,t??(()=>!0),e)}function SPe(t,e={}){return fw(P7,t,e)}function APe(t){let e=gPe(n=>(n.addIssue=r=>{if(typeof r=="string")n.issues.push(ke.issue(r,n.value,e._zod.def));else{let o=r;o.fatal&&(o.continue=!1),o.code??(o.code="custom"),o.input??(o.input=n.value),o.inst??(o.inst=e),o.continue??(o.continue=!e._zod.def.abort),n.issues.push(ke.issue(o))}},t(n.value,n)));return e}function bw(t,e){return Aw(I7(t),e)}so(t7());var Ow="2025-11-25";var M7=[Ow,"2025-06-18","2025-03-26","2024-11-05","2024-10-07"],nc="io.modelcontextprotocol/related-task",XR="2.0",Un=C7(t=>t!==null&&(typeof t=="object"||typeof t=="function")),w7=dt([I(),et().int()]),L7=I(),Krt=mr({ttl:dt([et(),Rw()]).optional(),pollInterval:et().optional()}),RPe=z({ttl:et().optional()}),yPe=z({taskId:I()}),Iw=mr({progressToken:w7.optional(),[nc]:yPe.optional()}),ao=z({_meta:Iw.optional()}),R_=ao.extend({task:RPe.optional()}),D7=t=>R_.safeParse(t).success,$n=z({method:I(),params:ao.loose().optional()}),ko=z({_meta:Iw.optional()}),Uo=z({method:I(),params:ko.loose().optional()}),Gn=mr({_meta:Iw.optional()}),ey=dt([I(),et().int()]),k7=z({jsonrpc:ee(XR),id:ey,...$n.shape}).strict(),vw=t=>k7.safeParse(t).success,U7=z({jsonrpc:ee(XR),...Uo.shape}).strict(),$7=t=>U7.safeParse(t).success,xw=z({jsonrpc:ee(XR),id:ey,result:Gn}).strict(),y_=t=>xw.safeParse(t).success;var ce;(function(t){t[t.ConnectionClosed=-32e3]="ConnectionClosed",t[t.RequestTimeout=-32001]="RequestTimeout",t[t.ParseError=-32700]="ParseError",t[t.InvalidRequest=-32600]="InvalidRequest",t[t.MethodNotFound=-32601]="MethodNotFound",t[t.InvalidParams=-32602]="InvalidParams",t[t.InternalError=-32603]="InternalError",t[t.UrlElicitationRequired=-32042]="UrlElicitationRequired"})(ce||(ce={}));var Pw=z({jsonrpc:ee(XR),id:ey.optional(),error:z({code:et().int(),message:I(),data:Rt().optional()})}).strict();var G7=t=>Pw.safeParse(t).success;var V7=dt([k7,U7,xw,Pw]),Zrt=dt([xw,Pw]),ty=Gn.strict(),bPe=ko.extend({requestId:ey.optional(),reason:I().optional()}),ny=Uo.extend({method:ee("notifications/cancelled"),params:bPe}),NPe=z({src:I(),mimeType:I().optional(),sizes:Ue(I()).optional(),theme:Dr(["light","dark"]).optional()}),b_=z({icons:Ue(NPe).optional()}),ld=z({name:I(),title:I().optional()}),B7=ld.extend({...ld.shape,...b_.shape,version:I(),websiteUrl:I().optional(),description:I().optional()}),OPe=JR(z({applyDefaults:In().optional()}),yt(I(),Rt())),IPe=bw(t=>t&&typeof t=="object"&&!Array.isArray(t)&&Object.keys(t).length===0?{form:{}}:t,JR(z({form:OPe.optional(),url:Un.optional()}),yt(I(),Rt()).optional())),vPe=mr({list:Un.optional(),cancel:Un.optional(),requests:mr({sampling:mr({createMessage:Un.optional()}).optional(),elicitation:mr({create:Un.optional()}).optional()}).optional()}),xPe=mr({list:Un.optional(),cancel:Un.optional(),requests:mr({tools:mr({call:Un.optional()}).optional()}).optional()}),PPe=z({experimental:yt(I(),Un).optional(),sampling:z({context:Un.optional(),tools:Un.optional()}).optional(),elicitation:IPe.optional(),roots:z({listChanged:In().optional()}).optional(),tasks:vPe.optional()}),CPe=ao.extend({protocolVersion:I(),capabilities:PPe,clientInfo:B7}),Cw=$n.extend({method:ee("initialize"),params:CPe});var MPe=z({experimental:yt(I(),Un).optional(),logging:Un.optional(),completions:Un.optional(),prompts:z({listChanged:In().optional()}).optional(),resources:z({subscribe:In().optional(),listChanged:In().optional()}).optional(),tools:z({listChanged:In().optional()}).optional(),tasks:xPe.optional()}),wPe=Gn.extend({protocolVersion:I(),capabilities:MPe,serverInfo:B7,instructions:I().optional()}),Mw=Uo.extend({method:ee("notifications/initialized"),params:ko.optional()});var ry=$n.extend({method:ee("ping"),params:ao.optional()}),LPe=z({progress:et(),total:Pt(et()),message:Pt(I())}),DPe=z({...ko.shape,...LPe.shape,progressToken:w7}),oy=Uo.extend({method:ee("notifications/progress"),params:DPe}),kPe=ao.extend({cursor:L7.optional()}),N_=$n.extend({params:kPe.optional()}),O_=Gn.extend({nextCursor:L7.optional()}),UPe=Dr(["working","input_required","completed","failed","cancelled"]),I_=z({taskId:I(),status:UPe,ttl:dt([et(),Rw()]),createdAt:I(),lastUpdatedAt:I(),pollInterval:Pt(et()),statusMessage:Pt(I())}),dd=Gn.extend({task:I_}),$Pe=ko.merge(I_),v_=Uo.extend({method:ee("notifications/tasks/status"),params:$Pe}),sy=$n.extend({method:ee("tasks/get"),params:ao.extend({taskId:I()})}),iy=Gn.merge(I_),ay=$n.extend({method:ee("tasks/result"),params:ao.extend({taskId:I()})}),Jrt=Gn.loose(),cy=N_.extend({method:ee("tasks/list")}),uy=O_.extend({tasks:Ue(I_)}),py=$n.extend({method:ee("tasks/cancel"),params:ao.extend({taskId:I()})}),j7=Gn.merge(I_),H7=z({uri:I(),mimeType:Pt(I()),_meta:yt(I(),Rt()).optional()}),F7=H7.extend({text:I()}),ww=I().refine(t=>{try{return atob(t),!0}catch{return!1}},{message:"Invalid Base64 string"}),q7=H7.extend({blob:ww}),x_=Dr(["user","assistant"]),fd=z({audience:Ue(x_).optional(),priority:et().min(0).max(1).optional(),lastModified:S_.datetime({offset:!0}).optional()}),z7=z({...ld.shape,...b_.shape,uri:I(),description:Pt(I()),mimeType:Pt(I()),annotations:fd.optional(),_meta:Pt(mr({}))}),GPe=z({...ld.shape,...b_.shape,uriTemplate:I(),description:Pt(I()),mimeType:Pt(I()),annotations:fd.optional(),_meta:Pt(mr({}))}),ly=N_.extend({method:ee("resources/list")}),VPe=O_.extend({resources:Ue(z7)}),dy=N_.extend({method:ee("resources/templates/list")}),BPe=O_.extend({resourceTemplates:Ue(GPe)}),Lw=ao.extend({uri:I()}),jPe=Lw,fy=$n.extend({method:ee("resources/read"),params:jPe}),HPe=Gn.extend({contents:Ue(dt([F7,q7]))}),FPe=Uo.extend({method:ee("notifications/resources/list_changed"),params:ko.optional()}),qPe=Lw,zPe=$n.extend({method:ee("resources/subscribe"),params:qPe}),YPe=Lw,WPe=$n.extend({method:ee("resources/unsubscribe"),params:YPe}),KPe=ko.extend({uri:I()}),ZPe=Uo.extend({method:ee("notifications/resources/updated"),params:KPe}),JPe=z({name:I(),description:Pt(I()),required:Pt(In())}),QPe=z({...ld.shape,...b_.shape,description:Pt(I()),arguments:Pt(Ue(JPe)),_meta:Pt(mr({}))}),my=N_.extend({method:ee("prompts/list")}),XPe=O_.extend({prompts:Ue(QPe)}),eCe=ao.extend({name:I(),arguments:yt(I(),I()).optional()}),_y=$n.extend({method:ee("prompts/get"),params:eCe}),Dw=z({type:ee("text"),text:I(),annotations:fd.optional(),_meta:yt(I(),Rt()).optional()}),kw=z({type:ee("image"),data:ww,mimeType:I(),annotations:fd.optional(),_meta:yt(I(),Rt()).optional()}),Uw=z({type:ee("audio"),data:ww,mimeType:I(),annotations:fd.optional(),_meta:yt(I(),Rt()).optional()}),tCe=z({type:ee("tool_use"),name:I(),id:I(),input:yt(I(),Rt()),_meta:yt(I(),Rt()).optional()}),nCe=z({type:ee("resource"),resource:dt([F7,q7]),annotations:fd.optional(),_meta:yt(I(),Rt()).optional()}),rCe=z7.extend({type:ee("resource_link")}),$w=dt([Dw,kw,Uw,rCe,nCe]),oCe=z({role:x_,content:$w}),sCe=Gn.extend({description:I().optional(),messages:Ue(oCe)}),iCe=Uo.extend({method:ee("notifications/prompts/list_changed"),params:ko.optional()}),aCe=z({title:I().optional(),readOnlyHint:In().optional(),destructiveHint:In().optional(),idempotentHint:In().optional(),openWorldHint:In().optional()}),cCe=z({taskSupport:Dr(["required","optional","forbidden"]).optional()}),Y7=z({...ld.shape,...b_.shape,description:I().optional(),inputSchema:z({type:ee("object"),properties:yt(I(),Un).optional(),required:Ue(I()).optional()}).catchall(Rt()),outputSchema:z({type:ee("object"),properties:yt(I(),Un).optional(),required:Ue(I()).optional()}).catchall(Rt()).optional(),annotations:aCe.optional(),execution:cCe.optional(),_meta:yt(I(),Rt()).optional()}),hy=N_.extend({method:ee("tools/list")}),uCe=O_.extend({tools:Ue(Y7)}),Ey=Gn.extend({content:Ue($w).default([]),structuredContent:yt(I(),Rt()).optional(),isError:In().optional()}),Qrt=Ey.or(Gn.extend({toolResult:Rt()})),pCe=R_.extend({name:I(),arguments:yt(I(),Rt()).optional()}),md=$n.extend({method:ee("tools/call"),params:pCe}),lCe=Uo.extend({method:ee("notifications/tools/list_changed"),params:ko.optional()}),Xrt=z({autoRefresh:In().default(!0),debounceMs:et().int().nonnegative().default(300)}),P_=Dr(["debug","info","notice","warning","error","critical","alert","emergency"]),dCe=ao.extend({level:P_}),Gw=$n.extend({method:ee("logging/setLevel"),params:dCe}),fCe=ko.extend({level:P_,logger:I().optional(),data:Rt()}),mCe=Uo.extend({method:ee("notifications/message"),params:fCe}),_Ce=z({name:I().optional()}),hCe=z({hints:Ue(_Ce).optional(),costPriority:et().min(0).max(1).optional(),speedPriority:et().min(0).max(1).optional(),intelligencePriority:et().min(0).max(1).optional()}),ECe=z({mode:Dr(["auto","required","none"]).optional()}),TCe=z({type:ee("tool_result"),toolUseId:I().describe("The unique identifier for the corresponding tool call."),content:Ue($w).default([]),structuredContent:z({}).loose().optional(),isError:In().optional(),_meta:yt(I(),Rt()).optional()}),gCe=yw("type",[Dw,kw,Uw]),QR=yw("type",[Dw,kw,Uw,tCe,TCe]),SCe=z({role:x_,content:dt([QR,Ue(QR)]),_meta:yt(I(),Rt()).optional()}),ACe=R_.extend({messages:Ue(SCe),modelPreferences:hCe.optional(),systemPrompt:I().optional(),includeContext:Dr(["none","thisServer","allServers"]).optional(),temperature:et().optional(),maxTokens:et().int(),stopSequences:Ue(I()).optional(),metadata:Un.optional(),tools:Ue(Y7).optional(),toolChoice:ECe.optional()}),RCe=$n.extend({method:ee("sampling/createMessage"),params:ACe}),Vw=Gn.extend({model:I(),stopReason:Pt(Dr(["endTurn","stopSequence","maxTokens"]).or(I())),role:x_,content:gCe}),Bw=Gn.extend({model:I(),stopReason:Pt(Dr(["endTurn","stopSequence","maxTokens","toolUse"]).or(I())),role:x_,content:dt([QR,Ue(QR)])}),yCe=z({type:ee("boolean"),title:I().optional(),description:I().optional(),default:In().optional()}),bCe=z({type:ee("string"),title:I().optional(),description:I().optional(),minLength:et().optional(),maxLength:et().optional(),format:Dr(["email","uri","date","date-time"]).optional(),default:I().optional()}),NCe=z({type:Dr(["number","integer"]),title:I().optional(),description:I().optional(),minimum:et().optional(),maximum:et().optional(),default:et().optional()}),OCe=z({type:ee("string"),title:I().optional(),description:I().optional(),enum:Ue(I()),default:I().optional()}),ICe=z({type:ee("string"),title:I().optional(),description:I().optional(),oneOf:Ue(z({const:I(),title:I()})),default:I().optional()}),vCe=z({type:ee("string"),title:I().optional(),description:I().optional(),enum:Ue(I()),enumNames:Ue(I()).optional(),default:I().optional()}),xCe=dt([OCe,ICe]),PCe=z({type:ee("array"),title:I().optional(),description:I().optional(),minItems:et().optional(),maxItems:et().optional(),items:z({type:ee("string"),enum:Ue(I())}),default:Ue(I()).optional()}),CCe=z({type:ee("array"),title:I().optional(),description:I().optional(),minItems:et().optional(),maxItems:et().optional(),items:z({anyOf:Ue(z({const:I(),title:I()}))}),default:Ue(I()).optional()}),MCe=dt([PCe,CCe]),wCe=dt([vCe,xCe,MCe]),LCe=dt([wCe,yCe,bCe,NCe]),DCe=R_.extend({mode:ee("form").optional(),message:I(),requestedSchema:z({type:ee("object"),properties:yt(I(),LCe),required:Ue(I()).optional()})}),kCe=R_.extend({mode:ee("url"),message:I(),elicitationId:I(),url:I().url()}),UCe=dt([DCe,kCe]),$Ce=$n.extend({method:ee("elicitation/create"),params:UCe}),GCe=ko.extend({elicitationId:I()}),VCe=Uo.extend({method:ee("notifications/elicitation/complete"),params:GCe}),Ty=Gn.extend({action:Dr(["accept","decline","cancel"]),content:bw(t=>t===null?void 0:t,yt(I(),dt([I(),et(),In(),Ue(I())])).optional())}),BCe=z({type:ee("ref/resource"),uri:I()});var jCe=z({type:ee("ref/prompt"),name:I()}),HCe=ao.extend({ref:dt([jCe,BCe]),argument:z({name:I(),value:I()}),context:z({arguments:yt(I(),I()).optional()}).optional()}),gy=$n.extend({method:ee("completion/complete"),params:HCe});function W7(t){if(t.params.ref.type!=="ref/prompt")throw new TypeError(`Expected CompleteRequestPrompt, but got ${t.params.ref.type}`)}function K7(t){if(t.params.ref.type!=="ref/resource")throw new TypeError(`Expected CompleteRequestResourceTemplate, but got ${t.params.ref.type}`)}var FCe=Gn.extend({completion:mr({values:Ue(I()).max(100),total:Pt(et().int()),hasMore:Pt(In())})}),qCe=z({uri:I().startsWith("file://"),name:I().optional(),_meta:yt(I(),Rt()).optional()}),zCe=$n.extend({method:ee("roots/list"),params:ao.optional()}),jw=Gn.extend({roots:Ue(qCe)}),YCe=Uo.extend({method:ee("notifications/roots/list_changed"),params:ko.optional()}),eot=dt([ry,Cw,gy,Gw,_y,my,ly,dy,fy,zPe,WPe,md,hy,sy,ay,cy,py]),tot=dt([ny,oy,Mw,YCe,v_]),not=dt([ty,Vw,Bw,Ty,jw,iy,uy,dd]),rot=dt([ry,RCe,$Ce,zCe,sy,ay,cy,py]),oot=dt([ny,oy,mCe,ZPe,FPe,lCe,iCe,v_,VCe]),sot=dt([ty,wPe,FCe,sCe,XPe,VPe,BPe,HPe,Ey,uCe,iy,uy,dd]),Q=class t extends Error{constructor(e,n,r){super(`MCP error ${e}: ${n}`),this.code=e,this.data=r,this.name="McpError"}static fromError(e,n,r){if(e===ce.UrlElicitationRequired&&r){let o=r;if(o.elicitations)return new Nw(o.elicitations,n)}return new t(e,n,r)}},Nw=class extends Q{constructor(e,n=`URL elicitation${e.length>1?"s":""} required`){super(ce.UrlElicitationRequired,n,{elicitations:e})}get elicitations(){return this.data?.elicitations??[]}};function rc(t){return t==="completed"||t==="failed"||t==="cancelled"}var J7=Symbol("Let zodToJsonSchema decide on which parser to use");var Z7={name:void 0,$refStrategy:"root",basePath:["#"],effectStrategy:"input",pipeStrategy:"all",dateStrategy:"format:date-time",mapStrategy:"entries",removeAdditionalStrategy:"passthrough",allowedAdditionalProperties:!0,rejectedAdditionalProperties:!1,definitionPath:"definitions",target:"jsonSchema7",strictUnions:!1,definitions:{},errorMessages:!1,markdownDescription:!1,patternStrategy:"escape",applyRegexFlags:!1,emailStrategy:"format:email",base64Strategy:"contentEncoding:base64",nameStrategy:"ref",openAiAnyTypeName:"OpenAiAnyType"},Q7=t=>typeof t=="string"?{...Z7,name:t}:{...Z7,...t};var X7=t=>{let e=Q7(t),n=e.name!==void 0?[...e.basePath,e.definitionPath,e.name]:e.basePath;return{...e,flags:{hasReferencedOpenAiAnyType:!1},currentPath:n,propertyPath:void 0,seen:new Map(Object.entries(e.definitions).map(([r,o])=>[o._def,{def:o._def,path:[...e.basePath,e.definitionPath,r],jsonSchema:void 0}]))}};function Hw(t,e,n,r){r?.errorMessages&&n&&(t.errorMessage={...t.errorMessage,[e]:n})}function $e(t,e,n,r,o){t[e]=n,Hw(t,e,r,o)}var Sy=(t,e)=>{let n=0;for(;n<t.length&&n<e.length&&t[n]===e[n];n++);return[(t.length-n).toString(),...e.slice(n)].join("/")};function bt(t){if(t.target!=="openAi")return{};let e=[...t.basePath,t.definitionPath,t.openAiAnyTypeName];return t.flags.hasReferencedOpenAiAnyType=!0,{$ref:t.$refStrategy==="relative"?Sy(e,t.currentPath):e.join("/")}}function eee(t,e){let n={type:"array"};return t.type?._def&&t.type?._def?.typeName!==D.ZodAny&&(n.items=fe(t.type._def,{...e,currentPath:[...e.currentPath,"items"]})),t.minLength&&$e(n,"minItems",t.minLength.value,t.minLength.message,e),t.maxLength&&$e(n,"maxItems",t.maxLength.value,t.maxLength.message,e),t.exactLength&&($e(n,"minItems",t.exactLength.value,t.exactLength.message,e),$e(n,"maxItems",t.exactLength.value,t.exactLength.message,e)),n}function tee(t,e){let n={type:"integer",format:"int64"};if(!t.checks)return n;for(let r of t.checks)switch(r.kind){case"min":e.target==="jsonSchema7"?r.inclusive?$e(n,"minimum",r.value,r.message,e):$e(n,"exclusiveMinimum",r.value,r.message,e):(r.inclusive||(n.exclusiveMinimum=!0),$e(n,"minimum",r.value,r.message,e));break;case"max":e.target==="jsonSchema7"?r.inclusive?$e(n,"maximum",r.value,r.message,e):$e(n,"exclusiveMaximum",r.value,r.message,e):(r.inclusive||(n.exclusiveMaximum=!0),$e(n,"maximum",r.value,r.message,e));break;case"multipleOf":$e(n,"multipleOf",r.value,r.message,e);break}return n}function nee(){return{type:"boolean"}}function Ay(t,e){return fe(t.type._def,e)}var ree=(t,e)=>fe(t.innerType._def,e);function Fw(t,e,n){let r=n??e.dateStrategy;if(Array.isArray(r))return{anyOf:r.map((o,s)=>Fw(t,e,o))};switch(r){case"string":case"format:date-time":return{type:"string",format:"date-time"};case"format:date":return{type:"string",format:"date"};case"integer":return WCe(t,e)}}var WCe=(t,e)=>{let n={type:"integer",format:"unix-time"};if(e.target==="openApi3")return n;for(let r of t.checks)switch(r.kind){case"min":$e(n,"minimum",r.value,r.message,e);break;case"max":$e(n,"maximum",r.value,r.message,e);break}return n};function oee(t,e){return{...fe(t.innerType._def,e),default:t.defaultValue()}}function see(t,e){return e.effectStrategy==="input"?fe(t.schema._def,e):bt(e)}function iee(t){return{type:"string",enum:Array.from(t.values)}}var KCe=t=>"type"in t&&t.type==="string"?!1:"allOf"in t;function aee(t,e){let n=[fe(t.left._def,{...e,currentPath:[...e.currentPath,"allOf","0"]}),fe(t.right._def,{...e,currentPath:[...e.currentPath,"allOf","1"]})].filter(s=>!!s),r=e.target==="jsonSchema2019-09"?{unevaluatedProperties:!1}:void 0,o=[];return n.forEach(s=>{if(KCe(s))o.push(...s.allOf),s.unevaluatedProperties===void 0&&(r=void 0);else{let i=s;if("additionalProperties"in s&&s.additionalProperties===!1){let{additionalProperties:a,...c}=s;i=c}else r=void 0;o.push(i)}}),o.length?{allOf:o,...r}:void 0}function cee(t,e){let n=typeof t.value;return n!=="bigint"&&n!=="number"&&n!=="boolean"&&n!=="string"?{type:Array.isArray(t.value)?"array":"object"}:e.target==="openApi3"?{type:n==="bigint"?"integer":n,enum:[t.value]}:{type:n==="bigint"?"integer":n,const:t.value}}var qw,us={cuid:/^[cC][^\s-]{8,}$/,cuid2:/^[0-9a-z]+$/,ulid:/^[0-9A-HJKMNP-TV-Z]{26}$/,email:/^(?!\.)(?!.*\.\.)([a-zA-Z0-9_'+\-\.]*)[a-zA-Z0-9_+-]@([a-zA-Z0-9][a-zA-Z0-9\-]*\.)+[a-zA-Z]{2,}$/,emoji:()=>(qw===void 0&&(qw=RegExp("^(\\p{Extended_Pictographic}|\\p{Emoji_Component})+$","u")),qw),uuid:/^[0-9a-fA-F]{8}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{12}$/,ipv4:/^(?:(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\.){3}(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])$/,ipv4Cidr:/^(?:(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\.){3}(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\/(3[0-2]|[12]?[0-9])$/,ipv6:/^(([a-f0-9]{1,4}:){7}|::([a-f0-9]{1,4}:){0,6}|([a-f0-9]{1,4}:){1}:([a-f0-9]{1,4}:){0,5}|([a-f0-9]{1,4}:){2}:([a-f0-9]{1,4}:){0,4}|([a-f0-9]{1,4}:){3}:([a-f0-9]{1,4}:){0,3}|([a-f0-9]{1,4}:){4}:([a-f0-9]{1,4}:){0,2}|([a-f0-9]{1,4}:){5}:([a-f0-9]{1,4}:){0,1})([a-f0-9]{1,4}|(((25[0-5])|(2[0-4][0-9])|(1[0-9]{2})|([0-9]{1,2}))\.){3}((25[0-5])|(2[0-4][0-9])|(1[0-9]{2})|([0-9]{1,2})))$/,ipv6Cidr:/^(([0-9a-fA-F]{1,4}:){7,7}[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,7}:|([0-9a-fA-F]{1,4}:){1,6}:[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,5}(:[0-9a-fA-F]{1,4}){1,2}|([0-9a-fA-F]{1,4}:){1,4}(:[0-9a-fA-F]{1,4}){1,3}|([0-9a-fA-F]{1,4}:){1,3}(:[0-9a-fA-F]{1,4}){1,4}|([0-9a-fA-F]{1,4}:){1,2}(:[0-9a-fA-F]{1,4}){1,5}|[0-9a-fA-F]{1,4}:((:[0-9a-fA-F]{1,4}){1,6})|:((:[0-9a-fA-F]{1,4}){1,7}|:)|fe80:(:[0-9a-fA-F]{0,4}){0,4}%[0-9a-zA-Z]{1,}|::(ffff(:0{1,4}){0,1}:){0,1}((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])|([0-9a-fA-F]{1,4}:){1,4}:((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9]))\/(12[0-8]|1[01][0-9]|[1-9]?[0-9])$/,base64:/^([0-9a-zA-Z+/]{4})*(([0-9a-zA-Z+/]{2}==)|([0-9a-zA-Z+/]{3}=))?$/,base64url:/^([0-9a-zA-Z-_]{4})*(([0-9a-zA-Z-_]{2}(==)?)|([0-9a-zA-Z-_]{3}(=)?))?$/,nanoid:/^[a-zA-Z0-9_-]{21}$/,jwt:/^[A-Za-z0-9-_]+\.[A-Za-z0-9-_]+\.[A-Za-z0-9-_]*$/};function Ry(t,e){let n={type:"string"};if(t.checks)for(let r of t.checks)switch(r.kind){case"min":$e(n,"minLength",typeof n.minLength=="number"?Math.max(n.minLength,r.value):r.value,r.message,e);break;case"max":$e(n,"maxLength",typeof n.maxLength=="number"?Math.min(n.maxLength,r.value):r.value,r.message,e);break;case"email":switch(e.emailStrategy){case"format:email":ps(n,"email",r.message,e);break;case"format:idn-email":ps(n,"idn-email",r.message,e);break;case"pattern:zod":_r(n,us.email,r.message,e);break}break;case"url":ps(n,"uri",r.message,e);break;case"uuid":ps(n,"uuid",r.message,e);break;case"regex":_r(n,r.regex,r.message,e);break;case"cuid":_r(n,us.cuid,r.message,e);break;case"cuid2":_r(n,us.cuid2,r.message,e);break;case"startsWith":_r(n,RegExp(`^${zw(r.value,e)}`),r.message,e);break;case"endsWith":_r(n,RegExp(`${zw(r.value,e)}$`),r.message,e);break;case"datetime":ps(n,"date-time",r.message,e);break;case"date":ps(n,"date",r.message,e);break;case"time":ps(n,"time",r.message,e);break;case"duration":ps(n,"duration",r.message,e);break;case"length":$e(n,"minLength",typeof n.minLength=="number"?Math.max(n.minLength,r.value):r.value,r.message,e),$e(n,"maxLength",typeof n.maxLength=="number"?Math.min(n.maxLength,r.value):r.value,r.message,e);break;case"includes":{_r(n,RegExp(zw(r.value,e)),r.message,e);break}case"ip":{r.version!=="v6"&&ps(n,"ipv4",r.message,e),r.version!=="v4"&&ps(n,"ipv6",r.message,e);break}case"base64url":_r(n,us.base64url,r.message,e);break;case"jwt":_r(n,us.jwt,r.message,e);break;case"cidr":{r.version!=="v6"&&_r(n,us.ipv4Cidr,r.message,e),r.version!=="v4"&&_r(n,us.ipv6Cidr,r.message,e);break}case"emoji":_r(n,us.emoji(),r.message,e);break;case"ulid":{_r(n,us.ulid,r.message,e);break}case"base64":{switch(e.base64Strategy){case"format:binary":{ps(n,"binary",r.message,e);break}case"contentEncoding:base64":{$e(n,"contentEncoding","base64",r.message,e);break}case"pattern:zod":{_r(n,us.base64,r.message,e);break}}break}case"nanoid":_r(n,us.nanoid,r.message,e);case"toLowerCase":case"toUpperCase":case"trim":break;default:}return n}function zw(t,e){return e.patternStrategy==="escape"?JCe(t):t}var ZCe=new Set("ABCDEFGHIJKLMNOPQRSTUVXYZabcdefghijklmnopqrstuvxyz0123456789");function JCe(t){let e="";for(let n=0;n<t.length;n++)ZCe.has(t[n])||(e+="\\"),e+=t[n];return e}function ps(t,e,n,r){t.format||t.anyOf?.some(o=>o.format)?(t.anyOf||(t.anyOf=[]),t.format&&(t.anyOf.push({format:t.format,...t.errorMessage&&r.errorMessages&&{errorMessage:{format:t.errorMessage.format}}}),delete t.format,t.errorMessage&&(delete t.errorMessage.format,Object.keys(t.errorMessage).length===0&&delete t.errorMessage)),t.anyOf.push({format:e,...n&&r.errorMessages&&{errorMessage:{format:n}}})):$e(t,"format",e,n,r)}function _r(t,e,n,r){t.pattern||t.allOf?.some(o=>o.pattern)?(t.allOf||(t.allOf=[]),t.pattern&&(t.allOf.push({pattern:t.pattern,...t.errorMessage&&r.errorMessages&&{errorMessage:{pattern:t.errorMessage.pattern}}}),delete t.pattern,t.errorMessage&&(delete t.errorMessage.pattern,Object.keys(t.errorMessage).length===0&&delete t.errorMessage)),t.allOf.push({pattern:uee(e,r),...n&&r.errorMessages&&{errorMessage:{pattern:n}}})):$e(t,"pattern",uee(e,r),n,r)}function uee(t,e){if(!e.applyRegexFlags||!t.flags)return t.source;let n={i:t.flags.includes("i"),m:t.flags.includes("m"),s:t.flags.includes("s")},r=n.i?t.source.toLowerCase():t.source,o="",s=!1,i=!1,a=!1;for(let c=0;c<r.length;c++){if(s){o+=r[c],s=!1;continue}if(n.i){if(i){if(r[c].match(/[a-z]/)){a?(o+=r[c],o+=`${r[c-2]}-${r[c]}`.toUpperCase(),a=!1):r[c+1]==="-"&&r[c+2]?.match(/[a-z]/)?(o+=r[c],a=!0):o+=`${r[c]}${r[c].toUpperCase()}`;continue}}else if(r[c].match(/[a-z]/)){o+=`[${r[c]}${r[c].toUpperCase()}]`;continue}}if(n.m){if(r[c]==="^"){o+=`(^|(?<=[\r
]))`;continue}else if(r[c]==="$"){o+=`($|(?=[\r
]))`;continue}}if(n.s&&r[c]==="."){o+=i?`${r[c]}\r
`:`[${r[c]}\r
]`;continue}o+=r[c],r[c]==="\\"?s=!0:i&&r[c]==="]"?i=!1:!i&&r[c]==="["&&(i=!0)}try{new RegExp(o)}catch{return console.warn(`Could not convert regex pattern at ${e.currentPath.join("/")} to a flag-independent form! Falling back to the flag-ignorant source`),t.source}return o}function yy(t,e){if(e.target==="openAi"&&console.warn("Warning: OpenAI may not support records in schemas! Try an array of key-value pairs instead."),e.target==="openApi3"&&t.keyType?._def.typeName===D.ZodEnum)return{type:"object",required:t.keyType._def.values,properties:t.keyType._def.values.reduce((r,o)=>({...r,[o]:fe(t.valueType._def,{...e,currentPath:[...e.currentPath,"properties",o]})??bt(e)}),{}),additionalProperties:e.rejectedAdditionalProperties};let n={type:"object",additionalProperties:fe(t.valueType._def,{...e,currentPath:[...e.currentPath,"additionalProperties"]})??e.allowedAdditionalProperties};if(e.target==="openApi3")return n;if(t.keyType?._def.typeName===D.ZodString&&t.keyType._def.checks?.length){let{type:r,...o}=Ry(t.keyType._def,e);return{...n,propertyNames:o}}else{if(t.keyType?._def.typeName===D.ZodEnum)return{...n,propertyNames:{enum:t.keyType._def.values}};if(t.keyType?._def.typeName===D.ZodBranded&&t.keyType._def.type._def.typeName===D.ZodString&&t.keyType._def.type._def.checks?.length){let{type:r,...o}=Ay(t.keyType._def,e);return{...n,propertyNames:o}}}return n}function pee(t,e){if(e.mapStrategy==="record")return yy(t,e);let n=fe(t.keyType._def,{...e,currentPath:[...e.currentPath,"items","items","0"]})||bt(e),r=fe(t.valueType._def,{...e,currentPath:[...e.currentPath,"items","items","1"]})||bt(e);return{type:"array",maxItems:125,items:{type:"array",items:[n,r],minItems:2,maxItems:2}}}function lee(t){let e=t.values,r=Object.keys(t.values).filter(s=>typeof e[e[s]]!="number").map(s=>e[s]),o=Array.from(new Set(r.map(s=>typeof s)));return{type:o.length===1?o[0]==="string"?"string":"number":["string","number"],enum:r}}function dee(t){return t.target==="openAi"?void 0:{not:bt({...t,currentPath:[...t.currentPath,"not"]})}}function fee(t){return t.target==="openApi3"?{enum:["null"],nullable:!0}:{type:"null"}}var C_={ZodString:"string",ZodNumber:"number",ZodBigInt:"integer",ZodBoolean:"boolean",ZodNull:"null"};function _ee(t,e){if(e.target==="openApi3")return mee(t,e);let n=t.options instanceof Map?Array.from(t.options.values()):t.options;if(n.every(r=>r._def.typeName in C_&&(!r._def.checks||!r._def.checks.length))){let r=n.reduce((o,s)=>{let i=C_[s._def.typeName];return i&&!o.includes(i)?[...o,i]:o},[]);return{type:r.length>1?r:r[0]}}else if(n.every(r=>r._def.typeName==="ZodLiteral"&&!r.description)){let r=n.reduce((o,s)=>{let i=typeof s._def.value;switch(i){case"string":case"number":case"boolean":return[...o,i];case"bigint":return[...o,"integer"];case"object":if(s._def.value===null)return[...o,"null"];case"symbol":case"undefined":case"function":default:return o}},[]);if(r.length===n.length){let o=r.filter((s,i,a)=>a.indexOf(s)===i);return{type:o.length>1?o:o[0],enum:n.reduce((s,i)=>s.includes(i._def.value)?s:[...s,i._def.value],[])}}}else if(n.every(r=>r._def.typeName==="ZodEnum"))return{type:"string",enum:n.reduce((r,o)=>[...r,...o._def.values.filter(s=>!r.includes(s))],[])};return mee(t,e)}var mee=(t,e)=>{let n=(t.options instanceof Map?Array.from(t.options.values()):t.options).map((r,o)=>fe(r._def,{...e,currentPath:[...e.currentPath,"anyOf",`${o}`]})).filter(r=>!!r&&(!e.strictUnions||typeof r=="object"&&Object.keys(r).length>0));return n.length?{anyOf:n}:void 0};function hee(t,e){if(["ZodString","ZodNumber","ZodBigInt","ZodBoolean","ZodNull"].includes(t.innerType._def.typeName)&&(!t.innerType._def.checks||!t.innerType._def.checks.length))return e.target==="openApi3"?{type:C_[t.innerType._def.typeName],nullable:!0}:{type:[C_[t.innerType._def.typeName],"null"]};if(e.target==="openApi3"){let r=fe(t.innerType._def,{...e,currentPath:[...e.currentPath]});return r&&"$ref"in r?{allOf:[r],nullable:!0}:r&&{...r,nullable:!0}}let n=fe(t.innerType._def,{...e,currentPath:[...e.currentPath,"anyOf","0"]});return n&&{anyOf:[n,{type:"null"}]}}function Eee(t,e){let n={type:"number"};if(!t.checks)return n;for(let r of t.checks)switch(r.kind){case"int":n.type="integer",Hw(n,"type",r.message,e);break;case"min":e.target==="jsonSchema7"?r.inclusive?$e(n,"minimum",r.value,r.message,e):$e(n,"exclusiveMinimum",r.value,r.message,e):(r.inclusive||(n.exclusiveMinimum=!0),$e(n,"minimum",r.value,r.message,e));break;case"max":e.target==="jsonSchema7"?r.inclusive?$e(n,"maximum",r.value,r.message,e):$e(n,"exclusiveMaximum",r.value,r.message,e):(r.inclusive||(n.exclusiveMaximum=!0),$e(n,"maximum",r.value,r.message,e));break;case"multipleOf":$e(n,"multipleOf",r.value,r.message,e);break}return n}function Tee(t,e){let n=e.target==="openAi",r={type:"object",properties:{}},o=[],s=t.shape();for(let a in s){let c=s[a];if(c===void 0||c._def===void 0)continue;let u=XCe(c);u&&n&&(c._def.typeName==="ZodOptional"&&(c=c._def.innerType),c.isNullable()||(c=c.nullable()),u=!1);let p=fe(c._def,{...e,currentPath:[...e.currentPath,"properties",a],propertyPath:[...e.currentPath,"properties",a]});p!==void 0&&(r.properties[a]=p,u||o.push(a))}o.length&&(r.required=o);let i=QCe(t,e);return i!==void 0&&(r.additionalProperties=i),r}function QCe(t,e){if(t.catchall._def.typeName!=="ZodNever")return fe(t.catchall._def,{...e,currentPath:[...e.currentPath,"additionalProperties"]});switch(t.unknownKeys){case"passthrough":return e.allowedAdditionalProperties;case"strict":return e.rejectedAdditionalProperties;case"strip":return e.removeAdditionalStrategy==="strict"?e.allowedAdditionalProperties:e.rejectedAdditionalProperties}}function XCe(t){try{return t.isOptional()}catch{return!0}}var gee=(t,e)=>{if(e.currentPath.toString()===e.propertyPath?.toString())return fe(t.innerType._def,e);let n=fe(t.innerType._def,{...e,currentPath:[...e.currentPath,"anyOf","1"]});return n?{anyOf:[{not:bt(e)},n]}:bt(e)};var See=(t,e)=>{if(e.pipeStrategy==="input")return fe(t.in._def,e);if(e.pipeStrategy==="output")return fe(t.out._def,e);let n=fe(t.in._def,{...e,currentPath:[...e.currentPath,"allOf","0"]}),r=fe(t.out._def,{...e,currentPath:[...e.currentPath,"allOf",n?"1":"0"]});return{allOf:[n,r].filter(o=>o!==void 0)}};function Aee(t,e){return fe(t.type._def,e)}function Ree(t,e){let r={type:"array",uniqueItems:!0,items:fe(t.valueType._def,{...e,currentPath:[...e.currentPath,"items"]})};return t.minSize&&$e(r,"minItems",t.minSize.value,t.minSize.message,e),t.maxSize&&$e(r,"maxItems",t.maxSize.value,t.maxSize.message,e),r}function yee(t,e){return t.rest?{type:"array",minItems:t.items.length,items:t.items.map((n,r)=>fe(n._def,{...e,currentPath:[...e.currentPath,"items",`${r}`]})).reduce((n,r)=>r===void 0?n:[...n,r],[]),additionalItems:fe(t.rest._def,{...e,currentPath:[...e.currentPath,"additionalItems"]})}:{type:"array",minItems:t.items.length,maxItems:t.items.length,items:t.items.map((n,r)=>fe(n._def,{...e,currentPath:[...e.currentPath,"items",`${r}`]})).reduce((n,r)=>r===void 0?n:[...n,r],[])}}function bee(t){return{not:bt(t)}}function Nee(t){return bt(t)}var Oee=(t,e)=>fe(t.innerType._def,e);var Iee=(t,e,n)=>{switch(e){case D.ZodString:return Ry(t,n);case D.ZodNumber:return Eee(t,n);case D.ZodObject:return Tee(t,n);case D.ZodBigInt:return tee(t,n);case D.ZodBoolean:return nee();case D.ZodDate:return Fw(t,n);case D.ZodUndefined:return bee(n);case D.ZodNull:return fee(n);case D.ZodArray:return eee(t,n);case D.ZodUnion:case D.ZodDiscriminatedUnion:return _ee(t,n);case D.ZodIntersection:return aee(t,n);case D.ZodTuple:return yee(t,n);case D.ZodRecord:return yy(t,n);case D.ZodLiteral:return cee(t,n);case D.ZodEnum:return iee(t);case D.ZodNativeEnum:return lee(t);case D.ZodNullable:return hee(t,n);case D.ZodOptional:return gee(t,n);case D.ZodMap:return pee(t,n);case D.ZodSet:return Ree(t,n);case D.ZodLazy:return()=>t.getter()._def;case D.ZodPromise:return Aee(t,n);case D.ZodNaN:case D.ZodNever:return dee(n);case D.ZodEffects:return see(t,n);case D.ZodAny:return bt(n);case D.ZodUnknown:return Nee(n);case D.ZodDefault:return oee(t,n);case D.ZodBranded:return Ay(t,n);case D.ZodReadonly:return Oee(t,n);case D.ZodCatch:return ree(t,n);case D.ZodPipeline:return See(t,n);case D.ZodFunction:case D.ZodVoid:case D.ZodSymbol:return;default:return(r=>{})(e)}};function fe(t,e,n=!1){let r=e.seen.get(t);if(e.override){let a=e.override?.(t,e,r,n);if(a!==J7)return a}if(r&&!n){let a=eMe(r,e);if(a!==void 0)return a}let o={def:t,path:e.currentPath,jsonSchema:void 0};e.seen.set(t,o);let s=Iee(t,t.typeName,e),i=typeof s=="function"?fe(s(),e):s;if(i&&tMe(t,e,i),e.postProcess){let a=e.postProcess(i,t,e);return o.jsonSchema=i,a}return o.jsonSchema=i,i}var eMe=(t,e)=>{switch(e.$refStrategy){case"root":return{$ref:t.path.join("/")};case"relative":return{$ref:Sy(e.currentPath,t.path)};case"none":case"seen":return t.path.length<e.currentPath.length&&t.path.every((n,r)=>e.currentPath[r]===n)?(console.warn(`Recursive reference detected at ${e.currentPath.join("/")}! Defaulting to any`),bt(e)):e.$refStrategy==="seen"?bt(e):void 0}},tMe=(t,e,n)=>(t.description&&(n.description=t.description,e.markdownDescription&&(n.markdownDescription=t.description)),n);var Yw=(t,e)=>{let n=X7(e),r=typeof e=="object"&&e.definitions?Object.entries(e.definitions).reduce((c,[u,p])=>({...c,[u]:fe(p._def,{...n,currentPath:[...n.basePath,n.definitionPath,u]},!0)??bt(n)}),{}):void 0,o=typeof e=="string"?e:e?.nameStrategy==="title"?void 0:e?.name,s=fe(t._def,o===void 0?n:{...n,currentPath:[...n.basePath,n.definitionPath,o]},!1)??bt(n),i=typeof e=="object"&&e.name!==void 0&&e.nameStrategy==="title"?e.name:void 0;i!==void 0&&(s.title=i),n.flags.hasReferencedOpenAiAnyType&&(r||(r={}),r[n.openAiAnyTypeName]||(r[n.openAiAnyTypeName]={type:["string","number","integer","boolean","array","null"],items:{$ref:n.$refStrategy==="relative"?"1":[...n.basePath,n.definitionPath,n.openAiAnyTypeName].join("/")}}));let a=o===void 0?r?{...s,[n.definitionPath]:r}:s:{$ref:[...n.$refStrategy==="relative"?[]:n.basePath,n.definitionPath,o].join("/"),[n.definitionPath]:{...r,[o]:s}};return n.target==="jsonSchema7"?a.$schema="http://json-schema.org/draft-07/schema#":(n.target==="jsonSchema2019-09"||n.target==="openAi")&&(a.$schema="https://json-schema.org/draft/2019-09/schema#"),n.target==="openAi"&&("anyOf"in a||"oneOf"in a||"allOf"in a||"type"in a&&Array.isArray(a.type))&&console.warn("Warning: OpenAI may not support schemas with unions as roots! Try wrapping it in an object property."),a};function nMe(t){return!t||t==="jsonSchema7"||t==="draft-7"?"draft-7":t==="jsonSchema2019-09"||t==="draft-2020-12"?"draft-2020-12":"draft-7"}function Ww(t,e){return Do(t)?mw(t,{target:nMe(e?.target),io:e?.pipeStrategy??"input"}):Yw(t,{strictUnions:e?.strictUnions??!0,pipeStrategy:e?.pipeStrategy??"input"})}function Kw(t){let n=tc(t)?.method;if(!n)throw new Error("Schema is missing a method literal");let r=KR(n);if(typeof r!="string")throw new Error("Schema method literal must be a string");return r}function Zw(t,e){let n=ec(t,e);if(!n.success)throw n.error;return n.data}var rMe=6e4,by=class{constructor(e){this._options=e,this._requestMessageId=0,this._requestHandlers=new Map,this._requestHandlerAbortControllers=new Map,this._notificationHandlers=new Map,this._responseHandlers=new Map,this._progressHandlers=new Map,this._timeoutInfo=new Map,this._pendingDebouncedNotifications=new Set,this._taskProgressTokens=new Map,this._requestResolvers=new Map,this.setNotificationHandler(ny,n=>{this._oncancel(n)}),this.setNotificationHandler(oy,n=>{this._onprogress(n)}),this.setRequestHandler(ry,n=>({})),this._taskStore=e?.taskStore,this._taskMessageQueue=e?.taskMessageQueue,this._taskStore&&(this.setRequestHandler(sy,async(n,r)=>{let o=await this._taskStore.getTask(n.params.taskId,r.sessionId);if(!o)throw new Q(ce.InvalidParams,"Failed to retrieve task: Task not found");return{...o}}),this.setRequestHandler(ay,async(n,r)=>{let o=async()=>{let s=n.params.taskId;if(this._taskMessageQueue){let a;for(;a=await this._taskMessageQueue.dequeue(s,r.sessionId);){if(a.type==="response"||a.type==="error"){let c=a.message,u=c.id,p=this._requestResolvers.get(u);if(p)if(this._requestResolvers.delete(u),a.type==="response")p(c);else{let l=c,d=new Q(l.error.code,l.error.message,l.error.data);p(d)}else{let l=a.type==="response"?"Response":"Error";this._onerror(new Error(`${l} handler missing for request ${u}`))}continue}await this._transport?.send(a.message,{relatedRequestId:r.requestId})}}let i=await this._taskStore.getTask(s,r.sessionId);if(!i)throw new Q(ce.InvalidParams,`Task not found: ${s}`);if(!rc(i.status))return await this._waitForTaskUpdate(s,r.signal),await o();if(rc(i.status)){let a=await this._taskStore.getTaskResult(s,r.sessionId);return this._clearTaskQueue(s),{...a,_meta:{...a._meta,[nc]:{taskId:s}}}}return await o()};return await o()}),this.setRequestHandler(cy,async(n,r)=>{try{let{tasks:o,nextCursor:s}=await this._taskStore.listTasks(n.params?.cursor,r.sessionId);return{tasks:o,nextCursor:s,_meta:{}}}catch(o){throw new Q(ce.InvalidParams,`Failed to list tasks: ${o instanceof Error?o.message:String(o)}`)}}),this.setRequestHandler(py,async(n,r)=>{try{let o=await this._taskStore.getTask(n.params.taskId,r.sessionId);if(!o)throw new Q(ce.InvalidParams,`Task not found: ${n.params.taskId}`);if(rc(o.status))throw new Q(ce.InvalidParams,`Cannot cancel task in terminal status: ${o.status}`);await this._taskStore.updateTaskStatus(n.params.taskId,"cancelled","Client cancelled task execution.",r.sessionId),this._clearTaskQueue(n.params.taskId);let s=await this._taskStore.getTask(n.params.taskId,r.sessionId);if(!s)throw new Q(ce.InvalidParams,`Task not found after cancellation: ${n.params.taskId}`);return{_meta:{},...s}}catch(o){throw o instanceof Q?o:new Q(ce.InvalidRequest,`Failed to cancel task: ${o instanceof Error?o.message:String(o)}`)}}))}async _oncancel(e){if(!e.params.requestId)return;this._requestHandlerAbortControllers.get(e.params.requestId)?.abort(e.params.reason)}_setupTimeout(e,n,r,o,s=!1){this._timeoutInfo.set(e,{timeoutId:setTimeout(o,n),startTime:Date.now(),timeout:n,maxTotalTimeout:r,resetTimeoutOnProgress:s,onTimeout:o})}_resetTimeout(e){let n=this._timeoutInfo.get(e);if(!n)return!1;let r=Date.now()-n.startTime;if(n.maxTotalTimeout&&r>=n.maxTotalTimeout)throw this._timeoutInfo.delete(e),Q.fromError(ce.RequestTimeout,"Maximum total timeout exceeded",{maxTotalTimeout:n.maxTotalTimeout,totalElapsed:r});return clearTimeout(n.timeoutId),n.timeoutId=setTimeout(n.onTimeout,n.timeout),!0}_cleanupTimeout(e){let n=this._timeoutInfo.get(e);n&&(clearTimeout(n.timeoutId),this._timeoutInfo.delete(e))}async connect(e){this._transport=e;let n=this.transport?.onclose;this._transport.onclose=()=>{n?.(),this._onclose()};let r=this.transport?.onerror;this._transport.onerror=s=>{r?.(s),this._onerror(s)};let o=this._transport?.onmessage;this._transport.onmessage=(s,i)=>{o?.(s,i),y_(s)||G7(s)?this._onresponse(s):vw(s)?this._onrequest(s,i):$7(s)?this._onnotification(s):this._onerror(new Error(`Unknown message type: ${JSON.stringify(s)}`))},await this._transport.start()}_onclose(){let e=this._responseHandlers;this._responseHandlers=new Map,this._progressHandlers.clear(),this._taskProgressTokens.clear(),this._pendingDebouncedNotifications.clear();let n=Q.fromError(ce.ConnectionClosed,"Connection closed");this._transport=void 0,this.onclose?.();for(let r of e.values())r(n)}_onerror(e){this.onerror?.(e)}_onnotification(e){let n=this._notificationHandlers.get(e.method)??this.fallbackNotificationHandler;n!==void 0&&Promise.resolve().then(()=>n(e)).catch(r=>this._onerror(new Error(`Uncaught error in notification handler: ${r}`)))}_onrequest(e,n){let r=this._requestHandlers.get(e.method)??this.fallbackRequestHandler,o=this._transport,s=e.params?._meta?.[nc]?.taskId;if(r===void 0){let p={jsonrpc:"2.0",id:e.id,error:{code:ce.MethodNotFound,message:"Method not found"}};s&&this._taskMessageQueue?this._enqueueTaskMessage(s,{type:"error",message:p,timestamp:Date.now()},o?.sessionId).catch(l=>this._onerror(new Error(`Failed to enqueue error response: ${l}`))):o?.send(p).catch(l=>this._onerror(new Error(`Failed to send an error response: ${l}`)));return}let i=new AbortController;this._requestHandlerAbortControllers.set(e.id,i);let a=D7(e.params)?e.params.task:void 0,c=this._taskStore?this.requestTaskStore(e,o?.sessionId):void 0,u={signal:i.signal,sessionId:o?.sessionId,_meta:e.params?._meta,sendNotification:async p=>{let l={relatedRequestId:e.id};s&&(l.relatedTask={taskId:s}),await this.notification(p,l)},sendRequest:async(p,l,d)=>{let f={...d,relatedRequestId:e.id};s&&!f.relatedTask&&(f.relatedTask={taskId:s});let m=f.relatedTask?.taskId??s;return m&&c&&await c.updateTaskStatus(m,"input_required"),await this.request(p,l,f)},authInfo:n?.authInfo,requestId:e.id,requestInfo:n?.requestInfo,taskId:s,taskStore:c,taskRequestedTtl:a?.ttl,closeSSEStream:n?.closeSSEStream,closeStandaloneSSEStream:n?.closeStandaloneSSEStream};Promise.resolve().then(()=>{a&&this.assertTaskHandlerCapability(e.method)}).then(()=>r(e,u)).then(async p=>{if(i.signal.aborted)return;let l={result:p,jsonrpc:"2.0",id:e.id};s&&this._taskMessageQueue?await this._enqueueTaskMessage(s,{type:"response",message:l,timestamp:Date.now()},o?.sessionId):await o?.send(l)},async p=>{if(i.signal.aborted)return;let l={jsonrpc:"2.0",id:e.id,error:{code:Number.isSafeInteger(p.code)?p.code:ce.InternalError,message:p.message??"Internal error",...p.data!==void 0&&{data:p.data}}};s&&this._taskMessageQueue?await this._enqueueTaskMessage(s,{type:"error",message:l,timestamp:Date.now()},o?.sessionId):await o?.send(l)}).catch(p=>this._onerror(new Error(`Failed to send response: ${p}`))).finally(()=>{this._requestHandlerAbortControllers.delete(e.id)})}_onprogress(e){let{progressToken:n,...r}=e.params,o=Number(n),s=this._progressHandlers.get(o);if(!s){this._onerror(new Error(`Received a progress notification for an unknown token: ${JSON.stringify(e)}`));return}let i=this._responseHandlers.get(o),a=this._timeoutInfo.get(o);if(a&&i&&a.resetTimeoutOnProgress)try{this._resetTimeout(o)}catch(c){this._responseHandlers.delete(o),this._progressHandlers.delete(o),this._cleanupTimeout(o),i(c);return}s(r)}_onresponse(e){let n=Number(e.id),r=this._requestResolvers.get(n);if(r){if(this._requestResolvers.delete(n),y_(e))r(e);else{let i=new Q(e.error.code,e.error.message,e.error.data);r(i)}return}let o=this._responseHandlers.get(n);if(o===void 0){this._onerror(new Error(`Received a response for an unknown message ID: ${JSON.stringify(e)}`));return}this._responseHandlers.delete(n),this._cleanupTimeout(n);let s=!1;if(y_(e)&&e.result&&typeof e.result=="object"){let i=e.result;if(i.task&&typeof i.task=="object"){let a=i.task;typeof a.taskId=="string"&&(s=!0,this._taskProgressTokens.set(a.taskId,n))}}if(s||this._progressHandlers.delete(n),y_(e))o(e);else{let i=Q.fromError(e.error.code,e.error.message,e.error.data);o(i)}}get transport(){return this._transport}async close(){await this._transport?.close()}async*requestStream(e,n,r){let{task:o}=r??{};if(!o){try{yield{type:"result",result:await this.request(e,n,r)}}catch(i){yield{type:"error",error:i instanceof Q?i:new Q(ce.InternalError,String(i))}}return}let s;try{let i=await this.request(e,dd,r);if(i.task)s=i.task.taskId,yield{type:"taskCreated",task:i.task};else throw new Q(ce.InternalError,"Task creation did not return a task");for(;;){let a=await this.getTask({taskId:s},r);if(yield{type:"taskStatus",task:a},rc(a.status)){a.status==="completed"?yield{type:"result",result:await this.getTaskResult({taskId:s},n,r)}:a.status==="failed"?yield{type:"error",error:new Q(ce.InternalError,`Task ${s} failed`)}:a.status==="cancelled"&&(yield{type:"error",error:new Q(ce.InternalError,`Task ${s} was cancelled`)});return}if(a.status==="input_required"){yield{type:"result",result:await this.getTaskResult({taskId:s},n,r)};return}let c=a.pollInterval??this._options?.defaultTaskPollInterval??1e3;await new Promise(u=>setTimeout(u,c)),r?.signal?.throwIfAborted()}}catch(i){yield{type:"error",error:i instanceof Q?i:new Q(ce.InternalError,String(i))}}}request(e,n,r){let{relatedRequestId:o,resumptionToken:s,onresumptiontoken:i,task:a,relatedTask:c}=r??{};return new Promise((u,p)=>{let l=R=>{p(R)};if(!this._transport){l(new Error("Not connected"));return}if(this._options?.enforceStrictCapabilities===!0)try{this.assertCapabilityForMethod(e.method),a&&this.assertTaskCapability(e.method)}catch(R){l(R);return}r?.signal?.throwIfAborted();let d=this._requestMessageId++,f={...e,jsonrpc:"2.0",id:d};r?.onprogress&&(this._progressHandlers.set(d,r.onprogress),f.params={...e.params,_meta:{...e.params?._meta||{},progressToken:d}}),a&&(f.params={...f.params,task:a}),c&&(f.params={...f.params,_meta:{...f.params?._meta||{},[nc]:c}});let m=R=>{this._responseHandlers.delete(d),this._progressHandlers.delete(d),this._cleanupTimeout(d),this._transport?.send({jsonrpc:"2.0",method:"notifications/cancelled",params:{requestId:d,reason:String(R)}},{relatedRequestId:o,resumptionToken:s,onresumptiontoken:i}).catch(O=>this._onerror(new Error(`Failed to send cancellation: ${O}`)));let y=R instanceof Q?R:new Q(ce.RequestTimeout,String(R));p(y)};this._responseHandlers.set(d,R=>{if(!r?.signal?.aborted){if(R instanceof Error)return p(R);try{let y=ec(n,R.result);y.success?u(y.data):p(y.error)}catch(y){p(y)}}}),r?.signal?.addEventListener("abort",()=>{m(r?.signal?.reason)});let h=r?.timeout??rMe,E=()=>m(Q.fromError(ce.RequestTimeout,"Request timed out",{timeout:h}));this._setupTimeout(d,h,r?.maxTotalTimeout,E,r?.resetTimeoutOnProgress??!1);let A=c?.taskId;if(A){let R=y=>{let O=this._responseHandlers.get(d);O?O(y):this._onerror(new Error(`Response handler missing for side-channeled request ${d}`))};this._requestResolvers.set(d,R),this._enqueueTaskMessage(A,{type:"request",message:f,timestamp:Date.now()}).catch(y=>{this._cleanupTimeout(d),p(y)})}else this._transport.send(f,{relatedRequestId:o,resumptionToken:s,onresumptiontoken:i}).catch(R=>{this._cleanupTimeout(d),p(R)})})}async getTask(e,n){return this.request({method:"tasks/get",params:e},iy,n)}async getTaskResult(e,n,r){return this.request({method:"tasks/result",params:e},n,r)}async listTasks(e,n){return this.request({method:"tasks/list",params:e},uy,n)}async cancelTask(e,n){return this.request({method:"tasks/cancel",params:e},j7,n)}async notification(e,n){if(!this._transport)throw new Error("Not connected");this.assertNotificationCapability(e.method);let r=n?.relatedTask?.taskId;if(r){let a={...e,jsonrpc:"2.0",params:{...e.params,_meta:{...e.params?._meta||{},[nc]:n.relatedTask}}};await this._enqueueTaskMessage(r,{type:"notification",message:a,timestamp:Date.now()});return}if((this._options?.debouncedNotificationMethods??[]).includes(e.method)&&!e.params&&!n?.relatedRequestId&&!n?.relatedTask){if(this._pendingDebouncedNotifications.has(e.method))return;this._pendingDebouncedNotifications.add(e.method),Promise.resolve().then(()=>{if(this._pendingDebouncedNotifications.delete(e.method),!this._transport)return;let a={...e,jsonrpc:"2.0"};n?.relatedTask&&(a={...a,params:{...a.params,_meta:{...a.params?._meta||{},[nc]:n.relatedTask}}}),this._transport?.send(a,n).catch(c=>this._onerror(c))});return}let i={...e,jsonrpc:"2.0"};n?.relatedTask&&(i={...i,params:{...i.params,_meta:{...i.params?._meta||{},[nc]:n.relatedTask}}}),await this._transport.send(i,n)}setRequestHandler(e,n){let r=Kw(e);this.assertRequestHandlerCapability(r),this._requestHandlers.set(r,(o,s)=>{let i=Zw(e,o);return Promise.resolve(n(i,s))})}removeRequestHandler(e){this._requestHandlers.delete(e)}assertCanSetRequestHandler(e){if(this._requestHandlers.has(e))throw new Error(`A request handler for ${e} already exists, which would be overridden`)}setNotificationHandler(e,n){let r=Kw(e);this._notificationHandlers.set(r,o=>{let s=Zw(e,o);return Promise.resolve(n(s))})}removeNotificationHandler(e){this._notificationHandlers.delete(e)}_cleanupTaskProgressHandler(e){let n=this._taskProgressTokens.get(e);n!==void 0&&(this._progressHandlers.delete(n),this._taskProgressTokens.delete(e))}async _enqueueTaskMessage(e,n,r){if(!this._taskStore||!this._taskMessageQueue)throw new Error("Cannot enqueue task message: taskStore and taskMessageQueue are not configured");let o=this._options?.maxTaskQueueSize;await this._taskMessageQueue.enqueue(e,n,r,o)}async _clearTaskQueue(e,n){if(this._taskMessageQueue){let r=await this._taskMessageQueue.dequeueAll(e,n);for(let o of r)if(o.type==="request"&&vw(o.message)){let s=o.message.id,i=this._requestResolvers.get(s);i?(i(new Q(ce.InternalError,"Task cancelled or completed")),this._requestResolvers.delete(s)):this._onerror(new Error(`Resolver missing for request ${s} during task ${e} cleanup`))}}}async _waitForTaskUpdate(e,n){let r=this._options?.defaultTaskPollInterval??1e3;try{let o=await this._taskStore?.getTask(e);o?.pollInterval&&(r=o.pollInterval)}catch{}return new Promise((o,s)=>{if(n.aborted){s(new Q(ce.InvalidRequest,"Request cancelled"));return}let i=setTimeout(o,r);n.addEventListener("abort",()=>{clearTimeout(i),s(new Q(ce.InvalidRequest,"Request cancelled"))},{once:!0})})}requestTaskStore(e,n){let r=this._taskStore;if(!r)throw new Error("No task store configured");return{createTask:async o=>{if(!e)throw new Error("No request provided");return await r.createTask(o,e.id,{method:e.method,params:e.params},n)},getTask:async o=>{let s=await r.getTask(o,n);if(!s)throw new Q(ce.InvalidParams,"Failed to retrieve task: Task not found");return s},storeTaskResult:async(o,s,i)=>{await r.storeTaskResult(o,s,i,n);let a=await r.getTask(o,n);if(a){let c=v_.parse({method:"notifications/tasks/status",params:a});await this.notification(c),rc(a.status)&&this._cleanupTaskProgressHandler(o)}},getTaskResult:o=>r.getTaskResult(o,n),updateTaskStatus:async(o,s,i)=>{let a=await r.getTask(o,n);if(!a)throw new Q(ce.InvalidParams,`Task "${o}" not found - it may have been cleaned up`);if(rc(a.status))throw new Q(ce.InvalidParams,`Cannot update task "${o}" from terminal status "${a.status}" to "${s}". Terminal states (completed, failed, cancelled) cannot transition to other states.`);await r.updateTaskStatus(o,s,i,n);let c=await r.getTask(o,n);if(c){let u=v_.parse({method:"notifications/tasks/status",params:c});await this.notification(u),rc(c.status)&&this._cleanupTaskProgressHandler(o)}},listTasks:o=>r.listTasks(o,n)}}};function vee(t){return t!==null&&typeof t=="object"&&!Array.isArray(t)}function xee(t,e){let n={...t};for(let r in e){let o=r,s=e[o];if(s===void 0)continue;let i=n[o];vee(i)&&vee(s)?n[o]={...i,...s}:n[o]=s}return n}var _re=k(DL(),1),hre=k(mre(),1);function Yke(){let t=new _re.default({strict:!1,validateFormats:!0,validateSchema:!1,allErrors:!0});return(0,hre.default)(t),t}var ab=class{constructor(e){this._ajv=e??Yke()}getValidator(e){let n="$id"in e&&typeof e.$id=="string"?this._ajv.getSchema(e.$id)??this._ajv.compile(e):this._ajv.compile(e);return r=>n(r)?{valid:!0,data:r,errorMessage:void 0}:{valid:!1,data:void 0,errorMessage:this._ajv.errorsText(n.errors)}}};var cb=class{constructor(e){this._server=e}requestStream(e,n,r){return this._server.requestStream(e,n,r)}async getTask(e,n){return this._server.getTask({taskId:e},n)}async getTaskResult(e,n,r){return this._server.getTaskResult({taskId:e},n,r)}async listTasks(e,n){return this._server.listTasks(e?{cursor:e}:void 0,n)}async cancelTask(e,n){return this._server.cancelTask({taskId:e},n)}};function Ere(t,e,n){if(!t)throw new Error(`${n} does not support task creation (required for ${e})`);switch(e){case"tools/call":if(!t.tools?.call)throw new Error(`${n} does not support task creation for tools/call (required for ${e})`);break;default:break}}function Tre(t,e,n){if(!t)throw new Error(`${n} does not support task creation (required for ${e})`);switch(e){case"sampling/createMessage":if(!t.sampling?.createMessage)throw new Error(`${n} does not support task creation for sampling/createMessage (required for ${e})`);break;case"elicitation/create":if(!t.elicitation?.create)throw new Error(`${n} does not support task creation for elicitation/create (required for ${e})`);break;default:break}}var ub=class extends by{constructor(e,n){super(n),this._serverInfo=e,this._loggingLevels=new Map,this.LOG_LEVEL_SEVERITY=new Map(P_.options.map((r,o)=>[r,o])),this.isMessageIgnored=(r,o)=>{let s=this._loggingLevels.get(o);return s?this.LOG_LEVEL_SEVERITY.get(r)<this.LOG_LEVEL_SEVERITY.get(s):!1},this._capabilities=n?.capabilities??{},this._instructions=n?.instructions,this._jsonSchemaValidator=n?.jsonSchemaValidator??new ab,this.setRequestHandler(Cw,r=>this._oninitialize(r)),this.setNotificationHandler(Mw,()=>this.oninitialized?.()),this._capabilities.logging&&this.setRequestHandler(Gw,async(r,o)=>{let s=o.sessionId||o.requestInfo?.headers["mcp-session-id"]||void 0,{level:i}=r.params,a=P_.safeParse(i);return a.success&&this._loggingLevels.set(s,a.data),{}})}get experimental(){return this._experimental||(this._experimental={tasks:new cb(this)}),this._experimental}registerCapabilities(e){if(this.transport)throw new Error("Cannot register capabilities after connecting to transport");this._capabilities=xee(this._capabilities,e)}setRequestHandler(e,n){let o=tc(e)?.method;if(!o)throw new Error("Schema is missing a method literal");let s;if(Do(o)){let a=o;s=a._zod?.def?.value??a.value}else{let a=o;s=a._def?.value??a.value}if(typeof s!="string")throw new Error("Schema method literal must be a string");if(s==="tools/call"){let a=async(c,u)=>{let p=ec(md,c);if(!p.success){let m=p.error instanceof Error?p.error.message:String(p.error);throw new Q(ce.InvalidParams,`Invalid tools/call request: ${m}`)}let{params:l}=p.data,d=await Promise.resolve(n(c,u));if(l.task){let m=ec(dd,d);if(!m.success){let h=m.error instanceof Error?m.error.message:String(m.error);throw new Q(ce.InvalidParams,`Invalid task creation result: ${h}`)}return m.data}let f=ec(Ey,d);if(!f.success){let m=f.error instanceof Error?f.error.message:String(f.error);throw new Q(ce.InvalidParams,`Invalid tools/call result: ${m}`)}return f.data};return super.setRequestHandler(e,a)}return super.setRequestHandler(e,n)}assertCapabilityForMethod(e){switch(e){case"sampling/createMessage":if(!this._clientCapabilities?.sampling)throw new Error(`Client does not support sampling (required for ${e})`);break;case"elicitation/create":if(!this._clientCapabilities?.elicitation)throw new Error(`Client does not support elicitation (required for ${e})`);break;case"roots/list":if(!this._clientCapabilities?.roots)throw new Error(`Client does not support listing roots (required for ${e})`);break;case"ping":break}}assertNotificationCapability(e){switch(e){case"notifications/message":if(!this._capabilities.logging)throw new Error(`Server does not support logging (required for ${e})`);break;case"notifications/resources/updated":case"notifications/resources/list_changed":if(!this._capabilities.resources)throw new Error(`Server does not support notifying about resources (required for ${e})`);break;case"notifications/tools/list_changed":if(!this._capabilities.tools)throw new Error(`Server does not support notifying of tool list changes (required for ${e})`);break;case"notifications/prompts/list_changed":if(!this._capabilities.prompts)throw new Error(`Server does not support notifying of prompt list changes (required for ${e})`);break;case"notifications/elicitation/complete":if(!this._clientCapabilities?.elicitation?.url)throw new Error(`Client does not support URL elicitation (required for ${e})`);break;case"notifications/cancelled":break;case"notifications/progress":break}}assertRequestHandlerCapability(e){if(this._capabilities)switch(e){case"completion/complete":if(!this._capabilities.completions)throw new Error(`Server does not support completions (required for ${e})`);break;case"logging/setLevel":if(!this._capabilities.logging)throw new Error(`Server does not support logging (required for ${e})`);break;case"prompts/get":case"prompts/list":if(!this._capabilities.prompts)throw new Error(`Server does not support prompts (required for ${e})`);break;case"resources/list":case"resources/templates/list":case"resources/read":if(!this._capabilities.resources)throw new Error(`Server does not support resources (required for ${e})`);break;case"tools/call":case"tools/list":if(!this._capabilities.tools)throw new Error(`Server does not support tools (required for ${e})`);break;case"tasks/get":case"tasks/list":case"tasks/result":case"tasks/cancel":if(!this._capabilities.tasks)throw new Error(`Server does not support tasks capability (required for ${e})`);break;case"ping":case"initialize":break}}assertTaskCapability(e){Tre(this._clientCapabilities?.tasks?.requests,e,"Client")}assertTaskHandlerCapability(e){this._capabilities&&Ere(this._capabilities.tasks?.requests,e,"Server")}async _oninitialize(e){let n=e.params.protocolVersion;return this._clientCapabilities=e.params.capabilities,this._clientVersion=e.params.clientInfo,{protocolVersion:M7.includes(n)?n:Ow,capabilities:this.getCapabilities(),serverInfo:this._serverInfo,...this._instructions&&{instructions:this._instructions}}}getClientCapabilities(){return this._clientCapabilities}getClientVersion(){return this._clientVersion}getCapabilities(){return this._capabilities}async ping(){return this.request({method:"ping"},ty)}async createMessage(e,n){if((e.tools||e.toolChoice)&&!this._clientCapabilities?.sampling?.tools)throw new Error("Client does not support sampling tools capability.");if(e.messages.length>0){let r=e.messages[e.messages.length-1],o=Array.isArray(r.content)?r.content:[r.content],s=o.some(u=>u.type==="tool_result"),i=e.messages.length>1?e.messages[e.messages.length-2]:void 0,a=i?Array.isArray(i.content)?i.content:[i.content]:[],c=a.some(u=>u.type==="tool_use");if(s){if(o.some(u=>u.type!=="tool_result"))throw new Error("The last message must contain only tool_result content if any is present");if(!c)throw new Error("tool_result blocks are not matching any tool_use from the previous message")}if(c){let u=new Set(a.filter(l=>l.type==="tool_use").map(l=>l.id)),p=new Set(o.filter(l=>l.type==="tool_result").map(l=>l.toolUseId));if(u.size!==p.size||![...u].every(l=>p.has(l)))throw new Error("ids of tool_result blocks and tool_use blocks from previous message do not match")}}return e.tools?this.request({method:"sampling/createMessage",params:e},Bw,n):this.request({method:"sampling/createMessage",params:e},Vw,n)}async elicitInput(e,n){switch(e.mode??"form"){case"url":{if(!this._clientCapabilities?.elicitation?.url)throw new Error("Client does not support url elicitation.");let o=e;return this.request({method:"elicitation/create",params:o},Ty,n)}case"form":{if(!this._clientCapabilities?.elicitation?.form)throw new Error("Client does not support form elicitation.");let o=e.mode==="form"?e:{...e,mode:"form"},s=await this.request({method:"elicitation/create",params:o},Ty,n);if(s.action==="accept"&&s.content&&o.requestedSchema)try{let a=this._jsonSchemaValidator.getValidator(o.requestedSchema)(s.content);if(!a.valid)throw new Q(ce.InvalidParams,`Elicitation response content does not match requested schema: ${a.errorMessage}`)}catch(i){throw i instanceof Q?i:new Q(ce.InternalError,`Error validating elicitation response: ${i instanceof Error?i.message:String(i)}`)}return s}}}createElicitationCompletionNotifier(e,n){if(!this._clientCapabilities?.elicitation?.url)throw new Error("Client does not support URL elicitation (required for notifications/elicitation/complete)");return()=>this.notification({method:"notifications/elicitation/complete",params:{elicitationId:e}},n)}async listRoots(e,n){return this.request({method:"roots/list",params:e},jw,n)}async sendLoggingMessage(e,n){if(this._capabilities.logging&&!this.isMessageIgnored(e.level,n))return this.notification({method:"notifications/message",params:e})}async sendResourceUpdated(e){return this.notification({method:"notifications/resources/updated",params:e})}async sendResourceListChanged(){return this.notification({method:"notifications/resources/list_changed"})}async sendToolListChanged(){return this.notification({method:"notifications/tools/list_changed"})}async sendPromptListChanged(){return this.notification({method:"notifications/prompts/list_changed"})}};var Sre=Symbol.for("mcp.completable");function HL(t){return!!t&&typeof t=="object"&&Sre in t}function Are(t){return t[Sre]?.complete}var gre;(function(t){t.Completable="McpCompletable"})(gre||(gre={}));var Wke=/^[A-Za-z0-9._-]{1,128}$/;function Kke(t){let e=[];if(t.length===0)return{isValid:!1,warnings:["Tool name cannot be empty"]};if(t.length>128)return{isValid:!1,warnings:[`Tool name exceeds maximum length of 128 characters (current: ${t.length})`]};if(t.includes(" ")&&e.push("Tool name contains spaces, which may cause parsing issues"),t.includes(",")&&e.push("Tool name contains commas, which may cause parsing issues"),(t.startsWith("-")||t.endsWith("-"))&&e.push("Tool name starts or ends with a dash, which may cause parsing issues in some contexts"),(t.startsWith(".")||t.endsWith("."))&&e.push("Tool name starts or ends with a dot, which may cause parsing issues in some contexts"),!Wke.test(t)){let n=t.split("").filter(r=>!/[A-Za-z0-9._-]/.test(r)).filter((r,o,s)=>s.indexOf(r)===o);return e.push(`Tool name contains invalid characters: ${n.map(r=>`"${r}"`).join(", ")}`,"Allowed characters are: A-Z, a-z, 0-9, underscore (_), dash (-), and dot (.)"),{isValid:!1,warnings:e}}return{isValid:!0,warnings:e}}function Zke(t,e){if(e.length>0){console.warn(`Tool name validation warning for "${t}":`);for(let n of e)console.warn(`  - ${n}`);console.warn("Tool registration will proceed, but this may cause compatibility issues."),console.warn("Consider updating the tool name to conform to the MCP tool naming standard."),console.warn("See SEP: Specify Format for Tool Names (https://github.com/modelcontextprotocol/modelcontextprotocol/issues/986) for more details.")}}function FL(t){let e=Kke(t);return Zke(t,e.warnings),e.isValid}var pb=class{constructor(e){this._mcpServer=e}registerToolTask(e,n,r){let o={taskSupport:"required",...n.execution};if(o.taskSupport==="forbidden")throw new Error(`Cannot register task-based tool '${e}' with taskSupport 'forbidden'. Use registerTool() instead.`);return this._mcpServer._createRegisteredTool(e,n.title,n.description,n.inputSchema,n.outputSchema,n.annotations,o,n._meta,r)}};var lb=class{constructor(e,n){this._registeredResources={},this._registeredResourceTemplates={},this._registeredTools={},this._registeredPrompts={},this._toolHandlersInitialized=!1,this._completionHandlerInitialized=!1,this._resourceHandlersInitialized=!1,this._promptHandlersInitialized=!1,this.server=new ub(e,n)}get experimental(){return this._experimental||(this._experimental={tasks:new pb(this)}),this._experimental}async connect(e){return await this.server.connect(e)}async close(){await this.server.close()}setToolRequestHandlers(){this._toolHandlersInitialized||(this.server.assertCanSetRequestHandler(dc(hy)),this.server.assertCanSetRequestHandler(dc(md)),this.server.registerCapabilities({tools:{listChanged:!0}}),this.server.setRequestHandler(hy,()=>({tools:Object.entries(this._registeredTools).filter(([,e])=>e.enabled).map(([e,n])=>{let r={name:e,title:n.title,description:n.description,inputSchema:(()=>{let o=pd(n.inputSchema);return o?Ww(o,{strictUnions:!0,pipeStrategy:"input"}):Jke})(),annotations:n.annotations,execution:n.execution,_meta:n._meta};if(n.outputSchema){let o=pd(n.outputSchema);o&&(r.outputSchema=Ww(o,{strictUnions:!0,pipeStrategy:"output"}))}return r})})),this.server.setRequestHandler(md,async(e,n)=>{try{let r=this._registeredTools[e.params.name];if(!r)throw new Q(ce.InvalidParams,`Tool ${e.params.name} not found`);if(!r.enabled)throw new Q(ce.InvalidParams,`Tool ${e.params.name} disabled`);let o=!!e.params.task,s=r.execution?.taskSupport,i="createTask"in r.handler;if((s==="required"||s==="optional")&&!i)throw new Q(ce.InternalError,`Tool ${e.params.name} has taskSupport '${s}' but was not registered with registerToolTask`);if(s==="required"&&!o)throw new Q(ce.MethodNotFound,`Tool ${e.params.name} requires task augmentation (taskSupport: 'required')`);if(s==="optional"&&!o&&i)return await this.handleAutomaticTaskPolling(r,e,n);let a=await this.validateToolInput(r,e.params.arguments,e.params.name),c=await this.executeToolHandler(r,a,n);return o||await this.validateToolOutput(r,c,e.params.name),c}catch(r){if(r instanceof Q&&r.code===ce.UrlElicitationRequired)throw r;return this.createToolError(r instanceof Error?r.message:String(r))}}),this._toolHandlersInitialized=!0)}createToolError(e){return{content:[{type:"text",text:e}],isError:!0}}async validateToolInput(e,n,r){if(!e.inputSchema)return;let s=pd(e.inputSchema)??e.inputSchema,i=await YR(s,n);if(!i.success){let a="error"in i?i.error:"Unknown error",c=WR(a);throw new Q(ce.InvalidParams,`Input validation error: Invalid arguments for tool ${r}: ${c}`)}return i.data}async validateToolOutput(e,n,r){if(!e.outputSchema||!("content"in n)||n.isError)return;if(!n.structuredContent)throw new Q(ce.InvalidParams,`Output validation error: Tool ${r} has an output schema but no structured content was provided`);let o=pd(e.outputSchema),s=await YR(o,n.structuredContent);if(!s.success){let i="error"in s?s.error:"Unknown error",a=WR(i);throw new Q(ce.InvalidParams,`Output validation error: Invalid structured content for tool ${r}: ${a}`)}}async executeToolHandler(e,n,r){let o=e.handler;if("createTask"in o){if(!r.taskStore)throw new Error("No task store provided.");let i={...r,taskStore:r.taskStore};if(e.inputSchema){let a=o;return await Promise.resolve(a.createTask(n,i))}else{let a=o;return await Promise.resolve(a.createTask(i))}}if(e.inputSchema){let i=o;return await Promise.resolve(i(n,r))}else{let i=o;return await Promise.resolve(i(r))}}async handleAutomaticTaskPolling(e,n,r){if(!r.taskStore)throw new Error("No task store provided for task-capable tool.");let o=await this.validateToolInput(e,n.params.arguments,n.params.name),s=e.handler,i={...r,taskStore:r.taskStore},a=o?await Promise.resolve(s.createTask(o,i)):await Promise.resolve(s.createTask(i)),c=a.task.taskId,u=a.task,p=u.pollInterval??5e3;for(;u.status!=="completed"&&u.status!=="failed"&&u.status!=="cancelled";){await new Promise(d=>setTimeout(d,p));let l=await r.taskStore.getTask(c);if(!l)throw new Q(ce.InternalError,`Task ${c} not found during polling`);u=l}return await r.taskStore.getTaskResult(c)}setCompletionRequestHandler(){this._completionHandlerInitialized||(this.server.assertCanSetRequestHandler(dc(gy)),this.server.registerCapabilities({completions:{}}),this.server.setRequestHandler(gy,async e=>{switch(e.params.ref.type){case"ref/prompt":return W7(e),this.handlePromptCompletion(e,e.params.ref);case"ref/resource":return K7(e),this.handleResourceCompletion(e,e.params.ref);default:throw new Q(ce.InvalidParams,`Invalid completion reference: ${e.params.ref}`)}}),this._completionHandlerInitialized=!0)}async handlePromptCompletion(e,n){let r=this._registeredPrompts[n.name];if(!r)throw new Q(ce.InvalidParams,`Prompt ${n.name} not found`);if(!r.enabled)throw new Q(ce.InvalidParams,`Prompt ${n.name} disabled`);if(!r.argsSchema)return ah;let s=tc(r.argsSchema)?.[e.params.argument.name];if(!HL(s))return ah;let i=Are(s);if(!i)return ah;let a=await i(e.params.argument.value,e.params.context);return yre(a)}async handleResourceCompletion(e,n){let r=Object.values(this._registeredResourceTemplates).find(i=>i.resourceTemplate.uriTemplate.toString()===n.uri);if(!r){if(this._registeredResources[n.uri])return ah;throw new Q(ce.InvalidParams,`Resource template ${e.params.ref.uri} not found`)}let o=r.resourceTemplate.completeCallback(e.params.argument.name);if(!o)return ah;let s=await o(e.params.argument.value,e.params.context);return yre(s)}setResourceRequestHandlers(){this._resourceHandlersInitialized||(this.server.assertCanSetRequestHandler(dc(ly)),this.server.assertCanSetRequestHandler(dc(dy)),this.server.assertCanSetRequestHandler(dc(fy)),this.server.registerCapabilities({resources:{listChanged:!0}}),this.server.setRequestHandler(ly,async(e,n)=>{let r=Object.entries(this._registeredResources).filter(([s,i])=>i.enabled).map(([s,i])=>({uri:s,name:i.name,...i.metadata})),o=[];for(let s of Object.values(this._registeredResourceTemplates)){if(!s.resourceTemplate.listCallback)continue;let i=await s.resourceTemplate.listCallback(n);for(let a of i.resources)o.push({...s.metadata,...a})}return{resources:[...r,...o]}}),this.server.setRequestHandler(dy,async()=>({resourceTemplates:Object.entries(this._registeredResourceTemplates).map(([n,r])=>({name:n,uriTemplate:r.resourceTemplate.uriTemplate.toString(),...r.metadata}))})),this.server.setRequestHandler(fy,async(e,n)=>{let r=new URL(e.params.uri),o=this._registeredResources[r.toString()];if(o){if(!o.enabled)throw new Q(ce.InvalidParams,`Resource ${r} disabled`);return o.readCallback(r,n)}for(let s of Object.values(this._registeredResourceTemplates)){let i=s.resourceTemplate.uriTemplate.match(r.toString());if(i)return s.readCallback(r,i,n)}throw new Q(ce.InvalidParams,`Resource ${r} not found`)}),this._resourceHandlersInitialized=!0)}setPromptRequestHandlers(){this._promptHandlersInitialized||(this.server.assertCanSetRequestHandler(dc(my)),this.server.assertCanSetRequestHandler(dc(_y)),this.server.registerCapabilities({prompts:{listChanged:!0}}),this.server.setRequestHandler(my,()=>({prompts:Object.entries(this._registeredPrompts).filter(([,e])=>e.enabled).map(([e,n])=>({name:e,title:n.title,description:n.description,arguments:n.argsSchema?Xke(n.argsSchema):void 0}))})),this.server.setRequestHandler(_y,async(e,n)=>{let r=this._registeredPrompts[e.params.name];if(!r)throw new Q(ce.InvalidParams,`Prompt ${e.params.name} not found`);if(!r.enabled)throw new Q(ce.InvalidParams,`Prompt ${e.params.name} disabled`);if(r.argsSchema){let o=pd(r.argsSchema),s=await YR(o,e.params.arguments);if(!s.success){let c="error"in s?s.error:"Unknown error",u=WR(c);throw new Q(ce.InvalidParams,`Invalid arguments for prompt ${e.params.name}: ${u}`)}let i=s.data,a=r.callback;return await Promise.resolve(a(i,n))}else{let o=r.callback;return await Promise.resolve(o(n))}}),this._promptHandlersInitialized=!0)}resource(e,n,...r){let o;typeof r[0]=="object"&&(o=r.shift());let s=r[0];if(typeof n=="string"){if(this._registeredResources[n])throw new Error(`Resource ${n} is already registered`);let i=this._createRegisteredResource(e,void 0,n,o,s);return this.setResourceRequestHandlers(),this.sendResourceListChanged(),i}else{if(this._registeredResourceTemplates[e])throw new Error(`Resource template ${e} is already registered`);let i=this._createRegisteredResourceTemplate(e,void 0,n,o,s);return this.setResourceRequestHandlers(),this.sendResourceListChanged(),i}}registerResource(e,n,r,o){if(typeof n=="string"){if(this._registeredResources[n])throw new Error(`Resource ${n} is already registered`);let s=this._createRegisteredResource(e,r.title,n,r,o);return this.setResourceRequestHandlers(),this.sendResourceListChanged(),s}else{if(this._registeredResourceTemplates[e])throw new Error(`Resource template ${e} is already registered`);let s=this._createRegisteredResourceTemplate(e,r.title,n,r,o);return this.setResourceRequestHandlers(),this.sendResourceListChanged(),s}}_createRegisteredResource(e,n,r,o,s){let i={name:e,title:n,metadata:o,readCallback:s,enabled:!0,disable:()=>i.update({enabled:!1}),enable:()=>i.update({enabled:!0}),remove:()=>i.update({uri:null}),update:a=>{typeof a.uri<"u"&&a.uri!==r&&(delete this._registeredResources[r],a.uri&&(this._registeredResources[a.uri]=i)),typeof a.name<"u"&&(i.name=a.name),typeof a.title<"u"&&(i.title=a.title),typeof a.metadata<"u"&&(i.metadata=a.metadata),typeof a.callback<"u"&&(i.readCallback=a.callback),typeof a.enabled<"u"&&(i.enabled=a.enabled),this.sendResourceListChanged()}};return this._registeredResources[r]=i,i}_createRegisteredResourceTemplate(e,n,r,o,s){let i={resourceTemplate:r,title:n,metadata:o,readCallback:s,enabled:!0,disable:()=>i.update({enabled:!1}),enable:()=>i.update({enabled:!0}),remove:()=>i.update({name:null}),update:u=>{typeof u.name<"u"&&u.name!==e&&(delete this._registeredResourceTemplates[e],u.name&&(this._registeredResourceTemplates[u.name]=i)),typeof u.title<"u"&&(i.title=u.title),typeof u.template<"u"&&(i.resourceTemplate=u.template),typeof u.metadata<"u"&&(i.metadata=u.metadata),typeof u.callback<"u"&&(i.readCallback=u.callback),typeof u.enabled<"u"&&(i.enabled=u.enabled),this.sendResourceListChanged()}};this._registeredResourceTemplates[e]=i;let a=r.uriTemplate.variableNames;return Array.isArray(a)&&a.some(u=>!!r.completeCallback(u))&&this.setCompletionRequestHandler(),i}_createRegisteredPrompt(e,n,r,o,s){let i={title:n,description:r,argsSchema:o===void 0?void 0:wu(o),callback:s,enabled:!0,disable:()=>i.update({enabled:!1}),enable:()=>i.update({enabled:!0}),remove:()=>i.update({name:null}),update:a=>{typeof a.name<"u"&&a.name!==e&&(delete this._registeredPrompts[e],a.name&&(this._registeredPrompts[a.name]=i)),typeof a.title<"u"&&(i.title=a.title),typeof a.description<"u"&&(i.description=a.description),typeof a.argsSchema<"u"&&(i.argsSchema=wu(a.argsSchema)),typeof a.callback<"u"&&(i.callback=a.callback),typeof a.enabled<"u"&&(i.enabled=a.enabled),this.sendPromptListChanged()}};return this._registeredPrompts[e]=i,o&&Object.values(o).some(c=>{let u=c instanceof wr?c._def?.innerType:c;return HL(u)})&&this.setCompletionRequestHandler(),i}_createRegisteredTool(e,n,r,o,s,i,a,c,u){FL(e);let p={title:n,description:r,inputSchema:Rre(o),outputSchema:Rre(s),annotations:i,execution:a,_meta:c,handler:u,enabled:!0,disable:()=>p.update({enabled:!1}),enable:()=>p.update({enabled:!0}),remove:()=>p.update({name:null}),update:l=>{typeof l.name<"u"&&l.name!==e&&(typeof l.name=="string"&&FL(l.name),delete this._registeredTools[e],l.name&&(this._registeredTools[l.name]=p)),typeof l.title<"u"&&(p.title=l.title),typeof l.description<"u"&&(p.description=l.description),typeof l.paramsSchema<"u"&&(p.inputSchema=wu(l.paramsSchema)),typeof l.outputSchema<"u"&&(p.outputSchema=wu(l.outputSchema)),typeof l.callback<"u"&&(p.handler=l.callback),typeof l.annotations<"u"&&(p.annotations=l.annotations),typeof l._meta<"u"&&(p._meta=l._meta),typeof l.enabled<"u"&&(p.enabled=l.enabled),this.sendToolListChanged()}};return this._registeredTools[e]=p,this.setToolRequestHandlers(),this.sendToolListChanged(),p}tool(e,...n){if(this._registeredTools[e])throw new Error(`Tool ${e} is already registered`);let r,o,s,i;if(typeof n[0]=="string"&&(r=n.shift()),n.length>1){let c=n[0];qL(c)?(o=n.shift(),n.length>1&&typeof n[0]=="object"&&n[0]!==null&&!qL(n[0])&&(i=n.shift())):typeof c=="object"&&c!==null&&(i=n.shift())}let a=n[0];return this._createRegisteredTool(e,void 0,r,o,s,i,{taskSupport:"forbidden"},void 0,a)}registerTool(e,n,r){if(this._registeredTools[e])throw new Error(`Tool ${e} is already registered`);let{title:o,description:s,inputSchema:i,outputSchema:a,annotations:c,_meta:u}=n;return this._createRegisteredTool(e,o,s,i,a,c,{taskSupport:"forbidden"},u,r)}prompt(e,...n){if(this._registeredPrompts[e])throw new Error(`Prompt ${e} is already registered`);let r;typeof n[0]=="string"&&(r=n.shift());let o;n.length>1&&(o=n.shift());let s=n[0],i=this._createRegisteredPrompt(e,void 0,r,o,s);return this.setPromptRequestHandlers(),this.sendPromptListChanged(),i}registerPrompt(e,n,r){if(this._registeredPrompts[e])throw new Error(`Prompt ${e} is already registered`);let{title:o,description:s,argsSchema:i}=n,a=this._createRegisteredPrompt(e,o,s,i,r);return this.setPromptRequestHandlers(),this.sendPromptListChanged(),a}isConnected(){return this.server.transport!==void 0}async sendLoggingMessage(e,n){return this.server.sendLoggingMessage(e,n)}sendResourceListChanged(){this.isConnected()&&this.server.sendResourceListChanged()}sendToolListChanged(){this.isConnected()&&this.server.sendToolListChanged()}sendPromptListChanged(){this.isConnected()&&this.server.sendPromptListChanged()}};var Jke={type:"object",properties:{}};function bre(t){return t!==null&&typeof t=="object"&&"parse"in t&&typeof t.parse=="function"&&"safeParse"in t&&typeof t.safeParse=="function"}function Qke(t){return"_def"in t||"_zod"in t||bre(t)}function qL(t){return typeof t!="object"||t===null||Qke(t)?!1:Object.keys(t).length===0?!0:Object.values(t).some(bre)}function Rre(t){if(t)return qL(t)?wu(t):t}function Xke(t){let e=tc(t);return e?Object.entries(e).map(([n,r])=>{let o=u7(r),s=p7(r);return{name:n,description:o,required:!s}}):[]}function dc(t){let n=tc(t)?.method;if(!n)throw new Error("Schema is missing a method literal");let r=KR(n);if(typeof r=="string")return r;throw new Error("Schema method literal must be a string")}function yre(t){return{completion:{values:t.slice(0,100),total:t.length,hasMore:t.length>100}}}var ah={completion:{values:[],hasMore:!1}};import Ore from"node:process";var db=class{append(e){this._buffer=this._buffer?Buffer.concat([this._buffer,e]):e}readMessage(){if(!this._buffer)return null;let e=this._buffer.indexOf(`
`);if(e===-1)return null;let n=this._buffer.toString("utf8",0,e).replace(/\r$/,"");return this._buffer=this._buffer.subarray(e+1),eUe(n)}clear(){this._buffer=void 0}};function eUe(t){return V7.parse(JSON.parse(t))}function Nre(t){return JSON.stringify(t)+`
`}var fb=class{constructor(e=Ore.stdin,n=Ore.stdout){this._stdin=e,this._stdout=n,this._readBuffer=new db,this._started=!1,this._ondata=r=>{this._readBuffer.append(r),this.processReadBuffer()},this._onerror=r=>{this.onerror?.(r)}}async start(){if(this._started)throw new Error("StdioServerTransport already started! If using Server class, note that connect() calls start() automatically.");this._started=!0,this._stdin.on("data",this._ondata),this._stdin.on("error",this._onerror)}processReadBuffer(){for(;;)try{let e=this._readBuffer.readMessage();if(e===null)break;this.onmessage?.(e)}catch(e){this.onerror?.(e)}}async close(){this._stdin.off("data",this._ondata),this._stdin.off("error",this._onerror),this._stdin.listenerCount("data")===0&&this._stdin.pause(),this._readBuffer.clear(),this.onclose?.()}send(e){return new Promise(n=>{let r=Nre(e);this._stdout.write(r)?n():this._stdout.once("drain",n)})}};function ch(t,e){return function(){return t.apply(e,arguments)}}var{toString:tUe}=Object.prototype,{getPrototypeOf:YL}=Object,{iterator:_b,toStringTag:vre}=Symbol,hb=(t=>e=>{let n=tUe.call(e);return t[n]||(t[n]=n.slice(8,-1).toLowerCase())})(Object.create(null)),hs=t=>(t=t.toLowerCase(),e=>hb(e)===t),Eb=t=>e=>typeof e===t,{isArray:Md}=Array,Cd=Eb("undefined");function uh(t){return t!==null&&!Cd(t)&&t.constructor!==null&&!Cd(t.constructor)&&Vr(t.constructor.isBuffer)&&t.constructor.isBuffer(t)}var xre=hs("ArrayBuffer");function nUe(t){let e;return typeof ArrayBuffer<"u"&&ArrayBuffer.isView?e=ArrayBuffer.isView(t):e=t&&t.buffer&&xre(t.buffer),e}var rUe=Eb("string"),Vr=Eb("function"),Pre=Eb("number"),ph=t=>t!==null&&typeof t=="object",oUe=t=>t===!0||t===!1,mb=t=>{if(hb(t)!=="object")return!1;let e=YL(t);return(e===null||e===Object.prototype||Object.getPrototypeOf(e)===null)&&!(vre in t)&&!(_b in t)},sUe=t=>{if(!ph(t)||uh(t))return!1;try{return Object.keys(t).length===0&&Object.getPrototypeOf(t)===Object.prototype}catch{return!1}},iUe=hs("Date"),aUe=hs("File"),cUe=hs("Blob"),uUe=hs("FileList"),pUe=t=>ph(t)&&Vr(t.pipe),lUe=t=>{let e;return t&&(typeof FormData=="function"&&t instanceof FormData||Vr(t.append)&&((e=hb(t))==="formdata"||e==="object"&&Vr(t.toString)&&t.toString()==="[object FormData]"))},dUe=hs("URLSearchParams"),[fUe,mUe,_Ue,hUe]=["ReadableStream","Request","Response","Headers"].map(hs),EUe=t=>t.trim?t.trim():t.replace(/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,"");function lh(t,e,{allOwnKeys:n=!1}={}){if(t===null||typeof t>"u")return;let r,o;if(typeof t!="object"&&(t=[t]),Md(t))for(r=0,o=t.length;r<o;r++)e.call(null,t[r],r,t);else{if(uh(t))return;let s=n?Object.getOwnPropertyNames(t):Object.keys(t),i=s.length,a;for(r=0;r<i;r++)a=s[r],e.call(null,t[a],a,t)}}function Cre(t,e){if(uh(t))return null;e=e.toLowerCase();let n=Object.keys(t),r=n.length,o;for(;r-- >0;)if(o=n[r],e===o.toLowerCase())return o;return null}var Fu=typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:global,Mre=t=>!Cd(t)&&t!==Fu;function zL(){let{caseless:t,skipUndefined:e}=Mre(this)&&this||{},n={},r=(o,s)=>{let i=t&&Cre(n,s)||s;mb(n[i])&&mb(o)?n[i]=zL(n[i],o):mb(o)?n[i]=zL({},o):Md(o)?n[i]=o.slice():(!e||!Cd(o))&&(n[i]=o)};for(let o=0,s=arguments.length;o<s;o++)arguments[o]&&lh(arguments[o],r);return n}var TUe=(t,e,n,{allOwnKeys:r}={})=>(lh(e,(o,s)=>{n&&Vr(o)?t[s]=ch(o,n):t[s]=o},{allOwnKeys:r}),t),gUe=t=>(t.charCodeAt(0)===65279&&(t=t.slice(1)),t),SUe=(t,e,n,r)=>{t.prototype=Object.create(e.prototype,r),t.prototype.constructor=t,Object.defineProperty(t,"super",{value:e.prototype}),n&&Object.assign(t.prototype,n)},AUe=(t,e,n,r)=>{let o,s,i,a={};if(e=e||{},t==null)return e;do{for(o=Object.getOwnPropertyNames(t),s=o.length;s-- >0;)i=o[s],(!r||r(i,t,e))&&!a[i]&&(e[i]=t[i],a[i]=!0);t=n!==!1&&YL(t)}while(t&&(!n||n(t,e))&&t!==Object.prototype);return e},RUe=(t,e,n)=>{t=String(t),(n===void 0||n>t.length)&&(n=t.length),n-=e.length;let r=t.indexOf(e,n);return r!==-1&&r===n},yUe=t=>{if(!t)return null;if(Md(t))return t;let e=t.length;if(!Pre(e))return null;let n=new Array(e);for(;e-- >0;)n[e]=t[e];return n},bUe=(t=>e=>t&&e instanceof t)(typeof Uint8Array<"u"&&YL(Uint8Array)),NUe=(t,e)=>{let r=(t&&t[_b]).call(t),o;for(;(o=r.next())&&!o.done;){let s=o.value;e.call(t,s[0],s[1])}},OUe=(t,e)=>{let n,r=[];for(;(n=t.exec(e))!==null;)r.push(n);return r},IUe=hs("HTMLFormElement"),vUe=t=>t.toLowerCase().replace(/[-_\s]([a-z\d])(\w*)/g,function(n,r,o){return r.toUpperCase()+o}),Ire=(({hasOwnProperty:t})=>(e,n)=>t.call(e,n))(Object.prototype),xUe=hs("RegExp"),wre=(t,e)=>{let n=Object.getOwnPropertyDescriptors(t),r={};lh(n,(o,s)=>{let i;(i=e(o,s,t))!==!1&&(r[s]=i||o)}),Object.defineProperties(t,r)},PUe=t=>{wre(t,(e,n)=>{if(Vr(t)&&["arguments","caller","callee"].indexOf(n)!==-1)return!1;let r=t[n];if(Vr(r)){if(e.enumerable=!1,"writable"in e){e.writable=!1;return}e.set||(e.set=()=>{throw Error("Can not rewrite read-only method '"+n+"'")})}})},CUe=(t,e)=>{let n={},r=o=>{o.forEach(s=>{n[s]=!0})};return Md(t)?r(t):r(String(t).split(e)),n},MUe=()=>{},wUe=(t,e)=>t!=null&&Number.isFinite(t=+t)?t:e;function LUe(t){return!!(t&&Vr(t.append)&&t[vre]==="FormData"&&t[_b])}var DUe=t=>{let e=new Array(10),n=(r,o)=>{if(ph(r)){if(e.indexOf(r)>=0)return;if(uh(r))return r;if(!("toJSON"in r)){e[o]=r;let s=Md(r)?[]:{};return lh(r,(i,a)=>{let c=n(i,o+1);!Cd(c)&&(s[a]=c)}),e[o]=void 0,s}}return r};return n(t,0)},kUe=hs("AsyncFunction"),UUe=t=>t&&(ph(t)||Vr(t))&&Vr(t.then)&&Vr(t.catch),Lre=((t,e)=>t?setImmediate:e?((n,r)=>(Fu.addEventListener("message",({source:o,data:s})=>{o===Fu&&s===n&&r.length&&r.shift()()},!1),o=>{r.push(o),Fu.postMessage(n,"*")}))(`axios@${Math.random()}`,[]):n=>setTimeout(n))(typeof setImmediate=="function",Vr(Fu.postMessage)),$Ue=typeof queueMicrotask<"u"?queueMicrotask.bind(Fu):typeof process<"u"&&process.nextTick||Lre,GUe=t=>t!=null&&Vr(t[_b]),b={isArray:Md,isArrayBuffer:xre,isBuffer:uh,isFormData:lUe,isArrayBufferView:nUe,isString:rUe,isNumber:Pre,isBoolean:oUe,isObject:ph,isPlainObject:mb,isEmptyObject:sUe,isReadableStream:fUe,isRequest:mUe,isResponse:_Ue,isHeaders:hUe,isUndefined:Cd,isDate:iUe,isFile:aUe,isBlob:cUe,isRegExp:xUe,isFunction:Vr,isStream:pUe,isURLSearchParams:dUe,isTypedArray:bUe,isFileList:uUe,forEach:lh,merge:zL,extend:TUe,trim:EUe,stripBOM:gUe,inherits:SUe,toFlatObject:AUe,kindOf:hb,kindOfTest:hs,endsWith:RUe,toArray:yUe,forEachEntry:NUe,matchAll:OUe,isHTMLForm:IUe,hasOwnProperty:Ire,hasOwnProp:Ire,reduceDescriptors:wre,freezeMethods:PUe,toObjectSet:CUe,toCamelCase:vUe,noop:MUe,toFiniteNumber:wUe,findKey:Cre,global:Fu,isContextDefined:Mre,isSpecCompliantForm:LUe,toJSONObject:DUe,isAsyncFn:kUe,isThenable:UUe,setImmediate:Lre,asap:$Ue,isIterable:GUe};function wd(t,e,n,r,o){Error.call(this),Error.captureStackTrace?Error.captureStackTrace(this,this.constructor):this.stack=new Error().stack,this.message=t,this.name="AxiosError",e&&(this.code=e),n&&(this.config=n),r&&(this.request=r),o&&(this.response=o,this.status=o.status?o.status:null)}b.inherits(wd,Error,{toJSON:function(){return{message:this.message,name:this.name,description:this.description,number:this.number,fileName:this.fileName,lineNumber:this.lineNumber,columnNumber:this.columnNumber,stack:this.stack,config:b.toJSONObject(this.config),code:this.code,status:this.status}}});var Dre=wd.prototype,kre={};["ERR_BAD_OPTION_VALUE","ERR_BAD_OPTION","ECONNABORTED","ETIMEDOUT","ERR_NETWORK","ERR_FR_TOO_MANY_REDIRECTS","ERR_DEPRECATED","ERR_BAD_RESPONSE","ERR_BAD_REQUEST","ERR_CANCELED","ERR_NOT_SUPPORT","ERR_INVALID_URL"].forEach(t=>{kre[t]={value:t}});Object.defineProperties(wd,kre);Object.defineProperty(Dre,"isAxiosError",{value:!0});wd.from=(t,e,n,r,o,s)=>{let i=Object.create(Dre);b.toFlatObject(t,i,function(p){return p!==Error.prototype},u=>u!=="isAxiosError");let a=t&&t.message?t.message:"Error",c=e==null&&t?t.code:e;return wd.call(i,a,c,n,r,o),t&&i.cause==null&&Object.defineProperty(i,"cause",{value:t,configurable:!0}),i.name=t&&t.name||"Error",s&&Object.assign(i,s),i};var V=wd;var Vse=k(Gse(),1),vb=Vse.default;function fD(t){return b.isPlainObject(t)||b.isArray(t)}function jse(t){return b.endsWith(t,"[]")?t.slice(0,-2):t}function Bse(t,e,n){return t?t.concat(e).map(function(o,s){return o=jse(o),!n&&s?"["+o+"]":o}).join(n?".":""):e}function b$e(t){return b.isArray(t)&&!t.some(fD)}var N$e=b.toFlatObject(b,{},null,function(e){return/^is[A-Z]/.test(e)});function O$e(t,e,n){if(!b.isObject(t))throw new TypeError("target must be an object");e=e||new(vb||FormData),n=b.toFlatObject(n,{metaTokens:!0,dots:!1,indexes:!1},!1,function(h,E){return!b.isUndefined(E[h])});let r=n.metaTokens,o=n.visitor||p,s=n.dots,i=n.indexes,c=(n.Blob||typeof Blob<"u"&&Blob)&&b.isSpecCompliantForm(e);if(!b.isFunction(o))throw new TypeError("visitor must be a function");function u(m){if(m===null)return"";if(b.isDate(m))return m.toISOString();if(b.isBoolean(m))return m.toString();if(!c&&b.isBlob(m))throw new V("Blob is not supported. Use a Buffer instead.");return b.isArrayBuffer(m)||b.isTypedArray(m)?c&&typeof Blob=="function"?new Blob([m]):Buffer.from(m):m}function p(m,h,E){let A=m;if(m&&!E&&typeof m=="object"){if(b.endsWith(h,"{}"))h=r?h:h.slice(0,-2),m=JSON.stringify(m);else if(b.isArray(m)&&b$e(m)||(b.isFileList(m)||b.endsWith(h,"[]"))&&(A=b.toArray(m)))return h=jse(h),A.forEach(function(y,O){!(b.isUndefined(y)||y===null)&&e.append(i===!0?Bse([h],O,s):i===null?h:h+"[]",u(y))}),!1}return fD(m)?!0:(e.append(Bse(E,h,s),u(m)),!1)}let l=[],d=Object.assign(N$e,{defaultVisitor:p,convertValue:u,isVisitable:fD});function f(m,h){if(!b.isUndefined(m)){if(l.indexOf(m)!==-1)throw Error("Circular reference detected in "+h.join("."));l.push(m),b.forEach(m,function(A,R){(!(b.isUndefined(A)||A===null)&&o.call(e,A,b.isString(R)?R.trim():R,h,d))===!0&&f(A,h?h.concat(R):[R])}),l.pop()}}if(!b.isObject(t))throw new TypeError("data must be an object");return f(t),e}var mc=O$e;function Hse(t){let e={"!":"%21","'":"%27","(":"%28",")":"%29","~":"%7E","%20":"+","%00":"\0"};return encodeURIComponent(t).replace(/[!'()~]|%20|%00/g,function(r){return e[r]})}function Fse(t,e){this._pairs=[],t&&mc(t,this,e)}var qse=Fse.prototype;qse.append=function(e,n){this._pairs.push([e,n])};qse.toString=function(e){let n=e?function(r){return e.call(this,r,Hse)}:Hse;return this._pairs.map(function(o){return n(o[0])+"="+n(o[1])},"").join("&")};var zse=Fse;function I$e(t){return encodeURIComponent(t).replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",").replace(/%20/g,"+")}function zu(t,e,n){if(!e)return t;let r=n&&n.encode||I$e;b.isFunction(n)&&(n={serialize:n});let o=n&&n.serialize,s;if(o?s=o(e,n):s=b.isURLSearchParams(e)?e.toString():new zse(e,n).toString(r),s){let i=t.indexOf("#");i!==-1&&(t=t.slice(0,i)),t+=(t.indexOf("?")===-1?"?":"&")+s}return t}var mD=class{constructor(){this.handlers=[]}use(e,n,r){return this.handlers.push({fulfilled:e,rejected:n,synchronous:r?r.synchronous:!1,runWhen:r?r.runWhen:null}),this.handlers.length-1}eject(e){this.handlers[e]&&(this.handlers[e]=null)}clear(){this.handlers&&(this.handlers=[])}forEach(e){b.forEach(this.handlers,function(r){r!==null&&e(r)})}},_D=mD;var $d={silentJSONParsing:!0,forcedJSONParsing:!0,clarifyTimeoutError:!1};import x$e from"crypto";import v$e from"url";var Yse=v$e.URLSearchParams;var hD="abcdefghijklmnopqrstuvwxyz",Wse="0123456789",Kse={DIGIT:Wse,ALPHA:hD,ALPHA_DIGIT:hD+hD.toUpperCase()+Wse},P$e=(t=16,e=Kse.ALPHA_DIGIT)=>{let n="",{length:r}=e,o=new Uint32Array(t);x$e.randomFillSync(o);for(let s=0;s<t;s++)n+=e[o[s]%r];return n},Zse={isNode:!0,classes:{URLSearchParams:Yse,FormData:vb,Blob:typeof Blob<"u"&&Blob||null},ALPHABET:Kse,generateString:P$e,protocols:["http","https","file","data"]};var gD={};Ph(gD,{hasBrowserEnv:()=>TD,hasStandardBrowserEnv:()=>C$e,hasStandardBrowserWebWorkerEnv:()=>M$e,navigator:()=>ED,origin:()=>w$e});var TD=typeof window<"u"&&typeof document<"u",ED=typeof navigator=="object"&&navigator||void 0,C$e=TD&&(!ED||["ReactNative","NativeScript","NS"].indexOf(ED.product)<0),M$e=typeof WorkerGlobalScope<"u"&&self instanceof WorkerGlobalScope&&typeof self.importScripts=="function",w$e=TD&&window.location.href||"http://localhost";var qe={...gD,...Zse};function SD(t,e){return mc(t,new qe.classes.URLSearchParams,{visitor:function(n,r,o,s){return qe.isNode&&b.isBuffer(n)?(this.append(r,n.toString("base64")),!1):s.defaultVisitor.apply(this,arguments)},...e})}function L$e(t){return b.matchAll(/\w+|\[(\w*)]/g,t).map(e=>e[0]==="[]"?"":e[1]||e[0])}function D$e(t){let e={},n=Object.keys(t),r,o=n.length,s;for(r=0;r<o;r++)s=n[r],e[s]=t[s];return e}function k$e(t){function e(n,r,o,s){let i=n[s++];if(i==="__proto__")return!0;let a=Number.isFinite(+i),c=s>=n.length;return i=!i&&b.isArray(o)?o.length:i,c?(b.hasOwnProp(o,i)?o[i]=[o[i],r]:o[i]=r,!a):((!o[i]||!b.isObject(o[i]))&&(o[i]=[]),e(n,r,o[i],s)&&b.isArray(o[i])&&(o[i]=D$e(o[i])),!a)}if(b.isFormData(t)&&b.isFunction(t.entries)){let n={};return b.forEachEntry(t,(r,o)=>{e(L$e(r),o,n,0)}),n}return null}var xb=k$e;function U$e(t,e,n){if(b.isString(t))try{return(e||JSON.parse)(t),b.trim(t)}catch(r){if(r.name!=="SyntaxError")throw r}return(n||JSON.stringify)(t)}var AD={transitional:$d,adapter:["xhr","http","fetch"],transformRequest:[function(e,n){let r=n.getContentType()||"",o=r.indexOf("application/json")>-1,s=b.isObject(e);if(s&&b.isHTMLForm(e)&&(e=new FormData(e)),b.isFormData(e))return o?JSON.stringify(xb(e)):e;if(b.isArrayBuffer(e)||b.isBuffer(e)||b.isStream(e)||b.isFile(e)||b.isBlob(e)||b.isReadableStream(e))return e;if(b.isArrayBufferView(e))return e.buffer;if(b.isURLSearchParams(e))return n.setContentType("application/x-www-form-urlencoded;charset=utf-8",!1),e.toString();let a;if(s){if(r.indexOf("application/x-www-form-urlencoded")>-1)return SD(e,this.formSerializer).toString();if((a=b.isFileList(e))||r.indexOf("multipart/form-data")>-1){let c=this.env&&this.env.FormData;return mc(a?{"files[]":e}:e,c&&new c,this.formSerializer)}}return s||o?(n.setContentType("application/json",!1),U$e(e)):e}],transformResponse:[function(e){let n=this.transitional||AD.transitional,r=n&&n.forcedJSONParsing,o=this.responseType==="json";if(b.isResponse(e)||b.isReadableStream(e))return e;if(e&&b.isString(e)&&(r&&!this.responseType||o)){let i=!(n&&n.silentJSONParsing)&&o;try{return JSON.parse(e,this.parseReviver)}catch(a){if(i)throw a.name==="SyntaxError"?V.from(a,V.ERR_BAD_RESPONSE,this,null,this.response):a}}return e}],timeout:0,xsrfCookieName:"XSRF-TOKEN",xsrfHeaderName:"X-XSRF-TOKEN",maxContentLength:-1,maxBodyLength:-1,env:{FormData:qe.classes.FormData,Blob:qe.classes.Blob},validateStatus:function(e){return e>=200&&e<300},headers:{common:{Accept:"application/json, text/plain, */*","Content-Type":void 0}}};b.forEach(["delete","get","head","post","put","patch"],t=>{AD.headers[t]={}});var Gd=AD;var $$e=b.toObjectSet(["age","authorization","content-length","content-type","etag","expires","from","host","if-modified-since","if-unmodified-since","last-modified","location","max-forwards","proxy-authorization","referer","retry-after","user-agent"]),Jse=t=>{let e={},n,r,o;return t&&t.split(`
`).forEach(function(i){o=i.indexOf(":"),n=i.substring(0,o).trim().toLowerCase(),r=i.substring(o+1).trim(),!(!n||e[n]&&$$e[n])&&(n==="set-cookie"?e[n]?e[n].push(r):e[n]=[r]:e[n]=e[n]?e[n]+", "+r:r)}),e};var Qse=Symbol("internals");function hh(t){return t&&String(t).trim().toLowerCase()}function Pb(t){return t===!1||t==null?t:b.isArray(t)?t.map(Pb):String(t)}function G$e(t){let e=Object.create(null),n=/([^\s,;=]+)\s*(?:=\s*([^,;]+))?/g,r;for(;r=n.exec(t);)e[r[1]]=r[2];return e}var V$e=t=>/^[-_a-zA-Z0-9^`|~,!#$%&'*+.]+$/.test(t.trim());function RD(t,e,n,r,o){if(b.isFunction(r))return r.call(this,e,n);if(o&&(e=n),!!b.isString(e)){if(b.isString(r))return e.indexOf(r)!==-1;if(b.isRegExp(r))return r.test(e)}}function B$e(t){return t.trim().toLowerCase().replace(/([a-z\d])(\w*)/g,(e,n,r)=>n.toUpperCase()+r)}function j$e(t,e){let n=b.toCamelCase(" "+e);["get","set","has"].forEach(r=>{Object.defineProperty(t,r+n,{value:function(o,s,i){return this[r].call(this,e,o,s,i)},configurable:!0})})}var Vd=class{constructor(e){e&&this.set(e)}set(e,n,r){let o=this;function s(a,c,u){let p=hh(c);if(!p)throw new Error("header name must be a non-empty string");let l=b.findKey(o,p);(!l||o[l]===void 0||u===!0||u===void 0&&o[l]!==!1)&&(o[l||c]=Pb(a))}let i=(a,c)=>b.forEach(a,(u,p)=>s(u,p,c));if(b.isPlainObject(e)||e instanceof this.constructor)i(e,n);else if(b.isString(e)&&(e=e.trim())&&!V$e(e))i(Jse(e),n);else if(b.isObject(e)&&b.isIterable(e)){let a={},c,u;for(let p of e){if(!b.isArray(p))throw TypeError("Object iterator must return a key-value pair");a[u=p[0]]=(c=a[u])?b.isArray(c)?[...c,p[1]]:[c,p[1]]:p[1]}i(a,n)}else e!=null&&s(n,e,r);return this}get(e,n){if(e=hh(e),e){let r=b.findKey(this,e);if(r){let o=this[r];if(!n)return o;if(n===!0)return G$e(o);if(b.isFunction(n))return n.call(this,o,r);if(b.isRegExp(n))return n.exec(o);throw new TypeError("parser must be boolean|regexp|function")}}}has(e,n){if(e=hh(e),e){let r=b.findKey(this,e);return!!(r&&this[r]!==void 0&&(!n||RD(this,this[r],r,n)))}return!1}delete(e,n){let r=this,o=!1;function s(i){if(i=hh(i),i){let a=b.findKey(r,i);a&&(!n||RD(r,r[a],a,n))&&(delete r[a],o=!0)}}return b.isArray(e)?e.forEach(s):s(e),o}clear(e){let n=Object.keys(this),r=n.length,o=!1;for(;r--;){let s=n[r];(!e||RD(this,this[s],s,e,!0))&&(delete this[s],o=!0)}return o}normalize(e){let n=this,r={};return b.forEach(this,(o,s)=>{let i=b.findKey(r,s);if(i){n[i]=Pb(o),delete n[s];return}let a=e?B$e(s):String(s).trim();a!==s&&delete n[s],n[a]=Pb(o),r[a]=!0}),this}concat(...e){return this.constructor.concat(this,...e)}toJSON(e){let n=Object.create(null);return b.forEach(this,(r,o)=>{r!=null&&r!==!1&&(n[o]=e&&b.isArray(r)?r.join(", "):r)}),n}[Symbol.iterator](){return Object.entries(this.toJSON())[Symbol.iterator]()}toString(){return Object.entries(this.toJSON()).map(([e,n])=>e+": "+n).join(`
`)}getSetCookie(){return this.get("set-cookie")||[]}get[Symbol.toStringTag](){return"AxiosHeaders"}static from(e){return e instanceof this?e:new this(e)}static concat(e,...n){let r=new this(e);return n.forEach(o=>r.set(o)),r}static accessor(e){let r=(this[Qse]=this[Qse]={accessors:{}}).accessors,o=this.prototype;function s(i){let a=hh(i);r[a]||(j$e(o,i),r[a]=!0)}return b.isArray(e)?e.forEach(s):s(e),this}};Vd.accessor(["Content-Type","Content-Length","Accept","Accept-Encoding","User-Agent","Authorization"]);b.reduceDescriptors(Vd.prototype,({value:t},e)=>{let n=e[0].toUpperCase()+e.slice(1);return{get:()=>t,set(r){this[n]=r}}});b.freezeMethods(Vd);var Mt=Vd;function Eh(t,e){let n=this||Gd,r=e||n,o=Mt.from(r.headers),s=r.data;return b.forEach(t,function(a){s=a.call(n,s,o.normalize(),e?e.status:void 0)}),o.normalize(),s}function Th(t){return!!(t&&t.__CANCEL__)}function Xse(t,e,n){V.call(this,t??"canceled",V.ERR_CANCELED,e,n),this.name="CanceledError"}b.inherits(Xse,V,{__CANCEL__:!0});var co=Xse;function ni(t,e,n){let r=n.config.validateStatus;!n.status||!r||r(n.status)?t(n):e(new V("Request failed with status code "+n.status,[V.ERR_BAD_REQUEST,V.ERR_BAD_RESPONSE][Math.floor(n.status/100)-4],n.config,n.request,n))}function yD(t){return/^([a-z][a-z\d+\-.]*:)?\/\//i.test(t)}function bD(t,e){return e?t.replace(/\/?\/$/,"")+"/"+e.replace(/^\/+/,""):t}function Yu(t,e,n){let r=!yD(e);return t&&(r||n==!1)?bD(t,e):e}var Sie=k(tie(),1),yie=k(cie(),1);import TGe from"http";import gGe from"https";import Aie from"http2";import Rie from"util";import hc from"zlib";var Zu="1.13.2";function yh(t){let e=/^([-+\w]{1,25})(:?\/\/|:)/.exec(t);return e&&e[1]||""}var sGe=/^(?:([^;]+);)?(?:[^;]+;)?(base64|),([\s\S]*)$/;function UD(t,e,n){let r=n&&n.Blob||qe.classes.Blob,o=yh(t);if(e===void 0&&r&&(e=!0),o==="data"){t=o.length?t.slice(o.length+1):t;let s=sGe.exec(t);if(!s)throw new V("Invalid URL",V.ERR_INVALID_URL);let i=s[1],a=s[2],c=s[3],u=Buffer.from(decodeURIComponent(c),a?"base64":"utf8");if(e){if(!r)throw new V("Blob is not supported",V.ERR_NOT_SUPPORT);return new r([u],{type:i})}return u}throw new V("Unsupported protocol "+o,V.ERR_NOT_SUPPORT)}import _c from"stream";import iGe from"stream";var $D=Symbol("internals"),GD=class extends iGe.Transform{constructor(e){e=b.toFlatObject(e,{maxRate:0,chunkSize:64*1024,minChunkSize:100,timeWindow:500,ticksRate:2,samplesCount:15},null,(r,o)=>!b.isUndefined(o[r])),super({readableHighWaterMark:e.chunkSize});let n=this[$D]={timeWindow:e.timeWindow,chunkSize:e.chunkSize,maxRate:e.maxRate,minChunkSize:e.minChunkSize,bytesSeen:0,isCaptured:!1,notifiedBytesLoaded:0,ts:Date.now(),bytes:0,onReadCallback:null};this.on("newListener",r=>{r==="progress"&&(n.isCaptured||(n.isCaptured=!0))})}_read(e){let n=this[$D];return n.onReadCallback&&n.onReadCallback(),super._read(e)}_transform(e,n,r){let o=this[$D],s=o.maxRate,i=this.readableHighWaterMark,a=o.timeWindow,c=1e3/a,u=s/c,p=o.minChunkSize!==!1?Math.max(o.minChunkSize,u*.01):0,l=(f,m)=>{let h=Buffer.byteLength(f);o.bytesSeen+=h,o.bytes+=h,o.isCaptured&&this.emit("progress",o.bytesSeen),this.push(f)?process.nextTick(m):o.onReadCallback=()=>{o.onReadCallback=null,process.nextTick(m)}},d=(f,m)=>{let h=Buffer.byteLength(f),E=null,A=i,R,y=0;if(s){let O=Date.now();(!o.ts||(y=O-o.ts)>=a)&&(o.ts=O,R=u-o.bytes,o.bytes=R<0?-R:0,y=0),R=u-o.bytes}if(s){if(R<=0)return setTimeout(()=>{m(null,f)},a-y);R<A&&(A=R)}A&&h>A&&h-A>p&&(E=f.subarray(A),f=f.subarray(0,A)),l(f,E?()=>{process.nextTick(m,null,E)}:m)};d(e,function f(m,h){if(m)return r(m);h?d(h,f):r(null)})}},VD=GD;import{EventEmitter as SGe}from"events";import cGe from"util";import{Readable as uGe}from"stream";var{asyncIterator:uie}=Symbol,aGe=async function*(t){t.stream?yield*t.stream():t.arrayBuffer?yield await t.arrayBuffer():t[uie]?yield*t[uie]():yield t},Cb=aGe;var pGe=qe.ALPHABET.ALPHA_DIGIT+"-_",bh=typeof TextEncoder=="function"?new TextEncoder:new cGe.TextEncoder,Ju=`\r
`,lGe=bh.encode(Ju),dGe=2,BD=class{constructor(e,n){let{escapeName:r}=this.constructor,o=b.isString(n),s=`Content-Disposition: form-data; name="${r(e)}"${!o&&n.name?`; filename="${r(n.name)}"`:""}${Ju}`;o?n=bh.encode(String(n).replace(/\r?\n|\r\n?/g,Ju)):s+=`Content-Type: ${n.type||"application/octet-stream"}${Ju}`,this.headers=bh.encode(s+Ju),this.contentLength=o?n.byteLength:n.size,this.size=this.headers.byteLength+this.contentLength+dGe,this.name=e,this.value=n}async*encode(){yield this.headers;let{value:e}=this;b.isTypedArray(e)?yield e:yield*Cb(e),yield lGe}static escapeName(e){return String(e).replace(/[\r\n"]/g,n=>({"\r":"%0D","\n":"%0A",'"':"%22"})[n])}},fGe=(t,e,n)=>{let{tag:r="form-data-boundary",size:o=25,boundary:s=r+"-"+qe.generateString(o,pGe)}=n||{};if(!b.isFormData(t))throw TypeError("FormData instance required");if(s.length<1||s.length>70)throw Error("boundary must be 10-70 characters long");let i=bh.encode("--"+s+Ju),a=bh.encode("--"+s+"--"+Ju),c=a.byteLength,u=Array.from(t.entries()).map(([l,d])=>{let f=new BD(l,d);return c+=f.size,f});c+=i.byteLength*u.length,c=b.toFiniteNumber(c);let p={"Content-Type":`multipart/form-data; boundary=${s}`};return Number.isFinite(c)&&(p["Content-Length"]=c),e&&e(p),uGe.from((async function*(){for(let l of u)yield i,yield*l.encode();yield a})())},pie=fGe;import mGe from"stream";var jD=class extends mGe.Transform{__transform(e,n,r){this.push(e),r()}_transform(e,n,r){if(e.length!==0&&(this._transform=this.__transform,e[0]!==120)){let o=Buffer.alloc(2);o[0]=120,o[1]=156,this.push(o,n)}this.__transform(e,n,r)}},lie=jD;var _Ge=(t,e)=>b.isAsyncFn(t)?function(...n){let r=n.pop();t.apply(this,n).then(o=>{try{e?r(null,...e(o)):r(null,o)}catch(s){r(s)}},r)}:t,die=_Ge;function hGe(t,e){t=t||10;let n=new Array(t),r=new Array(t),o=0,s=0,i;return e=e!==void 0?e:1e3,function(c){let u=Date.now(),p=r[s];i||(i=u),n[o]=c,r[o]=u;let l=s,d=0;for(;l!==o;)d+=n[l++],l=l%t;if(o=(o+1)%t,o===s&&(s=(s+1)%t),u-i<e)return;let f=p&&u-p;return f?Math.round(d*1e3/f):void 0}}var fie=hGe;function EGe(t,e){let n=0,r=1e3/e,o,s,i=(u,p=Date.now())=>{n=p,o=null,s&&(clearTimeout(s),s=null),t(...u)};return[(...u)=>{let p=Date.now(),l=p-n;l>=r?i(u,p):(o=u,s||(s=setTimeout(()=>{s=null,i(o)},r-l)))},()=>o&&i(o)]}var mie=EGe;var ji=(t,e,n=3)=>{let r=0,o=fie(50,250);return mie(s=>{let i=s.loaded,a=s.lengthComputable?s.total:void 0,c=i-r,u=o(c),p=i<=a;r=i;let l={loaded:i,total:a,progress:a?i/a:void 0,bytes:c,rate:u||void 0,estimated:u&&a&&p?(a-i)/u:void 0,event:s,lengthComputable:a!=null,[e?"download":"upload"]:!0};t(l)},n)},jd=(t,e)=>{let n=t!=null;return[r=>e[0]({lengthComputable:n,total:t,loaded:r}),e[1]]},Hd=t=>(...e)=>b.asap(()=>t(...e));function HD(t){if(!t||typeof t!="string"||!t.startsWith("data:"))return 0;let e=t.indexOf(",");if(e<0)return 0;let n=t.slice(5,e),r=t.slice(e+1);if(/;base64/i.test(n)){let s=r.length,i=r.length;for(let d=0;d<i;d++)if(r.charCodeAt(d)===37&&d+2<i){let f=r.charCodeAt(d+1),m=r.charCodeAt(d+2);(f>=48&&f<=57||f>=65&&f<=70||f>=97&&f<=102)&&(m>=48&&m<=57||m>=65&&m<=70||m>=97&&m<=102)&&(s-=2,d+=2)}let a=0,c=i-1,u=d=>d>=2&&r.charCodeAt(d-2)===37&&r.charCodeAt(d-1)===51&&(r.charCodeAt(d)===68||r.charCodeAt(d)===100);c>=0&&(r.charCodeAt(c)===61?(a++,c--):u(c)&&(a++,c-=3)),a===1&&c>=0&&(r.charCodeAt(c)===61||u(c))&&a++;let l=Math.floor(s/4)*3-(a||0);return l>0?l:0}return Buffer.byteLength(r,"utf8")}var _ie={flush:hc.constants.Z_SYNC_FLUSH,finishFlush:hc.constants.Z_SYNC_FLUSH},AGe={flush:hc.constants.BROTLI_OPERATION_FLUSH,finishFlush:hc.constants.BROTLI_OPERATION_FLUSH},hie=b.isFunction(hc.createBrotliDecompress),{http:RGe,https:yGe}=yie.default,bGe=/https:?/,Eie=qe.protocols.map(t=>t+":"),Tie=(t,[e,n])=>(t.on("end",n).on("error",n),e),FD=class{constructor(){this.sessions=Object.create(null)}getSession(e,n){n=Object.assign({sessionTimeout:1e3},n);let r=this.sessions[e];if(r){let p=r.length;for(let l=0;l<p;l++){let[d,f]=r[l];if(!d.destroyed&&!d.closed&&Rie.isDeepStrictEqual(f,n))return d}}let o=Aie.connect(e,n),s,i=()=>{if(s)return;s=!0;let p=r,l=p.length,d=l;for(;d--;)if(p[d][0]===o){l===1?delete this.sessions[e]:p.splice(d,1);return}},a=o.request,{sessionTimeout:c}=n;if(c!=null){let p,l=0;o.request=function(){let d=a.apply(this,arguments);return l++,p&&(clearTimeout(p),p=null),d.once("close",()=>{--l||(p=setTimeout(()=>{p=null,i()},c))}),d}}o.once("close",i);let u=[o,n];return r?r.push(u):r=this.sessions[e]=[u],o}},NGe=new FD;function OGe(t,e){t.beforeRedirects.proxy&&t.beforeRedirects.proxy(t),t.beforeRedirects.config&&t.beforeRedirects.config(t,e)}function bie(t,e,n){let r=e;if(!r&&r!==!1){let o=Sie.default.getProxyForUrl(n);o&&(r=new URL(o))}if(r){if(r.username&&(r.auth=(r.username||"")+":"+(r.password||"")),r.auth){(r.auth.username||r.auth.password)&&(r.auth=(r.auth.username||"")+":"+(r.auth.password||""));let s=Buffer.from(r.auth,"utf8").toString("base64");t.headers["Proxy-Authorization"]="Basic "+s}t.headers.host=t.hostname+(t.port?":"+t.port:"");let o=r.hostname||r.host;t.hostname=o,t.host=o,t.port=r.port,t.path=n,r.protocol&&(t.protocol=r.protocol.includes(":")?r.protocol:`${r.protocol}:`)}t.beforeRedirects.proxy=function(s){bie(s,e,s.href)}}var IGe=typeof process<"u"&&b.kindOf(process)==="process",vGe=t=>new Promise((e,n)=>{let r,o,s=(c,u)=>{o||(o=!0,r&&r(c,u))},i=c=>{s(c),e(c)},a=c=>{s(c,!0),n(c)};t(i,a,c=>r=c).catch(a)}),xGe=({address:t,family:e})=>{if(!b.isString(t))throw TypeError("address must be a string");return{address:t,family:e||(t.indexOf(".")<0?6:4)}},gie=(t,e)=>xGe(b.isObject(t)?t:{address:t,family:e}),PGe={request(t,e){let n=t.protocol+"//"+t.hostname+":"+(t.port||80),{http2Options:r,headers:o}=t,s=NGe.getSession(n,r),{HTTP2_HEADER_SCHEME:i,HTTP2_HEADER_METHOD:a,HTTP2_HEADER_PATH:c,HTTP2_HEADER_STATUS:u}=Aie.constants,p={[i]:t.protocol.replace(":",""),[a]:t.method,[c]:t.path};b.forEach(o,(d,f)=>{f.charAt(0)!==":"&&(p[f]=d)});let l=s.request(p);return l.once("response",d=>{let f=l;d=Object.assign({},d);let m=d[u];delete d[u],f.headers=d,f.statusCode=+m,e(f)}),l}},Nie=IGe&&function(e){return vGe(async function(r,o,s){let{data:i,lookup:a,family:c,httpVersion:u=1,http2Options:p}=e,{responseType:l,responseEncoding:d}=e,f=e.method.toUpperCase(),m,h=!1,E;if(u=+u,Number.isNaN(u))throw TypeError(`Invalid protocol version: '${e.httpVersion}' is not a number`);if(u!==1&&u!==2)throw TypeError(`Unsupported protocol version '${u}'`);let A=u===2;if(a){let ge=die(a,re=>b.isArray(re)?re:[re]);a=(re,tt,Fr)=>{ge(re,tt,(Ft,jo,Hi)=>{if(Ft)return Fr(Ft);let Tr=b.isArray(jo)?jo.map(xh=>gie(xh)):[gie(jo,Hi)];tt.all?Fr(Ft,Tr):Fr(Ft,Tr[0].address,Tr[0].family)})}}let R=new SGe;function y(ge){try{R.emit("abort",!ge||ge.type?new co(null,e,E):ge)}catch(re){console.warn("emit error",re)}}R.once("abort",o);let O=()=>{e.cancelToken&&e.cancelToken.unsubscribe(y),e.signal&&e.signal.removeEventListener("abort",y),R.removeAllListeners()};(e.cancelToken||e.signal)&&(e.cancelToken&&e.cancelToken.subscribe(y),e.signal&&(e.signal.aborted?y():e.signal.addEventListener("abort",y))),s((ge,re)=>{if(m=!0,re){h=!0,O();return}let{data:tt}=ge;if(tt instanceof _c.Readable||tt instanceof _c.Duplex){let Fr=_c.finished(tt,()=>{Fr(),O()})}else O()});let P=Yu(e.baseURL,e.url,e.allowAbsoluteUrls),M=new URL(P,qe.hasBrowserEnv?qe.origin:void 0),j=M.protocol||Eie[0];if(j==="data:"){if(e.maxContentLength>-1){let re=String(e.url||P||"");if(HD(re)>e.maxContentLength)return o(new V("maxContentLength size of "+e.maxContentLength+" exceeded",V.ERR_BAD_RESPONSE,e))}let ge;if(f!=="GET")return ni(r,o,{status:405,statusText:"method not allowed",headers:{},config:e});try{ge=UD(e.url,l==="blob",{Blob:e.env&&e.env.Blob})}catch(re){throw V.from(re,V.ERR_BAD_REQUEST,e)}return l==="text"?(ge=ge.toString(d),(!d||d==="utf8")&&(ge=b.stripBOM(ge))):l==="stream"&&(ge=_c.Readable.from(ge)),ni(r,o,{data:ge,status:200,statusText:"OK",headers:new Mt,config:e})}if(Eie.indexOf(j)===-1)return o(new V("Unsupported protocol "+j,V.ERR_BAD_REQUEST,e));let se=Mt.from(e.headers).normalize();se.set("User-Agent","axios/"+Zu,!1);let{onUploadProgress:we,onDownloadProgress:gt}=e,dn=e.maxRate,fn,Ke;if(b.isSpecCompliantForm(i)){let ge=se.getContentType(/boundary=([-_\w\d]{10,70})/i);i=pie(i,re=>{se.set(re)},{tag:`axios-${Zu}-boundary`,boundary:ge&&ge[1]||void 0})}else if(b.isFormData(i)&&b.isFunction(i.getHeaders)){if(se.set(i.getHeaders()),!se.hasContentLength())try{let ge=await Rie.promisify(i.getLength).call(i);Number.isFinite(ge)&&ge>=0&&se.setContentLength(ge)}catch{}}else if(b.isBlob(i)||b.isFile(i))i.size&&se.setContentType(i.type||"application/octet-stream"),se.setContentLength(i.size||0),i=_c.Readable.from(Cb(i));else if(i&&!b.isStream(i)){if(!Buffer.isBuffer(i))if(b.isArrayBuffer(i))i=Buffer.from(new Uint8Array(i));else if(b.isString(i))i=Buffer.from(i,"utf-8");else return o(new V("Data after transformation must be a string, an ArrayBuffer, a Buffer, or a Stream",V.ERR_BAD_REQUEST,e));if(se.setContentLength(i.length,!1),e.maxBodyLength>-1&&i.length>e.maxBodyLength)return o(new V("Request body larger than maxBodyLength limit",V.ERR_BAD_REQUEST,e))}let jn=b.toFiniteNumber(se.getContentLength());b.isArray(dn)?(fn=dn[0],Ke=dn[1]):fn=Ke=dn,i&&(we||fn)&&(b.isStream(i)||(i=_c.Readable.from(i,{objectMode:!1})),i=_c.pipeline([i,new VD({maxRate:b.toFiniteNumber(fn)})],b.noop),we&&i.on("progress",Tie(i,jd(jn,ji(Hd(we),!1,3)))));let Hr;if(e.auth){let ge=e.auth.username||"",re=e.auth.password||"";Hr=ge+":"+re}if(!Hr&&M.username){let ge=M.username,re=M.password;Hr=ge+":"+re}Hr&&se.delete("authorization");let Hn;try{Hn=zu(M.pathname+M.search,e.params,e.paramsSerializer).replace(/^\?/,"")}catch(ge){let re=new Error(ge.message);return re.config=e,re.url=e.url,re.exists=!0,o(re)}se.set("Accept-Encoding","gzip, compress, deflate"+(hie?", br":""),!1);let Lt={path:Hn,method:f,headers:se.toJSON(),agents:{http:e.httpAgent,https:e.httpsAgent},auth:Hr,protocol:j,family:c,beforeRedirect:OGe,beforeRedirects:{},http2Options:p};!b.isUndefined(a)&&(Lt.lookup=a),e.socketPath?Lt.socketPath=e.socketPath:(Lt.hostname=M.hostname.startsWith("[")?M.hostname.slice(1,-1):M.hostname,Lt.port=M.port,bie(Lt,e.proxy,j+"//"+M.hostname+(M.port?":"+M.port:"")+Lt.path));let xn,oi=bGe.test(Lt.protocol);if(Lt.agent=oi?e.httpsAgent:e.httpAgent,A?xn=PGe:e.transport?xn=e.transport:e.maxRedirects===0?xn=oi?gGe:TGe:(e.maxRedirects&&(Lt.maxRedirects=e.maxRedirects),e.beforeRedirect&&(Lt.beforeRedirects.config=e.beforeRedirect),xn=oi?yGe:RGe),e.maxBodyLength>-1?Lt.maxBodyLength=e.maxBodyLength:Lt.maxBodyLength=1/0,e.insecureHTTPParser&&(Lt.insecureHTTPParser=e.insecureHTTPParser),E=xn.request(Lt,function(re){if(E.destroyed)return;let tt=[re],Fr=b.toFiniteNumber(re.headers["content-length"]);if(gt||Ke){let Tr=new VD({maxRate:b.toFiniteNumber(Ke)});gt&&Tr.on("progress",Tie(Tr,jd(Fr,ji(Hd(gt),!0,3)))),tt.push(Tr)}let Ft=re,jo=re.req||E;if(e.decompress!==!1&&re.headers["content-encoding"])switch((f==="HEAD"||re.statusCode===204)&&delete re.headers["content-encoding"],(re.headers["content-encoding"]||"").toLowerCase()){case"gzip":case"x-gzip":case"compress":case"x-compress":tt.push(hc.createUnzip(_ie)),delete re.headers["content-encoding"];break;case"deflate":tt.push(new lie),tt.push(hc.createUnzip(_ie)),delete re.headers["content-encoding"];break;case"br":hie&&(tt.push(hc.createBrotliDecompress(AGe)),delete re.headers["content-encoding"])}Ft=tt.length>1?_c.pipeline(tt,b.noop):tt[0];let Hi={status:re.statusCode,statusText:re.statusMessage,headers:new Mt(re.headers),config:e,request:jo};if(l==="stream")Hi.data=Ft,ni(r,o,Hi);else{let Tr=[],xh=0;Ft.on("data",function(rr){Tr.push(rr),xh+=rr.length,e.maxContentLength>-1&&xh>e.maxContentLength&&(h=!0,Ft.destroy(),y(new V("maxContentLength size of "+e.maxContentLength+" exceeded",V.ERR_BAD_RESPONSE,e,jo)))}),Ft.on("aborted",function(){if(h)return;let rr=new V("stream has been aborted",V.ERR_BAD_RESPONSE,e,jo);Ft.destroy(rr),o(rr)}),Ft.on("error",function(rr){E.destroyed||o(V.from(rr,null,e,jo))}),Ft.on("end",function(){try{let rr=Tr.length===1?Tr[0]:Buffer.concat(Tr);l!=="arraybuffer"&&(rr=rr.toString(d),(!d||d==="utf8")&&(rr=b.stripBOM(rr))),Hi.data=rr}catch(rr){return o(V.from(rr,null,e,Hi.request,Hi))}ni(r,o,Hi)})}R.once("abort",Tr=>{Ft.destroyed||(Ft.emit("error",Tr),Ft.destroy())})}),R.once("abort",ge=>{E.close?E.close():E.destroy(ge)}),E.on("error",function(re){o(V.from(re,null,e,E))}),E.on("socket",function(re){re.setKeepAlive(!0,1e3*60)}),e.timeout){let ge=parseInt(e.timeout,10);if(Number.isNaN(ge)){y(new V("error trying to parse `config.timeout` to int",V.ERR_BAD_OPTION_VALUE,e,E));return}E.setTimeout(ge,function(){if(m)return;let tt=e.timeout?"timeout of "+e.timeout+"ms exceeded":"timeout exceeded",Fr=e.transitional||$d;e.timeoutErrorMessage&&(tt=e.timeoutErrorMessage),y(new V(tt,Fr.clarifyTimeoutError?V.ETIMEDOUT:V.ECONNABORTED,e,E))})}else E.setTimeout(0);if(b.isStream(i)){let ge=!1,re=!1;i.on("end",()=>{ge=!0}),i.once("error",tt=>{re=!0,E.destroy(tt)}),i.on("close",()=>{!ge&&!re&&y(new co("Request stream has been aborted",e,E))}),i.pipe(E)}else i&&E.write(i),E.end()})};var Oie=qe.hasStandardBrowserEnv?((t,e)=>n=>(n=new URL(n,qe.origin),t.protocol===n.protocol&&t.host===n.host&&(e||t.port===n.port)))(new URL(qe.origin),qe.navigator&&/(msie|trident)/i.test(qe.navigator.userAgent)):()=>!0;var Iie=qe.hasStandardBrowserEnv?{write(t,e,n,r,o,s,i){if(typeof document>"u")return;let a=[`${t}=${encodeURIComponent(e)}`];b.isNumber(n)&&a.push(`expires=${new Date(n).toUTCString()}`),b.isString(r)&&a.push(`path=${r}`),b.isString(o)&&a.push(`domain=${o}`),s===!0&&a.push("secure"),b.isString(i)&&a.push(`SameSite=${i}`),document.cookie=a.join("; ")},read(t){if(typeof document>"u")return null;let e=document.cookie.match(new RegExp("(?:^|; )"+t+"=([^;]*)"));return e?decodeURIComponent(e[1]):null},remove(t){this.write(t,"",Date.now()-864e5,"/")}}:{write(){},read(){return null},remove(){}};var vie=t=>t instanceof Mt?{...t}:t;function Ts(t,e){e=e||{};let n={};function r(u,p,l,d){return b.isPlainObject(u)&&b.isPlainObject(p)?b.merge.call({caseless:d},u,p):b.isPlainObject(p)?b.merge({},p):b.isArray(p)?p.slice():p}function o(u,p,l,d){if(b.isUndefined(p)){if(!b.isUndefined(u))return r(void 0,u,l,d)}else return r(u,p,l,d)}function s(u,p){if(!b.isUndefined(p))return r(void 0,p)}function i(u,p){if(b.isUndefined(p)){if(!b.isUndefined(u))return r(void 0,u)}else return r(void 0,p)}function a(u,p,l){if(l in e)return r(u,p);if(l in t)return r(void 0,u)}let c={url:s,method:s,data:s,baseURL:i,transformRequest:i,transformResponse:i,paramsSerializer:i,timeout:i,timeoutMessage:i,withCredentials:i,withXSRFToken:i,adapter:i,responseType:i,xsrfCookieName:i,xsrfHeaderName:i,onUploadProgress:i,onDownloadProgress:i,decompress:i,maxContentLength:i,maxBodyLength:i,beforeRedirect:i,transport:i,httpAgent:i,httpsAgent:i,cancelToken:i,socketPath:i,responseEncoding:i,validateStatus:a,headers:(u,p,l)=>o(vie(u),vie(p),l,!0)};return b.forEach(Object.keys({...t,...e}),function(p){let l=c[p]||o,d=l(t[p],e[p],p);b.isUndefined(d)&&l!==a||(n[p]=d)}),n}var Mb=t=>{let e=Ts({},t),{data:n,withXSRFToken:r,xsrfHeaderName:o,xsrfCookieName:s,headers:i,auth:a}=e;if(e.headers=i=Mt.from(i),e.url=zu(Yu(e.baseURL,e.url,e.allowAbsoluteUrls),t.params,t.paramsSerializer),a&&i.set("Authorization","Basic "+btoa((a.username||"")+":"+(a.password?unescape(encodeURIComponent(a.password)):""))),b.isFormData(n)){if(qe.hasStandardBrowserEnv||qe.hasStandardBrowserWebWorkerEnv)i.setContentType(void 0);else if(b.isFunction(n.getHeaders)){let c=n.getHeaders(),u=["content-type","content-length"];Object.entries(c).forEach(([p,l])=>{u.includes(p.toLowerCase())&&i.set(p,l)})}}if(qe.hasStandardBrowserEnv&&(r&&b.isFunction(r)&&(r=r(e)),r||r!==!1&&Oie(e.url))){let c=o&&s&&Iie.read(s);c&&i.set(o,c)}return e};var CGe=typeof XMLHttpRequest<"u",xie=CGe&&function(t){return new Promise(function(n,r){let o=Mb(t),s=o.data,i=Mt.from(o.headers).normalize(),{responseType:a,onUploadProgress:c,onDownloadProgress:u}=o,p,l,d,f,m;function h(){f&&f(),m&&m(),o.cancelToken&&o.cancelToken.unsubscribe(p),o.signal&&o.signal.removeEventListener("abort",p)}let E=new XMLHttpRequest;E.open(o.method.toUpperCase(),o.url,!0),E.timeout=o.timeout;function A(){if(!E)return;let y=Mt.from("getAllResponseHeaders"in E&&E.getAllResponseHeaders()),P={data:!a||a==="text"||a==="json"?E.responseText:E.response,status:E.status,statusText:E.statusText,headers:y,config:t,request:E};ni(function(j){n(j),h()},function(j){r(j),h()},P),E=null}"onloadend"in E?E.onloadend=A:E.onreadystatechange=function(){!E||E.readyState!==4||E.status===0&&!(E.responseURL&&E.responseURL.indexOf("file:")===0)||setTimeout(A)},E.onabort=function(){E&&(r(new V("Request aborted",V.ECONNABORTED,t,E)),E=null)},E.onerror=function(O){let P=O&&O.message?O.message:"Network Error",M=new V(P,V.ERR_NETWORK,t,E);M.event=O||null,r(M),E=null},E.ontimeout=function(){let O=o.timeout?"timeout of "+o.timeout+"ms exceeded":"timeout exceeded",P=o.transitional||$d;o.timeoutErrorMessage&&(O=o.timeoutErrorMessage),r(new V(O,P.clarifyTimeoutError?V.ETIMEDOUT:V.ECONNABORTED,t,E)),E=null},s===void 0&&i.setContentType(null),"setRequestHeader"in E&&b.forEach(i.toJSON(),function(O,P){E.setRequestHeader(P,O)}),b.isUndefined(o.withCredentials)||(E.withCredentials=!!o.withCredentials),a&&a!=="json"&&(E.responseType=o.responseType),u&&([d,m]=ji(u,!0),E.addEventListener("progress",d)),c&&E.upload&&([l,f]=ji(c),E.upload.addEventListener("progress",l),E.upload.addEventListener("loadend",f)),(o.cancelToken||o.signal)&&(p=y=>{E&&(r(!y||y.type?new co(null,t,E):y),E.abort(),E=null)},o.cancelToken&&o.cancelToken.subscribe(p),o.signal&&(o.signal.aborted?p():o.signal.addEventListener("abort",p)));let R=yh(o.url);if(R&&qe.protocols.indexOf(R)===-1){r(new V("Unsupported protocol "+R+":",V.ERR_BAD_REQUEST,t));return}E.send(s||null)})};var MGe=(t,e)=>{let{length:n}=t=t?t.filter(Boolean):[];if(e||n){let r=new AbortController,o,s=function(u){if(!o){o=!0,a();let p=u instanceof Error?u:this.reason;r.abort(p instanceof V?p:new co(p instanceof Error?p.message:p))}},i=e&&setTimeout(()=>{i=null,s(new V(`timeout ${e} of ms exceeded`,V.ETIMEDOUT))},e),a=()=>{t&&(i&&clearTimeout(i),i=null,t.forEach(u=>{u.unsubscribe?u.unsubscribe(s):u.removeEventListener("abort",s)}),t=null)};t.forEach(u=>u.addEventListener("abort",s));let{signal:c}=r;return c.unsubscribe=()=>b.asap(a),c}},Pie=MGe;var wGe=function*(t,e){let n=t.byteLength;if(!e||n<e){yield t;return}let r=0,o;for(;r<n;)o=r+e,yield t.slice(r,o),r=o},LGe=async function*(t,e){for await(let n of DGe(t))yield*wGe(n,e)},DGe=async function*(t){if(t[Symbol.asyncIterator]){yield*t;return}let e=t.getReader();try{for(;;){let{done:n,value:r}=await e.read();if(n)break;yield r}}finally{await e.cancel()}},qD=(t,e,n,r)=>{let o=LGe(t,e),s=0,i,a=c=>{i||(i=!0,r&&r(c))};return new ReadableStream({async pull(c){try{let{done:u,value:p}=await o.next();if(u){a(),c.close();return}let l=p.byteLength;if(n){let d=s+=l;n(d)}c.enqueue(new Uint8Array(p))}catch(u){throw a(u),u}},cancel(c){return a(c),o.return()}},{highWaterMark:2})};var Cie=64*1024,{isFunction:wb}=b,kGe=(({Request:t,Response:e})=>({Request:t,Response:e}))(b.global),{ReadableStream:Mie,TextEncoder:wie}=b.global,Lie=(t,...e)=>{try{return!!t(...e)}catch{return!1}},UGe=t=>{t=b.merge.call({skipUndefined:!0},kGe,t);let{fetch:e,Request:n,Response:r}=t,o=e?wb(e):typeof fetch=="function",s=wb(n),i=wb(r);if(!o)return!1;let a=o&&wb(Mie),c=o&&(typeof wie=="function"?(m=>h=>m.encode(h))(new wie):async m=>new Uint8Array(await new n(m).arrayBuffer())),u=s&&a&&Lie(()=>{let m=!1,h=new n(qe.origin,{body:new Mie,method:"POST",get duplex(){return m=!0,"half"}}).headers.has("Content-Type");return m&&!h}),p=i&&a&&Lie(()=>b.isReadableStream(new r("").body)),l={stream:p&&(m=>m.body)};o&&["text","arrayBuffer","blob","formData","stream"].forEach(m=>{!l[m]&&(l[m]=(h,E)=>{let A=h&&h[m];if(A)return A.call(h);throw new V(`Response type '${m}' is not supported`,V.ERR_NOT_SUPPORT,E)})});let d=async m=>{if(m==null)return 0;if(b.isBlob(m))return m.size;if(b.isSpecCompliantForm(m))return(await new n(qe.origin,{method:"POST",body:m}).arrayBuffer()).byteLength;if(b.isArrayBufferView(m)||b.isArrayBuffer(m))return m.byteLength;if(b.isURLSearchParams(m)&&(m=m+""),b.isString(m))return(await c(m)).byteLength},f=async(m,h)=>{let E=b.toFiniteNumber(m.getContentLength());return E??d(h)};return async m=>{let{url:h,method:E,data:A,signal:R,cancelToken:y,timeout:O,onDownloadProgress:P,onUploadProgress:M,responseType:j,headers:se,withCredentials:we="same-origin",fetchOptions:gt}=Mb(m),dn=e||fetch;j=j?(j+"").toLowerCase():"text";let fn=Pie([R,y&&y.toAbortSignal()],O),Ke=null,jn=fn&&fn.unsubscribe&&(()=>{fn.unsubscribe()}),Hr;try{if(M&&u&&E!=="get"&&E!=="head"&&(Hr=await f(se,A))!==0){let re=new n(h,{method:"POST",body:A,duplex:"half"}),tt;if(b.isFormData(A)&&(tt=re.headers.get("content-type"))&&se.setContentType(tt),re.body){let[Fr,Ft]=jd(Hr,ji(Hd(M)));A=qD(re.body,Cie,Fr,Ft)}}b.isString(we)||(we=we?"include":"omit");let Hn=s&&"credentials"in n.prototype,Lt={...gt,signal:fn,method:E.toUpperCase(),headers:se.normalize().toJSON(),body:A,duplex:"half",credentials:Hn?we:void 0};Ke=s&&new n(h,Lt);let xn=await(s?dn(Ke,gt):dn(h,Lt)),oi=p&&(j==="stream"||j==="response");if(p&&(P||oi&&jn)){let re={};["status","statusText","headers"].forEach(jo=>{re[jo]=xn[jo]});let tt=b.toFiniteNumber(xn.headers.get("content-length")),[Fr,Ft]=P&&jd(tt,ji(Hd(P),!0))||[];xn=new r(qD(xn.body,Cie,Fr,()=>{Ft&&Ft(),jn&&jn()}),re)}j=j||"text";let ge=await l[b.findKey(l,j)||"text"](xn,m);return!oi&&jn&&jn(),await new Promise((re,tt)=>{ni(re,tt,{data:ge,headers:Mt.from(xn.headers),status:xn.status,statusText:xn.statusText,config:m,request:Ke})})}catch(Hn){throw jn&&jn(),Hn&&Hn.name==="TypeError"&&/Load failed|fetch/i.test(Hn.message)?Object.assign(new V("Network Error",V.ERR_NETWORK,m,Ke),{cause:Hn.cause||Hn}):V.from(Hn,Hn&&Hn.code,m,Ke)}}},$Ge=new Map,zD=t=>{let e=t&&t.env||{},{fetch:n,Request:r,Response:o}=e,s=[r,o,n],i=s.length,a=i,c,u,p=$Ge;for(;a--;)c=s[a],u=p.get(c),u===void 0&&p.set(c,u=a?new Map:UGe(e)),p=u;return u},Kdt=zD();var YD={http:Nie,xhr:xie,fetch:{get:zD}};b.forEach(YD,(t,e)=>{if(t){try{Object.defineProperty(t,"name",{value:e})}catch{}Object.defineProperty(t,"adapterName",{value:e})}});var Die=t=>`- ${t}`,VGe=t=>b.isFunction(t)||t===null||t===!1;function BGe(t,e){t=b.isArray(t)?t:[t];let{length:n}=t,r,o,s={};for(let i=0;i<n;i++){r=t[i];let a;if(o=r,!VGe(r)&&(o=YD[(a=String(r)).toLowerCase()],o===void 0))throw new V(`Unknown adapter '${a}'`);if(o&&(b.isFunction(o)||(o=o.get(e))))break;s[a||"#"+i]=o}if(!o){let i=Object.entries(s).map(([c,u])=>`adapter ${c} `+(u===!1?"is not supported by the environment":"is not available in the build")),a=n?i.length>1?`since :
`+i.map(Die).join(`
`):" "+Die(i[0]):"as no adapter specified";throw new V("There is no suitable adapter to dispatch the request "+a,"ERR_NOT_SUPPORT")}return o}var Lb={getAdapter:BGe,adapters:YD};function WD(t){if(t.cancelToken&&t.cancelToken.throwIfRequested(),t.signal&&t.signal.aborted)throw new co(null,t)}function Db(t){return WD(t),t.headers=Mt.from(t.headers),t.data=Eh.call(t,t.transformRequest),["post","put","patch"].indexOf(t.method)!==-1&&t.headers.setContentType("application/x-www-form-urlencoded",!1),Lb.getAdapter(t.adapter||Gd.adapter,t)(t).then(function(r){return WD(t),r.data=Eh.call(t,t.transformResponse,r),r.headers=Mt.from(r.headers),r},function(r){return Th(r)||(WD(t),r&&r.response&&(r.response.data=Eh.call(t,t.transformResponse,r.response),r.response.headers=Mt.from(r.response.headers))),Promise.reject(r)})}var kb={};["object","boolean","number","function","string","symbol"].forEach((t,e)=>{kb[t]=function(r){return typeof r===t||"a"+(e<1?"n ":" ")+t}});var kie={};kb.transitional=function(e,n,r){function o(s,i){return"[Axios v"+Zu+"] Transitional option '"+s+"'"+i+(r?". "+r:"")}return(s,i,a)=>{if(e===!1)throw new V(o(i," has been removed"+(n?" in "+n:"")),V.ERR_DEPRECATED);return n&&!kie[i]&&(kie[i]=!0,console.warn(o(i," has been deprecated since v"+n+" and will be removed in the near future"))),e?e(s,i,a):!0}};kb.spelling=function(e){return(n,r)=>(console.warn(`${r} is likely a misspelling of ${e}`),!0)};function jGe(t,e,n){if(typeof t!="object")throw new V("options must be an object",V.ERR_BAD_OPTION_VALUE);let r=Object.keys(t),o=r.length;for(;o-- >0;){let s=r[o],i=e[s];if(i){let a=t[s],c=a===void 0||i(a,s,t);if(c!==!0)throw new V("option "+s+" must be "+c,V.ERR_BAD_OPTION_VALUE);continue}if(n!==!0)throw new V("Unknown option "+s,V.ERR_BAD_OPTION)}}var Nh={assertOptions:jGe,validators:kb};var ri=Nh.validators,Fd=class{constructor(e){this.defaults=e||{},this.interceptors={request:new _D,response:new _D}}async request(e,n){try{return await this._request(e,n)}catch(r){if(r instanceof Error){let o={};Error.captureStackTrace?Error.captureStackTrace(o):o=new Error;let s=o.stack?o.stack.replace(/^.+\n/,""):"";try{r.stack?s&&!String(r.stack).endsWith(s.replace(/^.+\n.+\n/,""))&&(r.stack+=`
`+s):r.stack=s}catch{}}throw r}}_request(e,n){typeof e=="string"?(n=n||{},n.url=e):n=e||{},n=Ts(this.defaults,n);let{transitional:r,paramsSerializer:o,headers:s}=n;r!==void 0&&Nh.assertOptions(r,{silentJSONParsing:ri.transitional(ri.boolean),forcedJSONParsing:ri.transitional(ri.boolean),clarifyTimeoutError:ri.transitional(ri.boolean)},!1),o!=null&&(b.isFunction(o)?n.paramsSerializer={serialize:o}:Nh.assertOptions(o,{encode:ri.function,serialize:ri.function},!0)),n.allowAbsoluteUrls!==void 0||(this.defaults.allowAbsoluteUrls!==void 0?n.allowAbsoluteUrls=this.defaults.allowAbsoluteUrls:n.allowAbsoluteUrls=!0),Nh.assertOptions(n,{baseUrl:ri.spelling("baseURL"),withXsrfToken:ri.spelling("withXSRFToken")},!0),n.method=(n.method||this.defaults.method||"get").toLowerCase();let i=s&&b.merge(s.common,s[n.method]);s&&b.forEach(["delete","get","head","post","put","patch","common"],m=>{delete s[m]}),n.headers=Mt.concat(i,s);let a=[],c=!0;this.interceptors.request.forEach(function(h){typeof h.runWhen=="function"&&h.runWhen(n)===!1||(c=c&&h.synchronous,a.unshift(h.fulfilled,h.rejected))});let u=[];this.interceptors.response.forEach(function(h){u.push(h.fulfilled,h.rejected)});let p,l=0,d;if(!c){let m=[Db.bind(this),void 0];for(m.unshift(...a),m.push(...u),d=m.length,p=Promise.resolve(n);l<d;)p=p.then(m[l++],m[l++]);return p}d=a.length;let f=n;for(;l<d;){let m=a[l++],h=a[l++];try{f=m(f)}catch(E){h.call(this,E);break}}try{p=Db.call(this,f)}catch(m){return Promise.reject(m)}for(l=0,d=u.length;l<d;)p=p.then(u[l++],u[l++]);return p}getUri(e){e=Ts(this.defaults,e);let n=Yu(e.baseURL,e.url,e.allowAbsoluteUrls);return zu(n,e.params,e.paramsSerializer)}};b.forEach(["delete","get","head","options"],function(e){Fd.prototype[e]=function(n,r){return this.request(Ts(r||{},{method:e,url:n,data:(r||{}).data}))}});b.forEach(["post","put","patch"],function(e){function n(r){return function(s,i,a){return this.request(Ts(a||{},{method:e,headers:r?{"Content-Type":"multipart/form-data"}:{},url:s,data:i}))}}Fd.prototype[e]=n(),Fd.prototype[e+"Form"]=n(!0)});var Oh=Fd;var KD=class t{constructor(e){if(typeof e!="function")throw new TypeError("executor must be a function.");let n;this.promise=new Promise(function(s){n=s});let r=this;this.promise.then(o=>{if(!r._listeners)return;let s=r._listeners.length;for(;s-- >0;)r._listeners[s](o);r._listeners=null}),this.promise.then=o=>{let s,i=new Promise(a=>{r.subscribe(a),s=a}).then(o);return i.cancel=function(){r.unsubscribe(s)},i},e(function(s,i,a){r.reason||(r.reason=new co(s,i,a),n(r.reason))})}throwIfRequested(){if(this.reason)throw this.reason}subscribe(e){if(this.reason){e(this.reason);return}this._listeners?this._listeners.push(e):this._listeners=[e]}unsubscribe(e){if(!this._listeners)return;let n=this._listeners.indexOf(e);n!==-1&&this._listeners.splice(n,1)}toAbortSignal(){let e=new AbortController,n=r=>{e.abort(r)};return this.subscribe(n),e.signal.unsubscribe=()=>this.unsubscribe(n),e.signal}static source(){let e;return{token:new t(function(o){e=o}),cancel:e}}},Uie=KD;function ZD(t){return function(n){return t.apply(null,n)}}function JD(t){return b.isObject(t)&&t.isAxiosError===!0}var QD={Continue:100,SwitchingProtocols:101,Processing:102,EarlyHints:103,Ok:200,Created:201,Accepted:202,NonAuthoritativeInformation:203,NoContent:204,ResetContent:205,PartialContent:206,MultiStatus:207,AlreadyReported:208,ImUsed:226,MultipleChoices:300,MovedPermanently:301,Found:302,SeeOther:303,NotModified:304,UseProxy:305,Unused:306,TemporaryRedirect:307,PermanentRedirect:308,BadRequest:400,Unauthorized:401,PaymentRequired:402,Forbidden:403,NotFound:404,MethodNotAllowed:405,NotAcceptable:406,ProxyAuthenticationRequired:407,RequestTimeout:408,Conflict:409,Gone:410,LengthRequired:411,PreconditionFailed:412,PayloadTooLarge:413,UriTooLong:414,UnsupportedMediaType:415,RangeNotSatisfiable:416,ExpectationFailed:417,ImATeapot:418,MisdirectedRequest:421,UnprocessableEntity:422,Locked:423,FailedDependency:424,TooEarly:425,UpgradeRequired:426,PreconditionRequired:428,TooManyRequests:429,RequestHeaderFieldsTooLarge:431,UnavailableForLegalReasons:451,InternalServerError:500,NotImplemented:501,BadGateway:502,ServiceUnavailable:503,GatewayTimeout:504,HttpVersionNotSupported:505,VariantAlsoNegotiates:506,InsufficientStorage:507,LoopDetected:508,NotExtended:510,NetworkAuthenticationRequired:511,WebServerIsDown:521,ConnectionTimedOut:522,OriginIsUnreachable:523,TimeoutOccurred:524,SslHandshakeFailed:525,InvalidSslCertificate:526};Object.entries(QD).forEach(([t,e])=>{QD[e]=t});var $ie=QD;function Gie(t){let e=new Oh(t),n=ch(Oh.prototype.request,e);return b.extend(n,Oh.prototype,e,{allOwnKeys:!0}),b.extend(n,e,null,{allOwnKeys:!0}),n.create=function(o){return Gie(Ts(t,o))},n}var ln=Gie(Gd);ln.Axios=Oh;ln.CanceledError=co;ln.CancelToken=Uie;ln.isCancel=Th;ln.VERSION=Zu;ln.toFormData=mc;ln.AxiosError=V;ln.Cancel=ln.CanceledError;ln.all=function(e){return Promise.all(e)};ln.spread=ZD;ln.isAxiosError=JD;ln.mergeConfig=Ts;ln.AxiosHeaders=Mt;ln.formToJSON=t=>xb(b.isHTMLForm(t)?new FormData(t):t);ln.getAdapter=Lb.getAdapter;ln.HttpStatusCode=$ie;ln.default=ln;var qd=ln;var{Axios:qft,AxiosError:zft,CanceledError:Yft,isCancel:Wft,CancelToken:Kft,VERSION:Zft,all:Jft,Cancel:Qft,isAxiosError:Vie,spread:Xft,toFormData:emt,AxiosHeaders:tmt,HttpStatusCode:nmt,formToJSON:rmt,getAdapter:omt,mergeConfig:smt}=qd;function HGe(t,e){let n=t instanceof Error?t.message:String(t);if(Vie(t)&&t.response?.data){let{data:a}=t.response;if(typeof a=="string")n=a;else if(a&&typeof a=="object")try{n=JSON.stringify(a)}catch{n=String(a)}}let r=t instanceof Error&&"code"in t?t.code:void 0,o=FGe(t,n);r&&console.debug(`Error code: ${r}`);let i=`${e?`[${e}] `:""}Error: ${n}`;return console.error(`${i} (Type: ${o})`,t),{content:[{type:"text",text:i}],isError:!0}}function FGe(t,e){let n=e.toLowerCase(),r=t instanceof Error?t.name.toLowerCase():"";return r.includes("network")||n.includes("network")||r.includes("fetch")||n.includes("fetch")||r.includes("timeout")||n.includes("timeout")?"NETWORK_ERROR":r.includes("validation")||n.includes("validation")||n.includes("invalid")||n.includes("required")?"VALIDATION_ERROR":n.includes("not found")||n.includes("404")||n.includes("does not exist")?"NOT_FOUND":r.includes("api")||n.includes("api")||n.includes("server error")||n.includes("500")?"API_ERROR":"UNKNOWN_ERROR"}function Et(t,e){return async n=>{try{return await t(n)}catch(r){return HGe(r,e)}}}function Ih(t){return{id:t.id,title:t.title,description:t.description,startTime:t.start_time,endTime:t.end_time,createdAt:t.created_at,updatedAt:t.updated_at,duration:qGe(t.start_time,t.end_time),exercises:t.exercises?.map(e=>({index:e.index,name:e.title,exerciseTemplateId:e.exercise_template_id,notes:e.notes,supersetsId:e.supersets_id,sets:e.sets?.map(n=>({index:n.index,type:n.type,weight:n.weight_kg,reps:n.reps,distance:n.distance_meters,duration:n.duration_seconds,rpe:n.rpe,customMetric:n.custom_metric}))}))}}function vh(t){return{id:t.id,title:t.title,folderId:t.folder_id,createdAt:t.created_at,updatedAt:t.updated_at,exercises:t.exercises?.map(e=>{let r=e.superset_id??e.supersets_id;return{name:e.title,index:e.index,exerciseTemplateId:e.exercise_template_id,notes:e.notes,supersetId:r,restSeconds:e.rest_seconds,sets:e.sets?.map(o=>({index:o.index,type:o.type,weight:o.weight_kg,reps:o.reps,...o.rep_range!==void 0&&{repRange:o.rep_range},distance:o.distance_meters,duration:o.duration_seconds,...o.rpe!==void 0&&{rpe:o.rpe},customMetric:o.custom_metric}))}})}}function Ub(t){return{id:t.id,title:t.title,createdAt:t.created_at,updatedAt:t.updated_at}}function qGe(t,e){if(!t||!e)return"Unknown duration";try{let n=new Date(t),r=new Date(e);if(Number.isNaN(n.getTime())||Number.isNaN(r.getTime()))return"Unknown duration";let o=r.getTime()-n.getTime();if(o<0)return"Invalid duration (end time before start time)";let s=Math.floor(o/(1e3*60*60)),i=Math.floor(o%(1e3*60*60)/(1e3*60)),a=Math.floor(o%(1e3*60)/1e3);return`${s}h ${i}m ${a}s`}catch(n){return console.error("Error calculating duration:",n),"Unknown duration"}}function XD(t){return{id:t.id,title:t.title,type:t.type,primaryMuscleGroup:t.primary_muscle_group,secondaryMuscleGroups:t.secondary_muscle_groups,isCustom:t.is_custom}}function Bie(t){return{workoutId:t.workout_id,workoutTitle:t.workout_title,workoutStartTime:t.workout_start_time,workoutEndTime:t.workout_end_time,exerciseTemplateId:t.exercise_template_id,weight:t.weight_kg,reps:t.reps,distance:t.distance_meters,duration:t.duration_seconds,rpe:t.rpe,customMetric:t.custom_metric,setType:t.set_type}}function Tt(t,e={pretty:!0,indent:2}){return{content:[{type:"text",text:e.pretty?JSON.stringify(t,null,e.indent):JSON.stringify(t)}]}}function wt(t="No data found"){return{content:[{type:"text",text:t}]}}function jie(t,e){let n={page:x.coerce.number().int().gte(1).default(1),pageSize:x.coerce.number().int().gte(1).lte(10).default(5)};t.tool("get-routine-folders","Get a paginated list of your routine folders, including both default and custom folders. Useful for organizing and browsing your workout routines.",n,Et(async s=>{if(!e)throw new Error("API client not initialized. Please provide HEVY_API_KEY.");let{page:i,pageSize:a}=s,u=(await e.getRoutineFolders({page:i,pageSize:a}))?.routine_folders?.map(p=>Ub(p))||[];return u.length===0?wt("No routine folders found for the specified parameters"):Tt(u)},"get-routine-folders"));let r={folderId:x.string().min(1)};t.tool("get-routine-folder","Get complete details of a specific routine folder by its ID, including name, creation date, and associated routines.",r,Et(async s=>{if(!e)throw new Error("API client not initialized. Please provide HEVY_API_KEY.");let{folderId:i}=s,a=await e.getRoutineFolder(i);if(!a)return wt(`Routine folder with ID ${i} not found`);let c=Ub(a);return Tt(c)},"get-routine-folder"));let o={name:x.string().min(1)};t.tool("create-routine-folder","Create a new routine folder in your Hevy account. Requires a name for the folder. Returns the full folder details including the new folder ID.",o,Et(async s=>{if(!e)throw new Error("API client not initialized. Please provide HEVY_API_KEY.");let{name:i}=s,a=await e.createRoutineFolder({routine_folder:{title:i}});if(!a)return wt("Failed to create routine folder: Server returned no data");let c=Ub(a);return Tt(c,{pretty:!0,indent:2})},"create-routine-folder"))}function Hie(t,e){let n={page:x.coerce.number().int().gte(1).default(1),pageSize:x.coerce.number().int().gte(1).lte(10).default(5)};t.tool("get-routines","Get a paginated list of your workout routines, including custom and default routines. Useful for browsing or searching your available routines.",n,Et(async i=>{if(!e)throw new Error("API client not initialized. Please provide HEVY_API_KEY.");let{page:a,pageSize:c}=i,p=(await e.getRoutines({page:a,pageSize:c}))?.routines?.map(l=>vh(l))||[];return p.length===0?wt("No routines found for the specified parameters"):Tt(p)},"get-routines"));let r={routineId:x.string().min(1)};t.tool("get-routine","Get a routine by its ID using the direct endpoint. Returns all details for the specified routine.",r,Et(async i=>{if(!e)throw new Error("API client not initialized. Please provide HEVY_API_KEY.");let{routineId:a}=i,c=await e.getRoutineById(String(a));if(!c||!c.routine)return wt(`Routine with ID ${a} not found`);let u=vh(c.routine);return Tt(u)},"get-routine"));let o={title:x.string().min(1),folderId:x.coerce.number().nullable().optional(),notes:x.string().optional(),exercises:x.array(x.object({exerciseTemplateId:x.string().min(1),supersetId:x.coerce.number().nullable().optional(),restSeconds:x.coerce.number().int().min(0).optional(),notes:x.string().optional(),sets:x.array(x.object({type:x.enum(["warmup","normal","failure","dropset"]).default("normal"),weight:x.coerce.number().optional(),weightKg:x.coerce.number().optional(),reps:x.coerce.number().int().optional(),distance:x.coerce.number().int().optional(),distanceMeters:x.coerce.number().int().optional(),duration:x.coerce.number().int().optional(),durationSeconds:x.coerce.number().int().optional(),customMetric:x.coerce.number().optional(),repRange:x.object({start:x.coerce.number().int().optional(),end:x.coerce.number().int().optional()}).optional()}))}))};t.tool("create-routine","Create a new workout routine in your Hevy account. Requires a title and at least one exercise with sets. Optionally assign to a folder. Returns the full routine details including the new routine ID.",o,Et(async i=>{if(!e)throw new Error("API client not initialized. Please provide HEVY_API_KEY.");let{title:a,folderId:c,notes:u,exercises:p}=i,l=await e.createRoutine({routine:{title:a,folder_id:c??null,notes:u??"",exercises:p.map(f=>({exercise_template_id:f.exerciseTemplateId,superset_id:f.supersetId??null,rest_seconds:f.restSeconds??null,notes:f.notes??null,sets:f.sets.map(m=>{let h={type:m.type},E=m.weight??m.weightKg;E!=null&&(h.weight_kg=E),m.reps!=null&&(h.reps=m.reps);let A=m.distance??m.distanceMeters;A!=null&&(h.distance_meters=A);let R=m.duration??m.durationSeconds;return R!=null&&(h.duration_seconds=R),m.customMetric!=null&&(h.custom_metric=m.customMetric),m.repRange&&(h.rep_range={start:m.repRange.start??null,end:m.repRange.end??null}),h})}))}});if(!l)return wt("Failed to create routine: Server returned no data");let d=vh(l);return Tt(d,{pretty:!0,indent:2})},"create-routine"));let s={routineId:x.string().min(1),title:x.string().min(1),notes:x.string().optional(),exercises:x.array(x.object({exerciseTemplateId:x.string().min(1),supersetId:x.coerce.number().nullable().optional(),restSeconds:x.coerce.number().int().min(0).optional(),notes:x.string().optional(),sets:x.array(x.object({type:x.enum(["warmup","normal","failure","dropset"]).default("normal"),weight:x.coerce.number().optional(),weightKg:x.coerce.number().optional(),reps:x.coerce.number().int().optional(),distance:x.coerce.number().int().optional(),distanceMeters:x.coerce.number().int().optional(),duration:x.coerce.number().int().optional(),durationSeconds:x.coerce.number().int().optional(),customMetric:x.coerce.number().optional(),repRange:x.object({start:x.coerce.number().int().optional(),end:x.coerce.number().int().optional()}).optional()}))}))};t.tool("update-routine","Update an existing routine by ID. You can modify the title, notes, and exercise configurations. Returns the updated routine with all changes applied.",s,Et(async i=>{if(!e)throw new Error("API client not initialized. Please provide HEVY_API_KEY.");let{routineId:a,title:c,notes:u,exercises:p}=i,l=await e.updateRoutine(a,{routine:{title:c,notes:u??null,exercises:p.map(f=>({exercise_template_id:f.exerciseTemplateId,superset_id:f.supersetId??null,rest_seconds:f.restSeconds??null,notes:f.notes??null,sets:f.sets.map(m=>{let h={type:m.type},E=m.weight??m.weightKg;E!=null&&(h.weight_kg=E),m.reps!=null&&(h.reps=m.reps);let A=m.distance??m.distanceMeters;A!=null&&(h.distance_meters=A);let R=m.duration??m.durationSeconds;return R!=null&&(h.duration_seconds=R),m.customMetric!=null&&(h.custom_metric=m.customMetric),m.repRange&&(h.rep_range={start:m.repRange.start??null,end:m.repRange.end??null}),h})}))}});if(!l)return wt(`Failed to update routine with ID ${a}`);let d=vh(l);return Tt(d,{pretty:!0,indent:2})},"update-routine"))}function Fie(t,e){let n={page:x.coerce.number().int().gte(1).default(1),pageSize:x.coerce.number().int().gte(1).lte(100).default(5)};t.tool("get-exercise-templates","Get a paginated list of exercise templates (default and custom) with details like name, category, equipment, and muscle groups. Useful for browsing or searching available exercises.",n,Et(async i=>{if(!e)throw new Error("API client not initialized. Please provide HEVY_API_KEY.");let{page:a,pageSize:c}=i,p=(await e.getExerciseTemplates({page:a,pageSize:c}))?.exercise_templates?.map(l=>XD(l))||[];return p.length===0?wt("No exercise templates found for the specified parameters"):Tt(p)},"get-exercise-templates"));let r={exerciseTemplateId:x.string().min(1)};t.tool("get-exercise-template","Get complete details of a specific exercise template by its ID, including name, category, equipment, muscle groups, and notes.",r,Et(async i=>{if(!e)throw new Error("API client not initialized. Please provide HEVY_API_KEY.");let{exerciseTemplateId:a}=i,c=await e.getExerciseTemplate(a);if(!c)return wt(`Exercise template with ID ${a} not found`);let u=XD(c);return Tt(u)},"get-exercise-template"));let o={exerciseTemplateId:x.string().min(1),startDate:x.string().datetime({offset:!0}).describe("ISO 8601 start date for filtering history").optional(),endDate:x.string().datetime({offset:!0}).describe("ISO 8601 end date for filtering history").optional()};t.tool("get-exercise-history","Get past sets for a specific exercise template, optionally filtered by start and end dates.",o,Et(async i=>{if(!e)throw new Error("API client not initialized. Please provide HEVY_API_KEY.");let{exerciseTemplateId:a,startDate:c,endDate:u}=i,l=(await e.getExerciseHistory(a,{...c?{start_date:c}:{},...u?{end_date:u}:{}}))?.exercise_history?.map(d=>Bie(d))||[];return l.length===0?wt(`No exercise history found for template ${a}`):Tt(l)},"get-exercise-history"));let s={title:x.string().min(1),exerciseType:x.enum(["weight_reps","reps_only","bodyweight_reps","bodyweight_assisted_reps","duration","weight_duration","distance_duration","short_distance_weight"]),equipmentCategory:x.enum(["none","barbell","dumbbell","kettlebell","machine","plate","resistance_band","suspension","other"]),muscleGroup:x.enum(["abdominals","shoulders","biceps","triceps","forearms","quadriceps","hamstrings","calves","glutes","abductors","adductors","lats","upper_back","traps","lower_back","chest","cardio","neck","full_body","other"]),otherMuscles:x.array(x.enum(["abdominals","shoulders","biceps","triceps","forearms","quadriceps","hamstrings","calves","glutes","abductors","adductors","lats","upper_back","traps","lower_back","chest","cardio","neck","full_body","other"])).default([])};t.tool("create-exercise-template","Create a custom exercise template with title, type, equipment, and muscle groups.",s,Et(async i=>{if(!e)throw new Error("API client not initialized. Please provide HEVY_API_KEY.");let{title:a,exerciseType:c,equipmentCategory:u,muscleGroup:p,otherMuscles:l}=i,d=await e.createExerciseTemplate({exercise:{title:a,exercise_type:c,equipment_category:u,muscle_group:p,other_muscles:l}});return Tt({id:d?.id,message:"Exercise template created successfully"})},"create-exercise-template"))}var zGe=x.string().url().refine(t=>{try{let e=new URL(t);return e.protocol==="https:"||e.protocol==="http:"}catch{return!1}},{message:"Webhook URL must be a valid HTTP or HTTPS URL"}).refine(t=>{try{let e=new URL(t);return e.hostname!=="localhost"&&!e.hostname.startsWith("127.")}catch{return!1}},{message:"Webhook URL cannot be localhost or loopback address"});function qie(t,e){let n={};t.tool("get-webhook-subscription","Get the current webhook subscription for this account. Returns the webhook URL and auth token if a subscription exists.",n,Et(async s=>{if(!e)throw new Error("API client not initialized. Please provide HEVY_API_KEY.");if(!e.getWebhookSubscription)throw new Error("Webhook subscription API not available. Please regenerate the client from the updated OpenAPI spec.");let i=await e.getWebhookSubscription();return i?Tt(i):wt("No webhook subscription found for this account")},"get-webhook-subscription"));let r={url:zGe.describe("The webhook URL that will receive POST requests when workouts are created"),authToken:x.string().optional().describe("Optional auth token that will be sent as Authorization header in webhook requests")};t.tool("create-webhook-subscription","Create a new webhook subscription for this account. The webhook will receive POST requests when workouts are created. Your endpoint must respond with 200 OK within 5 seconds.",r,Et(async s=>{if(!e)throw new Error("API client not initialized. Please provide HEVY_API_KEY.");let{url:i,authToken:a}=s;if(!e.createWebhookSubscription)throw new Error("Webhook subscription API not available. Please regenerate the client from the updated OpenAPI spec.");let c=await e.createWebhookSubscription({webhook:{url:i,authToken:a||null}});return c?Tt(c):wt("Failed to create webhook subscription - please check your URL and try again")},"create-webhook-subscription"));let o={};t.tool("delete-webhook-subscription","Delete the current webhook subscription for this account. This will stop all webhook notifications.",o,Et(async s=>{if(!e)throw new Error("API client not initialized. Please provide HEVY_API_KEY.");if(!e.deleteWebhookSubscription)throw new Error("Webhook subscription API not available. Please regenerate the client from the updated OpenAPI spec.");let i=await e.deleteWebhookSubscription();return i?Tt(i):wt("Failed to delete webhook subscription - no subscription may exist or there was a server error")},"delete-webhook-subscription"))}function zie(t,e){let n={page:x.coerce.number().gte(1).default(1),pageSize:x.coerce.number().int().gte(1).lte(10).default(5)};t.tool("get-workouts","Get a paginated list of workouts. Returns workout details including title, description, start/end times, and exercises performed. Results are ordered from newest to oldest.",n,Et(async a=>{if(!e)throw new Error("API client not initialized. Please provide HEVY_API_KEY.");let{page:c,pageSize:u}=a,l=(await e.getWorkouts({page:c,pageSize:u}))?.workouts?.map(d=>Ih(d))||[];return l.length===0?wt("No workouts found for the specified parameters"):Tt(l)},"get-workouts"));let r={workoutId:x.string().min(1)};t.tool("get-workout","Get complete details of a specific workout by ID. Returns all workout information including title, description, start/end times, and detailed exercise data.",r,Et(async a=>{if(!e)throw new Error("API client not initialized. Please provide HEVY_API_KEY.");let{workoutId:c}=a,u=await e.getWorkout(c);if(!u)return wt(`Workout with ID ${c} not found`);let p=Ih(u);return Tt(p)},"get-workout")),t.tool("get-workout-count","Get the total number of workouts on the account. Useful for pagination or statistics.",{},Et(async()=>{if(!e)throw new Error("API client not initialized. Please provide HEVY_API_KEY.");let a=await e.getWorkoutCount(),c=a&&a.workoutCount||0;return Tt({count:c})},"get-workout-count"));let o={page:x.coerce.number().int().gte(1).default(1),pageSize:x.coerce.number().int().gte(1).lte(10).default(5),since:x.string().default("1970-01-01T00:00:00Z")};t.tool("get-workout-events","Retrieve a paged list of workout events (updates or deletes) since a given date. Events are ordered from newest to oldest. The intention is to allow clients to keep their local cache of workouts up to date without having to fetch the entire list of workouts.",o,Et(async a=>{if(!e)throw new Error("API client not initialized. Please provide HEVY_API_KEY.");let{page:c,pageSize:u,since:p}=a,d=(await e.getWorkoutEvents({page:c,pageSize:u,since:p}))?.events||[];return d.length===0?wt(`No workout events found for the specified parameters since ${p}`):Tt(d)},"get-workout-events"));let s={title:x.string().min(1),description:x.string().optional().nullable(),startTime:x.string().regex(/^\d{4}-\d{2}-\d{2}T\d{2}:\d{2}:\d{2}Z$/),endTime:x.string().regex(/^\d{4}-\d{2}-\d{2}T\d{2}:\d{2}:\d{2}Z$/),isPrivate:x.boolean().default(!1),exercises:x.array(x.object({exerciseTemplateId:x.string().min(1),supersetId:x.coerce.number().nullable().optional(),notes:x.string().optional().nullable(),sets:x.array(x.object({type:x.enum(["warmup","normal","failure","dropset"]).default("normal"),weight:x.coerce.number().optional().nullable(),weightKg:x.coerce.number().optional().nullable(),reps:x.coerce.number().int().optional().nullable(),distance:x.coerce.number().int().optional().nullable(),distanceMeters:x.coerce.number().int().optional().nullable(),duration:x.coerce.number().int().optional().nullable(),durationSeconds:x.coerce.number().int().optional().nullable(),rpe:x.coerce.number().optional().nullable(),customMetric:x.coerce.number().optional().nullable()}))}))};t.tool("create-workout","Create a new workout in your Hevy account. Requires title, start/end times, and at least one exercise with sets. Returns the complete workout details upon successful creation including the newly assigned workout ID.",s,Et(async a=>{if(!e)throw new Error("API client not initialized. Please provide HEVY_API_KEY.");let{title:c,description:u,startTime:p,endTime:l,isPrivate:d,exercises:f}=a,h={workout:{title:c,description:u??null,start_time:p,end_time:l,is_private:d,exercises:f.map(R=>({exercise_template_id:R.exerciseTemplateId,superset_id:R.supersetId??null,notes:R.notes??null,sets:R.sets.map(y=>{let O={type:y.type},P=y.weight??y.weightKg;P!=null&&(O.weight_kg=P),y.reps!=null&&(O.reps=y.reps);let M=y.distance??y.distanceMeters;M!=null&&(O.distance_meters=M);let j=y.duration??y.durationSeconds;return j!=null&&(O.duration_seconds=j),y.rpe!=null&&(O.rpe=y.rpe),y.customMetric!=null&&(O.custom_metric=y.customMetric),O})}))}},E=await e.createWorkout(h);if(!E)return wt("Failed to create workout: Server returned no data");let A=Ih(E);return Tt(A,{pretty:!0,indent:2})},"create-workout"));let i={workoutId:x.string().min(1),title:x.string().min(1),description:x.string().optional().nullable(),startTime:x.string().regex(/^\d{4}-\d{2}-\d{2}T\d{2}:\d{2}:\d{2}Z$/),endTime:x.string().regex(/^\d{4}-\d{2}-\d{2}T\d{2}:\d{2}:\d{2}Z$/),isPrivate:x.boolean().default(!1),exercises:x.array(x.object({exerciseTemplateId:x.string().min(1),supersetId:x.coerce.number().nullable().optional(),notes:x.string().optional().nullable(),sets:x.array(x.object({type:x.enum(["warmup","normal","failure","dropset"]).default("normal"),weight:x.coerce.number().optional().nullable(),weightKg:x.coerce.number().optional().nullable(),reps:x.coerce.number().int().optional().nullable(),distance:x.coerce.number().int().optional().nullable(),distanceMeters:x.coerce.number().int().optional().nullable(),duration:x.coerce.number().int().optional().nullable(),durationSeconds:x.coerce.number().int().optional().nullable(),rpe:x.coerce.number().optional().nullable(),customMetric:x.coerce.number().optional().nullable()}))}))};t.tool("update-workout","Update an existing workout by ID. You can modify the title, description, start/end times, privacy setting, and exercise data. Returns the updated workout with all changes applied.",i,Et(async a=>{if(!e)throw new Error("API client not initialized. Please provide HEVY_API_KEY.");let{workoutId:c,title:u,description:p,startTime:l,endTime:d,isPrivate:f,exercises:m}=a,E={workout:{title:u,description:p??null,start_time:l,end_time:d,is_private:f,exercises:m.map(y=>({exercise_template_id:y.exerciseTemplateId,superset_id:y.supersetId??null,notes:y.notes??null,sets:y.sets.map(O=>{let P={type:O.type},M=O.weight??O.weightKg;M!=null&&(P.weight_kg=M),O.reps!=null&&(P.reps=O.reps);let j=O.distance??O.distanceMeters;j!=null&&(P.distance_meters=j);let se=O.duration??O.durationSeconds;return se!=null&&(P.duration_seconds=se),O.rpe!=null&&(P.rpe=O.rpe),O.customMetric!=null&&(P.custom_metric=O.customMetric),P})}))}},A=await e.updateWorkout(c,E);if(!A)return wt(`Failed to update workout with ID ${c}`);let R=Ih(A);return Tt(R,{pretty:!0,indent:2})},"update-workout-operation"))}function Yie(t,e){let n="",r=[/^--hevy-api-key=(.+)$/i,/^--hevyApiKey=(.+)$/i,/^hevy-api-key=(.+)$/i];for(let o of t){for(let s of r){let i=o.match(s);if(i){n=i[1];break}}if(n)break}return n||(n=e.HEVY_API_KEY||""),{apiKey:n}}function Wie(t){t||(console.error("Hevy API key is required. Provide it via the HEVY_API_KEY environment variable or the --hevy-api-key=YOUR_KEY command argument."),process.exit(1))}var Kie={baseURL:typeof AXIOS_BASE<"u"?AXIOS_BASE:void 0,headers:typeof AXIOS_HEADERS<"u"?JSON.parse(AXIOS_HEADERS):void 0},$b=()=>Kie,YGe=t=>(Kie=t,$b()),WGe=qd.create($b()),ek=async t=>{let e=$b();return WGe.request({...e,...t,headers:{...e.headers,...t.headers}}).catch(n=>{throw n})};ek.getConfig=$b;ek.setConfig=YGe;var je=ek;function KGe(t){return{method:"GET",url:`/v1/exercise_history/${t}`}}async function tk(t,e,n,r={}){let{client:o=je,...s}=r;return(await o({method:"GET",url:KGe(t).url.toString(),params:n,...s,headers:{...e,...s.headers}})).data}function ZGe(){return{method:"GET",url:"/v1/exercise_templates"}}async function nk(t,e,n={}){let{client:r=je,...o}=n;return(await r({method:"GET",url:ZGe().url.toString(),params:e,...o,headers:{...t,...o.headers}})).data}function JGe(t){return{method:"GET",url:`/v1/exercise_templates/${t}`}}async function rk(t,e,n={}){let{client:r=je,...o}=n;return(await r({method:"GET",url:JGe(t).url.toString(),...o,headers:{...e,...o.headers}})).data}function QGe(){return{method:"GET",url:"/v1/routine_folders"}}async function ok(t,e,n={}){let{client:r=je,...o}=n;return(await r({method:"GET",url:QGe().url.toString(),params:e,...o,headers:{...t,...o.headers}})).data}function XGe(t){return{method:"GET",url:`/v1/routine_folders/${t}`}}async function sk(t,e,n={}){let{client:r=je,...o}=n;return(await r({method:"GET",url:XGe(t).url.toString(),...o,headers:{...e,...o.headers}})).data}function eVe(){return{method:"GET",url:"/v1/routines"}}async function ik(t,e,n={}){let{client:r=je,...o}=n;return(await r({method:"GET",url:eVe().url.toString(),params:e,...o,headers:{...t,...o.headers}})).data}function tVe(t){return{method:"GET",url:`/v1/routines/${t}`}}async function ak(t,e,n={}){let{client:r=je,...o}=n;return(await r({method:"GET",url:tVe(t).url.toString(),...o,headers:{...e,...o.headers}})).data}function nVe(){return{method:"GET",url:"/v1/workouts"}}async function ck(t,e,n={}){let{client:r=je,...o}=n;return(await r({method:"GET",url:nVe().url.toString(),params:e,...o,headers:{...t,...o.headers}})).data}function rVe(){return{method:"GET",url:"/v1/workouts/count"}}async function uk(t,e={}){let{client:n=je,...r}=e;return(await n({method:"GET",url:rVe().url.toString(),...r,headers:{...t,...r.headers}})).data}function oVe(){return{method:"GET",url:"/v1/workouts/events"}}async function pk(t,e,n={}){let{client:r=je,...o}=n;return(await r({method:"GET",url:oVe().url.toString(),params:e,...o,headers:{...t,...o.headers}})).data}function sVe(t){return{method:"GET",url:`/v1/workouts/${t}`}}async function lk(t,e,n={}){let{client:r=je,...o}=n;return(await r({method:"GET",url:sVe(t).url.toString(),...o,headers:{...e,...o.headers}})).data}function iVe(){return{method:"POST",url:"/v1/exercise_templates"}}async function dk(t,e,n={}){let{client:r=je,...o}=n,s=t;return(await r({method:"POST",url:iVe().url.toString(),data:s,...o,headers:{...e,...o.headers}})).data}function aVe(){return{method:"POST",url:"/v1/routine_folders"}}async function fk(t,e,n={}){let{client:r=je,...o}=n,s=e;return(await r({method:"POST",url:aVe().url.toString(),data:s,...o,headers:{...t,...o.headers}})).data}function cVe(){return{method:"POST",url:"/v1/routines"}}async function mk(t,e,n={}){let{client:r=je,...o}=n,s=e;return(await r({method:"POST",url:cVe().url.toString(),data:s,...o,headers:{...t,...o.headers}})).data}function uVe(){return{method:"POST",url:"/v1/workouts"}}async function _k(t,e,n={}){let{client:r=je,...o}=n,s=e;return(await r({method:"POST",url:uVe().url.toString(),data:s,...o,headers:{...t,...o.headers}})).data}function pVe(t){return{method:"PUT",url:`/v1/routines/${t}`}}async function hk(t,e,n,r={}){let{client:o=je,...s}=r,i=n;return(await o({method:"PUT",url:pVe(t).url.toString(),data:i,...s,headers:{...e,...s.headers}})).data}function lVe(t){return{method:"PUT",url:`/v1/workouts/${t}`}}async function Ek(t,e,n,r={}){let{client:o=je,...s}=r,i=n;return(await o({method:"PUT",url:lVe(t).url.toString(),data:i,...s,headers:{...e,...s.headers}})).data}function Zie(t,e="https://api.hevyapp.com"){let n=qd.create({baseURL:e,headers:{"api-key":t}}),r={"api-key":t},o=n;return{getWorkouts:s=>ck(r,s,{client:o}),getWorkout:s=>lk(s,r,{client:o}),createWorkout:s=>_k(r,s,{client:o}),updateWorkout:(s,i)=>Ek(s,r,i,{client:o}),getWorkoutCount:()=>uk(r,{client:o}),getWorkoutEvents:s=>pk(r,s,{client:o}),getRoutines:s=>ik(r,s,{client:o}),getRoutineById:s=>ak(s,r,{client:o}),createRoutine:s=>mk(r,s,{client:o}),updateRoutine:(s,i)=>hk(s,r,i,{client:o}),getExerciseTemplates:s=>nk(r,s,{client:o}),getExerciseTemplate:s=>rk(s,r,{client:o}),getExerciseHistory:(s,i)=>tk(s,r,i,{client:o}),createExerciseTemplate:s=>dk(s,r,{client:o}),getRoutineFolders:s=>ok(r,s,{client:o}),createRoutineFolder:s=>fk(r,s,{client:o}),getRoutineFolder:s=>sk(s,r,{client:o}),getWebhookSubscription:async()=>{throw new Error("Webhook subscription API not available. Please regenerate the client from the updated OpenAPI spec.")},createWebhookSubscription:async s=>{throw new Error("Webhook subscription API not available. Please regenerate the client from the updated OpenAPI spec.")},deleteWebhookSubscription:async()=>{throw new Error("Webhook subscription API not available. Please regenerate the client from the updated OpenAPI spec.")}}}function Jie(t,e){return Zie(t,e)}var fVe=typeof __HEVY_MCP_BUILD__=="boolean"?__HEVY_MCP_BUILD__:!1;if(fVe&&(typeof __HEVY_MCP_NAME__!="string"||typeof __HEVY_MCP_VERSION__!="string"))throw new Error("Build-time variables __HEVY_MCP_NAME__ and __HEVY_MCP_VERSION__ must be defined.");var Qie=typeof __HEVY_MCP_NAME__=="string"?__HEVY_MCP_NAME__:"hevy-mcp",Xie=typeof __HEVY_MCP_VERSION__=="string"?__HEVY_MCP_VERSION__:"dev",Tk=process.env.SENTRY_DSN;if(Tk){let t=process.env.SENTRY_RELEASE??`${Qie}@${Xie}`;mC({dsn:Tk,release:t,tracesSampleRate:1,sendDefaultPii:!1})}var mVe="https://api.hevyapp.com",eae=x.object({apiKey:x.string().min(1,"Hevy API key is required").describe("Your Hevy API key (available in the Hevy app settings).")}),K_t=eae;function tae(t){let e=new lb({name:Qie,version:Xie}),n=Tk?lg(e):e,r=Jie(t,mVe);return console.error("Hevy client initialized with API key"),zie(n,r),Hie(n,r),Fie(n,r),jie(n,r),qie(n,r),n}function _Ve({config:t}){let{apiKey:e}=eae.parse(t);return tae(e)}async function Z_t(){let t=process.argv.slice(2),n=Yie(t,process.env).apiKey;Wie(n);let r=tae(n);console.error("Starting MCP server in stdio mode");let o=new fb;await r.connect(o)}export{K_t as configSchema,_Ve as default,Z_t as runServer};
/*! Bundled license information:

mime-db/index.js:
  (*!
   * mime-db
   * Copyright(c) 2014 Jonathan Ong
   * Copyright(c) 2015-2022 Douglas Christopher Wilson
   * MIT Licensed
   *)

mime-types/index.js:
  (*!
   * mime-types
   * Copyright(c) 2014 Jonathan Ong
   * Copyright(c) 2015 Douglas Christopher Wilson
   * MIT Licensed
   *)
*/
//# sourceMappingURL=module.js.map
